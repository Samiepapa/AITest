(self.webpackChunkmyApp=self.webpackChunkmyApp||[]).push([[179],{533:(ye,M,k)=>{"use strict";function I(n){return"function"==typeof n}function D(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const P=D(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function v(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class w{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(I(r))try{r()}catch(s){e=s instanceof P?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{p(s)}catch(a){e=null!=e?e:[],a instanceof P?e=[...e,...a.errors]:e.push(a)}}if(e)throw new P(e)}}add(e){var t;if(e&&e!==this)if(this.closed)p(e);else{if(e instanceof w){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&v(t,e)}remove(e){const{_finalizers:t}=this;t&&v(t,e),e instanceof w&&e._removeParent(this)}}w.EMPTY=(()=>{const n=new w;return n.closed=!0,n})();const S=w.EMPTY;function b(n){return n instanceof w||n&&"closed"in n&&I(n.remove)&&I(n.add)&&I(n.unsubscribe)}function p(n){I(n)?n():n.unsubscribe()}const u={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},o={setTimeout(n,e,...t){const{delegate:r}=o;return null!=r&&r.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=o;return((null==e?void 0:e.clearTimeout)||clearTimeout)(n)},delegate:void 0};function d(n){o.setTimeout(()=>{const{onUnhandledError:e}=u;if(!e)throw n;e(n)})}function f(){}const y=R("C",void 0,void 0);function R(n,e,t){return{kind:n,value:e,error:t}}let N=null;function L(n){if(u.useDeprecatedSynchronousErrorHandling){const e=!N;if(e&&(N={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=N;if(N=null,t)throw r}}else n()}class H extends w{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,b(e)&&e.add(this)):this.destination=Ae}static create(e,t,r){return new ne(e,t,r)}next(e){this.isStopped?ue(function E(n){return R("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?ue(function x(n){return R("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ue(y,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const q=Function.prototype.bind;function W(n,e){return q.call(n,e)}class U{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){de(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){de(r)}else de(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){de(t)}}}class ne extends H{constructor(e,t,r){let i;if(super(),I(e)||!e)i={next:null!=e?e:void 0,error:null!=t?t:void 0,complete:null!=r?r:void 0};else{let s;this&&u.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&W(e.next,s),error:e.error&&W(e.error,s),complete:e.complete&&W(e.complete,s)}):i=e}this.destination=new U(i)}}function de(n){u.useDeprecatedSynchronousErrorHandling?function F(n){u.useDeprecatedSynchronousErrorHandling&&N&&(N.errorThrown=!0,N.error=n)}(n):d(n)}function ue(n,e){const{onStoppedNotification:t}=u;t&&o.setTimeout(()=>t(n,e))}const Ae={closed:!0,next:f,error:function De(n){throw n},complete:f},Se="function"==typeof Symbol&&Symbol.observable||"@@observable";function he(n){return n}let We=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function Dn(n){return n&&n instanceof H||function Zt(n){return n&&I(n.next)&&I(n.error)&&I(n.complete)}(n)&&b(n)}(t)?t:new ne(t,r,i);return L(()=>{const{operator:a,source:l}=this;s.add(a?a.call(s,l):l?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=mt(r))((i,s)=>{const a=new ne({next:l=>{try{t(l)}catch(c){s(c),a.unsubscribe()}},error:s,complete:i});this.subscribe(a)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Se](){return this}pipe(...t){return function Xe(n){return 0===n.length?he:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}(t)(this)}toPromise(t){return new(t=mt(t))((r,i)=>{let s;this.subscribe(a=>s=a,a=>i(a),()=>r(s))})}}return n.create=e=>new n(e),n})();function mt(n){var e;return null!==(e=null!=n?n:u.Promise)&&void 0!==e?e:Promise}const Lr=D(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Kt=(()=>{class n extends We{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new rn(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Lr}next(t){L(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){L(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){L(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?S:(this.currentObservers=null,s.push(t),new w(()=>{this.currentObservers=null,v(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new We;return t.source=this,t}}return n.create=(e,t)=>new rn(e,t),n})();class rn extends Kt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:S}}function On(n){return I(null==n?void 0:n.lift)}function At(n){return e=>{if(On(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function hn(n,e,t,r,i){return new Zr(n,e,t,r,i)}class Zr extends H{constructor(e,t,r,i,s,a){super(e),this.onFinalize=s,this.shouldUnsubscribe=a,this._next=t?function(l){try{t(l)}catch(c){e.error(c)}}:super._next,this._error=i?function(l){try{i(l)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function en(n,e){return At((t,r)=>{let i=0;t.subscribe(hn(r,s=>{r.next(n.call(e,s,i++))}))})}function ei(n){return this instanceof ei?(this.v=n,this):new ei(n)}function $i(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(n,e||[]),s=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(_){r[_]&&(i[_]=function(T){return new Promise(function(A,C){s.push([_,T,A,C])>1||l(_,T)})})}function l(_,T){try{!function c(_){_.value instanceof ei?Promise.resolve(_.value.v).then(h,g):m(s[0][2],_)}(r[_](T))}catch(A){m(s[0][3],A)}}function h(_){l("next",_)}function g(_){l("throw",_)}function m(_,T){_(T),s.shift(),s.length&&l(s[0][0],s[0][1])}}function Ws(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function Ei(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(a){return new Promise(function(l,c){!function i(s,a,l,c){Promise.resolve(c).then(function(h){s({value:h,done:l})},a)}(l,c,(a=n[s](a)).done,a.value)})}}}const qs=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Ms(n){return I(null==n?void 0:n.then)}function Ys(n){return I(n[Se])}function So(n){return Symbol.asyncIterator&&I(null==n?void 0:n[Symbol.asyncIterator])}function se(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Re=function pe(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function He(n){return I(null==n?void 0:n[Re])}function _t(n){return $i(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield ei(t.read());if(i)return yield ei(void 0);yield yield ei(r)}}finally{t.releaseLock()}})}function vt(n){return I(null==n?void 0:n.getReader)}function Tt(n){if(n instanceof We)return n;if(null!=n){if(Ys(n))return function lr(n){return new We(e=>{const t=n[Se]();if(I(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(qs(n))return function Dr(n){return new We(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(Ms(n))return function Ar(n){return new We(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,d)})}(n);if(So(n))return Gi(n);if(He(n))return function er(n){return new We(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(vt(n))return function is(n){return Gi(_t(n))}(n)}throw se(n)}function Gi(n){return new We(e=>{(function Ce(n,e){var t,r,i,s;return function Ts(n,e,t,r){return new(t||(t=Promise))(function(s,a){function l(g){try{h(r.next(g))}catch(m){a(m)}}function c(g){try{h(r.throw(g))}catch(m){a(m)}}function h(g){g.done?s(g.value):function i(s){return s instanceof t?s:new t(function(a){a(s)})}(g.value).then(l,c)}h((r=r.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=Ws(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(a){i={error:a}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Ht(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Bn(n,e,t=1/0){return I(e)?Bn((r,i)=>en((s,a)=>e(r,s,i,a))(Tt(n(r,i))),t):("number"==typeof e&&(t=e),At((r,i)=>function Wn(n,e,t,r,i,s,a,l){const c=[];let h=0,g=0,m=!1;const _=()=>{m&&!c.length&&!h&&e.complete()},T=C=>h<r?A(C):c.push(C),A=C=>{s&&e.next(C),h++;let O=!1;Tt(t(C,g++)).subscribe(hn(e,B=>{null==i||i(B),s?T(B):e.next(B)},()=>{O=!0},void 0,()=>{if(O)try{for(h--;c.length&&h<r;){const B=c.shift();a?Ht(e,a,()=>A(B)):A(B)}_()}catch(B){e.error(B)}}))};return n.subscribe(hn(e,T,()=>{m=!0,_()})),()=>{null==l||l()}}(r,i,n,t)))}function ji(n=1/0){return Bn(he,n)}const Wi=new We(n=>n.complete());function oa(n){return n[n.length-1]}function Xs(n){return function zn(n){return n&&I(n.schedule)}(oa(n))?n.pop():void 0}function Qu(n,e=0){return At((t,r)=>{t.subscribe(hn(r,i=>Ht(r,n,()=>r.next(i),e),()=>Ht(r,n,()=>r.complete(),e),i=>Ht(r,n,()=>r.error(i),e)))})}function ll(n,e=0){return At((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function tc(n,e){if(!n)throw new Error("Iterable cannot be null");return new We(t=>{Ht(t,e,()=>{const r=n[Symbol.asyncIterator]();Ht(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function hr(n,e){return e?function Yd(n,e){if(null!=n){if(Ys(n))return function _g(n,e){return Tt(n).pipe(ll(e),Qu(e))}(n,e);if(qs(n))return function jd(n,e){return new We(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(Ms(n))return function ec(n,e){return Tt(n).pipe(ll(e),Qu(e))}(n,e);if(So(n))return tc(n,e);if(He(n))return function Wd(n,e){return new We(t=>{let r;return Ht(t,e,()=>{r=n[Re](),Ht(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(a){return void t.error(a)}s?t.complete():t.next(i)},0,!0)}),()=>I(null==r?void 0:r.return)&&r.return()})}(n,e);if(vt(n))return function qd(n,e){return tc(_t(n),e)}(n,e)}throw se(n)}(n,e):Tt(n)}function aa(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new ne({next:()=>{r.unsubscribe(),n()}});return e(...t).subscribe(r)}function Sn(n){for(let e in n)if(n[e]===Sn)return e;throw Error("Could not find renamed property on target object.")}function Tn(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Tn).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function cl(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const xg=Sn({__forward_ref__:Sn});function nc(n){return n.__forward_ref__=nc,n.toString=function(){return Tn(this())},n}function Nt(n){return function Mo(n){return"function"==typeof n&&n.hasOwnProperty(xg)&&n.__forward_ref__===nc}(n)?n():n}class yt extends Error{constructor(e,t){super(function la(n,e){return`NG0${Math.abs(n)}${e?": "+e.trim():""}`}(e,t)),this.code=e}}function zt(n){return"string"==typeof n?n:null==n?"":String(n)}function Eo(n,e){throw new yt(-201,!1)}function oe(n,e){null==n&&function ce(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function gt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Rn(n){return{providers:n.providers||[],imports:n.imports||[]}}function Kn(n){return ti(n,xn)||ti(n,Zs)}function ti(n,e){return n.hasOwnProperty(e)?n[e]:null}function Ot(n){return n&&(n.hasOwnProperty(ni)||n.hasOwnProperty(Eg))?n[ni]:null}const xn=Sn({\u0275prov:Sn}),ni=Sn({\u0275inj:Sn}),Zs=Sn({ngInjectableDef:Sn}),Eg=Sn({ngInjectorDef:Sn});var Rt=(()=>((Rt=Rt||{})[Rt.Default=0]="Default",Rt[Rt.Host=1]="Host",Rt[Rt.Self=2]="Self",Rt[Rt.SkipSelf=4]="SkipSelf",Rt[Rt.Optional=8]="Optional",Rt))();let Dg;function Es(n){const e=Dg;return Dg=n,e}function Lb(n,e,t){const r=Kn(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Rt.Optional?null:void 0!==e?e:void Eo(Tn(n))}function Do(n){return{toString:n}.toString()}var ss=(()=>((ss=ss||{})[ss.OnPush=0]="OnPush",ss[ss.Default=1]="Default",ss))(),Ds=(()=>{return(n=Ds||(Ds={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Ds;var n})();const Un=(()=>"undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof global&&global||"undefined"!=typeof window&&window||"undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self)(),fl={},En=[],eh=Sn({\u0275cmp:Sn}),Ag=Sn({\u0275dir:Sn}),Cg=Sn({\u0275pipe:Sn}),Nb=Sn({\u0275mod:Sn}),Ks=Sn({\u0275fac:Sn}),oc=Sn({__NG_ELEMENT_ID__:Sn});let b2=0;function Ai(n){return Do(()=>{const t=!0===n.standalone,r={},i={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===ss.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||En,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Ds.Emulated,id:"c"+b2++,styles:n.styles||En,_:null,setInput:null,schemas:n.schemas||null,tView:null},s=n.dependencies,a=n.features;return i.inputs=Bb(n.inputs,r),i.outputs=Bb(n.outputs),a&&a.forEach(l=>l(i)),i.directiveDefs=s?()=>("function"==typeof s?s():s).map(Fb).filter(kb):null,i.pipeDefs=s?()=>("function"==typeof s?s():s).map(ii).filter(kb):null,i})}function Fb(n){return $n(n)||ri(n)}function kb(n){return null!==n}const x2={};function ua(n){return Do(()=>{const e={type:n.type,bootstrap:n.bootstrap||En,declarations:n.declarations||En,imports:n.imports||En,exports:n.exports||En,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(x2[n.id]=n.type),e})}function Bb(n,e){if(null==n)return fl;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}const Nr=Ai;function $n(n){return n[eh]||null}function ri(n){return n[Ag]||null}function ii(n){return n[Cg]||null}function Ci(n,e){const t=n[Nb]||null;if(!t&&!0===e)throw new Error(`Type ${Tn(n)} does not have '\u0275mod' property.`);return t}function bi(n){return Array.isArray(n)&&"object"==typeof n[1]}function as(n){return Array.isArray(n)&&!0===n[1]}function Og(n){return 0!=(8&n.flags)}function ih(n){return 2==(2&n.flags)}function sh(n){return 1==(1&n.flags)}function ls(n){return null!==n.template}function E2(n){return 0!=(256&n[2])}function pa(n,e){return n.hasOwnProperty(Ks)?n[Ks]:null}class C2{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function ga(){return zb}function zb(n){return n.type.prototype.ngOnChanges&&(n.setInput=P2),I2}function I2(){const n=Hb(this),e=null==n?void 0:n.current;if(e){const t=n.previous;if(t===fl)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function P2(n,e,t,r){const i=Hb(n)||function O2(n,e){return n[$b]=e}(n,{previous:fl,current:null}),s=i.current||(i.current={}),a=i.previous,l=this.declaredInputs[t],c=a[l];s[l]=new C2(c&&c.currentValue,e,a===fl),n[r]=e}ga.ngInherit=!0;const $b="__ngSimpleChanges__";function Hb(n){return n[$b]||null}function fr(n){for(;Array.isArray(n);)n=n[0];return n}function Xi(n,e){return fr(e[n.index])}function kg(n,e){return n.data[e]}function Pi(n,e){const t=e[n];return bi(t)?t:t[0]}function Gb(n){return 4==(4&n[2])}function Bg(n){return 64==(64&n[2])}function Ao(n,e){return null==e?null:n[e]}function jb(n){n[18]=0}function Ug(n,e){n[5]+=e;let t=n,r=n[3];for(;null!==r&&(1===e&&1===t[5]||-1===e&&0===t[5]);)r[5]+=e,t=r,r=r[3]}const Gt={lFrame:e_(null),bindingsEnabled:!0};function qb(){return Gt.bindingsEnabled}function ze(){return Gt.lFrame.lView}function _n(){return Gt.lFrame.tView}function xr(){let n=Yb();for(;null!==n&&64===n.type;)n=n.parent;return n}function Yb(){return Gt.lFrame.currentTNode}function As(n,e){const t=Gt.lFrame;t.currentTNode=n,t.isParent=e}function Vg(){return Gt.lFrame.isParent}function bl(){return Gt.lFrame.bindingIndex++}function Y2(n,e){const t=Gt.lFrame;t.bindingIndex=t.bindingRootIndex=n,$g(e)}function $g(n){Gt.lFrame.currentDirectiveIndex=n}function Kb(){return Gt.lFrame.currentQueryIndex}function Gg(n){Gt.lFrame.currentQueryIndex=n}function Z2(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function Jb(n,e,t){if(t&Rt.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&Rt.Host||(i=Z2(s),null===i||(s=s[15],10&i.type))););if(null===i)return!1;e=i,n=s}const r=Gt.lFrame=Qb();return r.currentTNode=e,r.lView=n,!0}function jg(n){const e=Qb(),t=n[1];Gt.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Qb(){const n=Gt.lFrame,e=null===n?null:n.child;return null===e?e_(n):e}function e_(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function t_(){const n=Gt.lFrame;return Gt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const n_=t_;function Wg(){const n=t_();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function oi(){return Gt.lFrame.selectedIndex}function Co(n){Gt.lFrame.selectedIndex=n}function rr(){const n=Gt.lFrame;return kg(n.tView,n.selectedIndex)}function lh(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:l,ngAfterViewInit:c,ngAfterViewChecked:h,ngOnDestroy:g}=s;a&&(n.contentHooks||(n.contentHooks=[])).push(-t,a),l&&((n.contentHooks||(n.contentHooks=[])).push(t,l),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,l)),c&&(n.viewHooks||(n.viewHooks=[])).push(-t,c),h&&((n.viewHooks||(n.viewHooks=[])).push(t,h),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,h)),null!=g&&(n.destroyHooks||(n.destroyHooks=[])).push(t,g)}}function uh(n,e,t){r_(n,e,3,t)}function ch(n,e,t,r){(3&n[2])===t&&r_(n,e,t,r)}function qg(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function r_(n,e,t,r){const s=null!=r?r:-1,a=e.length-1;let l=0;for(let c=void 0!==r?65535&n[18]:0;c<a;c++)if("number"==typeof e[c+1]){if(l=e[c],null!=r&&l>=r)break}else e[c]<0&&(n[18]+=65536),(l<s||-1==s)&&(sC(n,t,e,c),n[18]=(4294901760&n[18])+c+2),c++}function sC(n,e,t,r){const i=t[r]<0,s=t[r+1],l=n[i?-t[r]:t[r]];if(i){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{s.call(l)}finally{}}}else try{s.call(l)}finally{}}class dc{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function dh(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],a=t[r++],l=t[r++];n.setAttribute(e,a,l,s)}else{const s=i,a=t[++r];s_(s)?n.setProperty(e,s,a):n.setAttribute(e,s,a),r++}}return r}function i_(n){return 3===n||4===n||6===n}function s_(n){return 64===n.charCodeAt(0)}function hh(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||o_(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function o_(n,e,t,r,i){let s=0,a=n.length;if(-1===e)a=-1;else for(;s<n.length;){const l=n[s++];if("number"==typeof l){if(l===e){a=-1;break}if(l>e){a=s-1;break}}}for(;s<n.length;){const l=n[s];if("number"==typeof l)break;if(l===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==a&&(n.splice(a,0,e),s=a+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}function a_(n){return-1!==n}function _l(n){return 32767&n}function xl(n,e){let t=function cC(n){return n>>16}(n),r=e;for(;t>0;)r=r[15],t--;return r}let Xg=!0;function fh(n){const e=Xg;return Xg=n,e}let dC=0;const Cs={};function fc(n,e){const t=Kg(n,e);if(-1!==t)return t;const r=e[1];r.firstCreatePass&&(n.injectorIndex=e.length,Zg(r.data,n),Zg(e,null),Zg(r.blueprint,null));const i=ph(n,e),s=n.injectorIndex;if(a_(i)){const a=_l(i),l=xl(i,e),c=l[1].data;for(let h=0;h<8;h++)e[s+h]=l[a+h]|c[a+h]}return e[s+8]=i,s}function Zg(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Kg(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function ph(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=m_(i),null===r)return-1;if(t++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function gh(n,e,t){!function hC(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(oc)&&(r=t[oc]),null==r&&(r=t[oc]=dC++);const i=255&r;e.data[n+(i>>5)]|=1<<i}(n,e,t)}function c_(n,e,t){if(t&Rt.Optional)return n;Eo()}function d_(n,e,t,r){if(t&Rt.Optional&&void 0===r&&(r=null),0==(t&(Rt.Self|Rt.Host))){const i=n[9],s=Es(void 0);try{return i?i.get(e,r,t&Rt.Optional):Lb(e,r,t&Rt.Optional)}finally{Es(s)}}return c_(r,0,t)}function h_(n,e,t,r=Rt.Default,i){if(null!==n){if(1024&e[2]){const a=function vC(n,e,t,r,i){let s=n,a=e;for(;null!==s&&null!==a&&1024&a[2]&&!(256&a[2]);){const l=f_(s,a,t,r|Rt.Self,Cs);if(l!==Cs)return l;let c=s.parent;if(!c){const h=a[21];if(h){const g=h.get(t,Cs,r);if(g!==Cs)return g}c=m_(a),a=a[15]}s=c}return i}(n,e,t,r,Cs);if(a!==Cs)return a}const s=f_(n,e,t,r,Cs);if(s!==Cs)return s}return d_(e,t,r,i)}function f_(n,e,t,r,i){const s=function gC(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(oc)?n[oc]:void 0;return"number"==typeof e?e>=0?255&e:mC:e}(t);if("function"==typeof s){if(!Jb(e,n,r))return r&Rt.Host?c_(i,0,r):d_(e,t,r,i);try{const a=s(r);if(null!=a||r&Rt.Optional)return a;Eo()}finally{n_()}}else if("number"==typeof s){let a=null,l=Kg(n,e),c=-1,h=r&Rt.Host?e[16][6]:null;for((-1===l||r&Rt.SkipSelf)&&(c=-1===l?ph(n,e):e[l+8],-1!==c&&g_(r,!1)?(a=e[1],l=_l(c),e=xl(c,e)):l=-1);-1!==l;){const g=e[1];if(p_(s,l,g.data)){const m=pC(l,e,t,a,r,h);if(m!==Cs)return m}c=e[l+8],-1!==c&&g_(r,e[1].data[l+8]===h)&&p_(s,l,e)?(a=g,l=_l(c),e=xl(c,e)):l=-1}}return i}function pC(n,e,t,r,i,s){const a=e[1],l=a.data[n+8],g=mh(l,a,t,null==r?ih(l)&&Xg:r!=a&&0!=(3&l.type),i&Rt.Host&&s===l);return null!==g?pc(e,a,g,l):Cs}function mh(n,e,t,r,i){const s=n.providerIndexes,a=e.data,l=1048575&s,c=n.directiveStart,g=s>>20,_=i?l+g:n.directiveEnd;for(let T=r?l:l+g;T<_;T++){const A=a[T];if(T<c&&t===A||T>=c&&A.type===t)return T}if(i){const T=a[c];if(T&&ls(T)&&T.type===t)return c}return null}function pc(n,e,t,r){let i=n[t];const s=e.data;if(function oC(n){return n instanceof dc}(i)){const a=i;a.resolving&&function Zd(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new yt(-200,`Circular dependency in DI detected for ${n}${t}`)}(function bn(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():zt(n)}(s[t]));const l=fh(a.canSeeViewProviders);a.resolving=!0;const c=a.injectImpl?Es(a.injectImpl):null;Jb(n,r,Rt.Default);try{i=n[t]=a.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function iC(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const a=zb(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,a),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,a)}i&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,i),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==c&&Es(c),fh(l),a.resolving=!1,n_()}}return i}function p_(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function g_(n,e){return!(n&Rt.Self||n&Rt.Host&&e)}class wl{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return h_(this._tNode,this._lView,e,r,t)}}function mC(){return new wl(xr(),ze())}function m_(n){const e=n[1],t=e.type;return 2===t?e.declTNode:1===t?n[6]:null}function gc(n){return function fC(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(i_(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(xr(),n)}const Tl="__parameters__";function El(n,e,t){return Do(()=>{const r=function Qg(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const a=new i(...s);return l.annotation=a,l;function l(c,h,g){const m=c.hasOwnProperty(Tl)?c[Tl]:Object.defineProperty(c,Tl,{value:[]})[Tl];for(;m.length<=g;)m.push(null);return(m[g]=m[g]||[]).push(a),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}class Jt{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=gt({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const _C=new Jt("AnalyzeForEntryComponents");function Oi(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)?(e===n&&(e=n.slice(0,t)),Oi(r,e)):e!==n&&e.push(r)}return e}function eo(n,e){n.forEach(t=>Array.isArray(t)?eo(t,e):e(t))}function v_(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function yh(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Ri(n,e,t){let r=Dl(n,e);return r>=0?n[1|r]=t:(r=~r,function SC(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function tm(n,e){const t=Dl(n,e);if(t>=0)return n[1|t]}function Dl(n,e){return function x_(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),a=n[s<<t];if(e===a)return s<<t;a>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const bc={},rm="__NG_DI_FLAG__",bh="ngTempTokenPath",PC=/\n/gm,w_="__source";let _c;function _h(n){const e=_c;return _c=n,e}function RC(n,e=Rt.Default){if(void 0===_c)throw new yt(-203,!1);return null===_c?Lb(n,void 0,e):_c.get(n,e&Rt.Optional?null:void 0,e)}function Et(n,e=Rt.Default){return(function v2(){return Dg}()||RC)(Nt(n),e)}function Po(n,e=Rt.Default){return Et(n,e)}function im(n){const e=[];for(let t=0;t<n.length;t++){const r=Nt(n[t]);if(Array.isArray(r)){if(0===r.length)throw new yt(900,!1);let i,s=Rt.Default;for(let a=0;a<r.length;a++){const l=r[a],c=LC(l);"number"==typeof c?-1===c?i=l.token:s|=c:i=l}e.push(Et(i,s))}else e.push(Et(r))}return e}function xc(n,e){return n[rm]=e,n.prototype[rm]=e,n}function LC(n){return n[rm]}const ma=xc(El("Optional"),8),wc=xc(El("SkipSelf"),4);let om,Sh;function Cl(n){var e;return(null===(e=function am(){if(void 0===Sh&&(Sh=null,Un.trustedTypes))try{Sh=Un.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return Sh}())||void 0===e?void 0:e.createHTML(n))||n}class ya{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class XC extends ya{getTypeName(){return"HTML"}}class ZC extends ya{getTypeName(){return"Style"}}class KC extends ya{getTypeName(){return"Script"}}class JC extends ya{getTypeName(){return"URL"}}class QC extends ya{getTypeName(){return"ResourceURL"}}function Li(n){return n instanceof ya?n.changingThisBreaksApplicationSecurity:n}function Is(n,e){const t=function eI(n){return n instanceof ya&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}class oI{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Cl(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(t){return null}}}class aI{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const r=this.inertDocument.createElement("body");t.appendChild(r)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=Cl(e),t;const r=this.inertDocument.createElement("body");return r.innerHTML=Cl(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(r),r}stripCustomNsAttrs(e){const t=e.attributes;for(let i=t.length-1;0<i;i--){const a=t.item(i).name;("xmlns:ns1"===a||0===a.indexOf("ns1:"))&&e.removeAttribute(a)}let r=e.firstChild;for(;r;)r.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(r),r=r.nextSibling}}const uI=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,cI=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Mc(n){return(n=String(n)).match(uI)||n.match(cI)?n:"unsafe:"+n}function Ps(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function Ec(...n){const e={};for(const t of n)for(const r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}const k_=Ps("area,br,col,hr,img,wbr"),B_=Ps("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),U_=Ps("rp,rt"),um=Ec(k_,Ec(B_,Ps("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ec(U_,Ps("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ec(U_,B_)),cm=Ps("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),dm=Ps("srcset"),V_=Ec(cm,dm,Ps("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ps("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),dI=Ps("script,style,template");class hI{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let i=this.checkClobberedElement(t,t.nextSibling);if(i){t=i;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!um.hasOwnProperty(t))return this.sanitizedSomething=!0,!dI.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=e.attributes;for(let i=0;i<r.length;i++){const s=r.item(i),a=s.name,l=a.toLowerCase();if(!V_.hasOwnProperty(l)){this.sanitizedSomething=!0;continue}let c=s.value;cm[l]&&(c=Mc(c)),dm[l]&&(n=c,c=(n=String(n)).split(",").map(e=>Mc(e.trim())).join(", ")),this.buf.push(" ",a,'="',z_(c),'"')}var n;return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();um.hasOwnProperty(t)&&!k_.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(z_(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const fI=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,pI=/([^\#-~ |!])/g;function z_(n){return n.replace(/&/g,"&amp;").replace(fI,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(pI,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Mh;function $_(n,e){let t=null;try{Mh=Mh||function N_(n){const e=new aI(n);return function lI(){try{return!!(new window.DOMParser).parseFromString(Cl(""),"text/html")}catch(n){return!1}}()?new oI(e):e}(n);let r=e?String(e):"";t=Mh.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=Mh.getInertBodyElement(r)}while(r!==s);return Cl((new hI).sanitizeChildren(hm(t)||t))}finally{if(t){const r=hm(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function hm(n){return"content"in n&&function gI(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Gn=(()=>((Gn=Gn||{})[Gn.NONE=0]="NONE",Gn[Gn.HTML=1]="HTML",Gn[Gn.STYLE=2]="STYLE",Gn[Gn.SCRIPT=3]="SCRIPT",Gn[Gn.URL=4]="URL",Gn[Gn.RESOURCE_URL=5]="RESOURCE_URL",Gn))();function Eh(n){const e=function Dc(){const n=ze();return n&&n[12]}();return e?e.sanitize(Gn.URL,n)||"":Is(n,"URL")?Li(n):Mc(zt(n))}function pm(n){return n.ngOriginalError}class Il{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&pm(e);for(;t&&pm(t);)t=pm(t);return t||null}}const gm=new Map;let PI=0;const ym="__ngContext__";function $r(n,e){bi(e)?(n[ym]=e[20],function RI(n){gm.set(n[20],n)}(e)):n[ym]=e}function Ac(n){const e=n[ym];return"number"==typeof e?function j_(n){return gm.get(n)||null}(e):e||null}function vm(n){const e=Ac(n);return e?bi(e)?e:e.lView:null}const $I=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Un))();function Z_(n){return n.ownerDocument.defaultView}function to(n){return n instanceof Function?n():n}var _i=(()=>((_i=_i||{})[_i.Important=1]="Important",_i[_i.DashCase=2]="DashCase",_i))();function _m(n,e){return undefined(n,e)}function Cc(n){const e=n[3];return as(e)?e[3]:e}function xm(n){return ex(n[13])}function wm(n){return ex(n[4])}function ex(n){for(;null!==n&&!as(n);)n=n[4];return n}function Ol(n,e,t,r,i){if(null!=r){let s,a=!1;as(r)?s=r:bi(r)&&(a=!0,r=r[0]);const l=fr(r);0===n&&null!==t?null==i?ox(e,t,l):va(e,t,l,i||null,!0):1===n&&null!==t?va(e,t,l,i||null,!0):2===n?function fx(n,e,t){const r=Dh(n,e);r&&function iP(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,l,a):3===n&&e.destroyNode(l),null!=s&&function aP(n,e,t,r,i){const s=t[7];s!==fr(t)&&Ol(e,n,r,s,i);for(let l=10;l<t.length;l++){const c=t[l];Ic(c[1],c,n,e,r,s)}}(e,n,s,t,i)}}function Tm(n,e,t){return n.createElement(e,t)}function nx(n,e){const t=n[9],r=t.indexOf(e),i=e[3];512&e[2]&&(e[2]&=-513,Ug(i,-1)),t.splice(r,1)}function Mm(n,e){if(n.length<=10)return;const t=10+e,r=n[t];if(r){const i=r[17];null!==i&&i!==n&&nx(i,r),e>0&&(n[t-1][4]=r[4]);const s=yh(n,10+e);!function ZI(n,e){Ic(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-65}return r}function rx(n,e){if(!(128&e[2])){const t=e[11];t.destroyNode&&Ic(n,e,t,3,null,null),function QI(n){let e=n[13];if(!e)return Em(n[1],n);for(;e;){let t=null;if(bi(e))t=e[13];else{const r=e[10];r&&(t=r)}if(!t){for(;e&&!e[4]&&e!==n;)bi(e)&&Em(e[1],e),e=e[3];null===e&&(e=n),bi(e)&&Em(e[1],e),t=e&&e[4]}e=t}}(e)}}function Em(n,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function rP(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof dc)){const s=t[r+1];if(Array.isArray(s))for(let a=0;a<s.length;a+=2){const l=i[s[a]],c=s[a+1];try{c.call(l)}finally{}}else try{s.call(i)}finally{}}}}(n,e),function nP(n,e){const t=n.cleanup,r=e[7];let i=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const a=t[s+1],l="function"==typeof a?a(e):fr(e[a]),c=r[i=t[s+2]],h=t[s+3];"boolean"==typeof h?l.removeEventListener(t[s],c,h):h>=0?r[i=h]():r[i=-h].unsubscribe(),s+=2}else{const a=r[i=t[s+1]];t[s].call(a)}if(null!==r){for(let s=i+1;s<r.length;s++)(0,r[s])();e[7]=null}}(n,e),1===e[1].type&&e[11].destroy();const t=e[17];if(null!==t&&as(e[3])){t!==e[3]&&nx(t,e);const r=e[19];null!==r&&r.detachView(n)}!function LI(n){gm.delete(n[20])}(e)}}function ix(n,e,t){return function sx(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[0];if(2&r.flags){const i=n.data[r.directiveStart].encapsulation;if(i===Ds.None||i===Ds.Emulated)return null}return Xi(r,t)}(n,e.parent,t)}function va(n,e,t,r,i){n.insertBefore(e,t,r,i)}function ox(n,e,t){n.appendChild(e,t)}function ax(n,e,t,r,i){null!==r?va(n,e,t,r,i):ox(n,e,t)}function Dh(n,e){return n.parentNode(e)}let cx=function ux(n,e,t){return 40&n.type?Xi(n,t):null};function Ah(n,e,t,r){const i=ix(n,r,e),s=e[11],l=function lx(n,e,t){return cx(n,e,t)}(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(t))for(let c=0;c<t.length;c++)ax(s,i,t[c],l,!1);else ax(s,i,t,l,!1)}function Ch(n,e){if(null!==e){const t=e.type;if(3&t)return Xi(e,n);if(4&t)return Am(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return Ch(n,r);{const i=n[e.index];return as(i)?Am(-1,i):fr(i)}}if(32&t)return _m(e,n)()||fr(n[e.index]);{const r=hx(n,e);return null!==r?Array.isArray(r)?r[0]:Ch(Cc(n[16]),r):Ch(n,e.next)}}return null}function hx(n,e){return null!==e?n[16][6].projection[e.projection]:null}function Am(n,e){const t=10+n+1;if(t<e.length){const r=e[t],i=r[1].firstChild;if(null!==i)return Ch(r,i)}return e[7]}function Cm(n,e,t,r,i,s,a){for(;null!=t;){const l=r[t.index],c=t.type;if(a&&0===e&&(l&&$r(fr(l),r),t.flags|=4),64!=(64&t.flags))if(8&c)Cm(n,e,t.child,r,i,s,!1),Ol(e,n,i,l,s);else if(32&c){const h=_m(t,r);let g;for(;g=h();)Ol(e,n,i,g,s);Ol(e,n,i,l,s)}else 16&c?px(n,e,r,t,i,s):Ol(e,n,i,l,s);t=a?t.projectionNext:t.next}}function Ic(n,e,t,r,i,s){Cm(t,r,n.firstChild,e,i,s,!1)}function px(n,e,t,r,i,s){const a=t[16],c=a[6].projection[r.projection];if(Array.isArray(c))for(let h=0;h<c.length;h++)Ol(e,n,i,c[h],s);else Cm(n,e,c,a[3],i,s,!0)}function gx(n,e,t){n.setAttribute(e,"style",t)}function Im(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function mx(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}const yx="ng-template";function uP(n,e,t){let r=0;for(;r<n.length;){let i=n[r++];if(t&&"class"===i){if(i=n[r],-1!==mx(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<n.length&&"string"==typeof(i=n[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function vx(n){return 4===n.type&&n.value!==yx}function cP(n,e,t){return e===(4!==n.type||t?n.value:yx)}function dP(n,e,t){let r=4;const i=n.attrs||[],s=function pP(n){for(let e=0;e<n.length;e++)if(i_(n[e]))return e;return n.length}(i);let a=!1;for(let l=0;l<e.length;l++){const c=e[l];if("number"!=typeof c){if(!a)if(4&r){if(r=2|1&r,""!==c&&!cP(n,c,t)||""===c&&1===e.length){if(us(r))return!1;a=!0}}else{const h=8&r?c:e[++l];if(8&r&&null!==n.attrs){if(!uP(n.attrs,h,t)){if(us(r))return!1;a=!0}continue}const m=hP(8&r?"class":c,i,vx(n),t);if(-1===m){if(us(r))return!1;a=!0;continue}if(""!==h){let _;_=m>s?"":i[m+1].toLowerCase();const T=8&r?_:null;if(T&&-1!==mx(T,h,0)||2&r&&h!==_){if(us(r))return!1;a=!0}}}}else{if(!a&&!us(r)&&!us(c))return!1;if(a&&us(c))continue;a=!1,r=c|1&r}}return us(r)||a}function us(n){return 0==(1&n)}function hP(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const a=e[i];if(a===n)return i;if(3===a||6===a)s=!0;else{if(1===a||2===a){let l=e[++i];for(;"string"==typeof l;)l=e[++i];continue}if(4===a)break;if(0===a){i+=4;continue}}i+=s?1:2}return-1}return function gP(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function bx(n,e,t=!1){for(let r=0;r<e.length;r++)if(dP(n,e[r],t))return!0;return!1}function _x(n,e){return n?":not("+e.trim()+")":e}function yP(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let a=n[t];if("string"==typeof a)if(2&r){const l=n[++t];i+="["+a+(l.length>0?'="'+l+'"':"")+"]"}else 8&r?i+="."+a:4&r&&(i+=" "+a);else""!==i&&!us(a)&&(e+=_x(s,i),i=""),r=a,s=s||!us(r);t++}return""!==i&&(e+=_x(s,i)),e}const qt={};function Pm(n){xx(_n(),ze(),oi()+n,!1)}function xx(n,e,t,r){if(!r)if(3==(3&e[2])){const s=n.preOrderCheckHooks;null!==s&&uh(e,s,t)}else{const s=n.preOrderHooks;null!==s&&ch(e,s,0,t)}Co(t)}const Om=new Jt("ENVIRONMENT_INITIALIZER"),Mx=new Jt("INJECTOR_DEF_TYPES");function MP(...n){return{\u0275providers:Ex(0,n)}}function Ex(n,...e){const t=[],r=new Set;let i;return eo(e,s=>{const a=s;Rm(a,t,[],r)&&(i||(i=[]),i.push(a))}),void 0!==i&&Dx(i,t),t}function Dx(n,e){for(let t=0;t<n.length;t++){const{providers:i}=n[t];eo(i,s=>{e.push(s)})}}function Rm(n,e,t,r){if(!(n=Nt(n)))return!1;let i=null,s=Ot(n);const a=!s&&$n(n);if(s||a){if(a&&!a.standalone)return!1;i=n}else{const c=n.ngModule;if(s=Ot(c),!s)return!1;i=c}const l=r.has(i);if(a){if(l)return!1;if(r.add(i),a.dependencies){const c="function"==typeof a.dependencies?a.dependencies():a.dependencies;for(const h of c)Rm(h,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!l){let h;r.add(i);try{eo(s.imports,g=>{Rm(g,e,t,r)&&(h||(h=[]),h.push(g))})}finally{}void 0!==h&&Dx(h,e)}if(!l){const h=pa(i)||(()=>new i);e.push({provide:i,useFactory:h,deps:En},{provide:Mx,useValue:i,multi:!0},{provide:Om,useValue:()=>Et(i),multi:!0})}const c=s.providers;null==c||l||eo(c,g=>{e.push(g)})}}return i!==n&&void 0!==n.providers}const EP=Sn({provide:String,useValue:Sn});function Lm(n){return null!==n&&"object"==typeof n&&EP in n}function ba(n){return"function"==typeof n}const Nm=new Jt("INJECTOR",-1);class Ix{get(e,t=bc){if(t===bc){const r=new Error(`NullInjectorError: No provider for ${Tn(e)}!`);throw r.name="NullInjectorError",r}return t}}const Fm=new Jt("Set Injector scope."),Ih={},AP={};let km;function Bm(){return void 0===km&&(km=new Ix),km}class _a{}class Px extends _a{constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Vm(e,a=>this.processProvider(a)),this.records.set(Nm,Rl(void 0,this)),i.has("environment")&&this.records.set(_a,Rl(void 0,this));const s=this.records.get(Fm);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Mx.multi,En,Rt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}get(e,t=bc,r=Rt.Default){this.assertNotDestroyed();const i=_h(this),s=Es(void 0);try{if(!(r&Rt.SkipSelf)){let l=this.records.get(e);if(void 0===l){const c=function RP(n){return"function"==typeof n||"object"==typeof n&&n instanceof Jt}(e)&&Kn(e);l=c&&this.injectableDefInScope(c)?Rl(Um(e),Ih):null,this.records.set(e,l)}if(null!=l)return this.hydrate(e,l)}return(r&Rt.Self?Bm():this.parent).get(e,t=r&Rt.Optional&&t===bc?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[bh]=a[bh]||[]).unshift(Tn(e)),i)throw a;return function NC(n,e,t,r){const i=n[bh];throw e[w_]&&i.unshift(e[w_]),n.message=function FC(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=Tn(e);if(Array.isArray(e))i=e.map(Tn).join(" -> ");else if("object"==typeof e){let s=[];for(let a in e)if(e.hasOwnProperty(a)){let l=e[a];s.push(a+":"+("string"==typeof l?JSON.stringify(l):Tn(l)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(PC,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[bh]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Es(s),_h(i)}}resolveInjectorInitializers(){const e=_h(this),t=Es(void 0);try{const r=this.get(Om.multi,En,Rt.Self);for(const i of r)i()}finally{_h(e),Es(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(Tn(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new yt(205,!1)}processProvider(e){let t=ba(e=Nt(e))?e:Nt(e&&e.provide);const r=function IP(n){return Lm(n)?Rl(void 0,n.useValue):Rl(function Ox(n,e,t){let r;if(ba(n)){const i=Nt(n);return pa(i)||Um(i)}if(Lm(n))r=()=>Nt(n.useValue);else if(function Cx(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...im(n.deps||[]));else if(function Ax(n){return!(!n||!n.useExisting)}(n))r=()=>Et(Nt(n.useExisting));else{const i=Nt(n&&(n.useClass||n.provide));if(!function PP(n){return!!n.deps}(n))return pa(i)||Um(i);r=()=>new i(...im(n.deps))}return r}(n),Ih)}(e);if(ba(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=Rl(void 0,Ih,!0),i.factory=()=>im(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===Ih&&(t.value=AP,t.value=t.factory()),"object"==typeof t.value&&t.value&&function OP(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Nt(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function Um(n){const e=Kn(n),t=null!==e?e.factory:pa(n);if(null!==t)return t;if(n instanceof Jt)throw new yt(204,!1);if(n instanceof Function)return function CP(n){const e=n.length;if(e>0)throw function vc(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new yt(204,!1);const t=function tr(n){const e=n&&(n[xn]||n[Zs]);if(e){const t=function xe(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new yt(204,!1)}function Rl(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function LP(n){return!!n.\u0275providers}function Vm(n,e){for(const t of n)Array.isArray(t)?Vm(t,e):LP(t)?Vm(t.\u0275providers,e):e(t)}function Rx(n,e=null,t=null,r){const i=Lx(n,e,t,r);return i.resolveInjectorInitializers(),i}function Lx(n,e=null,t=null,r,i=new Set){const s=[t||En,MP(n)];return r=r||("object"==typeof n?void 0:Tn(n)),new Px(s,e||Bm(),r||null,i)}let li=(()=>{class n{static create(t,r){var i;if(Array.isArray(t))return Rx({name:""},r,t,"");{const s=null!==(i=t.name)&&void 0!==i?i:"";return Rx({name:s},t.parent,t.providers,s)}}}return n.THROW_IF_NOT_FOUND=bc,n.NULL=new Ix,n.\u0275prov=gt({token:n,providedIn:"any",factory:()=>Et(Nm)}),n.__NG_ELEMENT_ID__=-1,n})();function Dt(n,e=Rt.Default){const t=ze();return null===t?Et(n,e):h_(xr(),t,Nt(n),e)}function jm(){throw new Error("invalid")}function Oh(n,e){return n<<17|e<<2}function cs(n){return n>>17&32767}function Xm(n){return 2|n}function no(n){return(131068&n)>>2}function Zm(n,e){return-131069&n|e<<2}function Km(n){return 1|n}function ew(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const i=t[r],s=t[r+1];if(-1!==s){const a=n.data[s];Gg(i),a.contentQueries(2,e[s],s)}}}function Nh(n,e,t,r,i,s,a,l,c,h,g){const m=e.blueprint.slice();return m[0]=i,m[2]=76|r,(null!==g||n&&1024&n[2])&&(m[2]|=1024),jb(m),m[3]=m[15]=n,m[8]=t,m[10]=a||n&&n[10],m[11]=l||n&&n[11],m[12]=c||n&&n[12]||null,m[9]=h||n&&n[9]||null,m[6]=s,m[20]=function OI(){return PI++}(),m[21]=g,m[16]=2==e.type?n[16]:m,m}function Nl(n,e,t,r,i){let s=n.data[e];if(null===s)s=function oy(n,e,t,r,i){const s=Yb(),a=Vg(),c=n.data[e]=function fO(n,e,t,r,i,s){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,a?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=c),null!==s&&(a?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c)),c}(n,e,t,r,i),function q2(){return Gt.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const a=function cc(){const n=Gt.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===a?-1:a.injectorIndex}return As(s,!0),s}function Fl(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Fh(n,e,t){jg(e);try{const r=n.viewQuery;null!==r&&gy(1,r,t);const i=n.template;null!==i&&tw(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&ew(n,e),n.staticViewQueries&&gy(2,n.viewQuery,t);const s=n.components;null!==s&&function uO(n,e){for(let t=0;t<e.length;t++)PO(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[2]&=-5,Wg()}}function Pc(n,e,t,r){const i=e[2];if(128!=(128&i)){jg(e);try{jb(e),function Xb(n){return Gt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&tw(n,e,t,2,r);const a=3==(3&i);if(a){const h=n.preOrderCheckHooks;null!==h&&uh(e,h,null)}else{const h=n.preOrderHooks;null!==h&&ch(e,h,0,null),qg(e,0)}if(function CO(n){for(let e=xm(n);null!==e;e=wm(e)){if(!e[2])continue;const t=e[9];for(let r=0;r<t.length;r++){const i=t[r],s=i[3];0==(512&i[2])&&Ug(s,1),i[2]|=512}}}(e),function AO(n){for(let e=xm(n);null!==e;e=wm(e))for(let t=10;t<e.length;t++){const r=e[t],i=r[1];Bg(r)&&Pc(i,r,i.template,r[8])}}(e),null!==n.contentQueries&&ew(n,e),a){const h=n.contentCheckHooks;null!==h&&uh(e,h)}else{const h=n.contentHooks;null!==h&&ch(e,h,1),qg(e,1)}!function aO(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)Co(~i);else{const s=i,a=t[++r],l=t[++r];Y2(a,s),l(2,e[s])}}}finally{Co(-1)}}(n,e);const l=n.components;null!==l&&function lO(n,e){for(let t=0;t<e.length;t++)IO(n,e[t])}(e,l);const c=n.viewQuery;if(null!==c&&gy(2,c,r),a){const h=n.viewCheckHooks;null!==h&&uh(e,h)}else{const h=n.viewHooks;null!==h&&ch(e,h,2),qg(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,Ug(e[3],-1))}finally{Wg()}}}function cO(n,e,t,r){const i=e[10],a=Gb(e);try{!a&&i.begin&&i.begin(),a&&Fh(n,e,r),Pc(n,e,t,r)}finally{!a&&i.end&&i.end()}}function tw(n,e,t,r,i){const s=oi(),a=2&r;try{Co(-1),a&&e.length>22&&xx(n,e,22,!1),t(r,i)}finally{Co(s)}}function ay(n,e,t){!qb()||(function _O(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;n.firstCreatePass||fc(t,e),$r(r,e);const a=t.initialInputs;for(let l=i;l<s;l++){const c=n.data[l],h=ls(c);h&&MO(e,t,c);const g=pc(e,n,l,t);$r(g,e),null!==a&&EO(0,l-i,g,c,0,a),h&&(Pi(t.index,e)[8]=g)}}(n,e,t,Xi(t,e)),128==(128&t.flags)&&function xO(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,a=function X2(){return Gt.lFrame.currentDirectiveIndex}();try{Co(s);for(let l=r;l<i;l++){const c=n.data[l],h=e[l];$g(l),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&aw(c,h)}}finally{Co(-1),$g(a)}}(n,e,t))}function ly(n,e,t=Xi){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const a=r[s+1],l=-1===a?t(e,n):n[a];n[i++]=l}}}function rw(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=uy(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function uy(n,e,t,r,i,s,a,l,c,h){const g=22+r,m=g+i,_=function dO(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:qt);return t}(g,m),T="function"==typeof h?h():h;return _[1]={type:n,blueprint:_,template:t,queries:null,viewQuery:l,declTNode:e,data:_.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:c,consts:T,incompleteFirstPass:!1}}function iw(n,e,t,r){const i=pw(e);null===t?i.push(r):(i.push(t),n.firstCreatePass&&gw(n).push(r,i.length-1))}function sw(n,e,t){for(let r in n)if(n.hasOwnProperty(r)){const i=n[r];(t=null===t?{}:t).hasOwnProperty(r)?t[r].push(e,i):t[r]=[e,i]}return t}function cy(n,e,t,r){let i=!1;if(qb()){const s=function wO(n,e,t){const r=n.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const a=r[s];bx(t,a.selectors,!1)&&(i||(i=[]),gh(fc(t,e),n,a.type),ls(a)?(lw(n,t),i.unshift(a)):i.push(a))}return i}(n,e,t),a=null===r?null:{"":-1};if(null!==s){i=!0,uw(t,n.data.length,s.length);for(let g=0;g<s.length;g++){const m=s[g];m.providersResolver&&m.providersResolver(m)}let l=!1,c=!1,h=Fl(n,e,s.length,null);for(let g=0;g<s.length;g++){const m=s[g];t.mergedAttrs=hh(t.mergedAttrs,m.hostAttrs),cw(n,t,e,h,m),TO(h,m,a),null!==m.contentQueries&&(t.flags|=8),(null!==m.hostBindings||null!==m.hostAttrs||0!==m.hostVars)&&(t.flags|=128);const _=m.type.prototype;!l&&(_.ngOnChanges||_.ngOnInit||_.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),l=!0),!c&&(_.ngOnChanges||_.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),c=!0),h++}!function pO(n,e){const r=e.directiveEnd,i=n.data,s=e.attrs,a=[];let l=null,c=null;for(let h=e.directiveStart;h<r;h++){const g=i[h],m=g.inputs,_=null===s||vx(e)?null:DO(m,s);a.push(_),l=sw(m,h,l),c=sw(g.outputs,h,c)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=16),l.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=a,e.inputs=l,e.outputs=c}(n,t)}a&&function SO(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new yt(-301,!1);r.push(e[i],s)}}}(t,r,a)}return t.mergedAttrs=hh(t.mergedAttrs,t.attrs),i}function ow(n,e,t,r,i,s){const a=s.hostBindings;if(a){let l=n.hostBindingOpCodes;null===l&&(l=n.hostBindingOpCodes=[]);const c=~e.index;(function bO(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(l)!=c&&l.push(c),l.push(r,i,a)}}function aw(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function lw(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function TO(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;ls(e)&&(t[""]=n)}}function uw(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function cw(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=pa(i.type)),a=new dc(s,ls(i),Dt);n.blueprint[r]=a,t[r]=a,ow(n,e,0,r,Fl(n,t,i.hostVars,qt),i)}function MO(n,e,t){const r=Xi(e,n),i=rw(t),s=n[10],a=kh(n,Nh(n,i,null,t.onPush?32:16,r,e,s,s.createRenderer(r,t),null,null,null));n[e.index]=a}function Os(n,e,t,r,i,s){const a=Xi(n,e);!function dy(n,e,t,r,i,s,a){if(null==s)n.removeAttribute(e,i,t);else{const l=null==a?zt(s):a(s,r||"",i);n.setAttribute(e,i,l,t)}}(e[11],a,s,n.value,t,r,i)}function EO(n,e,t,r,i,s){const a=s[e];if(null!==a){const l=r.setInput;for(let c=0;c<a.length;){const h=a[c++],g=a[c++],m=a[c++];null!==l?r.setInput(t,m,h,g):t[g]=m}}}function DO(n,e){let t=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;n.hasOwnProperty(i)&&(null===t&&(t=[]),t.push(i,n[i],e[r+1])),r+=2}else r+=2;else r+=4}return t}function dw(n,e,t,r){return new Array(n,!0,!1,e,null,0,r,t,null,null)}function IO(n,e){const t=Pi(e,n);if(Bg(t)){const r=t[1];48&t[2]?Pc(r,t,r.template,t[8]):t[5]>0&&hy(t)}}function hy(n){for(let r=xm(n);null!==r;r=wm(r))for(let i=10;i<r.length;i++){const s=r[i];if(512&s[2]){const a=s[1];Pc(a,s,a.template,s[8])}else s[5]>0&&hy(s)}const t=n[1].components;if(null!==t)for(let r=0;r<t.length;r++){const i=Pi(t[r],n);Bg(i)&&i[5]>0&&hy(i)}}function PO(n,e){const t=Pi(e,n),r=t[1];(function OO(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(r,t),Fh(r,t,t[8])}function kh(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function fy(n){for(;n;){n[2]|=32;const e=Cc(n);if(E2(n)&&!e)return n;n=e}return null}function fw(n){!function hw(n){for(let e=0;e<n.components.length;e++){const t=n.components[e],r=vm(t);if(null!==r){const i=r[1];cO(i,r,i.template,t)}}}(n[8])}function gy(n,e,t){Gg(0),e(n,t)}const LO=(()=>Promise.resolve(null))();function pw(n){return n[7]||(n[7]=[])}function gw(n){return n.cleanup||(n.cleanup=[])}function yw(n,e){const t=n[9],r=t?t.get(Il,null):null;r&&r.handleError(e)}function vw(n,e,t,r,i){for(let s=0;s<t.length;){const a=t[s++],l=t[s++],c=e[a],h=n.data[a];null!==h.setInput?h.setInput(c,i,r,l):c[l]=i}}function Bh(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let a=0;a<e.length;a++){const l=e[a];"number"==typeof l?s=l:1==s?i=cl(i,l):2==s&&(r=cl(r,l+": "+e[++a]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function BO(){const n=xr();lh(ze()[1],n)}let Uh=null;function xa(){if(!Uh){const n=Un.Symbol;if(n&&n.iterator)Uh=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const r=e[t];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Uh=r)}}}return Uh}function Oc(n){return!!function yy(n){return null!==n&&("function"==typeof n||"object"==typeof n)}(n)&&(Array.isArray(n)||!(n instanceof Map)&&xa()in n)}function Hr(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function vy(n,e,t,r){const i=ze();return Hr(i,bl(),e)&&(_n(),Os(rr(),i,n,e,t,r)),vy}function zh(n,e,t){const r=ze();return Hr(r,bl(),e)&&function Ni(n,e,t,r,i,s,a,l){const c=Xi(e,t);let g,h=e.inputs;!l&&null!=h&&(g=h[r])?(vw(n,t,g,r,i),ih(e)&&function mO(n,e){const t=Pi(e,n);16&t[2]||(t[2]|=32)}(t,e.index)):3&e.type&&(r=function gO(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=a?a(i,e.value||"",r):i,s.setProperty(c,r,i))}(_n(),rr(),r,n,e,r[11],t,!1),zh}function by(n,e,t,r,i){const a=i?"class":"style";vw(n,t,e.inputs[a],a,r)}function Ke(n,e,t,r){const i=ze(),s=_n(),a=22+n,l=i[11],c=i[a]=Tm(l,e,function rC(){return Gt.lFrame.currentNamespace}()),h=s.firstCreatePass?function e3(n,e,t,r,i,s,a){const l=e.consts,h=Nl(e,n,2,i,Ao(l,s));return cy(e,t,h,Ao(l,a)),null!==h.attrs&&Bh(h,h.attrs,!1),null!==h.mergedAttrs&&Bh(h,h.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,h),h}(a,s,i,0,e,t,r):s.data[a];As(h,!0);const g=h.mergedAttrs;null!==g&&dh(l,c,g);const m=h.classes;null!==m&&Im(l,c,m);const _=h.styles;return null!==_&&gx(l,c,_),64!=(64&h.flags)&&Ah(s,i,c,h),0===function U2(){return Gt.lFrame.elementDepthCount}()&&$r(c,i),function V2(){Gt.lFrame.elementDepthCount++}(),sh(h)&&(ay(s,i,h),function nw(n,e,t){if(Og(e)){const i=e.directiveEnd;for(let s=e.directiveStart;s<i;s++){const a=n.data[s];a.contentQueries&&a.contentQueries(1,t[s],s)}}}(s,h,i)),null!==r&&ly(i,h),Ke}function it(){let n=xr();Vg()?function zg(){Gt.lFrame.isParent=!1}():(n=n.parent,As(n,!1));const e=n;!function z2(){Gt.lFrame.elementDepthCount--}();const t=_n();return t.firstCreatePass&&(lh(t,n),Og(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function lC(n){return 0!=(16&n.flags)}(e)&&by(t,e,ze(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function uC(n){return 0!=(32&n.flags)}(e)&&by(t,e,ze(),e.stylesWithoutHost,!1),it}function pn(n,e,t,r){return Ke(n,e,t,r),it(),pn}function $h(n){return!!n&&"function"==typeof n.then}const Rw=function Ow(n){return!!n&&"function"==typeof n.subscribe};function xi(n,e,t,r){const i=ze(),s=_n(),a=xr();return function Nw(n,e,t,r,i,s,a,l){const c=sh(r),g=n.firstCreatePass&&gw(n),m=e[8],_=pw(e);let T=!0;if(3&r.type||l){const O=Xi(r,e),B=l?l(O):O,V=_.length,z=l?X=>l(fr(X[r.index])):r.index;let G=null;if(!l&&c&&(G=function r3(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const a=i[s];if(a===t&&i[s+1]===r){const l=e[7],c=i[s+2];return l.length>c?l[c]:null}"string"==typeof a&&(s+=2)}return null}(n,e,i,r.index)),null!==G)(G.__ngLastListenerFn__||G).__ngNextListenerFn__=s,G.__ngLastListenerFn__=s,T=!1;else{s=kw(r,e,m,s,!1);const X=t.listen(B,i,s);_.push(s,X),g&&g.push(i,z,V,V+1)}}else s=kw(r,e,m,s,!1);const A=r.outputs;let C;if(T&&null!==A&&(C=A[i])){const O=C.length;if(O)for(let B=0;B<O;B+=2){const J=e[C[B]][C[B+1]].subscribe(s),ae=_.length;_.push(s,J),g&&g.push(i,r.index,ae,-(ae+1))}}}(s,i,i[11],a,n,e,0,r),xi}function Fw(n,e,t,r){try{return!1!==t(r)}catch(i){return yw(n,i),!1}}function kw(n,e,t,r,i){return function s(a){if(a===Function)return r;fy(2&n.flags?Pi(n.index,e):e);let c=Fw(e,0,r,a),h=s.__ngNextListenerFn__;for(;h;)c=Fw(e,0,h,a)&&c,h=h.__ngNextListenerFn__;return i&&!1===c&&(a.preventDefault(),a.returnValue=!1),c}}function qw(n,e,t,r,i){const s=n[t+1],a=null===e;let l=r?cs(s):no(s),c=!1;for(;0!==l&&(!1===c||a);){const g=n[l+1];c3(n[l],e)&&(c=!0,n[l+1]=r?Km(g):Xm(g)),l=r?cs(g):no(g)}c&&(n[t+1]=r?Xm(s):Km(s))}function c3(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Dl(n,e)>=0}function Sy(n,e,t){return function ds(n,e,t,r){const i=ze(),s=_n(),a=function Qs(n){const e=Gt.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);s.firstUpdatePass&&function n1(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[oi()],a=function t1(n,e){return e>=n.expandoStartIndex}(n,t);(function o1(n,e){return 0!=(n.flags&(e?16:32))})(s,r)&&null===e&&!a&&(e=!1),e=function b3(n,e,t,r){const i=function Hg(n){const e=Gt.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=Lc(t=Ty(null,n,e,t,r),e.attrs,r),s=null);else{const a=e.directiveStylingLast;if(-1===a||n[a]!==i)if(t=Ty(i,n,e,t,r),null===s){let c=function _3(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==no(r))return n[cs(r)]}(n,e,r);void 0!==c&&Array.isArray(c)&&(c=Ty(null,n,e,c[1],r),c=Lc(c,e.attrs,r),function x3(n,e,t,r){n[cs(t?e.classBindings:e.styleBindings)]=r}(n,e,r,c))}else s=function w3(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Lc(r,n[s].hostAttrs,t);return Lc(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function l3(n,e,t,r,i,s){let a=s?e.classBindings:e.styleBindings,l=cs(a),c=no(a);n[r]=t;let g,h=!1;if(Array.isArray(t)){const m=t;g=m[1],(null===g||Dl(m,g)>0)&&(h=!0)}else g=t;if(i)if(0!==c){const _=cs(n[l+1]);n[r+1]=Oh(_,l),0!==_&&(n[_+1]=Zm(n[_+1],r)),n[l+1]=function KP(n,e){return 131071&n|e<<17}(n[l+1],r)}else n[r+1]=Oh(l,0),0!==l&&(n[l+1]=Zm(n[l+1],r)),l=r;else n[r+1]=Oh(c,0),0===l?l=r:n[c+1]=Zm(n[c+1],r),c=r;h&&(n[r+1]=Xm(n[r+1])),qw(n,g,r,!0),qw(n,g,r,!1),function u3(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&Dl(s,e)>=0&&(t[r+1]=Km(t[r+1]))}(e,g,n,r,s),a=Oh(l,c),s?e.classBindings=a:e.styleBindings=a}(i,s,e,t,a,r)}}(s,n,a,r),e!==qt&&Hr(i,a,e)&&function i1(n,e,t,r,i,s,a,l){if(!(3&e.type))return;const c=n.data,h=c[l+1];Hh(function Wx(n){return 1==(1&n)}(h)?s1(c,e,t,i,no(h),a):void 0)||(Hh(s)||function jx(n){return 2==(2&n)}(h)&&(s=s1(c,null,t,i,l,a)),function lP(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:_i.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=_i.Important),n.setStyle(t,r,i,s))}}(r,a,function oh(n,e){return fr(e[n])}(oi(),t),i,s))}(s,s.data[oi()],i,i[11],n,i[a+1]=function M3(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Tn(Li(n)))),n}(e,t),r,a)}(n,e,t,!1),Sy}function Ty(n,e,t,r,i){let s=null;const a=t.directiveEnd;let l=t.directiveStylingLast;for(-1===l?l=t.directiveStart:l++;l<a&&(s=e[l],r=Lc(r,s.hostAttrs,i),s!==n);)l++;return null!==n&&(t.directiveStylingLast=l),r}function Lc(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?i=a:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Ri(n,a,!!t||e[++s]))}return void 0===n?null:n}function s1(n,e,t,r,i,s){const a=null===e;let l;for(;i>0;){const c=n[i],h=Array.isArray(c),g=h?c[1]:c,m=null===g;let _=t[i+1];_===qt&&(_=m?En:void 0);let T=m?tm(_,r):g===r?_:void 0;if(h&&!Hh(T)&&(T=tm(c,r)),Hh(T)&&(l=T,a))return l;const A=n[i+1];i=a?cs(A):no(A)}if(null!==e){let c=s?e.residualClasses:e.residualStyles;null!=c&&(l=tm(c,r))}return l}function Hh(n){return void 0!==n}function It(n,e=""){const t=ze(),r=_n(),i=n+22,s=r.firstCreatePass?Nl(r,i,1,e,null):r.data[i],a=t[i]=function Sm(n,e){return n.createText(e)}(t[11],e);Ah(r,t,a,s),As(s,!1)}const Yl="en-US";let C1=Yl;class WR{resolveComponentFactory(e){throw function jR(n){const e=Error(`No component factory found for ${Tn(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let Uc=(()=>{class n{}return n.NULL=new WR,n})();class Lo{}class nS{}class rS{}function YR(){return Zl(xr(),ze())}function Zl(n,e){return new No(Xi(n,e))}let No=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=YR,n})();function XR(n){return n instanceof No?n.nativeElement:n}class iS{}let Yh=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function ZR(){const n=ze(),t=Pi(xr().index,n);return(bi(t)?t:n)[11]}(),n})(),KR=(()=>{class n{}return n.\u0275prov=gt({token:n,providedIn:"root",factory:()=>null}),n})();class Xh{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const JR=new Xh("14.0.7"),Oy={};function Zh(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&r.push(fr(s)),as(s))for(let l=10;l<s.length;l++){const c=s[l],h=c[1].firstChild;null!==h&&Zh(c[1],c,h,r)}const a=t.type;if(8&a)Zh(n,e,t.child,r);else if(32&a){const l=_m(t,e);let c;for(;c=l();)r.push(c)}else if(16&a){const l=hx(e,t);if(Array.isArray(l))r.push(...l);else{const c=Cc(e[16]);Zh(c[1],c,l,r,!0)}}t=i?t.projectionNext:t.next}return r}class Vc{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return Zh(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(as(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(Mm(e,r),yh(t,r))}this._attachedToViewContainer=!1}rx(this._lView[1],this._lView)}onDestroy(e){iw(this._lView[1],this._lView,null,e)}markForCheck(){fy(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function py(n,e,t){const r=e[10];r.begin&&r.begin();try{Pc(n,e,n.template,t)}catch(i){throw yw(e,i),i}finally{r.end&&r.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new yt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function JI(n,e){Ic(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new yt(902,!1);this._appRef=e}}class QR extends Vc{constructor(e){super(e),this._view=e}detectChanges(){fw(this._view)}checkNoChanges(){}get context(){return null}}class Ry extends Uc{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=$n(e);return new Ly(t,this.ngModule)}}function sS(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class tL{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){const i=this.injector.get(e,Oy,r);return i!==Oy||t===Oy?i:this.parentInjector.get(e,t,r)}}class Ly extends rS{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function vP(n){return n.map(yP).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return sS(this.componentDef.inputs)}get outputs(){return sS(this.componentDef.outputs)}create(e,t,r,i){let s=(i=i||this.ngModule)instanceof _a?i:null==i?void 0:i.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const a=s?new tL(e,s):e,l=a.get(iS,null);if(null===l)throw new yt(407,!1);const c=a.get(KR,null),h=l.createRenderer(null,this.componentDef),g=this.componentDef.selectors[0][0]||"div",m=r?function hO(n,e,t){return n.selectRootElement(e,t===Ds.ShadowDom)}(h,r,this.componentDef.encapsulation):Tm(l.createRenderer(null,this.componentDef),g,function eL(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(g)),_=this.componentDef.onPush?288:272,T=function kO(n,e){return{components:[],scheduler:n||$I,clean:LO,playerHandler:e||null,flags:0}}(),A=uy(0,null,null,1,0,null,null,null,null,null),C=Nh(null,A,T,_,null,null,l,h,c,a,null);let O,B;jg(C);try{const V=function NO(n,e,t,r,i,s){const a=t[1];t[22]=n;const c=Nl(a,22,2,"#host",null),h=c.mergedAttrs=e.hostAttrs;null!==h&&(Bh(c,h,!0),null!==n&&(dh(i,n,h),null!==c.classes&&Im(i,n,c.classes),null!==c.styles&&gx(i,n,c.styles)));const g=r.createRenderer(n,e),m=Nh(t,rw(e),null,e.onPush?32:16,t[22],c,r,g,s||null,null,null);return a.firstCreatePass&&(gh(fc(c,t),a,e.type),lw(a,c),uw(c,t.length,1)),kh(t,m),t[22]=m}(m,this.componentDef,C,l,h);if(m)if(r)dh(h,m,["ng-version",JR.full]);else{const{attrs:z,classes:G}=function bP(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!us(i))break;i=s}r++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);z&&dh(h,m,z),G&&G.length>0&&Im(h,m,G.join(" "))}if(B=kg(A,22),void 0!==t){const z=B.projection=[];for(let G=0;G<this.ngContentSelectors.length;G++){const X=t[G];z.push(null!=X?Array.from(X):null)}}O=function FO(n,e,t,r,i){const s=t[1],a=function vO(n,e,t){const r=xr();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),cw(n,r,e,Fl(n,e,1,null),t));const i=pc(e,n,r.directiveStart,r);$r(i,e);const s=Xi(r,e);return s&&$r(s,e),i}(s,t,e);if(r.components.push(a),n[8]=a,null!==i)for(const c of i)c(a,e);if(e.contentQueries){const c=xr();e.contentQueries(1,a,c.directiveStart)}const l=xr();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(Co(l.index),ow(t[1],l,0,l.directiveStart,l.directiveEnd,e),aw(e,a)),a}(V,this.componentDef,C,T,[BO]),Fh(A,C,null)}finally{Wg()}return new rL(this.componentType,O,Zl(B,C),C,B)}}class rL extends class qR{}{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new QR(i),this.componentType=e}get injector(){return new wl(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}class oS extends Lo{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ry(this);const r=Ci(e);this._bootstrapComponents=to(r.bootstrap),this._r3Injector=Lx(e,t,[{provide:Lo,useValue:this},{provide:Uc,useValue:this.componentFactoryResolver}],Tn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this.get(e)}get(e,t=li.THROW_IF_NOT_FOUND,r=Rt.Default){return e===li||e===Lo||e===Nm?this:this._r3Injector.get(e,t,r)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Ny extends nS{constructor(e){super(),this.moduleType=e}create(e){return new oS(this.moduleType,e)}}class sL extends Lo{constructor(e,t,r){super(),this.componentFactoryResolver=new Ry(this),this.instance=null;const i=new Px([...e,{provide:Lo,useValue:this},{provide:Uc,useValue:this.componentFactoryResolver}],t||Bm(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Kh(n,e=null,t=null){return new sL(n,e,t).injector}function ky(n){return e=>{setTimeout(n,void 0,e)}}const Gr=class RL extends Kt{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){var i,s,a;let l=e,c=t||(()=>null),h=r;if(e&&"object"==typeof e){const m=e;l=null===(i=m.next)||void 0===i?void 0:i.bind(m),c=null===(s=m.error)||void 0===s?void 0:s.bind(m),h=null===(a=m.complete)||void 0===a?void 0:a.bind(m)}this.__isAsync&&(c=ky(c),l&&(l=ky(l)),h&&(h=ky(h)));const g=super.subscribe({next:l,error:c,complete:h});return e instanceof w&&e.add(g),g}};function LL(){return this._results[xa()]()}class By{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=xa(),r=By.prototype;r[t]||(r[t]=LL)}get changes(){return this._changes||(this._changes=new Gr)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const r=this;r.dirty=!1;const i=Oi(e);(this._changesDetected=!function xC(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}(r._results,i,t))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let io=(()=>{class n{}return n.__NG_ELEMENT_ID__=kL,n})();const NL=io,FL=class extends NL{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(e,t){const r=this._declarationTContainer.tViews,i=Nh(this._declarationLView,r,e,16,null,r.declTNode,null,null,null,null,t||null);i[17]=this._declarationLView[this._declarationTContainer.index];const a=this._declarationLView[19];return null!==a&&(i[19]=a.createEmbeddedView(r)),Fh(r,i,e),new Vc(i)}};function kL(){return Jh(xr(),ze())}function Jh(n,e){return 4&n.type?new FL(e,n,Zl(n,e)):null}let fs=(()=>{class n{}return n.__NG_ELEMENT_ID__=BL,n})();function BL(){return _S(xr(),ze())}const UL=fs,vS=class extends UL{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Zl(this._hostTNode,this._hostLView)}get injector(){return new wl(this._hostTNode,this._hostLView)}get parentInjector(){const e=ph(this._hostTNode,this._hostLView);if(a_(e)){const t=xl(e,this._hostLView),r=_l(e);return new wl(t[1].data[r+8],t)}return new wl(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=bS(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedView(t||{},s);return this.insert(a,i),a}createComponent(e,t,r,i,s){const a=e&&!function yc(n){return"function"==typeof n}(e);let l;if(a)l=t;else{const m=t||{};l=m.index,r=m.injector,i=m.projectableNodes,s=m.environmentInjector||m.ngModuleRef}const c=a?e:new Ly($n(e)),h=r||this.parentInjector;if(!s&&null==c.ngModule){const _=(a?h:this.parentInjector).get(_a,null);_&&(s=_)}const g=c.create(h,i,void 0,s);return this.insert(g.hostView,l),g}insert(e,t){const r=e._lView,i=r[1];if(function B2(n){return as(n[3])}(r)){const g=this.indexOf(e);if(-1!==g)this.detach(g);else{const m=r[3],_=new vS(m,m[6],m[3]);_.detach(_.indexOf(e))}}const s=this._adjustIndex(t),a=this._lContainer;!function eP(n,e,t,r){const i=10+r,s=t.length;r>0&&(t[i-1][4]=e),r<s-10?(e[4]=t[i],v_(t,10+r,e)):(t.push(e),e[4]=null),e[3]=t;const a=e[17];null!==a&&t!==a&&function tP(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(a,e);const l=e[19];null!==l&&l.insertView(n),e[2]|=64}(i,r,a,s);const l=Am(s,a),c=r[11],h=Dh(c,a[7]);return null!==h&&function KI(n,e,t,r,i,s){r[0]=i,r[6]=e,Ic(n,r,t,1,i,s)}(i,a[6],c,r,h,l),e.attachToViewContainerRef(),v_(Uy(a),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=bS(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=Mm(this._lContainer,t);r&&(yh(Uy(this._lContainer),t),rx(r[1],r))}detach(e){const t=this._adjustIndex(e,-1),r=Mm(this._lContainer,t);return r&&null!=yh(Uy(this._lContainer),t)?new Vc(r):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function bS(n){return n[8]}function Uy(n){return n[8]||(n[8]=[])}function _S(n,e){let t;const r=e[n.index];if(as(r))t=r;else{let i;if(8&n.type)i=fr(r);else{const s=e[11];i=s.createComment("");const a=Xi(n,e);va(s,Dh(s,a),i,function sP(n,e){return n.nextSibling(e)}(s,a),!1)}e[n.index]=t=dw(r,e,i,n),kh(e,t)}return new vS(t,n,e)}class Vy{constructor(e){this.queryList=e,this.matches=null}clone(){return new Vy(this.queryList)}setDirty(){this.queryList.setDirty()}}class zy{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){const a=t.getByIndex(s);i.push(this.queries[a.indexInDeclarationView].clone())}return new zy(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==MS(e,t).matches&&this.queries[t].setDirty()}}class xS{constructor(e,t,r=null){this.predicate=e,this.flags=t,this.read=r}}class $y{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,null!==t?t.push(s):t=[s])}return null!==t?new $y(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class Hy{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new Hy(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(e,t,$L(t,s)),this.matchTNodeWithReadOption(e,t,mh(t,e,s,!1,!1))}else r===io?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,mh(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===No||i===fs||i===io&&4&t.type)this.addMatch(t.index,-2);else{const s=mh(t,e,i,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function $L(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function GL(n,e,t,r){return-1===t?function HL(n,e){return 11&n.type?Zl(n,e):4&n.type?Jh(n,e):null}(e,n):-2===t?function jL(n,e,t){return t===No?Zl(e,n):t===io?Jh(e,n):t===fs?_S(e,n):void 0}(n,e,r):pc(n,n[1],t,e)}function wS(n,e,t,r){const i=e[19].queries[r];if(null===i.matches){const s=n.data,a=t.matches,l=[];for(let c=0;c<a.length;c+=2){const h=a[c];l.push(h<0?null:GL(e,s[h],a[c+1],t.metadata.read))}i.matches=l}return i.matches}function Gy(n,e,t,r){const i=n.queries.getByIndex(t),s=i.matches;if(null!==s){const a=wS(n,e,i,t);for(let l=0;l<s.length;l+=2){const c=s[l];if(c>0)r.push(a[l/2]);else{const h=s[l+1],g=e[-c];for(let m=10;m<g.length;m++){const _=g[m];_[17]===_[3]&&Gy(_[1],_,h,r)}if(null!==g[9]){const m=g[9];for(let _=0;_<m.length;_++){const T=m[_];Gy(T[1],T,h,r)}}}}}return r}function Kl(n){const e=ze(),t=_n(),r=Kb();Gg(r+1);const i=MS(t,r);if(n.dirty&&Gb(e)===(2==(2&i.metadata.flags))){if(null===i.matches)n.reset([]);else{const s=i.crossesNgTemplate?Gy(t,e,r,[]):wS(t,e,i,r);n.reset(s,XR),n.notifyOnChanges()}return!0}return!1}function Qh(n,e,t){const r=_n();r.firstCreatePass&&(TS(r,new xS(n,e,t),-1),2==(2&e)&&(r.staticViewQueries=!0)),SS(r,ze(),e)}function jy(n,e,t,r){const i=_n();if(i.firstCreatePass){const s=xr();TS(i,new xS(e,t,r),s.index),function qL(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(i,n),2==(2&t)&&(i.staticContentQueries=!0)}SS(i,ze(),t)}function Jl(){return function WL(n,e){return n[19].queries[e].queryList}(ze(),Kb())}function SS(n,e,t){const r=new By(4==(4&t));iw(n,e,r,r.destroy),null===e[19]&&(e[19]=new zy),e[19].queries.push(new Vy(r))}function TS(n,e,t){null===n.queries&&(n.queries=new $y),n.queries.track(new Hy(e,t))}function MS(n,e){return n.queries.getByIndex(e)}function tf(...n){}const nf=new Jt("Application Initializer");let rf=(()=>{class n{constructor(t){this.appInits=t,this.resolve=tf,this.reject=tf,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const s=this.appInits[i]();if($h(s))t.push(s);else if(Rw(s)){const a=new Promise((l,c)=>{s.subscribe({complete:l,error:c})});t.push(a)}}Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(Et(nf,8))},n.\u0275prov=gt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Gc=new Jt("AppId",{providedIn:"root",factory:function GS(){return`${Zy()}${Zy()}${Zy()}`}});function Zy(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const jS=new Jt("Platform Initializer"),WS=new Jt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),qS=new Jt("appBootstrapListener");let pN=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=gt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const so=new Jt("LocaleId",{providedIn:"root",factory:()=>Po(so,Rt.Optional|Rt.SkipSelf)||function gN(){return"undefined"!=typeof $localize&&$localize.locale||Yl}()});class yN{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let Ky=(()=>{class n{compileModuleSync(t){return new Ny(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=to(Ci(t).declarations).reduce((a,l)=>{const c=$n(l);return c&&a.push(new Ly(c)),a},[]);return new yN(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=gt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const _N=(()=>Promise.resolve(0))();function Jy(n){"undefined"==typeof Zone?_N.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class pr{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Gr(!1),this.onMicrotaskEmpty=new Gr(!1),this.onStable=new Gr(!1),this.onError=new Gr(!1),"undefined"==typeof Zone)throw new yt(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function xN(){let n=Un.requestAnimationFrame,e=Un.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function TN(n){const e=()=>{!function SN(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Un,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,e0(n),n.isCheckStableRunning=!0,Qy(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),e0(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,a,l)=>{try{return ZS(n),t.invokeTask(i,s,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),KS(n)}},onInvoke:(t,r,i,s,a,l,c)=>{try{return ZS(n),t.invoke(i,s,a,l,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),KS(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,e0(n),Qy(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!pr.isInAngularZone())throw new yt(909,!1)}static assertNotInAngularZone(){if(pr.isInAngularZone())throw new yt(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,a=s.scheduleEventTask("NgZoneEvent: "+i,e,wN,tf,tf);try{return s.runTask(a,t,r)}finally{s.cancelTask(a)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const wN={};function Qy(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function e0(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function ZS(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function KS(n){n._nesting--,Qy(n)}class MN{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Gr,this.onMicrotaskEmpty=new Gr,this.onStable=new Gr,this.onError=new Gr}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const JS=new Jt(""),sf=new Jt("");let jc,t0=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,jc||(function EN(n){jc=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{pr.assertNotInAngularZone(),Jy(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Jy(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}}return n.\u0275fac=function(t){return new(t||n)(Et(pr),Et(n0),Et(sf))},n.\u0275prov=gt({token:n,factory:n.\u0275fac}),n})(),n0=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){var i;return null!==(i=null==jc?void 0:jc.findTestabilityInTree(this,t,r))&&void 0!==i?i:null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=gt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),Fs=null;const QS=new Jt("AllowMultipleToken"),r0=new Jt("PlatformDestroyListeners");class eT{constructor(e,t){this.name=e,this.token=t}}function nT(n,e,t=[]){const r=`Platform: ${e}`,i=new Jt(r);return(s=[])=>{let a=s0();if(!a||a.injector.get(QS,!1)){const l=[...t,...s,{provide:i,useValue:!0}];n?n(l):function CN(n){if(Fs&&!Fs.get(QS,!1))throw new yt(400,!1);Fs=n;const e=n.get(iT);(function tT(n){const e=n.get(jS,null);e&&e.forEach(t=>t())})(n)}(function rT(n=[],e){return li.create({name:e,providers:[{provide:Fm,useValue:"platform"},{provide:r0,useValue:new Set([()=>Fs=null])},...n]})}(l,r))}return function PN(n){const e=s0();if(!e)throw new yt(401,!1);return e}()}}function s0(){var n;return null!==(n=null==Fs?void 0:Fs.get(iT))&&void 0!==n?n:null}let iT=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function ON(n,e){let t;return t="noop"===n?new MN:("zone.js"===n?void 0:n)||new pr(e),t}(null==r?void 0:r.ngZone,function sT(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(r)),s=[{provide:pr,useValue:i}];return i.run(()=>{const a=li.create({providers:s,parent:this.injector,name:t.moduleType.name}),l=t.create(a),c=l.injector.get(Il,null);if(!c)throw new yt(402,!1);return i.runOutsideAngular(()=>{const h=i.onError.subscribe({next:g=>{c.handleError(g)}});l.onDestroy(()=>{lf(this._modules,l),h.unsubscribe()})}),function oT(n,e,t){try{const r=t();return $h(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(c,i,()=>{const h=l.injector.get(rf);return h.runInitializers(),h.donePromise.then(()=>(function I1(n){oe(n,"Expected localeId to be defined"),"string"==typeof n&&(C1=n.toLowerCase().replace(/_/g,"-"))}(l.injector.get(so,Yl)||Yl),this._moduleDoBootstrap(l),l))})})}bootstrapModule(t,r=[]){const i=aT({},r);return function DN(n,e,t){const r=new Ny(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(af);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new yt(403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new yt(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(r0,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(Et(li))},n.\u0275prov=gt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function aT(n,e){return Array.isArray(e)?e.reduce(aT,n):Object.assign(Object.assign({},n),e)}let af=(()=>{class n{constructor(t,r,i){this._zone=t,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new We(l=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{l.next(this._stable),l.complete()})}),a=new We(l=>{let c;this._zone.runOutsideAngular(()=>{c=this._zone.onStable.subscribe(()=>{pr.assertNotInAngularZone(),Jy(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,l.next(!0))})})});const h=this._zone.onUnstable.subscribe(()=>{pr.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{l.next(!1)}))});return()=>{c.unsubscribe(),h.unsubscribe()}});this.isStable=function Xd(...n){const e=Xs(n),t=function Gd(n,e){return"number"==typeof oa(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Tt(r[0]):ji(t)(hr(r,e)):Wi}(s,a.pipe(function ul(n={}){const{connector:e=(()=>new Kt),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let a,l,c,h=0,g=!1,m=!1;const _=()=>{null==l||l.unsubscribe(),l=void 0},T=()=>{_(),a=c=void 0,g=m=!1},A=()=>{const C=a;T(),null==C||C.unsubscribe()};return At((C,O)=>{h++,!m&&!g&&_();const B=c=null!=c?c:e();O.add(()=>{h--,0===h&&!m&&!g&&(l=aa(A,i))}),B.subscribe(O),!a&&h>0&&(a=new ne({next:V=>B.next(V),error:V=>{m=!0,_(),l=aa(T,t,V),B.error(V)},complete:()=>{g=!0,_(),l=aa(T,r),B.complete()}}),Tt(C).subscribe(a))})(s)}}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof rS;if(!this._injector.get(rf).done)throw!i&&function eu(n){const e=$n(n)||ri(n)||ii(n);return null!==e&&e.standalone}(t),new yt(405,false);let a;a=i?t:this._injector.get(Uc).resolveComponentFactory(t),this.componentTypes.push(a.componentType);const l=function AN(n){return n.isBoundToModule}(a)?void 0:this._injector.get(Lo),h=a.create(li.NULL,[],r||a.selector,l),g=h.location.nativeElement,m=h.injector.get(JS,null);return null==m||m.registerApplication(g),h.onDestroy(()=>{this.detachView(h.hostView),lf(this.components,h),null==m||m.unregisterApplication(g)}),this._loadComponent(h),h}tick(){if(this._runningTick)throw new yt(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;lf(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(qS,[]).concat(this._bootstrapListeners).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>lf(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new yt(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)(Et(pr),Et(li),Et(Il))},n.\u0275prov=gt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function lf(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let uT=!0,o0=(()=>{class n{}return n.__NG_ELEMENT_ID__=NN,n})();function NN(n){return function FN(n,e,t){if(ih(n)&&!t){const r=Pi(n.index,e);return new Vc(r,r)}return 47&n.type?new Vc(e[16],e):null}(xr(),ze(),16==(16&n))}class pT{constructor(){}supports(e){return Oc(e)}create(e){return new $N(e)}}const zN=(n,e)=>e;class $N{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||zN}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const a=!r||t&&t.currentIndex<mT(r,i,s)?t:r,l=mT(a,i,s),c=a.currentIndex;if(a===r)i--,r=r._nextRemoved;else if(t=t._next,null==a.previousIndex)i++;else{s||(s=[]);const h=l-i,g=c-i;if(h!=g){for(let _=0;_<h;_++){const T=_<s.length?s[_]:s[_]=0,A=T+_;g<=A&&A<h&&(s[_]=T+1)}s[a.previousIndex]=g-h}}l!==c&&e(a,l,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Oc(e))throw new yt(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,a,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let l=0;l<this.length;l++)s=e[l],a=this._trackByFn(l,s),null!==t&&Object.is(t.trackById,a)?(r&&(t=this._verifyReinsertion(t,s,a,l)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,a,l),r=!0),t=t._next}else i=0,function qO(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[xa()]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,l=>{a=this._trackByFn(i,l),null!==t&&Object.is(t.trackById,a)?(r&&(t=this._verifyReinsertion(t,l,a,i)),Object.is(t.item,l)||this._addIdentityChange(t,l)):(t=this._mismatch(t,l,a,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new HN(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new gT),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new gT),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class HN{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class GN{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class gT{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new GN,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function mT(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function vT(){return new df([new pT])}let df=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||vT()),deps:[[n,new wc,new ma]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new yt(901,!1)}}return n.\u0275prov=gt({token:n,providedIn:"root",factory:vT}),n})();const XN=nT(null,"core",[]);let ZN=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(Et(af))},n.\u0275mod=ua({type:n}),n.\u0275inj=Rn({}),n})();function nu(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let hf=null;function Fo(){return hf}const jr=new Jt("DocumentToken");let ff=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=gt({token:n,factory:function(){return function eF(){return Et(_T)}()},providedIn:"platform"}),n})();const tF=new Jt("Location Initialized");let _T=(()=>{class n extends ff{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Fo().getBaseHref(this._doc)}onPopState(t){const r=Fo().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Fo().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){xT()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){xT()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(Et(jr))},n.\u0275prov=gt({token:n,factory:function(){return function nF(){return new _T(Et(jr))}()},providedIn:"platform"}),n})();function xT(){return!!window.history.pushState}function d0(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function wT(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ao(n){return n&&"?"!==n[0]?"?"+n:n}let Ma=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=gt({token:n,factory:function(){return function rF(){const n=Et(jr).location;return new ST(Et(ff),n&&n.origin||"")}()},providedIn:"root"}),n})();const h0=new Jt("appBaseHref");let ST=(()=>{class n extends Ma{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return d0(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ao(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const a=this.prepareExternalUrl(i+ao(s));this._platformLocation.pushState(t,r,a)}replaceState(t,r,i,s){const a=this.prepareExternalUrl(i+ao(s));this._platformLocation.replaceState(t,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(Et(ff),Et(h0,8))},n.\u0275prov=gt({token:n,factory:n.\u0275fac}),n})(),iF=(()=>{class n extends Ma{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=d0(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let a=this.prepareExternalUrl(i+ao(s));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.pushState(t,r,a)}replaceState(t,r,i,s){let a=this.prepareExternalUrl(i+ao(s));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(Et(ff),Et(h0,8))},n.\u0275prov=gt({token:n,factory:n.\u0275fac}),n})(),f0=(()=>{class n{constructor(t){this._subject=new Gr,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=wT(TT(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){var t;null===(t=this._urlChangeSubscription)||void 0===t||t.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ao(r))}normalize(t){return n.stripTrailingSlash(function oF(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,TT(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ao(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ao(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._locationStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{var r;const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(null===(r=this._urlChangeSubscription)||void 0===r||r.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=ao,n.joinWithSlash=d0,n.stripTrailingSlash=wT,n.\u0275fac=function(t){return new(t||n)(Et(Ma))},n.\u0275prov=gt({token:n,factory:function(){return function sF(){return new f0(Et(Ma))}()},providedIn:"root"}),n})();function TT(n){return n.replace(/\/index.html$/,"")}class WF{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let NT=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,a)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new WF(i.item,this._ngForOf,-1,-1),null===a?void 0:a);else if(null==a)r.remove(null===s?void 0:s);else if(null!==s){const l=r.get(s);r.move(l,a),FT(l,i)}});for(let i=0,s=r.length;i<s;i++){const l=r.get(i).context;l.index=i,l.count=s,l.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{FT(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(Dt(fs),Dt(io),Dt(df))},n.\u0275dir=Nr({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function FT(n,e){n.context.$implicit=e.item}let wk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ua({type:n}),n.\u0275inj=Rn({}),n})();let Ek=(()=>{class n{}return n.\u0275prov=gt({token:n,providedIn:"root",factory:()=>new Dk(Et(jr),window)}),n})();class Dk{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Ak(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const a=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(a)return a}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=zT(this.window.history)||zT(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function zT(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class D0 extends class Ik extends class QN{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function JN(n){hf||(hf=n)}(new D0)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Pk(){return Xc=Xc||document.querySelector("base"),Xc?Xc.getAttribute("href"):null}();return null==t?null:function Ok(n){Sf=Sf||document.createElement("a"),Sf.setAttribute("href",n);const e=Sf.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Xc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function HF(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Sf,Xc=null;const $T=new Jt("TRANSITION_ID"),Lk=[{provide:nf,useFactory:function Rk(n,e,t){return()=>{t.get(rf).donePromise.then(()=>{const r=Fo(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[$T,jr,li],multi:!0}];let Fk=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=gt({token:n,factory:n.\u0275fac}),n})();const Tf=new Jt("EventManagerPlugins");let Mf=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const a=i[s];if(a.supports(t))return this._eventNameToPlugin.set(t,a),a}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(Et(Tf),Et(pr))},n.\u0275prov=gt({token:n,factory:n.\u0275fac}),n})();class HT{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=Fo().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let GT=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=gt({token:n,factory:n.\u0275fac}),n})(),Zc=(()=>{class n extends GT{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const a=this._doc.createElement("style");a.textContent=s,i.push(r.appendChild(a))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(jT),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(jT))}}return n.\u0275fac=function(t){return new(t||n)(Et(jr))},n.\u0275prov=gt({token:n,factory:n.\u0275fac}),n})();function jT(n){Fo().remove(n)}const A0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},C0=/%COMP%/g;function Ef(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Ef(n,i,t):(i=i.replace(C0,n),t.push(i))}return t}function YT(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let I0=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new P0(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case Ds.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new $k(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case Ds.ShadowDom:return new Hk(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Ef(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(Et(Mf),Et(Zc),Et(Gc))},n.\u0275prov=gt({token:n,factory:n.\u0275fac}),n})();class P0{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(A0[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(ZT(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(ZT(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=A0[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=A0[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(_i.DashCase|_i.Important)?e.style.setProperty(t,r,i&_i.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&_i.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,YT(r)):this.eventManager.addEventListener(e,t,YT(r))}}function ZT(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class $k extends P0{constructor(e,t,r,i){super(e),this.component=r;const s=Ef(i+"-"+r.id,r.styles,[]);t.addStyles(s),this.contentAttr=function Uk(n){return"_ngcontent-%COMP%".replace(C0,n)}(i+"-"+r.id),this.hostAttr=function Vk(n){return"_nghost-%COMP%".replace(C0,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Hk extends P0{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Ef(i.id,i.styles,[]);for(let a=0;a<s.length;a++){const l=document.createElement("style");l.textContent=s[a],this.shadowRoot.appendChild(l)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Gk=(()=>{class n extends HT{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(Et(jr))},n.\u0275prov=gt({token:n,factory:n.\u0275fac}),n})();const KT=["alt","control","meta","shift"],Wk={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},JT={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},qk={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Yk=(()=>{class n extends HT{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Fo().onAndCancel(t,s.domEventName,a))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let a="";if(KT.forEach(c=>{const h=r.indexOf(c);h>-1&&(r.splice(h,1),a+=c+".")}),a+=s,0!=r.length||0===s.length)return null;const l={};return l.domEventName=i,l.fullKey=a,l}static getEventFullKey(t){let r="",i=function Xk(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&JT.hasOwnProperty(e)&&(e=JT[e]))}return Wk[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),KT.forEach(s=>{s!=i&&(0,qk[s])(t)&&(r+=s+".")}),r+=i,r}static eventCallback(t,r,i){return s=>{n.getEventFullKey(s)===t&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(Et(jr))},n.\u0275prov=gt({token:n,factory:n.\u0275fac}),n})();const Qk=nT(XN,"browser",[{provide:WS,useValue:"browser"},{provide:jS,useValue:function Zk(){D0.makeCurrent()},multi:!0},{provide:jr,useFactory:function Jk(){return function WC(n){om=n}(document),document},deps:[]}]),eM=new Jt(""),tM=[{provide:sf,useClass:class Nk{addToWindow(e){Un.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},Un.getAllAngularTestabilities=()=>e.getAllTestabilities(),Un.getAllAngularRootElements=()=>e.getAllRootElements(),Un.frameworkStabilizers||(Un.frameworkStabilizers=[]),Un.frameworkStabilizers.push(r=>{const i=Un.getAllAngularTestabilities();let s=i.length,a=!1;const l=function(c){a=a||c,s--,0==s&&r(a)};i.forEach(function(c){c.whenStable(l)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?Fo().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}},deps:[]},{provide:JS,useClass:t0,deps:[pr,n0,sf]},{provide:t0,useClass:t0,deps:[pr,n0,sf]}],nM=[{provide:Fm,useValue:"root"},{provide:Il,useFactory:function Kk(){return new Il},deps:[]},{provide:Tf,useClass:Gk,multi:!0,deps:[jr,pr,WS]},{provide:Tf,useClass:Yk,multi:!0,deps:[jr]},{provide:I0,useClass:I0,deps:[Mf,Zc,Gc]},{provide:iS,useExisting:I0},{provide:GT,useExisting:Zc},{provide:Zc,useClass:Zc,deps:[jr]},{provide:Mf,useClass:Mf,deps:[Tf,pr]},{provide:class Ck{},useClass:Fk,deps:[]},[]];let e4=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Gc,useValue:t.appId},{provide:$T,useExisting:Gc},Lk]}}}return n.\u0275fac=function(t){return new(t||n)(Et(eM,12))},n.\u0275mod=ua({type:n}),n.\u0275inj=Rn({providers:[...nM,...tM],imports:[wk,ZN]}),n})(),rM=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(Et(jr))},n.\u0275prov=gt({token:n,factory:function(t){let r=null;return r=t?new t:function n4(){return new rM(Et(jr))}(),r},providedIn:"root"}),n})();"undefined"!=typeof window&&window;let oM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=gt({token:n,factory:function(t){let r=null;return r=t?new(t||n):Et(aM),r},providedIn:"root"}),n})(),aM=(()=>{class n extends oM{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case Gn.NONE:return r;case Gn.HTML:return Is(r,"HTML")?Li(r):$_(this._doc,String(r)).toString();case Gn.STYLE:return Is(r,"Style")?Li(r):r;case Gn.SCRIPT:if(Is(r,"Script"))return Li(r);throw new Error("unsafe value used in a script context");case Gn.URL:return Is(r,"URL")?Li(r):Mc(String(r));case Gn.RESOURCE_URL:if(Is(r,"ResourceURL"))return Li(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return function tI(n){return new XC(n)}(t)}bypassSecurityTrustStyle(t){return function nI(n){return new ZC(n)}(t)}bypassSecurityTrustScript(t){return function rI(n){return new KC(n)}(t)}bypassSecurityTrustUrl(t){return function iI(n){return new JC(n)}(t)}bypassSecurityTrustResourceUrl(t){return function sI(n){return new QC(n)}(t)}}return n.\u0275fac=function(t){return new(t||n)(Et(jr))},n.\u0275prov=gt({token:n,factory:function(t){let r=null;return r=t?new t:function c4(n){return new aM(n.get(jr))}(Et(li)),r},providedIn:"root"}),n})();function nn(...n){return hr(n,Xs(n))}class ys extends Kt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:d4}=Array,{getPrototypeOf:h4,prototype:f4,keys:p4}=Object;const{isArray:y4}=Array;function lM(...n){const e=Xs(n),t=function bg(n){return I(oa(n))?n.pop():void 0}(n),{args:r,keys:i}=function g4(n){if(1===n.length){const e=n[0];if(d4(e))return{args:e,keys:null};if(function m4(n){return n&&"object"==typeof n&&h4(n)===f4}(e)){const t=p4(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return hr([],e);const s=new We(function x4(n,e,t=he){return r=>{uM(e,()=>{const{length:i}=n,s=new Array(i);let a=i,l=i;for(let c=0;c<i;c++)uM(e,()=>{const h=hr(n[c],e);let g=!1;h.subscribe(hn(r,m=>{s[c]=m,g||(g=!0,l--),l||r.next(t(s.slice()))},()=>{--a||r.complete()}))},r)},r)}}(r,e,i?a=>function _4(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,a):he));return t?s.pipe(function b4(n){return en(e=>function v4(n,e){return y4(e)?n(...e):n(e)}(n,e))}(t)):s}function uM(n,e,t){n?Ht(t,n,e):e()}function Kc(n,e){const t=I(n)?n:()=>n,r=i=>i.error(t());return new We(e?i=>e.schedule(r,0,i):r)}const Jc=D(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function L0(...n){return function w4(){return ji(1)}()(hr(n,Xs(n)))}function cM(n){return new We(e=>{Tt(n()).subscribe(e)})}function N0(){return At((n,e)=>{let t=null;n._refCount++;const r=hn(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class dM extends We{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,On(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new w;const t=this.getSubject();e.add(this.source.subscribe(hn(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=w.EMPTY)}return e}refCount(){return N0()(this)}}function Ea(n,e){return At((t,r)=>{let i=null,s=0,a=!1;const l=()=>a&&!i&&r.complete();t.subscribe(hn(r,c=>{null==i||i.unsubscribe();let h=0;const g=s++;Tt(n(c,g)).subscribe(i=hn(r,m=>r.next(e?e(c,m,g,h++):m),()=>{i=null,l()}))},()=>{a=!0,l()}))})}function Qc(n){return n<=0?()=>Wi:At((e,t)=>{let r=0;e.subscribe(hn(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function T4(n,e,t,r,i){return(s,a)=>{let l=t,c=e,h=0;s.subscribe(hn(a,g=>{const m=h++;c=l?n(c,g,m):(l=!0,g),r&&a.next(c)},i&&(()=>{l&&a.next(c),a.complete()})))}}function hM(n,e){return At(T4(n,e,arguments.length>=2,!0))}function Bo(n,e){return At((t,r)=>{let i=0;t.subscribe(hn(r,s=>n.call(e,s,i++)&&r.next(s)))})}function Da(n){return At((e,t)=>{let s,r=null,i=!1;r=e.subscribe(hn(t,void 0,void 0,a=>{s=Tt(n(a,Da(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function ed(n,e){return I(e)?Bn(n,e,1):Bn(n,1)}function F0(n){return n<=0?()=>Wi:At((e,t)=>{let r=[];e.subscribe(hn(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function fM(n=M4){return At((e,t)=>{let r=!1;e.subscribe(hn(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function M4(){return new Jc}function k0(n){return At((e,t)=>{let r=!1;e.subscribe(hn(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Aa(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Bo((i,s)=>n(i,s,r)):he,Qc(1),t?k0(e):fM(()=>new Jc))}function Wr(n,e,t){const r=I(n)||e||t?{next:n,error:e,complete:t}:n;return r?At((i,s)=>{var a;null===(a=r.subscribe)||void 0===a||a.call(r);let l=!0;i.subscribe(hn(s,c=>{var h;null===(h=r.next)||void 0===h||h.call(r,c),s.next(c)},()=>{var c;l=!1,null===(c=r.complete)||void 0===c||c.call(r),s.complete()},c=>{var h;l=!1,null===(h=r.error)||void 0===h||h.call(r,c),s.error(c)},()=>{var c,h;l&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(h=r.finalize)||void 0===h||h.call(r)}))}):he}function B0(n){return At((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}class uo{constructor(e,t){this.id=e,this.url=t}}class U0 extends uo{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ca extends uo{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Df extends uo{constructor(e,t,r){super(e,t),this.reason=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class pM extends uo{constructor(e,t,r){super(e,t),this.error=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class A4 extends uo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class C4 extends uo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class I4 extends uo{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class P4 extends uo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class O4 extends uo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class R4{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class L4{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class N4{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class F4{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class k4{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class B4{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gM{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const cn="primary";class V4{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ru(n){return new V4(n)}const V0="Redirecting to ",mM="ngNavigationCancelingError";function z0(n){const e=Error("NavigationCancelingError: "+(n||""));return e[mM]=!0,e}function $4(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const a=r[s],l=n[s];if(a.startsWith(":"))i[a.substring(1)]=l;else if(a!==l.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ks(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!yM(n[i],e[i]))return!1;return!0}function yM(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function vM(n){return Array.prototype.concat.apply([],n)}function bM(n){return n.length>0?n[n.length-1]:null}function Fr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Uo(n){return Rw(n)?n:$h(n)?hr(Promise.resolve(n)):nn(n)}const j4={exact:function wM(n,e,t){if(!Pa(n.segments,e.segments)||!Af(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!wM(n.children[r],e.children[r],t))return!1;return!0},subset:SM},_M={exact:function W4(n,e){return ks(n,e)},subset:function q4(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>yM(n[t],e[t]))},ignored:()=>!0};function xM(n,e,t){return j4[t.paths](n.root,e.root,t.matrixParams)&&_M[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function SM(n,e,t){return TM(n,e,e.segments,t)}function TM(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Pa(i,t)||e.hasChildren()||!Af(i,t,r))}if(n.segments.length===t.length){if(!Pa(n.segments,t)||!Af(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!SM(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Pa(n.segments,i)&&Af(n.segments,i,r)&&n.children[cn])&&TM(n.children[cn],e,s,r)}}function Af(n,e,t){return e.every((r,i)=>_M[t](n[i].parameters,r.parameters))}class Ia{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ru(this.queryParams)),this._queryParamMap}toString(){return Z4.serialize(this)}}class vn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Fr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Cf(this)}}class td{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ru(this.parameters)),this._parameterMap}toString(){return CM(this)}}function Pa(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class MM{}class EM{parse(e){const t=new sB(e);return new Ia(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${nd(e.root,!0)}`,r=function Q4(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${If(t)}=${If(i)}`).join("&"):`${If(t)}=${If(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function K4(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Z4=new EM;function Cf(n){return n.segments.map(e=>CM(e)).join("/")}function nd(n,e){if(!n.hasChildren())return Cf(n);if(e){const t=n.children[cn]?nd(n.children[cn],!1):"",r=[];return Fr(n.children,(i,s)=>{s!==cn&&r.push(`${s}:${nd(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function X4(n,e){let t=[];return Fr(n.children,(r,i)=>{i===cn&&(t=t.concat(e(r,i)))}),Fr(n.children,(r,i)=>{i!==cn&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===cn?[nd(n.children[cn],!1)]:[`${i}:${nd(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[cn]?`${Cf(n)}/${t[0]}`:`${Cf(n)}/(${t.join("//")})`}}function DM(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function If(n){return DM(n).replace(/%3B/gi,";")}function H0(n){return DM(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Pf(n){return decodeURIComponent(n)}function AM(n){return Pf(n.replace(/\+/g,"%20"))}function CM(n){return`${H0(n.path)}${function J4(n){return Object.keys(n).map(e=>`;${H0(e)}=${H0(n[e])}`).join("")}(n.parameters)}`}const eB=/^[^\/()?;=#]+/;function Of(n){const e=n.match(eB);return e?e[0]:""}const tB=/^[^=?&#]+/,rB=/^[^&#]+/;class sB{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new vn([],{}):new vn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[cn]=new vn(e,t)),r}parseSegment(){const e=Of(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new yt(4009,!1);return this.capture(e),new td(Pf(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Of(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Of(this.remaining);i&&(r=i,this.capture(r))}e[Pf(t)]=Pf(r)}parseQueryParam(e){const t=function nB(n){const e=n.match(tB);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const a=function iB(n){const e=n.match(rB);return e?e[0]:""}(this.remaining);a&&(r=a,this.capture(r))}const i=AM(t),s=AM(r);if(e.hasOwnProperty(i)){let a=e[i];Array.isArray(a)||(a=[a],e[i]=a),a.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Of(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new yt(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=cn);const a=this.parseChildren();t[s]=1===Object.keys(a).length?a[cn]:new vn([],a),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new yt(4011,!1)}}class IM{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=G0(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=G0(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=j0(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return j0(e,this._root).map(t=>t.value)}}function G0(n,e){if(n===e.value)return e;for(const t of e.children){const r=G0(n,t);if(r)return r}return null}function j0(n,e){if(n===e.value)return[e];for(const t of e.children){const r=j0(n,t);if(r.length)return r.unshift(e),r}return[]}class co{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function iu(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class PM extends IM{constructor(e,t){super(e),this.snapshot=t,W0(this,e)}toString(){return this.snapshot.toString()}}function OM(n,e){const t=function oB(n,e){const a=new Rf([],{},{},"",{},cn,e,null,n.root,-1,{});return new LM("",new co(a,[]))}(n,e),r=new ys([new td("",{})]),i=new ys({}),s=new ys({}),a=new ys({}),l=new ys(""),c=new su(r,i,a,l,s,cn,e,t.root);return c.snapshot=t.root,new PM(new co(c,[]),t)}class su{constructor(e,t,r,i,s,a,l,c){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=a,this.component=l,this._futureSnapshot=c}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(en(e=>ru(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(en(e=>ru(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function RM(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function aB(n){return n.reduce((e,t)=>{var r;return{params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign(Object.assign(Object.assign({},t.data),e.resolve),null===(r=t.routeConfig)||void 0===r?void 0:r.data),t._resolvedData)}},{params:{},data:{},resolve:{}})}(t.slice(r))}class Rf{constructor(e,t,r,i,s,a,l,c,h,g,m,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=a,this.component=l,this.routeConfig=c,this._urlSegment=h,this._lastPathIndex=g,this._correctedLastPathIndex=null!=_?_:g,this._resolve=m}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ru(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ru(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class LM extends IM{constructor(e,t){super(t),this.url=e,W0(this,t)}toString(){return NM(this._root)}}function W0(n,e){e.value._routerState=n,e.children.forEach(t=>W0(n,t))}function NM(n){const e=n.children.length>0?` { ${n.children.map(NM).join(", ")} } `:"";return`${n.value}${e}`}function q0(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ks(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),ks(e.params,t.params)||n.params.next(t.params),function H4(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ks(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),ks(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Y0(n,e){const t=ks(n.params,e.params)&&function Y4(n,e){return Pa(n,e)&&n.every((t,r)=>ks(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Y0(n.parent,e.parent))}function rd(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function uB(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return rd(n,r,i);return rd(n,r)})}(n,e,t);return new co(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const a=s.route;return a.value._futureSnapshot=e.value,a.children=e.children.map(l=>rd(n,l)),a}}const r=function cB(n){return new su(new ys(n.url),new ys(n.params),new ys(n.queryParams),new ys(n.fragment),new ys(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>rd(n,s));return new co(r,i)}}function Lf(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function id(n){return"object"==typeof n&&null!=n&&n.outlets}function Z0(n,e,t,r,i){let s={};if(r&&Fr(r,(l,c)=>{s[c]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`}),n===e)return new Ia(t,s,i);const a=FM(n,e,t);return new Ia(a,s,i)}function FM(n,e,t){const r={};return Fr(n.children,(i,s)=>{r[s]=i===e?t:FM(i,e,t)}),new vn(n.segments,r)}class kM{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Lf(r[0]))throw new yt(4003,false);const i=r.find(id);if(i&&i!==bM(r))throw new yt(4004,false)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class K0{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function BM(n,e,t){if(n||(n=new vn([],{})),0===n.segments.length&&n.hasChildren())return Nf(n,e,t);const r=function mB(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const a=n.segments[i],l=t[r];if(id(l))break;const c=`${l}`,h=r<t.length-1?t[r+1]:null;if(i>0&&void 0===c)break;if(c&&h&&"object"==typeof h&&void 0===h.outlets){if(!VM(c,h,a))return s;r+=2}else{if(!VM(c,{},a))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new vn(n.segments.slice(0,r.pathIndex),{});return s.children[cn]=new vn(n.segments.slice(r.pathIndex),n.children),Nf(s,0,i)}return r.match&&0===i.length?new vn(n.segments,{}):r.match&&!n.hasChildren()?J0(n,e,t):r.match?Nf(n,0,i):J0(n,e,t)}function Nf(n,e,t){if(0===t.length)return new vn(n.segments,{});{const r=function gB(n){return id(n[0])?n[0].outlets:{[cn]:n}}(t),i={};return Fr(r,(s,a)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[a]=BM(n.children[a],e,s))}),Fr(n.children,(s,a)=>{void 0===r[a]&&(i[a]=s)}),new vn(n.segments,i)}}function J0(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(id(s)){const c=yB(s.outlets);return new vn(r,c)}if(0===i&&Lf(t[0])){r.push(new td(n.segments[e].path,UM(t[0]))),i++;continue}const a=id(s)?s.outlets[cn]:`${s}`,l=i<t.length-1?t[i+1]:null;a&&l&&Lf(l)?(r.push(new td(a,UM(l))),i+=2):(r.push(new td(a,{})),i++)}return new vn(r,{})}function yB(n){const e={};return Fr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=J0(new vn([],{}),0,t))}),e}function UM(n){const e={};return Fr(n,(t,r)=>e[r]=`${t}`),e}function VM(n,e,t){return n==t.path&&ks(e,t.parameters)}class vB{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new sd,this.attachRef=null}}class sd{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new vB,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}const Ff=!1;let Q0=(()=>{class n{constructor(t,r,i,s,a){this.parentContexts=t,this.location=r,this.changeDetector=s,this.environmentInjector=a,this.activated=null,this._activatedRoute=null,this.activateEvents=new Gr,this.deactivateEvents=new Gr,this.attachEvents=new Gr,this.detachEvents=new Gr,this.name=i||cn,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){var t;(null===(t=this.parentContexts.getContext(this.name))||void 0===t?void 0:t.outlet)===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new yt(4012,Ff);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new yt(4012,Ff);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new yt(4012,Ff);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new yt(4013,Ff);this._activatedRoute=t;const i=this.location,a=t._futureSnapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,c=new bB(t,l,i.injector);if(r&&function _B(n){return!!n.resolveComponentFactory}(r)){const h=r.resolveComponentFactory(a);this.activated=i.createComponent(h,i.length,c)}else this.activated=i.createComponent(a,{index:i.length,injector:c,environmentInjector:null!=r?r:this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(Dt(sd),Dt(fs),gc("name"),Dt(o0),Dt(_a))},n.\u0275dir=Nr({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class bB{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===su?this.route:e===sd?this.childContexts:this.parent.get(e,t)}}let zM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Ai({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&pn(0,"router-outlet")},dependencies:[Q0],encapsulation:2}),n})();function $M(n,e){var t;return n.providers&&!n._injector&&(n._injector=Kh(n.providers,e,`Route: ${n.path}`)),null!==(t=n._injector)&&void 0!==t?t:e}function tv(n){const e=n.children&&n.children.map(tv),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==cn&&(t.component=zM),t}function Qi(n){return n.outlet||cn}function HM(n,e){const t=n.filter(r=>Qi(r)===e);return t.push(...n.filter(r=>Qi(r)!==e)),t}function GM(n){var e;if(!n)return null;if(null!==(e=n.routeConfig)&&void 0!==e&&e._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){const r=t.routeConfig;if(null!=r&&r._loadedInjector)return r._loadedInjector;if(null!=r&&r._injector)return r._injector}return null}class MB{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),q0(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=iu(t);e.children.forEach(s=>{const a=s.value.outlet;this.deactivateRoutes(s,i[a],r),delete i[a]}),Fr(i,(s,a)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const a=r.getContext(i.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=iu(e);for(const a of Object.keys(s))this.deactivateRouteAndItsChildren(s[a],i);if(r&&r.outlet){const a=r.outlet.detach(),l=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:l})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=iu(e);for(const a of Object.keys(s))this.deactivateRouteAndItsChildren(s[a],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=iu(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new B4(s.value.snapshot))}),e.children.length&&this.forwardEvent(new F4(e.value.snapshot))}activateRoutes(e,t,r){var i;const s=e.value,a=t?t.value:null;if(q0(s),s===a)if(s.component){const l=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const l=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const c=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),l.children.onOutletReAttached(c.contexts),l.attachRef=c.componentRef,l.route=c.route.value,l.outlet&&l.outlet.attach(c.componentRef,c.route.value),q0(c.route.value),this.activateChildRoutes(e,null,l.children)}else{const c=GM(s.snapshot),h=null!==(i=null==c?void 0:c.get(Uc))&&void 0!==i?i:null;l.attachRef=null,l.route=s,l.resolver=h,l.injector=c,l.outlet&&l.outlet.activateWith(s,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}function kf(n){return"function"==typeof n}function Oa(n){return n instanceof Ia}const od=Symbol("INITIAL_VALUE");function ad(){return Ea(n=>lM(n.map(e=>e.pipe(Qc(1),function S4(...n){const e=Xs(n);return At((t,r)=>{(e?L0(n,t,e):L0(n,t)).subscribe(r)})}(od)))).pipe(hM((e,t)=>{let r=!1;return t.reduce((i,s,a)=>i!==od?i:(s===od&&(r=!0),r||!1!==s&&a!==t.length-1&&!Oa(s)?i:s),e)},od),Bo(e=>e!==od),en(e=>Oa(e)?e:!0===e),Qc(1)))}const jM={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Bf(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},jM):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||$4)(t,n,e);if(!s)return Object.assign({},jM);const a={};Fr(s.posParams,(c,h)=>{a[h]=c.path});const l=s.consumed.length>0?Object.assign(Object.assign({},a),s.consumed[s.consumed.length-1].parameters):a;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:l,positionalParamSegments:null!==(r=s.posParams)&&void 0!==r?r:{}}}function Uf(n,e,t,r,i="corrected"){if(t.length>0&&function RB(n,e,t){return t.some(r=>Vf(n,e,r)&&Qi(r)!==cn)}(n,t,r)){const a=new vn(e,function OB(n,e,t,r){const i={};i[cn]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Qi(s)!==cn){const a=new vn([],{});a._sourceSegment=n,a._segmentIndexShift=e.length,i[Qi(s)]=a}return i}(n,e,r,new vn(t,n.children)));return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:[]}}if(0===t.length&&function LB(n,e,t){return t.some(r=>Vf(n,e,r))}(n,t,r)){const a=new vn(n.segments,function PB(n,e,t,r,i,s){const a={};for(const l of r)if(Vf(n,t,l)&&!i[Qi(l)]){const c=new vn([],{});c._sourceSegment=n,c._segmentIndexShift="legacy"===s?n.segments.length:e.length,a[Qi(l)]=c}return Object.assign(Object.assign({},i),a)}(n,e,t,r,n.children,i));return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}const s=new vn(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function Vf(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function WM(n,e,t,r){return!!(Qi(n)===r||r!==cn&&Vf(e,t,n))&&("**"===n.path||Bf(e,n,t).matched)}function qM(n,e,t){return 0===e.length&&!n.children[t]}const zf=!1;class $f{constructor(e){this.segmentGroup=e||null}}class YM{constructor(e){this.urlTree=e}}function ld(n){return Kc(new $f(n))}function XM(n){return Kc(new YM(n))}class BB{constructor(e,t,r,i,s){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0}apply(){const e=Uf(this.urlTree.root,[],[],this.config).segmentGroup,t=new vn(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,cn).pipe(en(s=>this.createUrlTree(nv(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Da(s=>{if(s instanceof YM)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof $f?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,cn).pipe(en(i=>this.createUrlTree(nv(i),e.queryParams,e.fragment))).pipe(Da(i=>{throw i instanceof $f?this.noMatchError(i):i}))}noMatchError(e){return new yt(4002,zf)}createUrlTree(e,t,r){const i=e.segments.length>0?new vn([],{[cn]:e}):e;return new Ia(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe(en(s=>new vn([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return hr(i).pipe(ed(s=>{const a=r.children[s],l=HM(t,s);return this.expandSegmentGroup(e,l,a,s).pipe(en(c=>({segment:c,outlet:s})))}),hM((s,a)=>(s[a.outlet]=a.segment,s),{}),function E4(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Bo((i,s)=>n(i,s,r)):he,F0(1),t?k0(e):fM(()=>new Jc))}())}expandSegment(e,t,r,i,s,a){return hr(r).pipe(ed(l=>this.expandSegmentAgainstRoute(e,t,r,l,i,s,a).pipe(Da(h=>{if(h instanceof $f)return nn(null);throw h}))),Aa(l=>!!l),Da((l,c)=>{if(l instanceof Jc||"EmptyError"===l.name)return qM(t,i,s)?nn(new vn([],{})):ld(t);throw l}))}expandSegmentAgainstRoute(e,t,r,i,s,a,l){return WM(i,t,s,a)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,a):l&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,a):ld(t):ld(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,a){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,a):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,a)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?XM(s):this.lineralizeSegments(r,s).pipe(Bn(a=>{const l=new vn(a,{});return this.expandSegment(e,l,t,a,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,a){const{matched:l,consumedSegments:c,remainingSegments:h,positionalParamSegments:g}=Bf(t,i,s);if(!l)return ld(t);const m=this.applyRedirectCommands(c,i.redirectTo,g);return i.redirectTo.startsWith("/")?XM(m):this.lineralizeSegments(i,m).pipe(Bn(_=>this.expandSegment(e,t,r,_.concat(h),a,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){if("**"===r.path)return e=$M(r,e),r.loadChildren?(r._loadedRoutes?nn({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe(en(m=>(r._loadedRoutes=m.routes,r._loadedInjector=m.injector,new vn(i,{})))):nn(new vn(i,{}));const{matched:a,consumedSegments:l,remainingSegments:c}=Bf(t,r,i);return a?(e=$M(r,e),this.getChildConfig(e,r,i).pipe(Bn(g=>{var m;const _=null!==(m=g.injector)&&void 0!==m?m:e,T=g.routes,{segmentGroup:A,slicedSegments:C}=Uf(t,l,c,T),O=new vn(A.segments,A.children);if(0===C.length&&O.hasChildren())return this.expandChildren(_,T,O).pipe(en(G=>new vn(l,G)));if(0===T.length&&0===C.length)return nn(new vn(l,{}));const B=Qi(r)===s;return this.expandSegment(_,O,T,C,B?cn:s,!0).pipe(en(z=>new vn(l.concat(z.segments),z.children)))}))):ld(t)}getChildConfig(e,t,r){return t.children?nn({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?nn({routes:t._loadedRoutes,injector:t._loadedInjector}):this.runCanLoadGuards(e,t,r).pipe(Bn(i=>i?this.configLoader.loadChildren(e,t).pipe(Wr(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function FB(n){return Kc(z0(zf))}())):nn({routes:[],injector:e})}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?nn(i.map(a=>{const l=e.get(a);return Uo(function DB(n){return n&&kf(n.canLoad)}(l)?l.canLoad(t,r):l(t,r))})).pipe(ad(),Wr(a=>{if(!Oa(a))return;const l=z0(V0+this.urlSerializer.serialize(a));throw l.url=a,l}),en(a=>!0===a)):nn(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return nn(r);if(i.numberOfChildren>1||!i.children[cn])return Kc(new yt(4e3,zf));i=i.children[cn]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new Ia(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Fr(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const l=i.substring(1);r[s]=t[l]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let a={};return Fr(t.children,(l,c)=>{a[c]=this.createSegmentGroup(e,l,r,i)}),new vn(s,a)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new yt(4001,zf);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function nv(n){const e={};for(const r of Object.keys(n.children)){const s=nv(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function UB(n){if(1===n.numberOfChildren&&n.children[cn]){const e=n.children[cn];return new vn(n.segments.concat(e.segments),e.children)}return n}(new vn(n.segments,e))}class ZM{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Hf{constructor(e,t){this.component=e,this.route=t}}function zB(n,e,t){const r=n._root;return ud(r,e?e._root:null,t,[r.value])}function Gf(n,e,t){const r=GM(e);return(null!=r?r:t).get(n)}function ud(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=iu(e);return n.children.forEach(a=>{(function HB(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,a=e?e.value:null,l=t?t.getContext(n.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){const c=function GB(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Pa(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Pa(n.url,e.url)||!ks(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Y0(n,e)||!ks(n.queryParams,e.queryParams);default:return!Y0(n,e)}}(a,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new ZM(r)):(s.data=a.data,s._resolvedData=a._resolvedData),ud(n,e,s.component?l?l.children:null:t,r,i),c&&l&&l.outlet&&l.outlet.isActivated&&i.canDeactivateChecks.push(new Hf(l.outlet.component,a))}else a&&cd(e,l,i),i.canActivateChecks.push(new ZM(r)),ud(n,null,s.component?l?l.children:null:t,r,i)})(a,s[a.value.outlet],t,r.concat([a.value]),i),delete s[a.value.outlet]}),Fr(s,(a,l)=>cd(a,t.getContext(l),i)),i}function cd(n,e,t){const r=iu(n),i=n.value;Fr(r,(s,a)=>{cd(s,i.component?e?e.children.getContext(a):null:e,t)}),t.canDeactivateChecks.push(new Hf(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class QB{}function KM(n){return new We(e=>e.error(n))}class tU{constructor(e,t,r,i,s,a){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=a}recognize(){const e=Uf(this.urlTree.root,[],[],this.config.filter(a=>void 0===a.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,cn);if(null===t)return null;const r=new Rf([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},cn,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new co(r,t),s=new LM(this.url,i);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const t=e.value,r=RM(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const s of Object.keys(t.children)){const a=t.children[s],l=HM(e,s),c=this.processSegmentGroup(l,a,s);if(null===c)return null;r.push(...c)}const i=JM(r);return function nU(n){n.sort((e,t)=>e.value.outlet===cn?-1:t.value.outlet===cn?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const s of e){const a=this.processSegmentAgainstRoute(s,t,r,i);if(null!==a)return a}return qM(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){var s,a,l,c;if(e.redirectTo||!WM(e,t,r,i))return null;let h,g=[],m=[];if("**"===e.path){const B=r.length>0?bM(r).parameters:{},V=eE(t)+r.length;h=new Rf(r,B,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,nE(e),Qi(e),null!==(a=null!==(s=e.component)&&void 0!==s?s:e._loadedComponent)&&void 0!==a?a:null,e,QM(t),V,rE(e),V)}else{const B=Bf(t,e,r);if(!B.matched)return null;g=B.consumedSegments,m=B.remainingSegments;const V=eE(t)+g.length;h=new Rf(g,B.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,nE(e),Qi(e),null!==(c=null!==(l=e.component)&&void 0!==l?l:e._loadedComponent)&&void 0!==c?c:null,e,QM(t),V,rE(e),V)}const _=function rU(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(e),{segmentGroup:T,slicedSegments:A}=Uf(t,g,m,_.filter(B=>void 0===B.redirectTo),this.relativeLinkResolution);if(0===A.length&&T.hasChildren()){const B=this.processChildren(_,T);return null===B?null:[new co(h,B)]}if(0===_.length&&0===A.length)return[new co(h,[])];const C=Qi(e)===i,O=this.processSegment(_,T,A,C?cn:i);return null===O?null:[new co(h,O)]}}function iU(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function JM(n){const e=[],t=new Set;for(const r of n){if(!iU(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=JM(r.children);e.push(new co(r.value,i))}return e.filter(r=>!t.has(r))}function QM(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function eE(n){var e,t;let r=n,i=null!==(e=r._segmentIndexShift)&&void 0!==e?e:0;for(;r._sourceSegment;)r=r._sourceSegment,i+=null!==(t=r._segmentIndexShift)&&void 0!==t?t:0;return i-1}function nE(n){return n.data||{}}function rE(n){return n.resolve||{}}const iv=Symbol("RouteTitle");function iE(n){return"string"==typeof n.title||null===n.title}function sv(n){return Ea(e=>{const t=n(e);return t?hr(t).pipe(en(()=>e)):nn(e)})}class fU extends class hU{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const ov=new Jt("ROUTES");let av=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return nn(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Uo(t.loadComponent()).pipe(Wr(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),B0(()=>{this.componentLoaders.delete(t)})),i=new dM(r,()=>new Kt).pipe(N0());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return nn({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(en(l=>{this.onLoadEndListener&&this.onLoadEndListener(r);let c,h,g=!1;Array.isArray(l)?h=l:(c=l.create(t).injector,h=vM(c.get(ov,[],Rt.Self|Rt.Optional)));return{routes:h.map(tv),injector:c}}),B0(()=>{this.childrenLoaders.delete(r)})),a=new dM(s,()=>new Kt).pipe(N0());return this.childrenLoaders.set(r,a),a}loadModuleFactoryOrRoutes(t){return Uo(t()).pipe(Bn(r=>r instanceof nS||Array.isArray(r)?nn(r):hr(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(Et(li),Et(Ky))},n.\u0275prov=gt({token:n,factory:n.\u0275fac}),n})();class gU{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function mU(n){throw n}function yU(n,e,t){return e.parse("/")}const vU={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},bU={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let qr=(()=>{class n{constructor(t,r,i,s,a,l,c){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=c,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Kt,this.errorHandler=mU,this.malformedUriErrorHandler=yU,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>nn(void 0),this.urlHandlingStrategy=new gU,this.routeReuseStrategy=new fU,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=a.get(av),this.configLoader.onLoadEndListener=_=>this.triggerEvent(new L4(_)),this.configLoader.onLoadStartListener=_=>this.triggerEvent(new R4(_)),this.ngModule=a.get(Lo),this.console=a.get(pN);const m=a.get(pr);this.isNgZoneEnabled=m instanceof pr&&pr.isInAngularZone(),this.resetConfig(c),this.currentUrlTree=function G4(){return new Ia(new vn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=OM(this.currentUrlTree,this.rootComponentType),this.transitions=new ys({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Bo(i=>0!==i.id),en(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Ea(i=>{let s=!1,a=!1;return nn(i).pipe(Wr(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Ea(l=>{const c=this.browserUrlTree.toString(),h=!this.navigated||l.extractedUrl.toString()!==c||c!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||h)&&this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return aE(l.source)&&(this.browserUrlTree=l.extractedUrl),nn(l).pipe(Ea(m=>{const _=this.transitions.getValue();return r.next(new U0(m.id,this.serializeUrl(m.extractedUrl),m.source,m.restoredState)),_!==this.transitions.getValue()?Wi:Promise.resolve(m)}),function VB(n,e,t,r){return Ea(i=>function kB(n,e,t,r,i){return new BB(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe(en(s=>Object.assign(Object.assign({},i),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Wr(m=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:m.urlAfterRedirects})}),function sU(n,e,t,r,i){return Bn(s=>function eU(n,e,t,r,i="emptyOnly",s="legacy"){try{const a=new tU(n,e,t,r,i,s).recognize();return null===a?KM(new QB):nn(a)}catch(a){return KM(a)}}(n,e,s.urlAfterRedirects,t(s.urlAfterRedirects),r,i).pipe(en(a=>Object.assign(Object.assign({},s),{targetSnapshot:a}))))}(this.rootComponentType,this.config,m=>this.serializeUrl(m),this.paramsInheritanceStrategy,this.relativeLinkResolution),Wr(m=>{if("eager"===this.urlUpdateStrategy){if(!m.extras.skipLocationChange){const T=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl);this.setBrowserUrl(T,m)}this.browserUrlTree=m.urlAfterRedirects}const _=new A4(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);r.next(_)}));if(h&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:_,extractedUrl:T,source:A,restoredState:C,extras:O}=l,B=new U0(_,this.serializeUrl(T),A,C);r.next(B);const V=OM(T,this.rootComponentType).snapshot;return nn(Object.assign(Object.assign({},l),{targetSnapshot:V,urlAfterRedirects:T,extras:Object.assign(Object.assign({},O),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=l.rawUrl,l.resolve(null),Wi}),Wr(l=>{const c=new C4(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}),en(l=>Object.assign(Object.assign({},l),{guards:zB(l.targetSnapshot,l.currentSnapshot,this.rootContexts)})),function jB(n,e){return Bn(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:a}}=t;return 0===a.length&&0===s.length?nn(Object.assign(Object.assign({},t),{guardsResult:!0})):function WB(n,e,t,r){return hr(n).pipe(Bn(i=>function JB(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?nn(s.map(l=>{const c=Gf(l,e,i);return Uo(function IB(n){return n&&kf(n.canDeactivate)}(c)?c.canDeactivate(n,e,t,r):c(n,e,t,r)).pipe(Aa())})).pipe(ad()):nn(!0)}(i.component,i.route,t,e,r)),Aa(i=>!0!==i,!0))}(a,r,i,n).pipe(Bn(l=>l&&function EB(n){return"boolean"==typeof n}(l)?function qB(n,e,t,r){return hr(e).pipe(ed(i=>L0(function XB(n,e){return null!==n&&e&&e(new N4(n)),nn(!0)}(i.route.parent,r),function YB(n,e){return null!==n&&e&&e(new k4(n)),nn(!0)}(i.route,r),function KB(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(a=>function $B(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(a)).filter(a=>null!==a).map(a=>cM(()=>nn(a.guards.map(c=>{const h=Gf(c,a.node,t);return Uo(function CB(n){return n&&kf(n.canActivateChild)}(h)?h.canActivateChild(r,n):h(r,n)).pipe(Aa())})).pipe(ad())));return nn(s).pipe(ad())}(n,i.path,t),function ZB(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return nn(!0);const i=r.map(s=>cM(()=>{const a=Gf(s,e,t);return Uo(function AB(n){return n&&kf(n.canActivate)}(a)?a.canActivate(e,n):a(e,n)).pipe(Aa())}));return nn(i).pipe(ad())}(n,i.route,t))),Aa(i=>!0!==i,!0))}(r,s,n,e):nn(l)),en(l=>Object.assign(Object.assign({},t),{guardsResult:l})))})}(this.ngModule.injector,l=>this.triggerEvent(l)),Wr(l=>{if(Oa(l.guardsResult)){const h=z0(`Redirecting to "${this.serializeUrl(l.guardsResult)}"`);throw h.url=l.guardsResult,h}const c=new I4(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.triggerEvent(c)}),Bo(l=>!!l.guardsResult||(this.restoreHistory(l),this.cancelNavigationTransition(l,""),!1)),sv(l=>{if(l.guards.canActivateChecks.length)return nn(l).pipe(Wr(c=>{const h=new P4(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(h)}),Ea(c=>{let h=!1;return nn(c).pipe(function oU(n,e){return Bn(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return nn(t);let s=0;return hr(i).pipe(ed(a=>function aU(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==(null==i?void 0:i.title)&&!iE(i)&&(s[iv]=i.title),function lU(n,e,t,r){const i=function uU(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return nn({});const s={};return hr(i).pipe(Bn(a=>function cU(n,e,t,r){const i=Gf(n,e,r);return Uo(i.resolve?i.resolve(e,t):i(e,t))}(n[a],e,t,r).pipe(Aa(),Wr(l=>{s[a]=l}))),F0(1),function D4(n){return en(()=>n)}(s),Da(a=>a instanceof Jc?Wi:Kc(a)))}(s,n,e,r).pipe(en(a=>(n._resolvedData=a,n.data=RM(n,t).resolve,i&&iE(i)&&(n.data[iv]=i.title),null)))}(a.route,r,n,e)),Wr(()=>s++),F0(1),Bn(a=>s===i.length?nn(t):Wi))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Wr({next:()=>h=!0,complete:()=>{h||(this.restoreHistory(c),this.cancelNavigationTransition(c,"At least one route resolver didn't emit any value."))}}))}),Wr(c=>{const h=new O4(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(h)}))}),sv(l=>{const c=h=>{var g;const m=[];(null===(g=h.routeConfig)||void 0===g?void 0:g.loadComponent)&&!h.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(h.routeConfig).pipe(Wr(_=>{h.component=_}),en(()=>{})));for(const _ of h.children)m.push(...c(_));return m};return lM(c(l.targetSnapshot.root)).pipe(k0(),Qc(1))}),sv(()=>this.afterPreactivation()),en(l=>{const c=function lB(n,e,t){const r=rd(n,e._root,t?t._root:void 0);return new PM(r,e)}(this.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return Object.assign(Object.assign({},l),{targetRouterState:c})}),Wr(l=>{this.currentUrlTree=l.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),this.routerState=l.targetRouterState,"deferred"===this.urlUpdateStrategy&&(l.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,l),this.browserUrlTree=l.urlAfterRedirects)}),((n,e,t)=>en(r=>(new MB(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,l=>this.triggerEvent(l)),Wr({next(){s=!0},complete(){s=!0}}),B0(()=>{var l;s||a||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(l=this.currentNavigation)||void 0===l?void 0:l.id)===i.id&&(this.currentNavigation=null)}),Da(l=>{if(a=!0,function z4(n){return n&&n[mM]}(l)){const c=Oa(l.url);c||(this.navigated=!0,this.restoreHistory(i,!0));const h=new Df(i.id,this.serializeUrl(i.extractedUrl),l.message);if(r.next(h),c){const g=this.urlHandlingStrategy.merge(l.url,this.rawUrlTree),m={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||aE(i.source)};this.scheduleNavigation(g,"imperative",null,m,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const c=new pM(i.id,this.serializeUrl(i.extractedUrl),l);r.next(c);try{i.resolve(this.errorHandler(l))}catch(h){i.reject(h)}}return Wi}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const s={replaceUrl:!0},a=null!==(i=t.state)&&void 0!==i&&i.navigationId?t.state:null;if(a){const c=Object.assign({},a);delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(s.state=c)}const l=this.parseUrl(t.url);this.scheduleNavigation(l,r,a,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(tv),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:a,queryParamsHandling:l,preserveFragment:c}=r,h=i||this.routerState.root,g=c?this.currentUrlTree.fragment:a;let m=null;switch(l){case"merge":m=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":m=this.currentUrlTree.queryParams;break;default:m=s||null}return null!==m&&(m=this.removeEmptyProps(m)),function dB(n,e,t,r,i){var s;if(0===t.length)return Z0(e.root,e.root,e.root,r,i);const l=function hB(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new kM(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,a)=>{if("object"==typeof s&&null!=s){if(s.outlets){const l={};return Fr(s.outlets,(c,h)=>{l[h]="string"==typeof c?c.split("/"):c}),[...i,{outlets:l}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===a?(s.split("/").forEach((l,c)=>{0==c&&"."===l||(0==c&&""===l?t=!0:".."===l?e++:""!=l&&i.push(l))}),i):[...i,s]},[]);return new kM(t,e,r)}(t);return l.toRoot()?Z0(e.root,e.root,new vn([],{}),r,i):function c(g){var m;const _=function fB(n,e,t,r){return n.isAbsolute?new K0(e.root,!0,0):-1===r?new K0(t,t===e.root,0):function pB(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new yt(4005,!1);i=r.segments.length}return new K0(r,!1,i-s)}(t,r+(Lf(n.commands[0])?0:1),n.numberOfDoubleDots)}(l,e,null===(m=n.snapshot)||void 0===m?void 0:m._urlSegment,g),T=_.processChildren?Nf(_.segmentGroup,_.index,l.commands):BM(_.segmentGroup,_.index,l.commands);return Z0(e.root,_.segmentGroup,T,r,i)}(null===(s=n.snapshot)||void 0===s?void 0:s._lastPathIndex)}(h,this.currentUrlTree,t,m,null!=g?g:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Oa(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function _U(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new yt(4008,!1)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},vU):!1===r?Object.assign({},bU):r,Oa(t))return xM(this.currentUrlTree,t,i);const s=this.parseUrl(t);return xM(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(t=>{var r;this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Ca(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,null===(r=this.titleStrategy)||void 0===r||r.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,s,a){var l,c;if(this.disposed)return Promise.resolve(!1);let h,g,m;a?(h=a.resolve,g=a.reject,m=a.promise):m=new Promise((A,C)=>{h=A,g=C});const _=++this.navigationId;let T;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),T=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(l=this.browserPageId)&&void 0!==l?l:0:(null!==(c=this.browserPageId)&&void 0!==c?c:0)+1):T=0,this.setTransition({id:_,targetPageId:T,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:h,reject:g,promise:m,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),m.catch(A=>Promise.reject(A))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),s=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,r=!1){var i,s;if("computed"===this.canceledNavigationResolution){const a=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===a?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===a&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(a)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new Df(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){jm()},n.\u0275prov=gt({token:n,factory:n.\u0275fac}),n})();function aE(n){return"imperative"!==n}let lv=(()=>{class n{constructor(t,r,i,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=a,this.commands=null,this.onChanges=new Kt,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:nu(this.skipLocationChange),replaceUrl:nu(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:nu(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(Dt(qr),Dt(su),gc("tabindex"),Dt(Yh),Dt(No))},n.\u0275dir=Nr({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&xi("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[ga]}),n})(),ou=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new Kt,this.subscription=t.events.subscribe(s=>{s instanceof Ca&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,s,a){if(0!==t||r||i||s||a||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const l={skipLocationChange:nu(this.skipLocationChange),replaceUrl:nu(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,l),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:nu(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(Dt(qr),Dt(su),Dt(Ma))},n.\u0275dir=Nr({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&xi("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&vy("target",r.target)("href",r.href,Eh)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[ga]}),n})(),lE=(()=>{class n{constructor(t,r,i,s,a,l){this.router=t,this.element=r,this.renderer=i,this.cdr=s,this.link=a,this.linkWithHref=l,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Gr,this.routerEventsSubscription=t.events.subscribe(c=>{c instanceof Ca&&this.update()})}ngAfterContentInit(){nn(this.links.changes,this.linksWithHrefs.changes,nn(null)).pipe(ji()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const r=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=hr(r).pipe(ji()).subscribe(i=>{this.isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function xU(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(Dt(qr),Dt(No),Dt(Yh),Dt(o0),Dt(lv,8),Dt(ou,8))},n.\u0275dir=Nr({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,i){if(1&t&&(jy(i,lv,5),jy(i,ou,5)),2&t){let s;Kl(s=Jl())&&(r.links=s),Kl(s=Jl())&&(r.linksWithHrefs=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[ga]}),n})(),uE=(()=>{class n{buildTitle(t){var r;let i,s=t.root;for(;void 0!==s;)i=null!==(r=this.getResolvedTitleForRoute(s))&&void 0!==r?r:i,s=s.children.find(a=>a.outlet===cn);return i}getResolvedTitleForRoute(t){return t.data[iv]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=gt({token:n,factory:function(){return Po(wU)},providedIn:"root"}),n})(),wU=(()=>{class n extends uE{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(Et(rM))},n.\u0275prov=gt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class cE{}let dE=(()=>{class n{constructor(t,r,i,s,a){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Bo(t=>t instanceof Ca),ed(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){var i,s,a;const l=[];for(const c of r){c.providers&&!c._injector&&(c._injector=Kh(c.providers,t,`Route: ${c.path}`));const h=null!==(i=c._injector)&&void 0!==i?i:t,g=null!==(s=c._loadedInjector)&&void 0!==s?s:h;c.loadChildren&&!c._loadedRoutes||c.loadComponent&&!c._loadedComponent?l.push(this.preloadConfig(h,c)):(c.children||c._loadedRoutes)&&l.push(this.processRoutes(g,null!==(a=c.children)&&void 0!==a?a:c._loadedRoutes))}return hr(l).pipe(ji())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):nn(null);const s=i.pipe(Bn(a=>{var l;return null===a?nn(void 0):(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,this.processRoutes(null!==(l=a.injector)&&void 0!==l?l:t,a.routes))}));return r.loadComponent&&!r._loadedComponent?hr([s,this.loader.loadComponent(r)]).pipe(ji()):s})}}return n.\u0275fac=function(t){return new(t||n)(Et(qr),Et(Ky),Et(_a),Et(cE),Et(av))},n.\u0275prov=gt({token:n,factory:n.\u0275fac}),n})();const hE=new Jt("");let SU=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof U0?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ca&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof gM&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new gM(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){jm()},n.\u0275prov=gt({token:n,factory:n.\u0275fac}),n})();const uv=new Jt("ROUTER_CONFIGURATION",{providedIn:"root",factory:()=>({})}),fE=new Jt("ROUTER_FORROOT_GUARD"),pE=new Jt(""),TU=[f0,{provide:MM,useClass:EM},{provide:qr,useFactory:function IU(n,e,t,r,i,s,a,l={},c,h){const g=new qr(null,n,e,t,r,i,vM(s));return c&&(g.urlHandlingStrategy=c),h&&(g.routeReuseStrategy=h),g.titleStrategy=a,function PU(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,g),g},deps:[MM,sd,f0,li,Ky,ov,uE,uv,[class pU{},new ma],[class dU{},new ma]]},sd,{provide:su,useFactory:function OU(n){return n.routerState.root},deps:[qr]},av];function MU(){return new eT("Router",qr)}let gE=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[TU,[],mE(t),{provide:fE,useFactory:CU,deps:[[qr,new ma,new wc]]},{provide:uv,useValue:r||{}},null!=r&&r.useHash?{provide:Ma,useClass:iF}:{provide:Ma,useClass:ST},{provide:hE,useFactory:()=>{const n=Po(qr),e=Po(Ek),t=Po(uv);return t.scrollOffset&&e.setOffset(t.scrollOffset),new SU(n,e,t)}},null!=r&&r.preloadingStrategy?UU(r.preloadingStrategy):[],{provide:eT,multi:!0,useFactory:MU},null!=r&&r.initialNavigation?LU(r):[],[{provide:yE,useFactory:RU},{provide:qS,multi:!0,useExisting:yE}]]}}static forChild(t){return{ngModule:n,providers:[mE(t)]}}}return n.\u0275fac=function(t){return new(t||n)(Et(fE,8),Et(qr,8))},n.\u0275mod=ua({type:n}),n.\u0275inj=Rn({}),n})();function CU(n){return"guarded"}function mE(n){return[{provide:_C,multi:!0,useValue:n},{provide:ov,multi:!0,useValue:n}]}function RU(){const n=Po(li);return e=>{var t,r;const i=n.get(af);if(e!==i.components[0])return;const s=n.get(qr),a=n.get(vE);null===n.get(cv,null,Rt.Optional)&&s.initialNavigation(),null===(t=n.get(pE,null,Rt.Optional))||void 0===t||t.setUpPreloading(),null===(r=n.get(hE,null,Rt.Optional))||void 0===r||r.init(),s.resetRootComponentType(i.componentTypes[0]),a.next(),a.complete()}}const yE=new Jt("");function LU(n){return["disabled"===n.initialNavigation?[{provide:nf,multi:!0,useFactory:()=>{const n=Po(qr);return()=>{n.setUpLocationChangeListener()}}},{provide:cv,useValue:"disabled"}]:[],"enabledBlocking"===n.initialNavigation?[{provide:cv,useValue:"enabledBlocking"},{provide:nf,multi:!0,deps:[li],useFactory:n=>{const e=n.get(tF,Promise.resolve(null));let t=!1;return()=>e.then(()=>new Promise(i=>{const s=n.get(qr),a=n.get(vE);(function r(i){const s=n.get(qr);s.events.pipe(Bo(a=>a instanceof Ca||a instanceof Df||a instanceof pM),en(a=>{if(a instanceof Ca)return!0;const l=s.navigationId!==a.id,c=a instanceof Df&&-1!==a.reason.indexOf(V0);return!(!l&&!c)&&null}),Bo(a=>null!==a),Qc(1)).subscribe(()=>{i()})})(()=>{i(!0),t=!0}),s.afterPreactivation=()=>(i(!0),t||a.closed?nn(void 0):a),s.initialNavigation()}))}}]:[]]}const vE=new Jt("",{factory:()=>new Kt}),cv=new Jt("");function UU(n){return[dE,{provide:pE,useExisting:dE},{provide:cE,useExisting:n}]}let jf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Ai({type:n,selectors:[["appHeader"]],decls:4,vars:0,consts:[[1,"ui","fixed","menu"],[1,"ui","container"],["routerLink","/",1,"header","item"]],template:function(t,r){1&t&&(Ke(0,"div",0)(1,"div",1)(2,"a",2),It(3,"Vision Example"),it()()())},dependencies:[ou]}),n})(),Wf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Ai({type:n,selectors:[["appFooter"]],decls:55,vars:0,consts:[[1,"ui","vertical","fotter","segment"],[1,"ui","center","aligned","container"],[1,"ui","stackable","divided","grid"],[1,"three","wide","column"],[1,"ui","header"],[1,"ui","link","list"],["href","#",1,"item"],[1,"seven","wide","column"],[1,"ui","section","divider"],["src","assets/images/logo.jpg",1,"ui","centered","image"],[1,"ui","horizontal","small","divided","link","list"]],template:function(t,r){1&t&&(Ke(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),It(5,"Group 1"),it(),Ke(6,"div",5)(7,"a",6),It(8,"Link One"),it(),Ke(9,"a",6),It(10,"Link Two"),it(),Ke(11,"a",6),It(12,"Link Three"),it(),Ke(13,"a",6),It(14,"Link Four"),it()()(),Ke(15,"div",3)(16,"h4",4),It(17,"Group 2"),it(),Ke(18,"div",5)(19,"a",6),It(20,"Link One"),it(),Ke(21,"a",6),It(22,"Link Two"),it(),Ke(23,"a",6),It(24,"Link Three"),it(),Ke(25,"a",6),It(26,"Link Four"),it()()(),Ke(27,"div",3)(28,"h4",4),It(29,"Group 3"),it(),Ke(30,"div",5)(31,"a",6),It(32,"Link One"),it(),Ke(33,"a",6),It(34,"Link Two"),it(),Ke(35,"a",6),It(36,"Link Three"),it(),Ke(37,"a",6),It(38,"Link Four"),it()()(),Ke(39,"div",7)(40,"h4",4),It(41,"Footer Header"),it(),Ke(42,"p"),It(43,"Extra space for a call to action inside the footer that could help re-engage users."),it()()(),pn(44,"div",8)(45,"img",9),Ke(46,"div",10)(47,"a",6),It(48,"Site Map"),it(),Ke(49,"a",6),It(50,"Contact Us"),it(),Ke(51,"a",6),It(52,"Terms and Conditions"),it(),Ke(53,"a",6),It(54,"Privacy Policy"),it()()()())}}),n})(),qf=(()=>{class n{constructor(){}ngOnInit(){$(".ui.accordion").accordion()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Ai({type:n,selectors:[["appBanner"]],decls:7,vars:0,consts:[[1,"ui","grid"],[1,"row"]],template:function(t,r){1&t&&(Ke(0,"div",0)(1,"div",1),It(2," BANNER1 "),it(),Ke(3,"div",1),It(4," BANNER2 "),it(),Ke(5,"div",1),It(6," BANNER3 "),it()())}}),n})(),Yf=(()=>{class n{constructor(){}ngAfterViewInit(){$(".ui.accordion").accordion()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Ai({type:n,selectors:[["appSideMenu"]],decls:18,vars:0,consts:[[1,"ui","grid"],[1,"row"],[1,"column"],[1,"ui","accordion"],[1,"active","title"],[1,"dropdown","icon"],[1,"active","content"],[1,"ui","link","selection","list"],["routerLink","/onnx",1,"item"],["routerLink","/renderer",1,"item"],["routerLink","/portrait",1,"item"],["routerLink","/template",1,"item"]],template:function(t,r){1&t&&(Ke(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"b"),pn(6,"i",5),It(7,"MENU"),it()(),Ke(8,"div",6)(9,"div",7)(10,"a",8),It(11,"onnx"),it(),Ke(12,"a",9),It(13,"renderer"),it(),Ke(14,"a",10),It(15,"portrait"),it(),Ke(16,"a",11),It(17,"template"),it()()()()()()())},dependencies:[ou]}),n})(),VU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Ai({type:n,selectors:[["ng-component"]],decls:12,vars:0,consts:[[1,"ui","main","text"],[2,"height","3em"],[1,"ui","stackable","three","column","padded","grid"],[1,"three","wide","column","olive"],[1,"ten","wide","column","black"],["src","assets/images/dance.gif",1,"ui","centered","image"]],template:function(t,r){1&t&&(pn(0,"appHeader"),Ke(1,"div",0)(2,"div",1),It(3,"\xa0"),it(),Ke(4,"div",2)(5,"div",3),pn(6,"appSideMenu"),it(),Ke(7,"div",4),pn(8,"img",5),it(),Ke(9,"div",3),pn(10,"appBanner"),it()()(),pn(11,"appFooter"))},dependencies:[jf,Wf,qf,Yf]}),n})();var Xf=k(861),Zf=k(534);const zU=["canvas"];let $U=(()=>{class n{constructor(){this.CANVAS_SIZE=280,this.CANVAS_SCALE=.5,this.isMouseDown=!1,this.hasIntroText=!0,this.lastX=0,this.lastY=0}Init(){var t=this;return(0,Xf.Z)(function*(){console.log(Zf.env),console.log(Zf.env.wasm),t.session=yield Zf.InferenceSession.create("./assets/onnx_model.onnx",{executionProviders:["webgl"]}),console.log(t.session.inputNames),console.log(t.session.outputNames)})()}get canvas(){return this.canvasRef.nativeElement}ngAfterViewInit(){this.ctx=this.canvas.getContext("2d"),this.ctx.lineWidth=28,this.ctx.lineJoin="round",this.ctx.font="28px sans-serif",this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.fillStyle="#212121",this.ctx.fillText("Loading...",this.CANVAS_SIZE/2,this.CANVAS_SIZE/2),this.ctx.strokeStyle="#212121",this.ctx.clearRect(0,0,this.CANVAS_SIZE,this.CANVAS_SIZE),this.ctx.fillText("Draw a number here!",this.CANVAS_SIZE/2,this.CANVAS_SIZE/2),this.Init()}onResize(t){}clearCanvas(){this.ctx.clearRect(0,0,this.CANVAS_SIZE,this.CANVAS_SIZE);for(let t=0;t<10;t++){let r=document.getElementById(`prediction-${t}`);r.className="prediction-col",r.children[0].children[0].style.height="0"}}drawLine(t,r,i,s){this.ctx.beginPath(),this.ctx.moveTo(t,r),this.ctx.lineTo(i,s),this.ctx.closePath(),this.ctx.stroke(),this.updatePredictions()}updatePredictions(){var t=this;return(0,Xf.Z)(function*(){const r=t.ctx.getImageData(0,0,t.CANVAS_SIZE,t.CANVAS_SIZE),s={0:new Zf.Tensor("float32",new Float32Array(r.data))},a=t.session.outputNames[0],h=(yield t.session.run(s))[a].data,g=Math.max(...h);for(let m=0;m<h.length;m++){let _=document.getElementById(`prediction-${m}`);null!=_&&(_.children[0].children[0].style.height=100*h[m]+"%",_.className=h[m]===g?"prediction-col top-prediction":"prediction-col")}})()}canvasMouseDown(t){this.isMouseDown=!0,this.hasIntroText&&(this.clearCanvas(),this.hasIntroText=!1);const i=t.offsetY/this.CANVAS_SCALE;this.lastX=t.offsetX/this.CANVAS_SCALE+.001,this.lastY=i+.001,this.canvasMouseMove(t)}canvasMouseMove(t){const r=t.offsetX/this.CANVAS_SCALE,i=t.offsetY/this.CANVAS_SCALE;this.isMouseDown&&this.drawLine(this.lastX,this.lastY,r,i),this.lastX=r,this.lastY=i}bodyMouseUp(t){this.isMouseDown=!1}bodyMouseOut(t){(!t.relatedTarget||"HTML"===t.relatedTarget.nodeName)&&(this.isMouseDown=!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Ai({type:n,selectors:[["ng-component"]],viewQuery:function(t,r){if(1&t&&Qh(zU,5),2&t){let i;Kl(i=Jl())&&(r.canvasRef=i.first)}},decls:68,vars:0,consts:[[1,"ui","main","text"],[2,"height","3em"],[1,"ui","stackable","three","column","padded","grid"],[1,"three","wide","column","olive"],[1,"ten","wide","column","black"],[1,"center_container",3,"pointerout","pointerup"],[1,"card","elevation"],["id","canvas","width","280","height","280",1,"canvas","elevation",3,"pointerdown","pointermove"],["canvas",""],["id","clear-button",1,"button",3,"click"],[1,"predictions"],["id","prediction-0",1,"prediction-col"],[1,"prediction-bar-container"],[1,"prediction-bar"],[1,"prediction-number"],["id","prediction-1",1,"prediction-col"],["id","prediction-2",1,"prediction-col"],["id","prediction-3",1,"prediction-col"],["id","prediction-4",1,"prediction-col"],["id","prediction-5",1,"prediction-col"],["id","prediction-6",1,"prediction-col"],["id","prediction-7",1,"prediction-col"],["id","prediction-8",1,"prediction-col"],["id","prediction-9",1,"prediction-col"]],template:function(t,r){1&t&&(pn(0,"appHeader"),Ke(1,"div",0)(2,"div",1),It(3,"\xa0"),it(),Ke(4,"div",2)(5,"div",3),pn(6,"appSideMenu"),it(),Ke(7,"div",4)(8,"div",5),xi("pointerout",function(s){return r.bodyMouseOut(s)})("pointerup",function(s){return r.bodyMouseUp(s)}),Ke(9,"div",6)(10,"canvas",7,8),xi("pointerdown",function(s){return r.canvasMouseDown(s)})("pointermove",function(s){return r.canvasMouseMove(s)}),it(),Ke(12,"div",9),xi("click",function(){return r.clearCanvas()}),It(13,"CLEAR"),it(),Ke(14,"div",10)(15,"div",11)(16,"div",12),pn(17,"div",13),it(),Ke(18,"div",14),It(19,"0"),it()(),Ke(20,"div",15)(21,"div",12),pn(22,"div",13),it(),Ke(23,"div",14),It(24,"1"),it()(),Ke(25,"div",16)(26,"div",12),pn(27,"div",13),it(),Ke(28,"div",14),It(29,"2"),it()(),Ke(30,"div",17)(31,"div",12),pn(32,"div",13),it(),Ke(33,"div",14),It(34,"3"),it()(),Ke(35,"div",18)(36,"div",12),pn(37,"div",13),it(),Ke(38,"div",14),It(39,"4"),it()(),Ke(40,"div",19)(41,"div",12),pn(42,"div",13),it(),Ke(43,"div",14),It(44,"5"),it()(),Ke(45,"div",20)(46,"div",12),pn(47,"div",13),it(),Ke(48,"div",14),It(49,"6"),it()(),Ke(50,"div",21)(51,"div",12),pn(52,"div",13),it(),Ke(53,"div",14),It(54,"7"),it()(),Ke(55,"div",22)(56,"div",12),pn(57,"div",13),it(),Ke(58,"div",14),It(59,"8"),it()(),Ke(60,"div",23)(61,"div",12),pn(62,"div",13),it(),Ke(63,"div",14),It(64,"9"),it()()()()()(),Ke(65,"div",3),pn(66,"appBanner"),it()()(),pn(67,"appFooter"))},dependencies:[jf,Wf,qf,Yf],styles:['.center_container[_ngcontent-%COMP%]{align-items:center;background:#fafafa;color:#212121;display:flex;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol;justify-content:center;margin:0}.elevation[_ngcontent-%COMP%]{box-shadow:0 3px 1px -2px #0003,0 2px 2px #00000024,0 1px 5px #0000001f}.card[_ngcontent-%COMP%]{background:#fff;border-radius:4px;padding:16px}.canvas[_ngcontent-%COMP%]{border-radius:4px;height:140px;width:140px}.button[_ngcontent-%COMP%]{background-color:#fff;border-radius:4px;box-shadow:0 3px 1px -2px #0003,0 2px 2px #00000024,0 1px 5px #0000001f,inset 0 0 #0000004d;cursor:pointer;font-size:14px;font-weight:500;letter-spacing:1.25px;line-height:36px;margin:16px 0;text-align:center;transition:box-shadow .2s cubic-bezier(.4,0,.2,1);-webkit-user-select:none;user-select:none;width:140px}.button[_ngcontent-%COMP%]:hover{background:#f5f5f5}.button[_ngcontent-%COMP%]:active{box-shadow:0 0 #0003,0 0 #00000024,0 0 #0000001f,inset 0 0 2px #0000004d;transition:box-shadow .05s cubic-bezier(.4,0,.2,1)}.predictions[_ngcontent-%COMP%]{display:flex}.prediction-col[_ngcontent-%COMP%]{padding:0 2px}.prediction-bar-container[_ngcontent-%COMP%]{background:#f5f5f5;height:140px;width:10px;position:relative}.prediction-bar[_ngcontent-%COMP%]{background:#e0e0e0;bottom:0;position:absolute;width:100%}.prediction-number[_ngcontent-%COMP%]{color:#bdbdbd;font-size:14px;text-align:center}.top-prediction[_ngcontent-%COMP%]   .prediction-bar[_ngcontent-%COMP%]{background:#00f0ff}.top-prediction[_ngcontent-%COMP%]   .prediction-number[_ngcontent-%COMP%]{color:#00f0ff;font-weight:700}']}),n})();const bE=class HU{static isWebGLAvailable(){try{const e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(e){return!1}}static isWebGL2Available(){try{const e=document.createElement("canvas");return!(!window.WebGL2RenderingContext||!e.getContext("webgl2"))}catch(e){return!1}}static getWebGLErrorMessage(){return this.getErrorMessage(1)}static getWebGL2ErrorMessage(){return this.getErrorMessage(2)}static getErrorMessage(e){const r={1:window.WebGLRenderingContext,2:window.WebGL2RenderingContext};let i='Your $0 does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">$1</a>';const s=document.createElement("div");return s.id="webglmessage",s.style.fontFamily="monospace",s.style.fontSize="13px",s.style.fontWeight="normal",s.style.textAlign="center",s.style.background="#fff",s.style.color="#000",s.style.padding="1.5em",s.style.width="400px",s.style.margin="5em auto 0",i=i.replace("$0",r[e]?"graphics card":"browser"),i=i.replace("$1",{1:"WebGL",2:"WebGL 2"}[e]),s.innerHTML=i,s}},Si=1001,Mr=1003,yr=1006,Na=1009,Fa=1014,Ho=1015,fd=1016,hu=1020,vs=1023,ka=1026,fu=1027,Ba=3e3,sr=3001,po="srgb",Ua="srgb-linear";class Va{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const r=this._listeners;void 0===r[e]&&(r[e]=[]),-1===r[e].indexOf(t)&&r[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const r=this._listeners;return void 0!==r[e]&&-1!==r[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const i=this._listeners[e];if(void 0!==i){const s=i.indexOf(t);-1!==s&&i.splice(s,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const r=this._listeners[e.type];if(void 0!==r){e.target=this;const i=r.slice(0);for(let s=0,a=i.length;s<a;s++)i[s].call(this,e);e.target=null}}}const Yr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],za=Math.PI/180,pd=180/Math.PI;function Fi(){const n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Yr[255&n]+Yr[n>>8&255]+Yr[n>>16&255]+Yr[n>>24&255]+"-"+Yr[255&e]+Yr[e>>8&255]+"-"+Yr[e>>16&15|64]+Yr[e>>24&255]+"-"+Yr[63&t|128]+Yr[t>>8&255]+"-"+Yr[t>>16&255]+Yr[t>>24&255]+Yr[255&r]+Yr[r>>8&255]+Yr[r>>16&255]+Yr[r>>24&255]).toLowerCase()}function cr(n,e,t){return Math.max(e,Math.min(t,n))}function gd(n,e,t){return(1-t)*n+t*e}function Ev(n){return 0==(n&n-1)&&0!==n}function sp(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}class Le{constructor(e=0,t=0){Le.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,r){return void 0!==r&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*r-a*i+e.x,this.y=s*i+a*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class ki{constructor(){ki.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,r,i,s,a,l,c,h){const g=this.elements;return g[0]=e,g[1]=i,g[2]=l,g[3]=t,g[4]=s,g[5]=c,g[6]=r,g[7]=a,g[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,a=r[0],l=r[3],c=r[6],h=r[1],g=r[4],m=r[7],_=r[2],T=r[5],A=r[8],C=i[0],O=i[3],B=i[6],V=i[1],z=i[4],G=i[7],X=i[2],J=i[5],ae=i[8];return s[0]=a*C+l*V+c*X,s[3]=a*O+l*z+c*J,s[6]=a*B+l*G+c*ae,s[1]=h*C+g*V+m*X,s[4]=h*O+g*z+m*J,s[7]=h*B+g*G+m*ae,s[2]=_*C+T*V+A*X,s[5]=_*O+T*z+A*J,s[8]=_*B+T*G+A*ae,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],a=e[4],l=e[5],c=e[6],h=e[7],g=e[8];return t*a*g-t*l*h-r*s*g+r*l*c+i*s*h-i*a*c}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],a=e[4],l=e[5],c=e[6],h=e[7],g=e[8],m=g*a-l*h,_=l*c-g*s,T=h*s-a*c,A=t*m+r*_+i*T;if(0===A)return this.set(0,0,0,0,0,0,0,0,0);const C=1/A;return e[0]=m*C,e[1]=(i*h-g*r)*C,e[2]=(l*r-i*a)*C,e[3]=_*C,e[4]=(g*t-i*c)*C,e[5]=(i*s-l*t)*C,e[6]=T*C,e[7]=(r*c-h*t)*C,e[8]=(a*t-r*s)*C,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,a,l){const c=Math.cos(s),h=Math.sin(s);return this.set(r*c,r*h,-r*(c*a+h*l)+a+e,-i*h,i*c,-i*(-h*a+c*l)+l+t,0,0,1),this}scale(e,t){const r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=t,r[4]*=t,r[7]*=t,this}rotate(e){const t=Math.cos(e),r=Math.sin(e),i=this.elements,s=i[0],a=i[3],l=i[6],c=i[1],h=i[4],g=i[7];return i[0]=t*s+r*c,i[3]=t*a+r*h,i[6]=t*l+r*g,i[1]=-r*s+t*c,i[4]=-r*a+t*h,i[7]=-r*l+t*g,this}translate(e,t){const r=this.elements;return r[0]+=e*r[2],r[3]+=e*r[5],r[6]+=e*r[8],r[1]+=t*r[2],r[4]+=t*r[5],r[7]+=t*r[8],this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}function rD(n){for(let e=n.length-1;e>=0;--e)if(n[e]>65535)return!0;return!1}function md(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function $a(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function op(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const Dv={[po]:{[Ua]:$a},[Ua]:{[po]:op}},bs={legacyMode:!0,get workingColorSpace(){return Ua},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.legacyMode||e===t||!e||!t)return n;if(Dv[e]&&void 0!==Dv[e][t]){const r=Dv[e][t];return n.r=r(n.r),n.g=r(n.g),n.b=r(n.b),n}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}},iD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Er={r:0,g:0,b:0},_s={h:0,s:0,l:0},ap={h:0,s:0,l:0};function Av(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+6*(e-n)*(2/3-t):n}function lp(n,e){return e.r=n.r,e.g=n.g,e.b=n.b,e}let vu,bt=(()=>{class n{constructor(t,r,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===r&&void 0===i?this.set(t):this.setRGB(t,r,i)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,r=po){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,bs.toWorkingColorSpace(this,r),this}setRGB(t,r,i,s=Ua){return this.r=t,this.g=r,this.b=i,bs.toWorkingColorSpace(this,s),this}setHSL(t,r,i,s=Ua){if(t=function Mv(n,e){return(n%e+e)%e}(t,1),r=cr(r,0,1),i=cr(i,0,1),0===r)this.r=this.g=this.b=i;else{const a=i<=.5?i*(1+r):i+r-i*r,l=2*i-a;this.r=Av(l,a,t+1/3),this.g=Av(l,a,t),this.b=Av(l,a,t-1/3)}return bs.toWorkingColorSpace(this,s),this}setStyle(t,r=po){function i(a){void 0!==a&&parseFloat(a)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let s;if(s=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let a;const c=s[2];switch(s[1]){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return this.r=Math.min(255,parseInt(a[1],10))/255,this.g=Math.min(255,parseInt(a[2],10))/255,this.b=Math.min(255,parseInt(a[3],10))/255,bs.toWorkingColorSpace(this,r),i(a[4]),this;if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return this.r=Math.min(100,parseInt(a[1],10))/100,this.g=Math.min(100,parseInt(a[2],10))/100,this.b=Math.min(100,parseInt(a[3],10))/100,bs.toWorkingColorSpace(this,r),i(a[4]),this;break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c)){const h=parseFloat(a[1])/360,g=parseInt(a[2],10)/100,m=parseInt(a[3],10)/100;return i(a[4]),this.setHSL(h,g,m,r)}}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(t)){const a=s[1],l=a.length;if(3===l)return this.r=parseInt(a.charAt(0)+a.charAt(0),16)/255,this.g=parseInt(a.charAt(1)+a.charAt(1),16)/255,this.b=parseInt(a.charAt(2)+a.charAt(2),16)/255,bs.toWorkingColorSpace(this,r),this;if(6===l)return this.r=parseInt(a.charAt(0)+a.charAt(1),16)/255,this.g=parseInt(a.charAt(2)+a.charAt(3),16)/255,this.b=parseInt(a.charAt(4)+a.charAt(5),16)/255,bs.toWorkingColorSpace(this,r),this}return t&&t.length>0?this.setColorName(t,r):this}setColorName(t,r=po){const i=iD[t.toLowerCase()];return void 0!==i?this.setHex(i,r):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=$a(t.r),this.g=$a(t.g),this.b=$a(t.b),this}copyLinearToSRGB(t){return this.r=op(t.r),this.g=op(t.g),this.b=op(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=po){return bs.fromWorkingColorSpace(lp(this,Er),t),cr(255*Er.r,0,255)<<16^cr(255*Er.g,0,255)<<8^cr(255*Er.b,0,255)<<0}getHexString(t=po){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,r=Ua){bs.fromWorkingColorSpace(lp(this,Er),r);const i=Er.r,s=Er.g,a=Er.b,l=Math.max(i,s,a),c=Math.min(i,s,a);let h,g;const m=(c+l)/2;if(c===l)h=0,g=0;else{const _=l-c;switch(g=m<=.5?_/(l+c):_/(2-l-c),l){case i:h=(s-a)/_+(s<a?6:0);break;case s:h=(a-i)/_+2;break;case a:h=(i-s)/_+4}h/=6}return t.h=h,t.s=g,t.l=m,t}getRGB(t,r=Ua){return bs.fromWorkingColorSpace(lp(this,Er),r),t.r=Er.r,t.g=Er.g,t.b=Er.b,t}getStyle(t=po){return bs.fromWorkingColorSpace(lp(this,Er),t),t!==po?`color(${t} ${Er.r} ${Er.g} ${Er.b})`:`rgb(${255*Er.r|0},${255*Er.g|0},${255*Er.b|0})`}offsetHSL(t,r,i){return this.getHSL(_s),_s.h+=t,_s.s+=r,_s.l+=i,this.setHSL(_s.h,_s.s,_s.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,r){return this.r=t.r+r.r,this.g=t.g+r.g,this.b=t.b+r.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,r){return this.r+=(t.r-this.r)*r,this.g+=(t.g-this.g)*r,this.b+=(t.b-this.b)*r,this}lerpColors(t,r,i){return this.r=t.r+(r.r-t.r)*i,this.g=t.g+(r.g-t.g)*i,this.b=t.b+(r.b-t.b)*i,this}lerpHSL(t,r){this.getHSL(_s),t.getHSL(ap);const i=gd(_s.h,ap.h,r),s=gd(_s.s,ap.s,r),a=gd(_s.l,ap.l,r);return this.setHSL(i,s,a),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,r=0){return this.r=t[r],this.g=t[r+1],this.b=t[r+2],this}toArray(t=[],r=0){return t[r]=this.r,t[r+1]=this.g,t[r+2]=this.b,t}fromBufferAttribute(t,r){return this.r=t.getX(r),this.g=t.getY(r),this.b=t.getZ(r),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}return n.NAMES=iD,n})();class sD{static getDataURL(e){if(/^data:/i.test(e.src)||"undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===vu&&(vu=md("canvas")),vu.width=e.width,vu.height=e.height;const r=vu.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=vu}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const t=md("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let a=0;a<s.length;a++)s[a]=255*$a(s[a]/255);return r.putImageData(i,0,0),t}if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t[r]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*$a(t[r]/255)):$a(t[r]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class bu{constructor(e=null){this.isSource=!0,this.uuid=Fi(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(null!==i){let s;if(Array.isArray(i)){s=[];for(let a=0,l=i.length;a<l;a++)s.push(Cv(i[a].isDataTexture?i[a].image:i[a]))}else s=Cv(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function Cv(n){return"undefined"!=typeof HTMLImageElement&&n instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&n instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&n instanceof ImageBitmap?sD.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let rV=0,Go=(()=>{class n extends Va{constructor(t=n.DEFAULT_IMAGE,r=n.DEFAULT_MAPPING,i=Si,s=Si,a=yr,l=1008,c=vs,h=Na,g=1,m=Ba){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:rV++}),this.uuid=Fi(),this.name="",this.source=new bu(t),this.mipmaps=[],this.mapping=r,this.wrapS=i,this.wrapT=s,this.magFilter=a,this.minFilter=l,this.anisotropy=g,this.format=c,this.internalFormat=null,this.type=h,this.offset=new Le(0,0),this.repeat=new Le(1,1),this.center=new Le(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ki,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=m,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const r=void 0===t||"string"==typeof t;if(!r&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),r||(t.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case 1e3:t.x=t.x-Math.floor(t.x);break;case Si:t.x=t.x<0?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case 1e3:t.y=t.y-Math.floor(t.y);break;case Si:t.y=t.y<0?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=300,n})();class Ln{constructor(e=0,t=0,r=0,i=1){Ln.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*r+a[8]*i+a[12]*s,this.y=a[1]*t+a[5]*r+a[9]*i+a[13]*s,this.z=a[2]*t+a[6]*r+a[10]*i+a[14]*s,this.w=a[3]*t+a[7]*r+a[11]*i+a[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const c=e.elements,h=c[0],g=c[4],m=c[8],_=c[1],T=c[5],A=c[9],C=c[2],O=c[6],B=c[10];if(Math.abs(g-_)<.01&&Math.abs(m-C)<.01&&Math.abs(A-O)<.01){if(Math.abs(g+_)<.1&&Math.abs(m+C)<.1&&Math.abs(A+O)<.1&&Math.abs(h+T+B-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const z=(h+1)/2,G=(T+1)/2,X=(B+1)/2,J=(g+_)/4,ae=(m+C)/4,Y=(A+O)/4;return z>G&&z>X?z<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(z),i=J/r,s=ae/r):G>X?G<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(G),r=J/i,s=Y/i):X<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(X),r=ae/s,i=Y/s),this.set(r,i,s,t),this}let V=Math.sqrt((O-A)*(O-A)+(m-C)*(m-C)+(_-g)*(_-g));return Math.abs(V)<.001&&(V=1),this.x=(O-A)/V,this.y=(m-C)/V,this.z=(_-g)/V,this.w=Math.acos((h+T+B-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,r){return void 0!==r&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Ha extends Va{constructor(e,t,r={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Ln(0,0,e,t),this.scissorTest=!1,this.viewport=new Ln(0,0,e,t),this.texture=new Go({width:e,height:t,depth:1},r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,this.texture.internalFormat=void 0!==r.internalFormat?r.internalFormat:null,this.texture.minFilter=void 0!==r.minFilter?r.minFilter:yr,this.depthBuffer=void 0===r.depthBuffer||r.depthBuffer,this.stencilBuffer=void 0!==r.stencilBuffer&&r.stencilBuffer,this.depthTexture=void 0!==r.depthTexture?r.depthTexture:null,this.samples=void 0!==r.samples?r.samples:0}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new bu(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Iv extends Go{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Mr,this.minFilter=Mr,this.wrapR=Si,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class oD extends Go{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Mr,this.minFilter=Mr,this.wrapR=Si,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class di{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerp(e,t,r,i){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),r.slerpQuaternions(e,t,i)}static slerpFlat(e,t,r,i,s,a,l){let c=r[i+0],h=r[i+1],g=r[i+2],m=r[i+3];const _=s[a+0],T=s[a+1],A=s[a+2],C=s[a+3];if(0===l)return e[t+0]=c,e[t+1]=h,e[t+2]=g,void(e[t+3]=m);if(1===l)return e[t+0]=_,e[t+1]=T,e[t+2]=A,void(e[t+3]=C);if(m!==C||c!==_||h!==T||g!==A){let O=1-l;const B=c*_+h*T+g*A+m*C,V=B>=0?1:-1,z=1-B*B;if(z>Number.EPSILON){const X=Math.sqrt(z),J=Math.atan2(X,B*V);O=Math.sin(O*J)/X,l=Math.sin(l*J)/X}const G=l*V;if(c=c*O+_*G,h=h*O+T*G,g=g*O+A*G,m=m*O+C*G,O===1-l){const X=1/Math.sqrt(c*c+h*h+g*g+m*m);c*=X,h*=X,g*=X,m*=X}}e[t]=c,e[t+1]=h,e[t+2]=g,e[t+3]=m}static multiplyQuaternionsFlat(e,t,r,i,s,a){const l=r[i],c=r[i+1],h=r[i+2],g=r[i+3],m=s[a],_=s[a+1],T=s[a+2],A=s[a+3];return e[t]=l*A+g*m+c*T-h*_,e[t+1]=c*A+g*_+h*m-l*T,e[t+2]=h*A+g*T+l*_-c*m,e[t+3]=g*A-l*m-c*_-h*T,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const r=e._x,i=e._y,s=e._z,a=e._order,l=Math.cos,c=Math.sin,h=l(r/2),g=l(i/2),m=l(s/2),_=c(r/2),T=c(i/2),A=c(s/2);switch(a){case"XYZ":this._x=_*g*m+h*T*A,this._y=h*T*m-_*g*A,this._z=h*g*A+_*T*m,this._w=h*g*m-_*T*A;break;case"YXZ":this._x=_*g*m+h*T*A,this._y=h*T*m-_*g*A,this._z=h*g*A-_*T*m,this._w=h*g*m+_*T*A;break;case"ZXY":this._x=_*g*m-h*T*A,this._y=h*T*m+_*g*A,this._z=h*g*A+_*T*m,this._w=h*g*m-_*T*A;break;case"ZYX":this._x=_*g*m-h*T*A,this._y=h*T*m+_*g*A,this._z=h*g*A-_*T*m,this._w=h*g*m+_*T*A;break;case"YZX":this._x=_*g*m+h*T*A,this._y=h*T*m+_*g*A,this._z=h*g*A-_*T*m,this._w=h*g*m-_*T*A;break;case"XZY":this._x=_*g*m-h*T*A,this._y=h*T*m-_*g*A,this._z=h*g*A+_*T*m,this._w=h*g*m+_*T*A;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],a=t[1],l=t[5],c=t[9],h=t[2],g=t[6],m=t[10],_=r+l+m;if(_>0){const T=.5/Math.sqrt(_+1);this._w=.25/T,this._x=(g-c)*T,this._y=(s-h)*T,this._z=(a-i)*T}else if(r>l&&r>m){const T=2*Math.sqrt(1+r-l-m);this._w=(g-c)/T,this._x=.25*T,this._y=(i+a)/T,this._z=(s+h)/T}else if(l>m){const T=2*Math.sqrt(1+l-r-m);this._w=(s-h)/T,this._x=(i+a)/T,this._y=.25*T,this._z=(c+g)/T}else{const T=2*Math.sqrt(1+m-r-l);this._w=(a-i)/T,this._x=(s+h)/T,this._y=(c+g)/T,this._z=.25*T}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(cr(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(0===r)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,a=e._w,l=t._x,c=t._y,h=t._z,g=t._w;return this._x=r*g+a*l+i*h-s*c,this._y=i*g+a*c+s*l-r*h,this._z=s*g+a*h+r*c-i*l,this._w=a*g-r*l-i*c-s*h,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const r=this._x,i=this._y,s=this._z,a=this._w;let l=a*e._w+r*e._x+i*e._y+s*e._z;if(l<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l>=1)return this._w=a,this._x=r,this._y=i,this._z=s,this;const c=1-l*l;if(c<=Number.EPSILON){const T=1-t;return this._w=T*a+t*this._w,this._x=T*r+t*this._x,this._y=T*i+t*this._y,this._z=T*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const h=Math.sqrt(c),g=Math.atan2(h,l),m=Math.sin((1-t)*g)/h,_=Math.sin(t*g)/h;return this._w=a*m+this._w*_,this._x=r*m+this._x*_,this._y=i*m+this._y*_,this._z=s*m+this._z*_,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(s),r*Math.cos(s),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Q{constructor(e=0,t=0,r=0){Q.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return void 0===r&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(aD.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(aD.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,a=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*a,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*a,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*a,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,a=e.y,l=e.z,c=e.w,h=c*t+a*i-l*r,g=c*r+l*t-s*i,m=c*i+s*r-a*t,_=-s*t-a*r-l*i;return this.x=h*c+_*-s+g*-l-m*-a,this.y=g*c+_*-a+m*-s-h*-l,this.z=m*c+_*-l+h*-a-g*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,a=t.x,l=t.y,c=t.z;return this.x=i*c-s*l,this.y=s*a-r*c,this.z=r*l-i*a,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return Pv.copy(this).projectOnVector(e),this.sub(Pv)}reflect(e){return this.sub(Pv.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(cr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,r){return void 0!==r&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Pv=new Q,aD=new di;class _u{constructor(e=new Q(1/0,1/0,1/0),t=new Q(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,r=1/0,i=1/0,s=-1/0,a=-1/0,l=-1/0;for(let c=0,h=e.length;c<h;c+=3){const g=e[c],m=e[c+1],_=e[c+2];g<t&&(t=g),m<r&&(r=m),_<i&&(i=_),g>s&&(s=g),m>a&&(a=m),_>l&&(l=_)}return this.min.set(t,r,i),this.max.set(s,a,l),this}setFromBufferAttribute(e){let t=1/0,r=1/0,i=1/0,s=-1/0,a=-1/0,l=-1/0;for(let c=0,h=e.count;c<h;c++){const g=e.getX(c),m=e.getY(c),_=e.getZ(c);g<t&&(t=g),m<r&&(r=m),_<i&&(i=_),g>s&&(s=g),m>a&&(a=m),_>l&&(l=_)}return this.min.set(t,r,i),this.max.set(s,a,l),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=Ga.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(void 0!==r)if(t&&null!=r.attributes&&void 0!==r.attributes.position){const s=r.attributes.position;for(let a=0,l=s.count;a<l;a++)Ga.fromBufferAttribute(s,a).applyMatrix4(e.matrixWorld),this.expandByPoint(Ga)}else null===r.boundingBox&&r.computeBoundingBox(),Ov.copy(r.boundingBox),Ov.applyMatrix4(e.matrixWorld),this.union(Ov);const i=e.children;for(let s=0,a=i.length;s<a;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Ga),Ga.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(yd),up.subVectors(this.max,yd),xu.subVectors(e.a,yd),wu.subVectors(e.b,yd),Su.subVectors(e.c,yd),jo.subVectors(wu,xu),Wo.subVectors(Su,wu),ja.subVectors(xu,Su);let t=[0,-jo.z,jo.y,0,-Wo.z,Wo.y,0,-ja.z,ja.y,jo.z,0,-jo.x,Wo.z,0,-Wo.x,ja.z,0,-ja.x,-jo.y,jo.x,0,-Wo.y,Wo.x,0,-ja.y,ja.x,0];return!(!Rv(t,xu,wu,Su,up)||(t=[1,0,0,0,1,0,0,0,1],!Rv(t,xu,wu,Su,up)))&&(cp.crossVectors(jo,Wo),t=[cp.x,cp.y,cp.z],Rv(t,xu,wu,Su,up))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Ga.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(Ga).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(go[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),go[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),go[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),go[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),go[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),go[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),go[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),go[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(go)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const go=[new Q,new Q,new Q,new Q,new Q,new Q,new Q,new Q],Ga=new Q,Ov=new _u,xu=new Q,wu=new Q,Su=new Q,jo=new Q,Wo=new Q,ja=new Q,yd=new Q,up=new Q,cp=new Q,Wa=new Q;function Rv(n,e,t,r,i){for(let s=0,a=n.length-3;s<=a;s+=3){Wa.fromArray(n,s);const l=i.x*Math.abs(Wa.x)+i.y*Math.abs(Wa.y)+i.z*Math.abs(Wa.z),c=e.dot(Wa),h=t.dot(Wa),g=r.dot(Wa);if(Math.max(-Math.max(c,h,g),Math.min(c,h,g))>l)return!1}return!0}const iV=new _u,lD=new Q,dp=new Q,Lv=new Q;class Tu{constructor(e=new Q,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;void 0!==t?r.copy(t):iV.setFromPoints(e).getCenter(r);let i=0;for(let s=0,a=e.length;s<a;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){Lv.subVectors(e,this.center);const t=Lv.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=.5*(r-this.radius);this.center.add(Lv.multiplyScalar(i/r)),this.radius+=i}return this}union(e){return!0===this.center.equals(e.center)?dp.set(0,0,1).multiplyScalar(e.radius):dp.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(lD.copy(e.center).add(dp)),this.expandByPoint(lD.copy(e.center).sub(dp)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const mo=new Q,Nv=new Q,hp=new Q,qo=new Q,Fv=new Q,fp=new Q,kv=new Q;class pp{constructor(e=new Q,t=new Q(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,mo)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=mo.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(mo.copy(this.direction).multiplyScalar(t).add(this.origin),mo.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){Nv.copy(e).add(t).multiplyScalar(.5),hp.copy(t).sub(e).normalize(),qo.copy(this.origin).sub(Nv);const s=.5*e.distanceTo(t),a=-this.direction.dot(hp),l=qo.dot(this.direction),c=-qo.dot(hp),h=qo.lengthSq(),g=Math.abs(1-a*a);let m,_,T,A;if(g>0)if(m=a*c-l,_=a*l-c,A=s*g,m>=0)if(_>=-A)if(_<=A){const C=1/g;m*=C,_*=C,T=m*(m+a*_+2*l)+_*(a*m+_+2*c)+h}else _=s,m=Math.max(0,-(a*_+l)),T=-m*m+_*(_+2*c)+h;else _=-s,m=Math.max(0,-(a*_+l)),T=-m*m+_*(_+2*c)+h;else _<=-A?(m=Math.max(0,-(-a*s+l)),_=m>0?-s:Math.min(Math.max(-s,-c),s),T=-m*m+_*(_+2*c)+h):_<=A?(m=0,_=Math.min(Math.max(-s,-c),s),T=_*(_+2*c)+h):(m=Math.max(0,-(a*s+l)),_=m>0?s:Math.min(Math.max(-s,-c),s),T=-m*m+_*(_+2*c)+h);else _=a>0?-s:s,m=Math.max(0,-(a*_+l)),T=-m*m+_*(_+2*c)+h;return r&&r.copy(this.direction).multiplyScalar(m).add(this.origin),i&&i.copy(hp).multiplyScalar(_).add(Nv),T}intersectSphere(e,t){mo.subVectors(e.center,this.origin);const r=mo.dot(this.direction),i=mo.dot(mo)-r*r,s=e.radius*e.radius;if(i>s)return null;const a=Math.sqrt(s-i),l=r-a,c=r+a;return l<0&&c<0?null:this.at(l<0?c:l,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return null===r?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,a,l,c;const h=1/this.direction.x,g=1/this.direction.y,m=1/this.direction.z,_=this.origin;return h>=0?(r=(e.min.x-_.x)*h,i=(e.max.x-_.x)*h):(r=(e.max.x-_.x)*h,i=(e.min.x-_.x)*h),g>=0?(s=(e.min.y-_.y)*g,a=(e.max.y-_.y)*g):(s=(e.max.y-_.y)*g,a=(e.min.y-_.y)*g),r>a||s>i||((s>r||r!=r)&&(r=s),(a<i||i!=i)&&(i=a),m>=0?(l=(e.min.z-_.z)*m,c=(e.max.z-_.z)*m):(l=(e.max.z-_.z)*m,c=(e.min.z-_.z)*m),r>c||l>i)||((l>r||r!=r)&&(r=l),(c<i||i!=i)&&(i=c),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return null!==this.intersectBox(e,mo)}intersectTriangle(e,t,r,i,s){Fv.subVectors(t,e),fp.subVectors(r,e),kv.crossVectors(Fv,fp);let l,a=this.direction.dot(kv);if(a>0){if(i)return null;l=1}else{if(!(a<0))return null;l=-1,a=-a}qo.subVectors(this.origin,e);const c=l*this.direction.dot(fp.crossVectors(qo,fp));if(c<0)return null;const h=l*this.direction.dot(Fv.cross(qo));if(h<0||c+h>a)return null;const g=-l*qo.dot(kv);return g<0?null:this.at(g/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class un{constructor(){un.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,r,i,s,a,l,c,h,g,m,_,T,A,C,O){const B=this.elements;return B[0]=e,B[4]=t,B[8]=r,B[12]=i,B[1]=s,B[5]=a,B[9]=l,B[13]=c,B[2]=h,B[6]=g,B[10]=m,B[14]=_,B[3]=T,B[7]=A,B[11]=C,B[15]=O,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new un).fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/Mu.setFromMatrixColumn(e,0).length(),s=1/Mu.setFromMatrixColumn(e,1).length(),a=1/Mu.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*a,t[9]=r[9]*a,t[10]=r[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,r=e.x,i=e.y,s=e.z,a=Math.cos(r),l=Math.sin(r),c=Math.cos(i),h=Math.sin(i),g=Math.cos(s),m=Math.sin(s);if("XYZ"===e.order){const _=a*g,T=a*m,A=l*g,C=l*m;t[0]=c*g,t[4]=-c*m,t[8]=h,t[1]=T+A*h,t[5]=_-C*h,t[9]=-l*c,t[2]=C-_*h,t[6]=A+T*h,t[10]=a*c}else if("YXZ"===e.order){const _=c*g,T=c*m,A=h*g,C=h*m;t[0]=_+C*l,t[4]=A*l-T,t[8]=a*h,t[1]=a*m,t[5]=a*g,t[9]=-l,t[2]=T*l-A,t[6]=C+_*l,t[10]=a*c}else if("ZXY"===e.order){const _=c*g,T=c*m,A=h*g,C=h*m;t[0]=_-C*l,t[4]=-a*m,t[8]=A+T*l,t[1]=T+A*l,t[5]=a*g,t[9]=C-_*l,t[2]=-a*h,t[6]=l,t[10]=a*c}else if("ZYX"===e.order){const _=a*g,T=a*m,A=l*g,C=l*m;t[0]=c*g,t[4]=A*h-T,t[8]=_*h+C,t[1]=c*m,t[5]=C*h+_,t[9]=T*h-A,t[2]=-h,t[6]=l*c,t[10]=a*c}else if("YZX"===e.order){const _=a*c,T=a*h,A=l*c,C=l*h;t[0]=c*g,t[4]=C-_*m,t[8]=A*m+T,t[1]=m,t[5]=a*g,t[9]=-l*g,t[2]=-h*g,t[6]=T*m+A,t[10]=_-C*m}else if("XZY"===e.order){const _=a*c,T=a*h,A=l*c,C=l*h;t[0]=c*g,t[4]=-m,t[8]=h*g,t[1]=_*m+C,t[5]=a*g,t[9]=T*m-A,t[2]=A*m-T,t[6]=l*g,t[10]=C*m+_}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(sV,e,oV)}lookAt(e,t,r){const i=this.elements;return Bi.subVectors(e,t),0===Bi.lengthSq()&&(Bi.z=1),Bi.normalize(),Yo.crossVectors(r,Bi),0===Yo.lengthSq()&&(1===Math.abs(r.z)?Bi.x+=1e-4:Bi.z+=1e-4,Bi.normalize(),Yo.crossVectors(r,Bi)),Yo.normalize(),gp.crossVectors(Bi,Yo),i[0]=Yo.x,i[4]=gp.x,i[8]=Bi.x,i[1]=Yo.y,i[5]=gp.y,i[9]=Bi.y,i[2]=Yo.z,i[6]=gp.z,i[10]=Bi.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,a=r[0],l=r[4],c=r[8],h=r[12],g=r[1],m=r[5],_=r[9],T=r[13],A=r[2],C=r[6],O=r[10],B=r[14],V=r[3],z=r[7],G=r[11],X=r[15],J=i[0],ae=i[4],Y=i[8],re=i[12],fe=i[1],ge=i[5],Ne=i[9],je=i[13],me=i[2],Ie=i[6],be=i[10],ke=i[14],Ve=i[3],Te=i[7],Pe=i[11],qe=i[15];return s[0]=a*J+l*fe+c*me+h*Ve,s[4]=a*ae+l*ge+c*Ie+h*Te,s[8]=a*Y+l*Ne+c*be+h*Pe,s[12]=a*re+l*je+c*ke+h*qe,s[1]=g*J+m*fe+_*me+T*Ve,s[5]=g*ae+m*ge+_*Ie+T*Te,s[9]=g*Y+m*Ne+_*be+T*Pe,s[13]=g*re+m*je+_*ke+T*qe,s[2]=A*J+C*fe+O*me+B*Ve,s[6]=A*ae+C*ge+O*Ie+B*Te,s[10]=A*Y+C*Ne+O*be+B*Pe,s[14]=A*re+C*je+O*ke+B*qe,s[3]=V*J+z*fe+G*me+X*Ve,s[7]=V*ae+z*ge+G*Ie+X*Te,s[11]=V*Y+z*Ne+G*be+X*Pe,s[15]=V*re+z*je+G*ke+X*qe,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],a=e[1],l=e[5],c=e[9],h=e[13],g=e[2],m=e[6],_=e[10],T=e[14];return e[3]*(+s*c*m-i*h*m-s*l*_+r*h*_+i*l*T-r*c*T)+e[7]*(+t*c*T-t*h*_+s*a*_-i*a*T+i*h*g-s*c*g)+e[11]*(+t*h*m-t*l*T-s*a*m+r*a*T+s*l*g-r*h*g)+e[15]*(-i*l*g-t*c*m+t*l*_+i*a*m-r*a*_+r*c*g)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],a=e[4],l=e[5],c=e[6],h=e[7],g=e[8],m=e[9],_=e[10],T=e[11],A=e[12],C=e[13],O=e[14],B=e[15],V=m*O*h-C*_*h+C*c*T-l*O*T-m*c*B+l*_*B,z=A*_*h-g*O*h-A*c*T+a*O*T+g*c*B-a*_*B,G=g*C*h-A*m*h+A*l*T-a*C*T-g*l*B+a*m*B,X=A*m*c-g*C*c-A*l*_+a*C*_+g*l*O-a*m*O,J=t*V+r*z+i*G+s*X;if(0===J)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const ae=1/J;return e[0]=V*ae,e[1]=(C*_*s-m*O*s-C*i*T+r*O*T+m*i*B-r*_*B)*ae,e[2]=(l*O*s-C*c*s+C*i*h-r*O*h-l*i*B+r*c*B)*ae,e[3]=(m*c*s-l*_*s-m*i*h+r*_*h+l*i*T-r*c*T)*ae,e[4]=z*ae,e[5]=(g*O*s-A*_*s+A*i*T-t*O*T-g*i*B+t*_*B)*ae,e[6]=(A*c*s-a*O*s-A*i*h+t*O*h+a*i*B-t*c*B)*ae,e[7]=(a*_*s-g*c*s+g*i*h-t*_*h-a*i*T+t*c*T)*ae,e[8]=G*ae,e[9]=(A*m*s-g*C*s-A*r*T+t*C*T+g*r*B-t*m*B)*ae,e[10]=(a*C*s-A*l*s+A*r*h-t*C*h-a*r*B+t*l*B)*ae,e[11]=(g*l*s-a*m*s-g*r*h+t*m*h+a*r*T-t*l*T)*ae,e[12]=X*ae,e[13]=(g*C*i-A*m*i+A*r*_-t*C*_-g*r*O+t*m*O)*ae,e[14]=(A*l*i-a*C*i-A*r*c+t*C*c+a*r*O-t*l*O)*ae,e[15]=(a*m*i-g*l*i+g*r*c-t*m*c-a*r*_+t*l*_)*ae,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,a=e.x,l=e.y,c=e.z,h=s*a,g=s*l;return this.set(h*a+r,h*l-i*c,h*c+i*l,0,h*l+i*c,g*l+r,g*c-i*a,0,h*c-i*l,g*c+i*a,s*c*c+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,a){return this.set(1,r,s,0,e,1,a,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,a=t._y,l=t._z,c=t._w,h=s+s,g=a+a,m=l+l,_=s*h,T=s*g,A=s*m,C=a*g,O=a*m,B=l*m,V=c*h,z=c*g,G=c*m,X=r.x,J=r.y,ae=r.z;return i[0]=(1-(C+B))*X,i[1]=(T+G)*X,i[2]=(A-z)*X,i[3]=0,i[4]=(T-G)*J,i[5]=(1-(_+B))*J,i[6]=(O+V)*J,i[7]=0,i[8]=(A+z)*ae,i[9]=(O-V)*ae,i[10]=(1-(_+C))*ae,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=Mu.set(i[0],i[1],i[2]).length();const a=Mu.set(i[4],i[5],i[6]).length(),l=Mu.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],xs.copy(this);const h=1/s,g=1/a,m=1/l;return xs.elements[0]*=h,xs.elements[1]*=h,xs.elements[2]*=h,xs.elements[4]*=g,xs.elements[5]*=g,xs.elements[6]*=g,xs.elements[8]*=m,xs.elements[9]*=m,xs.elements[10]*=m,t.setFromRotationMatrix(xs),r.x=s,r.y=a,r.z=l,this}makePerspective(e,t,r,i,s,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const l=this.elements,h=2*s/(r-i),g=(t+e)/(t-e),m=(r+i)/(r-i),_=-(a+s)/(a-s),T=-2*a*s/(a-s);return l[0]=2*s/(t-e),l[4]=0,l[8]=g,l[12]=0,l[1]=0,l[5]=h,l[9]=m,l[13]=0,l[2]=0,l[6]=0,l[10]=_,l[14]=T,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,r,i,s,a){const l=this.elements,c=1/(t-e),h=1/(r-i),g=1/(a-s),m=(t+e)*c,_=(r+i)*h,T=(a+s)*g;return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-m,l[1]=0,l[5]=2*h,l[9]=0,l[13]=-_,l[2]=0,l[6]=0,l[10]=-2*g,l[14]=-T,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const Mu=new Q,xs=new un,sV=new Q(0,0,0),oV=new Q(1,1,1),Yo=new Q,gp=new Q,Bi=new Q,uD=new un,cD=new di;let aV=(()=>{class n{constructor(t=0,r=0,i=0,s=n.DefaultOrder){this.isEuler=!0,this._x=t,this._y=r,this._z=i,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,r,i,s=this._order){return this._x=t,this._y=r,this._z=i,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,r=this._order,i=!0){const s=t.elements,a=s[0],l=s[4],c=s[8],h=s[1],g=s[5],m=s[9],_=s[2],T=s[6],A=s[10];switch(r){case"XYZ":this._y=Math.asin(cr(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-m,A),this._z=Math.atan2(-l,a)):(this._x=Math.atan2(T,g),this._z=0);break;case"YXZ":this._x=Math.asin(-cr(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(c,A),this._z=Math.atan2(h,g)):(this._y=Math.atan2(-_,a),this._z=0);break;case"ZXY":this._x=Math.asin(cr(T,-1,1)),Math.abs(T)<.9999999?(this._y=Math.atan2(-_,A),this._z=Math.atan2(-l,g)):(this._y=0,this._z=Math.atan2(h,a));break;case"ZYX":this._y=Math.asin(-cr(_,-1,1)),Math.abs(_)<.9999999?(this._x=Math.atan2(T,A),this._z=Math.atan2(h,a)):(this._x=0,this._z=Math.atan2(-l,g));break;case"YZX":this._z=Math.asin(cr(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-m,g),this._y=Math.atan2(-_,a)):(this._x=0,this._y=Math.atan2(c,A));break;case"XZY":this._z=Math.asin(-cr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(T,g),this._y=Math.atan2(c,a)):(this._x=Math.atan2(-m,A),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+r)}return this._order=r,!0===i&&this._onChangeCallback(),this}setFromQuaternion(t,r,i){return uD.makeRotationFromQuaternion(t),this.setFromRotationMatrix(uD,r,i)}setFromVector3(t,r=this._order){return this.set(t.x,t.y,t.z,r)}reorder(t){return cD.setFromEuler(this),this.setFromQuaternion(cD,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],r=0){return t[r]=this._x,t[r+1]=this._y,t[r+2]=this._z,t[r+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}return n.DefaultOrder="XYZ",n.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],n})();class Bv{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let lV=0;const dD=new Q,Eu=new di,yo=new un,mp=new Q,vd=new Q,uV=new Q,cV=new di,hD=new Q(1,0,0),fD=new Q(0,1,0),pD=new Q(0,0,1),dV={type:"added"},gD={type:"removed"};let Ti=(()=>{class n extends Va{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:lV++}),this.uuid=Fi(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DefaultUp.clone();const t=new Q,r=new aV,i=new di,s=new Q(1,1,1);r._onChange(function a(){i.setFromEuler(r,!1)}),i._onChange(function l(){r.setFromQuaternion(i,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:r},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new un},normalMatrix:{value:new ki}}),this.matrix=new un,this.matrixWorld=new un,this.matrixAutoUpdate=n.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Bv,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,r){this.quaternion.setFromAxisAngle(t,r)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,r){return Eu.setFromAxisAngle(t,r),this.quaternion.multiply(Eu),this}rotateOnWorldAxis(t,r){return Eu.setFromAxisAngle(t,r),this.quaternion.premultiply(Eu),this}rotateX(t){return this.rotateOnAxis(hD,t)}rotateY(t){return this.rotateOnAxis(fD,t)}rotateZ(t){return this.rotateOnAxis(pD,t)}translateOnAxis(t,r){return dD.copy(t).applyQuaternion(this.quaternion),this.position.add(dD.multiplyScalar(r)),this}translateX(t){return this.translateOnAxis(hD,t)}translateY(t){return this.translateOnAxis(fD,t)}translateZ(t){return this.translateOnAxis(pD,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4(yo.copy(this.matrixWorld).invert())}lookAt(t,r,i){t.isVector3?mp.copy(t):mp.set(t,r,i);const s=this.parent;this.updateWorldMatrix(!0,!1),vd.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?yo.lookAt(vd,mp,this.up):yo.lookAt(mp,vd,this.up),this.quaternion.setFromRotationMatrix(yo),s&&(yo.extractRotation(s.matrixWorld),Eu.setFromRotationMatrix(yo),this.quaternion.premultiply(Eu.invert()))}add(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.add(arguments[r]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(dV)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const r=this.children.indexOf(t);return-1!==r&&(t.parent=null,this.children.splice(r,1),t.dispatchEvent(gD)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const r=this.children[t];r.parent=null,r.dispatchEvent(gD)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),yo.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),yo.multiply(t.parent.matrixWorld)),t.applyMatrix4(yo),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,r){if(this[t]===r)return this;for(let i=0,s=this.children.length;i<s;i++){const l=this.children[i].getObjectByProperty(t,r);if(void 0!==l)return l}}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(vd,t,uV),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(vd,cV,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const r=this.matrixWorld.elements;return t.set(r[8],r[9],r[10]).normalize()}raycast(){}traverse(t){t(this);const r=this.children;for(let i=0,s=r.length;i<s;i++)r[i].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const r=this.children;for(let i=0,s=r.length;i<s;i++)r[i].traverseVisible(t)}traverseAncestors(t){const r=this.parent;null!==r&&(t(r),r.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const r=this.children;for(let i=0,s=r.length;i<s;i++)r[i].updateMatrixWorld(t)}updateWorldMatrix(t,r){const i=this.parent;if(!0===t&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===r){const s=this.children;for(let a=0,l=s.length;a<l;a++)s[a].updateWorldMatrix(!1,!0)}}toJSON(t){const r=void 0===t||"string"==typeof t,i={};r&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const s={};function a(c,h){return void 0===c[h.uuid]&&(c[h.uuid]=h.toJSON(t)),h.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=a(t.geometries,this.geometry);const c=this.geometry.parameters;if(void 0!==c&&void 0!==c.shapes){const h=c.shapes;if(Array.isArray(h))for(let g=0,m=h.length;g<m;g++)a(t.shapes,h[g]);else a(t.shapes,h)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(a(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const c=[];for(let h=0,g=this.material.length;h<g;h++)c.push(a(t.materials,this.material[h]));s.material=c}else s.material=a(t.materials,this.material);if(this.children.length>0){s.children=[];for(let c=0;c<this.children.length;c++)s.children.push(this.children[c].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let c=0;c<this.animations.length;c++)s.animations.push(a(t.animations,this.animations[c]))}if(r){const c=l(t.geometries),h=l(t.materials),g=l(t.textures),m=l(t.images),_=l(t.shapes),T=l(t.skeletons),A=l(t.animations),C=l(t.nodes);c.length>0&&(i.geometries=c),h.length>0&&(i.materials=h),g.length>0&&(i.textures=g),m.length>0&&(i.images=m),_.length>0&&(i.shapes=_),T.length>0&&(i.skeletons=T),A.length>0&&(i.animations=A),C.length>0&&(i.nodes=C)}return i.object=s,i;function l(c){const h=[];for(const g in c){const m=c[g];delete m.metadata,h.push(m)}return h}}clone(t){return(new this.constructor).copy(this,t)}copy(t,r=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===r)for(let i=0;i<t.children.length;i++)this.add(t.children[i].clone());return this}}return n.DefaultUp=new Q(0,1,0),n.DefaultMatrixAutoUpdate=!0,n})();const ws=new Q,vo=new Q,Uv=new Q,bo=new Q,Du=new Q,Au=new Q,mD=new Q,Vv=new Q,zv=new Q,$v=new Q;class Ss{constructor(e=new Q,t=new Q,r=new Q){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),ws.subVectors(e,t),i.cross(ws);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){ws.subVectors(i,t),vo.subVectors(r,t),Uv.subVectors(e,t);const a=ws.dot(ws),l=ws.dot(vo),c=ws.dot(Uv),h=vo.dot(vo),g=vo.dot(Uv),m=a*h-l*l;if(0===m)return s.set(-2,-1,-1);const _=1/m,T=(h*c-l*g)*_,A=(a*g-l*c)*_;return s.set(1-T-A,A,T)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,bo),bo.x>=0&&bo.y>=0&&bo.x+bo.y<=1}static getUV(e,t,r,i,s,a,l,c){return this.getBarycoord(e,t,r,i,bo),c.set(0,0),c.addScaledVector(s,bo.x),c.addScaledVector(a,bo.y),c.addScaledVector(l,bo.z),c}static isFrontFacing(e,t,r,i){return ws.subVectors(r,t),vo.subVectors(e,t),ws.cross(vo).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ws.subVectors(this.c,this.b),vo.subVectors(this.a,this.b),.5*ws.cross(vo).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ss.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Ss.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,s){return Ss.getUV(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return Ss.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ss.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let a,l;Du.subVectors(i,r),Au.subVectors(s,r),Vv.subVectors(e,r);const c=Du.dot(Vv),h=Au.dot(Vv);if(c<=0&&h<=0)return t.copy(r);zv.subVectors(e,i);const g=Du.dot(zv),m=Au.dot(zv);if(g>=0&&m<=g)return t.copy(i);const _=c*m-g*h;if(_<=0&&c>=0&&g<=0)return a=c/(c-g),t.copy(r).addScaledVector(Du,a);$v.subVectors(e,s);const T=Du.dot($v),A=Au.dot($v);if(A>=0&&T<=A)return t.copy(s);const C=T*h-c*A;if(C<=0&&h>=0&&A<=0)return l=h/(h-A),t.copy(r).addScaledVector(Au,l);const O=g*A-T*m;if(O<=0&&m-g>=0&&T-A>=0)return mD.subVectors(s,i),l=(m-g)/(m-g+(T-A)),t.copy(i).addScaledVector(mD,l);const B=1/(O+C+_);return a=C*B,l=_*B,t.copy(r).addScaledVector(Du,a).addScaledVector(Au,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let hV=0;class qa extends Va{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:hV++}),this.uuid=Fi(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const r=e[t];if(void 0===r){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===r;continue}const i=this[t];void 0!==i?i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(s){const a=[];for(const l in s){const c=s[l];delete c.metadata,a.push(c)}return a}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),void 0!==this.sheen&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),void 0!==this.clearcoat&&(r.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(r.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(r.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(r.combine=this.combine)),void 0!==this.envMapIntensity&&(r.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(r.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(r.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(r.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(r.size=this.size),null!==this.shadowSide&&(r.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(r.blending=this.blending),0!==this.side&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),!0===this.transparent&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(r.rotation=this.rotation),!0===this.polygonOffset&&(r.polygonOffset=!0),0!==this.polygonOffsetFactor&&(r.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(r.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(r.linewidth=this.linewidth),void 0!==this.dashSize&&(r.dashSize=this.dashSize),void 0!==this.gapSize&&(r.gapSize=this.gapSize),void 0!==this.scale&&(r.scale=this.scale),!0===this.dithering&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(r.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(r.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(r.flatShading=this.flatShading),!1===this.visible&&(r.visible=!1),!1===this.toneMapped&&(r.toneMapped=!1),!1===this.fog&&(r.fog=!1),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),t){const s=i(e.textures),a=i(e.images);s.length>0&&(r.textures=s),a.length>0&&(r.images=a)}return r}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(null!==t){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class Ya extends qa{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new bt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const vr=new Q,yp=new Le;class Or{constructor(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===r,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let r=0;for(let i=0,s=e.length;i<s;i++){let a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),a=new bt),t[r++]=a.r,t[r++]=a.g,t[r++]=a.b}return this}copyVector2sArray(e){const t=this.array;let r=0;for(let i=0,s=e.length;i<s;i++){let a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),a=new Le),t[r++]=a.x,t[r++]=a.y}return this}copyVector3sArray(e){const t=this.array;let r=0;for(let i=0,s=e.length;i<s;i++){let a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),a=new Q),t[r++]=a.x,t[r++]=a.y,t[r++]=a.z}return this}copyVector4sArray(e){const t=this.array;let r=0;for(let i=0,s=e.length;i<s;i++){let a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),a=new Ln),t[r++]=a.x,t[r++]=a.y,t[r++]=a.z,t[r++]=a.w}return this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,r=this.count;t<r;t++)yp.fromBufferAttribute(this,t),yp.applyMatrix3(e),this.setXY(t,yp.x,yp.y);else if(3===this.itemSize)for(let t=0,r=this.count;t<r;t++)vr.fromBufferAttribute(this,t),vr.applyMatrix3(e),this.setXYZ(t,vr.x,vr.y,vr.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)vr.fromBufferAttribute(this,t),vr.applyMatrix4(e),this.setXYZ(t,vr.x,vr.y,vr.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)vr.fromBufferAttribute(this,t),vr.applyNormalMatrix(e),this.setXYZ(t,vr.x,vr.y,vr.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)vr.fromBufferAttribute(this,t),vr.transformDirection(e),this.setXYZ(t,vr.x,vr.y,vr.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}}class yD extends Or{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class vD extends Or{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class St extends Or{constructor(e,t,r){super(new Float32Array(e),t,r)}}let fV=0;const ts=new un,Hv=new Ti,Cu=new Q,Ui=new _u,bd=new _u,Rr=new Q;class mn extends Va{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:fV++}),this.uuid=Fi(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(rD(e)?vD:yD)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(void 0!==r){const s=(new ki).getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return ts.makeRotationFromQuaternion(e),this.applyMatrix4(ts),this}rotateX(e){return ts.makeRotationX(e),this.applyMatrix4(ts),this}rotateY(e){return ts.makeRotationY(e),this.applyMatrix4(ts),this}rotateZ(e){return ts.makeRotationZ(e),this.applyMatrix4(ts),this}translate(e,t,r){return ts.makeTranslation(e,t,r),this.applyMatrix4(ts),this}scale(e,t,r){return ts.makeScale(e,t,r),this.applyMatrix4(ts),this}lookAt(e){return Hv.lookAt(e),Hv.updateMatrix(),this.applyMatrix4(Hv.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Cu).negate(),this.translate(Cu.x,Cu.y,Cu.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new St(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new _u);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Q(-1/0,-1/0,-1/0),new Q(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++)Ui.setFromBufferAttribute(t[r]),this.morphTargetsRelative?(Rr.addVectors(this.boundingBox.min,Ui.min),this.boundingBox.expandByPoint(Rr),Rr.addVectors(this.boundingBox.max,Ui.max),this.boundingBox.expandByPoint(Rr)):(this.boundingBox.expandByPoint(Ui.min),this.boundingBox.expandByPoint(Ui.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Tu);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Q,1/0);if(e){const r=this.boundingSphere.center;if(Ui.setFromBufferAttribute(e),t)for(let s=0,a=t.length;s<a;s++)bd.setFromBufferAttribute(t[s]),this.morphTargetsRelative?(Rr.addVectors(Ui.min,bd.min),Ui.expandByPoint(Rr),Rr.addVectors(Ui.max,bd.max),Ui.expandByPoint(Rr)):(Ui.expandByPoint(bd.min),Ui.expandByPoint(bd.max));Ui.getCenter(r);let i=0;for(let s=0,a=e.count;s<a;s++)Rr.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(Rr));if(t)for(let s=0,a=t.length;s<a;s++){const l=t[s],c=this.morphTargetsRelative;for(let h=0,g=l.count;h<g;h++)Rr.fromBufferAttribute(l,h),c&&(Cu.fromBufferAttribute(e,h),Rr.add(Cu)),i=Math.max(i,r.distanceToSquared(Rr))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const r=e.array,i=t.position.array,s=t.normal.array,a=t.uv.array,l=i.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Or(new Float32Array(4*l),4));const c=this.getAttribute("tangent").array,h=[],g=[];for(let fe=0;fe<l;fe++)h[fe]=new Q,g[fe]=new Q;const m=new Q,_=new Q,T=new Q,A=new Le,C=new Le,O=new Le,B=new Q,V=new Q;function z(fe,ge,Ne){m.fromArray(i,3*fe),_.fromArray(i,3*ge),T.fromArray(i,3*Ne),A.fromArray(a,2*fe),C.fromArray(a,2*ge),O.fromArray(a,2*Ne),_.sub(m),T.sub(m),C.sub(A),O.sub(A);const je=1/(C.x*O.y-O.x*C.y);!isFinite(je)||(B.copy(_).multiplyScalar(O.y).addScaledVector(T,-C.y).multiplyScalar(je),V.copy(T).multiplyScalar(C.x).addScaledVector(_,-O.x).multiplyScalar(je),h[fe].add(B),h[ge].add(B),h[Ne].add(B),g[fe].add(V),g[ge].add(V),g[Ne].add(V))}let G=this.groups;0===G.length&&(G=[{start:0,count:r.length}]);for(let fe=0,ge=G.length;fe<ge;++fe){const Ne=G[fe],je=Ne.start;for(let Ie=je,be=je+Ne.count;Ie<be;Ie+=3)z(r[Ie+0],r[Ie+1],r[Ie+2])}const X=new Q,J=new Q,ae=new Q,Y=new Q;function re(fe){ae.fromArray(s,3*fe),Y.copy(ae);const ge=h[fe];X.copy(ge),X.sub(ae.multiplyScalar(ae.dot(ge))).normalize(),J.crossVectors(Y,ge);const je=J.dot(g[fe])<0?-1:1;c[4*fe]=X.x,c[4*fe+1]=X.y,c[4*fe+2]=X.z,c[4*fe+3]=je}for(let fe=0,ge=G.length;fe<ge;++fe){const Ne=G[fe],je=Ne.start;for(let Ie=je,be=je+Ne.count;Ie<be;Ie+=3)re(r[Ie+0]),re(r[Ie+1]),re(r[Ie+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let r=this.getAttribute("normal");if(void 0===r)r=new Or(new Float32Array(3*t.count),3),this.setAttribute("normal",r);else for(let _=0,T=r.count;_<T;_++)r.setXYZ(_,0,0,0);const i=new Q,s=new Q,a=new Q,l=new Q,c=new Q,h=new Q,g=new Q,m=new Q;if(e)for(let _=0,T=e.count;_<T;_+=3){const A=e.getX(_+0),C=e.getX(_+1),O=e.getX(_+2);i.fromBufferAttribute(t,A),s.fromBufferAttribute(t,C),a.fromBufferAttribute(t,O),g.subVectors(a,s),m.subVectors(i,s),g.cross(m),l.fromBufferAttribute(r,A),c.fromBufferAttribute(r,C),h.fromBufferAttribute(r,O),l.add(g),c.add(g),h.add(g),r.setXYZ(A,l.x,l.y,l.z),r.setXYZ(C,c.x,c.y,c.z),r.setXYZ(O,h.x,h.y,h.z)}else for(let _=0,T=t.count;_<T;_+=3)i.fromBufferAttribute(t,_+0),s.fromBufferAttribute(t,_+1),a.fromBufferAttribute(t,_+2),g.subVectors(a,s),m.subVectors(i,s),g.cross(m),r.setXYZ(_+0,g.x,g.y,g.z),r.setXYZ(_+1,g.x,g.y,g.z),r.setXYZ(_+2,g.x,g.y,g.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const r=this.attributes;for(const i in r){if(void 0===e.attributes[i])continue;const a=r[i].array,l=e.attributes[i],c=l.array,h=l.itemSize*t,g=Math.min(c.length,a.length-h);for(let m=0,_=h;m<g;m++,_++)a[_]=c[m]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)Rr.fromBufferAttribute(e,t),Rr.normalize(),e.setXYZ(t,Rr.x,Rr.y,Rr.z)}toNonIndexed(){function e(l,c){const h=l.array,g=l.itemSize,m=l.normalized,_=new h.constructor(c.length*g);let T=0,A=0;for(let C=0,O=c.length;C<O;C++){T=l.isInterleavedBufferAttribute?c[C]*l.data.stride+l.offset:c[C]*g;for(let B=0;B<g;B++)_[A++]=h[T++]}return new Or(_,g,m)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new mn,r=this.index.array,i=this.attributes;for(const l in i){const h=e(i[l],r);t.setAttribute(l,h)}const s=this.morphAttributes;for(const l in s){const c=[],h=s[l];for(let g=0,m=h.length;g<m;g++){const T=e(h[g],r);c.push(T)}t.morphAttributes[l]=c}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let l=0,c=a.length;l<c;l++){const h=a[l];t.addGroup(h.start,h.count,h.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const c=this.parameters;for(const h in c)void 0!==c[h]&&(e[h]=c[h]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const c in r)e.data.attributes[c]=r[c].toJSON(e.data);const i={};let s=!1;for(const c in this.morphAttributes){const h=this.morphAttributes[c],g=[];for(let m=0,_=h.length;m<_;m++)g.push(h[m].toJSON(e.data));g.length>0&&(i[c]=g,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const l=this.boundingSphere;return null!==l&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;null!==r&&this.setIndex(r.clone(t));const i=e.attributes;for(const h in i)this.setAttribute(h,i[h].clone(t));const s=e.morphAttributes;for(const h in s){const g=[],m=s[h];for(let _=0,T=m.length;_<T;_++)g.push(m[_].clone(t));this.morphAttributes[h]=g}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let h=0,g=a.length;h<g;h++){const m=a[h];this.addGroup(m.start,m.count,m.materialIndex)}const l=e.boundingBox;null!==l&&(this.boundingBox=l.clone());const c=e.boundingSphere;return null!==c&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const bD=new un,Iu=new pp,Gv=new Tu,Xo=new Q,Zo=new Q,Ko=new Q,jv=new Q,Wv=new Q,qv=new Q,vp=new Q,bp=new Q,_p=new Q,xp=new Le,wp=new Le,Sp=new Le,Yv=new Q,Tp=new Q;class Mi extends Ti{constructor(e=new mn,t=new Ya){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=i.length;s<a;s++){const l=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;if(void 0===i||(null===r.boundingSphere&&r.computeBoundingSphere(),Gv.copy(r.boundingSphere),Gv.applyMatrix4(s),!1===e.ray.intersectsSphere(Gv))||(bD.copy(s).invert(),Iu.copy(e.ray).applyMatrix4(bD),null!==r.boundingBox&&!1===Iu.intersectsBox(r.boundingBox)))return;let a;const l=r.index,c=r.attributes.position,h=r.morphAttributes.position,g=r.morphTargetsRelative,m=r.attributes.uv,_=r.attributes.uv2,T=r.groups,A=r.drawRange;if(null!==l)if(Array.isArray(i))for(let C=0,O=T.length;C<O;C++){const B=T[C],V=i[B.materialIndex];for(let X=Math.max(B.start,A.start),J=Math.min(l.count,Math.min(B.start+B.count,A.start+A.count));X<J;X+=3){const ae=l.getX(X),Y=l.getX(X+1),re=l.getX(X+2);a=Mp(this,V,e,Iu,c,h,g,m,_,ae,Y,re),a&&(a.faceIndex=Math.floor(X/3),a.face.materialIndex=B.materialIndex,t.push(a))}}else for(let B=Math.max(0,A.start),V=Math.min(l.count,A.start+A.count);B<V;B+=3){const z=l.getX(B),G=l.getX(B+1),X=l.getX(B+2);a=Mp(this,i,e,Iu,c,h,g,m,_,z,G,X),a&&(a.faceIndex=Math.floor(B/3),t.push(a))}else if(void 0!==c)if(Array.isArray(i))for(let C=0,O=T.length;C<O;C++){const B=T[C],V=i[B.materialIndex];for(let X=Math.max(B.start,A.start),J=Math.min(c.count,Math.min(B.start+B.count,A.start+A.count));X<J;X+=3)a=Mp(this,V,e,Iu,c,h,g,m,_,X,X+1,X+2),a&&(a.faceIndex=Math.floor(X/3),a.face.materialIndex=B.materialIndex,t.push(a))}else for(let B=Math.max(0,A.start),V=Math.min(c.count,A.start+A.count);B<V;B+=3)a=Mp(this,i,e,Iu,c,h,g,m,_,B,B+1,B+2),a&&(a.faceIndex=Math.floor(B/3),t.push(a))}}function Mp(n,e,t,r,i,s,a,l,c,h,g,m){Xo.fromBufferAttribute(i,h),Zo.fromBufferAttribute(i,g),Ko.fromBufferAttribute(i,m);const _=n.morphTargetInfluences;if(s&&_){vp.set(0,0,0),bp.set(0,0,0),_p.set(0,0,0);for(let A=0,C=s.length;A<C;A++){const O=_[A],B=s[A];0!==O&&(jv.fromBufferAttribute(B,h),Wv.fromBufferAttribute(B,g),qv.fromBufferAttribute(B,m),a?(vp.addScaledVector(jv,O),bp.addScaledVector(Wv,O),_p.addScaledVector(qv,O)):(vp.addScaledVector(jv.sub(Xo),O),bp.addScaledVector(Wv.sub(Zo),O),_p.addScaledVector(qv.sub(Ko),O)))}Xo.add(vp),Zo.add(bp),Ko.add(_p)}n.isSkinnedMesh&&(n.boneTransform(h,Xo),n.boneTransform(g,Zo),n.boneTransform(m,Ko));const T=function pV(n,e,t,r,i,s,a,l){let c;if(c=1===e.side?r.intersectTriangle(a,s,i,!0,l):r.intersectTriangle(i,s,a,2!==e.side,l),null===c)return null;Tp.copy(l),Tp.applyMatrix4(n.matrixWorld);const h=t.ray.origin.distanceTo(Tp);return h<t.near||h>t.far?null:{distance:h,point:Tp.clone(),object:n}}(n,e,t,r,Xo,Zo,Ko,Yv);if(T){l&&(xp.fromBufferAttribute(l,h),wp.fromBufferAttribute(l,g),Sp.fromBufferAttribute(l,m),T.uv=Ss.getUV(Yv,Xo,Zo,Ko,xp,wp,Sp,new Le)),c&&(xp.fromBufferAttribute(c,h),wp.fromBufferAttribute(c,g),Sp.fromBufferAttribute(c,m),T.uv2=Ss.getUV(Yv,Xo,Zo,Ko,xp,wp,Sp,new Le));const A={a:h,b:g,c:m,normal:new Q,materialIndex:0};Ss.getNormal(Xo,Zo,Ko,A.normal),T.face=A}return T}class Jo extends mn{constructor(e=1,t=1,r=1,i=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:a};const l=this;i=Math.floor(i),s=Math.floor(s),a=Math.floor(a);const c=[],h=[],g=[],m=[];let _=0,T=0;function A(C,O,B,V,z,G,X,J,ae,Y,re){const fe=G/ae,ge=X/Y,Ne=G/2,je=X/2,me=J/2,Ie=ae+1,be=Y+1;let ke=0,Ve=0;const Te=new Q;for(let Pe=0;Pe<be;Pe++){const qe=Pe*ge-je;for(let Ge=0;Ge<Ie;Ge++)Te[C]=(Ge*fe-Ne)*V,Te[O]=qe*z,Te[B]=me,h.push(Te.x,Te.y,Te.z),Te[C]=0,Te[O]=0,Te[B]=J>0?1:-1,g.push(Te.x,Te.y,Te.z),m.push(Ge/ae),m.push(1-Pe/Y),ke+=1}for(let Pe=0;Pe<Y;Pe++)for(let qe=0;qe<ae;qe++){const st=_+qe+Ie*(Pe+1),xt=_+(qe+1)+Ie*(Pe+1),Mt=_+(qe+1)+Ie*Pe;c.push(_+qe+Ie*Pe,st,Mt),c.push(st,xt,Mt),Ve+=6}l.addGroup(T,Ve,re),T+=Ve,_+=ke}A("z","y","x",-1,-1,r,t,e,a,s,0),A("z","y","x",1,-1,r,t,-e,a,s,1),A("x","z","y",1,1,e,r,t,i,a,2),A("x","z","y",1,-1,e,r,-t,i,a,3),A("x","y","z",1,-1,e,t,r,i,s,4),A("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(c),this.setAttribute("position",new St(h,3)),this.setAttribute("normal",new St(g,3)),this.setAttribute("uv",new St(m,2))}static fromJSON(e){return new Jo(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Pu(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];e[t][r]=i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.clone():Array.isArray(i)?i.slice():i}}return e}function Xr(n){const e={};for(let t=0;t<n.length;t++){const r=Pu(n[t]);for(const i in r)e[i]=r[i]}return e}const gV={clone:Pu,merge:Xr};class Qo extends qa{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Pu(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const a=this.uniforms[i].value;t.uniforms[i]=a&&a.isTexture?{type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?{type:"c",value:a.getHex()}:a&&a.isVector2?{type:"v2",value:a.toArray()}:a&&a.isVector3?{type:"v3",value:a.toArray()}:a&&a.isVector4?{type:"v4",value:a.toArray()}:a&&a.isMatrix3?{type:"m3",value:a.toArray()}:a&&a.isMatrix4?{type:"m4",value:a.toArray()}:{value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const r={};for(const i in this.extensions)!0===this.extensions[i]&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class Xv extends Ti{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new un,this.projectionMatrix=new un,this.projectionMatrixInverse=new un}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class kr extends Xv{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*pd*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*za*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*pd*Math.atan(Math.tan(.5*za*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,s,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*za*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const a=this.view;if(null!==this.view&&this.view.enabled){const c=a.fullWidth,h=a.fullHeight;s+=a.offsetX*i/c,t-=a.offsetY*r/h,i*=a.width/c,r*=a.height/h}const l=this.filmOffset;0!==l&&(s+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class vV extends Ti{constructor(e,t,r){if(super(),this.type="CubeCamera",!0!==r.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=r;const i=new kr(90,1,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new Q(1,0,0)),this.add(i);const s=new kr(90,1,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new Q(-1,0,0)),this.add(s);const a=new kr(90,1,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(new Q(0,1,0)),this.add(a);const l=new kr(90,1,e,t);l.layers=this.layers,l.up.set(0,0,-1),l.lookAt(new Q(0,-1,0)),this.add(l);const c=new kr(90,1,e,t);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new Q(0,0,1)),this.add(c);const h=new kr(90,1,e,t);h.layers=this.layers,h.up.set(0,-1,0),h.lookAt(new Q(0,0,-1)),this.add(h)}update(e,t){null===this.parent&&this.updateMatrixWorld();const r=this.renderTarget,[i,s,a,l,c,h]=this.children,g=e.getRenderTarget(),m=e.toneMapping,_=e.xr.enabled;e.toneMapping=0,e.xr.enabled=!1;const T=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,i),e.setRenderTarget(r,1),e.render(t,s),e.setRenderTarget(r,2),e.render(t,a),e.setRenderTarget(r,3),e.render(t,l),e.setRenderTarget(r,4),e.render(t,c),r.texture.generateMipmaps=T,e.setRenderTarget(r,5),e.render(t,h),e.setRenderTarget(g),e.toneMapping=m,e.xr.enabled=_,r.texture.needsPMREMUpdate=!0}}class Ep extends Go{constructor(e,t,r,i,s,a,l,c,h,g){super(e=void 0!==e?e:[],t=void 0!==t?t:301,r,i,s,a,l,c,h,g),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class bV extends Ha{constructor(e,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1};this.texture=new Ep([r,r,r,r,r,r],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:yr}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r_uniforms={tEquirect:{value:null}},r_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",r_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",i=new Jo(5,5,5),s=new Qo({name:"CubemapFromEquirect",uniforms:Pu(r_uniforms),vertexShader:r_vertexShader,fragmentShader:r_fragmentShader,side:1,blending:0});s.uniforms.tEquirect.value=t;const a=new Mi(i,s),l=t.minFilter;return 1008===t.minFilter&&(t.minFilter=yr),new vV(1,10,this).update(e,a),t.minFilter=l,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,r,i);e.setRenderTarget(s)}}const Zv=new Q,_V=new Q,xV=new ki;class Xa{constructor(e=new Q(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=Zv.subVectors(r,t).cross(_V.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const r=e.delta(Zv),i=this.normal.dot(r);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(r).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||xV.getNormalMatrix(e),i=this.coplanarPoint(Zv).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Lu=new Tu,Dp=new Q;class Kv{constructor(e=new Xa,t=new Xa,r=new Xa,i=new Xa,s=new Xa,a=new Xa){this.planes=[e,t,r,i,s,a]}set(e,t,r,i,s,a){const l=this.planes;return l[0].copy(e),l[1].copy(t),l[2].copy(r),l[3].copy(i),l[4].copy(s),l[5].copy(a),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const t=this.planes,r=e.elements,i=r[0],s=r[1],a=r[2],l=r[3],c=r[4],h=r[5],g=r[6],m=r[7],_=r[8],T=r[9],A=r[10],C=r[11],O=r[12],B=r[13],V=r[14],z=r[15];return t[0].setComponents(l-i,m-c,C-_,z-O).normalize(),t[1].setComponents(l+i,m+c,C+_,z+O).normalize(),t[2].setComponents(l+s,m+h,C+T,z+B).normalize(),t[3].setComponents(l-s,m-h,C-T,z-B).normalize(),t[4].setComponents(l-a,m-g,C-A,z-V).normalize(),t[5].setComponents(l+a,m+g,C+A,z+V).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Lu.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Lu)}intersectsSprite(e){return Lu.center.set(0,0,0),Lu.radius=.7071067811865476,Lu.applyMatrix4(e.matrixWorld),this.intersectsSphere(Lu)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(Dp.x=i.normal.x>0?e.max.x:e.min.x,Dp.y=i.normal.y>0?e.max.y:e.min.y,Dp.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Dp)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function _D(){let n=null,e=!1,t=null,r=null;function i(s,a){t(s,a),r=n.requestAnimationFrame(i)}return{start:function(){!0!==e&&null!==t&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function wV(n,e){const t=e.isWebGL2,r=new WeakMap;return{get:function a(h){return h.isInterleavedBufferAttribute&&(h=h.data),r.get(h)},remove:function l(h){h.isInterleavedBufferAttribute&&(h=h.data);const g=r.get(h);g&&(n.deleteBuffer(g.buffer),r.delete(h))},update:function c(h,g){if(h.isGLBufferAttribute){const _=r.get(h);return void((!_||_.version<h.version)&&r.set(h,{buffer:h.buffer,type:h.type,bytesPerElement:h.elementSize,version:h.version}))}h.isInterleavedBufferAttribute&&(h=h.data);const m=r.get(h);void 0===m?r.set(h,function i(h,g){const m=h.array,_=h.usage,T=n.createBuffer();let A;if(n.bindBuffer(g,T),n.bufferData(g,m,_),h.onUploadCallback(),m instanceof Float32Array)A=5126;else if(m instanceof Uint16Array)if(h.isFloat16BufferAttribute){if(!t)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");A=5131}else A=5123;else if(m instanceof Int16Array)A=5122;else if(m instanceof Uint32Array)A=5125;else if(m instanceof Int32Array)A=5124;else if(m instanceof Int8Array)A=5120;else if(m instanceof Uint8Array)A=5121;else{if(!(m instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+m);A=5121}return{buffer:T,type:A,bytesPerElement:m.BYTES_PER_ELEMENT,version:h.version}}(h,g)):m.version<h.version&&(function s(h,g,m){const _=g.array,T=g.updateRange;n.bindBuffer(m,h),-1===T.count?n.bufferSubData(m,0,_):(t?n.bufferSubData(m,T.offset*_.BYTES_PER_ELEMENT,_,T.offset,T.count):n.bufferSubData(m,T.offset*_.BYTES_PER_ELEMENT,_.subarray(T.offset,T.offset+T.count)),T.count=-1)}(m.buffer,h,g),m.version=h.version)}}}class _d extends mn{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,a=t/2,l=Math.floor(r),c=Math.floor(i),h=l+1,g=c+1,m=e/l,_=t/c,T=[],A=[],C=[],O=[];for(let B=0;B<g;B++){const V=B*_-a;for(let z=0;z<h;z++)A.push(z*m-s,-V,0),C.push(0,0,1),O.push(z/l),O.push(1-B/c)}for(let B=0;B<c;B++)for(let V=0;V<l;V++){const G=V+h*(B+1),X=V+1+h*(B+1),J=V+1+h*B;T.push(V+h*B,G,J),T.push(G,X,J)}this.setIndex(T),this.setAttribute("position",new St(A,3)),this.setAttribute("normal",new St(C,3)),this.setAttribute("uv",new St(O,2))}static fromJSON(e){return new _d(e.width,e.height,e.widthSegments,e.heightSegments)}}const yn={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\nvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = mix(F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence);\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\nconst mat3 XYZ_TO_REC709 = mat3(\n    3.2404542, -0.9692660,  0.0556434,\n   -1.5371385,  1.8760108, -0.2040259,\n   -0.4985314,  0.0415560,  1.0572252\n);\nvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n   vec3 sqrtF0 = sqrt( fresnel0 );\n   return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n}\nvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n   return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n}\nfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n   return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n}\nvec3 evalSensitivity( float OPD, vec3 shift ) {\n   float phase = 2.0 * PI * OPD * 1.0e-9;\n   vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n   vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n   vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n   vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( -pow2( phase ) * var );\n   xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[0] ) * exp( -4.5282e+09 * pow2( phase ) );\n   xyz /= 1.0685e-7;\n   vec3 srgb = XYZ_TO_REC709 * xyz;\n   return srgb;\n}\nvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n   vec3 I;\n   float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n   float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n   float cosTheta2Sq = 1.0 - sinTheta2Sq;\n   if ( cosTheta2Sq < 0.0 ) {\n       return vec3( 1.0 );\n   }\n   float cosTheta2 = sqrt( cosTheta2Sq );\n   float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n   float R12 = F_Schlick( R0, 1.0, cosTheta1 );\n   float R21 = R12;\n   float T121 = 1.0 - R12;\n   float phi12 = 0.0;\n   if ( iridescenceIOR < outsideIOR ) phi12 = PI;\n   float phi21 = PI - phi12;\n   vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );   vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n   vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n   vec3 phi23 = vec3( 0.0 );\n   if ( baseIOR[0] < iridescenceIOR ) phi23[0] = PI;\n   if ( baseIOR[1] < iridescenceIOR ) phi23[1] = PI;\n   if ( baseIOR[2] < iridescenceIOR ) phi23[2] = PI;\n   float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n   vec3 phi = vec3( phi21 ) + phi23;\n   vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n   vec3 r123 = sqrt( R123 );\n   vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n   vec3 C0 = R12 + Rs;\n   I = C0;\n   vec3 Cm = Rs - T121;\n   for ( int m = 1; m <= 2; ++m ) {\n       Cm *= r123;\n       vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n       I += Cm * Sm;\n   }\n   return max( I, vec3( 0.0 ) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\nfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\nif ( material.iridescenceThickness == 0.0 ) {\n\tmaterial.iridescence = 0.0;\n} else {\n\tmaterial.iridescence = saturate( material.iridescence );\n}\nif ( material.iridescence > 0.0 ) {\n\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},lt={common:{diffuse:{value:new bt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new ki},uv2Transform:{value:new ki},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Le(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new bt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new bt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new ki}},sprite:{diffuse:{value:new bt(16777215)},opacity:{value:1},center:{value:new Le(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new ki}}},Bs={basic:{uniforms:Xr([lt.common,lt.specularmap,lt.envmap,lt.aomap,lt.lightmap,lt.fog]),vertexShader:yn.meshbasic_vert,fragmentShader:yn.meshbasic_frag},lambert:{uniforms:Xr([lt.common,lt.specularmap,lt.envmap,lt.aomap,lt.lightmap,lt.emissivemap,lt.fog,lt.lights,{emissive:{value:new bt(0)}}]),vertexShader:yn.meshlambert_vert,fragmentShader:yn.meshlambert_frag},phong:{uniforms:Xr([lt.common,lt.specularmap,lt.envmap,lt.aomap,lt.lightmap,lt.emissivemap,lt.bumpmap,lt.normalmap,lt.displacementmap,lt.fog,lt.lights,{emissive:{value:new bt(0)},specular:{value:new bt(1118481)},shininess:{value:30}}]),vertexShader:yn.meshphong_vert,fragmentShader:yn.meshphong_frag},standard:{uniforms:Xr([lt.common,lt.envmap,lt.aomap,lt.lightmap,lt.emissivemap,lt.bumpmap,lt.normalmap,lt.displacementmap,lt.roughnessmap,lt.metalnessmap,lt.fog,lt.lights,{emissive:{value:new bt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:yn.meshphysical_vert,fragmentShader:yn.meshphysical_frag},toon:{uniforms:Xr([lt.common,lt.aomap,lt.lightmap,lt.emissivemap,lt.bumpmap,lt.normalmap,lt.displacementmap,lt.gradientmap,lt.fog,lt.lights,{emissive:{value:new bt(0)}}]),vertexShader:yn.meshtoon_vert,fragmentShader:yn.meshtoon_frag},matcap:{uniforms:Xr([lt.common,lt.bumpmap,lt.normalmap,lt.displacementmap,lt.fog,{matcap:{value:null}}]),vertexShader:yn.meshmatcap_vert,fragmentShader:yn.meshmatcap_frag},points:{uniforms:Xr([lt.points,lt.fog]),vertexShader:yn.points_vert,fragmentShader:yn.points_frag},dashed:{uniforms:Xr([lt.common,lt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:yn.linedashed_vert,fragmentShader:yn.linedashed_frag},depth:{uniforms:Xr([lt.common,lt.displacementmap]),vertexShader:yn.depth_vert,fragmentShader:yn.depth_frag},normal:{uniforms:Xr([lt.common,lt.bumpmap,lt.normalmap,lt.displacementmap,{opacity:{value:1}}]),vertexShader:yn.meshnormal_vert,fragmentShader:yn.meshnormal_frag},sprite:{uniforms:Xr([lt.sprite,lt.fog]),vertexShader:yn.sprite_vert,fragmentShader:yn.sprite_frag},background:{uniforms:{uvTransform:{value:new ki},t2D:{value:null}},vertexShader:yn.background_vert,fragmentShader:yn.background_frag},cube:{uniforms:Xr([lt.envmap,{opacity:{value:1}}]),vertexShader:yn.cube_vert,fragmentShader:yn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:yn.equirect_vert,fragmentShader:yn.equirect_frag},distanceRGBA:{uniforms:Xr([lt.common,lt.displacementmap,{referencePosition:{value:new Q},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:yn.distanceRGBA_vert,fragmentShader:yn.distanceRGBA_frag},shadow:{uniforms:Xr([lt.lights,lt.fog,{color:{value:new bt(0)},opacity:{value:1}}]),vertexShader:yn.shadow_vert,fragmentShader:yn.shadow_frag}};function _5(n,e,t,r,i,s){const a=new bt(0);let c,h,l=!0===i?0:1,g=null,m=0,_=null;function A(C,O){t.buffers.color.setClear(C.r,C.g,C.b,O,s)}return{getClearColor:function(){return a},setClearColor:function(C,O=1){a.set(C),l=O,A(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(C){l=C,A(a,l)},render:function T(C,O){let B=!1,V=!0===O.isScene?O.background:null;V&&V.isTexture&&(V=e.get(V));const z=n.xr,G=z.getSession&&z.getSession();G&&"additive"===G.environmentBlendMode&&(V=null),null===V?A(a,l):V&&V.isColor&&(A(V,1),B=!0),(n.autoClear||B)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),V&&(V.isCubeTexture||306===V.mapping)?(void 0===h&&(h=new Mi(new Jo(1,1,1),new Qo({name:"BackgroundCubeMaterial",uniforms:Pu(Bs.cube.uniforms),vertexShader:Bs.cube.vertexShader,fragmentShader:Bs.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(X,J,ae){this.matrixWorld.copyPosition(ae.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(h)),h.material.uniforms.envMap.value=V,h.material.uniforms.flipEnvMap.value=V.isCubeTexture&&!1===V.isRenderTargetTexture?-1:1,(g!==V||m!==V.version||_!==n.toneMapping)&&(h.material.needsUpdate=!0,g=V,m=V.version,_=n.toneMapping),h.layers.enableAll(),C.unshift(h,h.geometry,h.material,0,0,null)):V&&V.isTexture&&(void 0===c&&(c=new Mi(new _d(2,2),new Qo({name:"BackgroundMaterial",uniforms:Pu(Bs.background.uniforms),vertexShader:Bs.background.vertexShader,fragmentShader:Bs.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=V,!0===V.matrixAutoUpdate&&V.updateMatrix(),c.material.uniforms.uvTransform.value.copy(V.matrix),(g!==V||m!==V.version||_!==n.toneMapping)&&(c.material.needsUpdate=!0,g=V,m=V.version,_=n.toneMapping),c.layers.enableAll(),C.unshift(c,c.geometry,c.material,0,0,null))}}}function x5(n,e,t,r){const i=n.getParameter(34921),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),a=r.isWebGL2||null!==s,l={},c=O(null);let h=c,g=!1;function T(me){return r.isWebGL2?n.bindVertexArray(me):s.bindVertexArrayOES(me)}function A(me){return r.isWebGL2?n.deleteVertexArray(me):s.deleteVertexArrayOES(me)}function O(me){const Ie=[],be=[],ke=[];for(let Ve=0;Ve<i;Ve++)Ie[Ve]=0,be[Ve]=0,ke[Ve]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Ie,enabledAttributes:be,attributeDivisors:ke,object:me,attributes:{},index:null}}function z(){const me=h.newAttributes;for(let Ie=0,be=me.length;Ie<be;Ie++)me[Ie]=0}function G(me){X(me,0)}function X(me,Ie){const ke=h.enabledAttributes,Ve=h.attributeDivisors;h.newAttributes[me]=1,0===ke[me]&&(n.enableVertexAttribArray(me),ke[me]=1),Ve[me]!==Ie&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](me,Ie),Ve[me]=Ie)}function J(){const me=h.newAttributes,Ie=h.enabledAttributes;for(let be=0,ke=Ie.length;be<ke;be++)Ie[be]!==me[be]&&(n.disableVertexAttribArray(be),Ie[be]=0)}function ae(me,Ie,be,ke,Ve,Te){!0!==r.isWebGL2||5124!==be&&5125!==be?n.vertexAttribPointer(me,Ie,be,ke,Ve,Te):n.vertexAttribIPointer(me,Ie,be,Ve,Te)}function Ne(){je(),g=!0,h!==c&&(h=c,T(h.object))}function je(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:function m(me,Ie,be,ke,Ve){let Te=!1;if(a){const Pe=function C(me,Ie,be){const ke=!0===be.wireframe;let Ve=l[me.id];void 0===Ve&&(Ve={},l[me.id]=Ve);let Te=Ve[Ie.id];void 0===Te&&(Te={},Ve[Ie.id]=Te);let Pe=Te[ke];return void 0===Pe&&(Pe=O(function _(){return r.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}()),Te[ke]=Pe),Pe}(ke,be,Ie);h!==Pe&&(h=Pe,T(h.object)),Te=function B(me,Ie,be,ke){const Ve=h.attributes,Te=Ie.attributes;let Pe=0;const qe=be.getAttributes();for(const Ge in qe)if(qe[Ge].location>=0){const xt=Ve[Ge];let Mt=Te[Ge];if(void 0===Mt&&("instanceMatrix"===Ge&&me.instanceMatrix&&(Mt=me.instanceMatrix),"instanceColor"===Ge&&me.instanceColor&&(Mt=me.instanceColor)),void 0===xt||xt.attribute!==Mt||Mt&&xt.data!==Mt.data)return!0;Pe++}return h.attributesNum!==Pe||h.index!==ke}(me,ke,be,Ve),Te&&function V(me,Ie,be,ke){const Ve={},Te=Ie.attributes;let Pe=0;const qe=be.getAttributes();for(const Ge in qe)if(qe[Ge].location>=0){let xt=Te[Ge];void 0===xt&&("instanceMatrix"===Ge&&me.instanceMatrix&&(xt=me.instanceMatrix),"instanceColor"===Ge&&me.instanceColor&&(xt=me.instanceColor));const Mt={};Mt.attribute=xt,xt&&xt.data&&(Mt.data=xt.data),Ve[Ge]=Mt,Pe++}h.attributes=Ve,h.attributesNum=Pe,h.index=ke}(me,ke,be,Ve)}else{const Pe=!0===Ie.wireframe;(h.geometry!==ke.id||h.program!==be.id||h.wireframe!==Pe)&&(h.geometry=ke.id,h.program=be.id,h.wireframe=Pe,Te=!0)}null!==Ve&&t.update(Ve,34963),(Te||g)&&(g=!1,function Y(me,Ie,be,ke){if(!1===r.isWebGL2&&(me.isInstancedMesh||ke.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;z();const Ve=ke.attributes,Te=be.getAttributes(),Pe=Ie.defaultAttributeValues;for(const qe in Te){const Ge=Te[qe];if(Ge.location>=0){let st=Ve[qe];if(void 0===st&&("instanceMatrix"===qe&&me.instanceMatrix&&(st=me.instanceMatrix),"instanceColor"===qe&&me.instanceColor&&(st=me.instanceColor)),void 0!==st){const xt=st.normalized,Mt=st.itemSize,Oe=t.get(st);if(void 0===Oe)continue;const Cn=Oe.buffer,Qt=Oe.type,jt=Oe.bytesPerElement;if(st.isInterleavedBufferAttribute){const ot=st.data,on=ot.stride,Be=st.offset;if(ot.isInstancedInterleavedBuffer){for(let Fe=0;Fe<Ge.locationSize;Fe++)X(Ge.location+Fe,ot.meshPerAttribute);!0!==me.isInstancedMesh&&void 0===ke._maxInstanceCount&&(ke._maxInstanceCount=ot.meshPerAttribute*ot.count)}else for(let Fe=0;Fe<Ge.locationSize;Fe++)G(Ge.location+Fe);n.bindBuffer(34962,Cn);for(let Fe=0;Fe<Ge.locationSize;Fe++)ae(Ge.location+Fe,Mt/Ge.locationSize,Qt,xt,on*jt,(Be+Mt/Ge.locationSize*Fe)*jt)}else{if(st.isInstancedBufferAttribute){for(let ot=0;ot<Ge.locationSize;ot++)X(Ge.location+ot,st.meshPerAttribute);!0!==me.isInstancedMesh&&void 0===ke._maxInstanceCount&&(ke._maxInstanceCount=st.meshPerAttribute*st.count)}else for(let ot=0;ot<Ge.locationSize;ot++)G(Ge.location+ot);n.bindBuffer(34962,Cn);for(let ot=0;ot<Ge.locationSize;ot++)ae(Ge.location+ot,Mt/Ge.locationSize,Qt,xt,Mt*jt,Mt/Ge.locationSize*ot*jt)}}else if(void 0!==Pe){const xt=Pe[qe];if(void 0!==xt)switch(xt.length){case 2:n.vertexAttrib2fv(Ge.location,xt);break;case 3:n.vertexAttrib3fv(Ge.location,xt);break;case 4:n.vertexAttrib4fv(Ge.location,xt);break;default:n.vertexAttrib1fv(Ge.location,xt)}}}}J()}(me,Ie,be,ke),null!==Ve&&n.bindBuffer(34963,t.get(Ve).buffer))},reset:Ne,resetDefaultState:je,dispose:function re(){Ne();for(const me in l){const Ie=l[me];for(const be in Ie){const ke=Ie[be];for(const Ve in ke)A(ke[Ve].object),delete ke[Ve];delete Ie[be]}delete l[me]}},releaseStatesOfGeometry:function fe(me){if(void 0===l[me.id])return;const Ie=l[me.id];for(const be in Ie){const ke=Ie[be];for(const Ve in ke)A(ke[Ve].object),delete ke[Ve];delete Ie[be]}delete l[me.id]},releaseStatesOfProgram:function ge(me){for(const Ie in l){const be=l[Ie];if(void 0===be[me.id])continue;const ke=be[me.id];for(const Ve in ke)A(ke[Ve].object),delete ke[Ve];delete be[me.id]}},initAttributes:z,enableAttribute:G,disableUnusedAttributes:J}}function w5(n,e,t,r){const i=r.isWebGL2;let s;this.setMode=function a(h){s=h},this.render=function l(h,g){n.drawArrays(s,h,g),t.update(g,s,1)},this.renderInstances=function c(h,g,m){if(0===m)return;let _,T;if(i)_=n,T="drawArraysInstanced";else if(_=e.get("ANGLE_instanced_arrays"),T="drawArraysInstancedANGLE",null===_)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");_[T](s,h,g,m),t.update(g,s,m)}}function S5(n,e,t){let r;function s(ae){if("highp"===ae){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";ae="mediump"}return"mediump"===ae&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const a="undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&n instanceof WebGL2ComputeRenderingContext;let l=void 0!==t.precision?t.precision:"highp";const c=s(l);c!==l&&(console.warn("THREE.WebGLRenderer:",l,"not supported, using",c,"instead."),l=c);const h=a||e.has("WEBGL_draw_buffers"),g=!0===t.logarithmicDepthBuffer,m=n.getParameter(34930),_=n.getParameter(35660),T=n.getParameter(3379),A=n.getParameter(34076),C=n.getParameter(34921),O=n.getParameter(36347),B=n.getParameter(36348),V=n.getParameter(36349),z=_>0,G=a||e.has("OES_texture_float");return{isWebGL2:a,drawBuffers:h,getMaxAnisotropy:function i(){if(void 0!==r)return r;if(!0===e.has("EXT_texture_filter_anisotropic")){const ae=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(ae.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:s,precision:l,logarithmicDepthBuffer:g,maxTextures:m,maxVertexTextures:_,maxTextureSize:T,maxCubemapSize:A,maxAttributes:C,maxVertexUniforms:O,maxVaryings:B,maxFragmentUniforms:V,vertexTextures:z,floatFragmentTextures:G,floatVertexTextures:z&&G,maxSamples:a?n.getParameter(36183):0}}function T5(n){const e=this;let t=null,r=0,i=!1,s=!1;const a=new Xa,l=new ki,c={value:null,needsUpdate:!1};function h(){c.value!==t&&(c.value=t,c.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function g(m,_,T,A){const C=null!==m?m.length:0;let O=null;if(0!==C){if(O=c.value,!0!==A||null===O){const B=T+4*C,V=_.matrixWorldInverse;l.getNormalMatrix(V),(null===O||O.length<B)&&(O=new Float32Array(B));for(let z=0,G=T;z!==C;++z,G+=4)a.copy(m[z]).applyMatrix4(V,l),a.normal.toArray(O,G),O[G+3]=a.constant}c.value=O,c.needsUpdate=!0}return e.numPlanes=C,e.numIntersection=0,O}this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(m,_,T){const A=0!==m.length||_||0!==r||i;return i=_,t=g(m,T,0),r=m.length,A},this.beginShadows=function(){s=!0,g(null)},this.endShadows=function(){s=!1,h()},this.setState=function(m,_,T){const A=m.clippingPlanes,C=m.clipIntersection,O=m.clipShadows,B=n.get(m);if(!i||null===A||0===A.length||s&&!O)s?g(null):h();else{const V=s?0:r,z=4*V;let G=B.clippingState||null;c.value=G,G=g(A,_,z,T);for(let X=0;X!==z;++X)G[X]=t[X];B.clippingState=G,this.numIntersection=C?this.numPlanes:0,this.numPlanes+=V}}}function M5(n){let e=new WeakMap;function t(a,l){return 303===l?a.mapping=301:304===l&&(a.mapping=302),a}function i(a){const l=a.target;l.removeEventListener("dispose",i);const c=e.get(l);void 0!==c&&(e.delete(l),c.dispose())}return{get:function r(a){if(a&&a.isTexture&&!1===a.isRenderTargetTexture){const l=a.mapping;if(303===l||304===l){if(e.has(a))return t(e.get(a).texture,a.mapping);{const c=a.image;if(c&&c.height>0){const h=new bV(c.height/2);return h.fromEquirectangularTexture(n,a),e.set(a,h),a.addEventListener("dispose",i),t(h.texture,a.mapping)}return null}}}return a},dispose:function s(){e=new WeakMap}}}Bs.physical={uniforms:Xr([Bs.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Le(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new bt(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Le},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new bt(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new bt(1,1,1)},specularColorMap:{value:null}}]),vertexShader:yn.meshphysical_vert,fragmentShader:yn.meshphysical_frag};class Jv extends Xv{constructor(e=-1,t=1,r=1,i=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,a=r+e,l=i+t,c=i-t;if(null!==this.view&&this.view.enabled){const h=(this.right-this.left)/this.view.fullWidth/this.zoom,g=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=h*this.view.offsetX,a=s+h*this.view.width,l-=g*this.view.offsetY,c=l-g*this.view.height}this.projectionMatrix.makeOrthographic(s,a,l,c,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const xD=[.125,.215,.35,.446,.526,.582],Qv=new Jv,wD=new bt;let eb=null;const Ka=(1+Math.sqrt(5))/2,Fu=1/Ka,SD=[new Q(1,1,1),new Q(-1,1,1),new Q(1,1,-1),new Q(-1,1,-1),new Q(0,Ka,Fu),new Q(0,Ka,-Fu),new Q(Fu,0,Ka),new Q(-Fu,0,Ka),new Q(Ka,Fu,0),new Q(-Ka,Fu,0)];class TD{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){eb=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=DD(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=ED(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(eb),e.scissorTest=!1,Ap(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(301===e.mapping||302===e.mapping?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),eb=this._renderer.getRenderTarget();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:yr,minFilter:yr,generateMipmaps:!1,type:fd,format:vs,encoding:Ba,depthBuffer:!1},i=MD(e,t,r);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=MD(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function E5(n){const e=[],t=[],r=[];let i=n;const s=n-4+1+xD.length;for(let a=0;a<s;a++){const l=Math.pow(2,i);t.push(l);let c=1/l;a>n-4?c=xD[a-n+4-1]:0===a&&(c=0),r.push(c);const h=1/(l-2),g=-h,m=1+h,_=[g,g,m,g,m,m,g,g,m,m,g,m],T=6,A=6,C=3,O=2,B=1,V=new Float32Array(C*A*T),z=new Float32Array(O*A*T),G=new Float32Array(B*A*T);for(let J=0;J<T;J++){const ae=J%3*2/3-1,Y=J>2?0:-1;V.set([ae,Y,0,ae+2/3,Y,0,ae+2/3,Y+1,0,ae,Y,0,ae+2/3,Y+1,0,ae,Y+1,0],C*A*J),z.set(_,O*A*J),G.set([J,J,J,J,J,J],B*A*J)}const X=new mn;X.setAttribute("position",new Or(V,C)),X.setAttribute("uv",new Or(z,O)),X.setAttribute("faceIndex",new Or(G,B)),e.push(X),i>4&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}(s)),this._blurMaterial=function D5(n,e,t){const r=new Float32Array(20),i=new Q(0,1,0);return new Qo({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(s,e,t)}return i}_compileMaterial(e){const t=new Mi(this._lodPlanes[0],e);this._renderer.compile(t,Qv)}_sceneToCubeUV(e,t,r,i){const l=new kr(90,1,t,r),c=[1,-1,1,1,1,1],h=[1,1,1,-1,-1,-1],g=this._renderer,m=g.autoClear,_=g.toneMapping;g.getClearColor(wD),g.toneMapping=0,g.autoClear=!1;const T=new Ya({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),A=new Mi(new Jo,T);let C=!1;const O=e.background;O?O.isColor&&(T.color.copy(O),e.background=null,C=!0):(T.color.copy(wD),C=!0);for(let B=0;B<6;B++){const V=B%3;0===V?(l.up.set(0,c[B],0),l.lookAt(h[B],0,0)):1===V?(l.up.set(0,0,c[B]),l.lookAt(0,h[B],0)):(l.up.set(0,c[B],0),l.lookAt(0,0,h[B]));const z=this._cubeSize;Ap(i,V*z,B>2?z:0,z,z),g.setRenderTarget(i),C&&g.render(A,l),g.render(e,l)}A.geometry.dispose(),A.material.dispose(),g.toneMapping=_,g.autoClear=m,e.background=O}_textureToCubeUV(e,t){const r=this._renderer,i=301===e.mapping||302===e.mapping;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=DD()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=ED());const s=i?this._cubemapMaterial:this._equirectMaterial,a=new Mi(this._lodPlanes[0],s);s.uniforms.envMap.value=e;const c=this._cubeSize;Ap(t,0,0,3*c,2*c),r.setRenderTarget(t),r.render(a,Qv)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]);this._blur(e,i-1,i,s,SD[(i-1)%SD.length])}t.autoClear=r}_blur(e,t,r,i,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,r,i,"latitudinal",s),this._halfBlur(a,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,a,l){const c=this._renderer,h=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");const m=new Mi(this._lodPlanes[i],h),_=h.uniforms,T=this._sizeLods[r]-1,A=isFinite(s)?Math.PI/(2*T):2*Math.PI/39,C=s/A,O=isFinite(s)?1+Math.floor(3*C):20;O>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${O} samples when the maximum is set to 20`);const B=[];let V=0;for(let ae=0;ae<20;++ae){const Y=ae/C,re=Math.exp(-Y*Y/2);B.push(re),0===ae?V+=re:ae<O&&(V+=2*re)}for(let ae=0;ae<B.length;ae++)B[ae]=B[ae]/V;_.envMap.value=e.texture,_.samples.value=O,_.weights.value=B,_.latitudinal.value="latitudinal"===a,l&&(_.poleAxis.value=l);const{_lodMax:z}=this;_.dTheta.value=A,_.mipInt.value=z-r;const G=this._sizeLods[i];Ap(t,3*G*(i>z-4?i-z+4:0),4*(this._cubeSize-G),3*G,2*G),c.setRenderTarget(t),c.render(m,Qv)}}function MD(n,e,t){const r=new Ha(n,e,t);return r.texture.mapping=306,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Ap(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function ED(){return new Qo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function DD(){return new Qo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function A5(n){let e=new WeakMap,t=null;function s(l){const c=l.target;c.removeEventListener("dispose",s);const h=e.get(c);void 0!==h&&(e.delete(c),h.dispose())}return{get:function r(l){if(l&&l.isTexture){const c=l.mapping,h=303===c||304===c,g=301===c||302===c;if(h||g){if(l.isRenderTargetTexture&&!0===l.needsPMREMUpdate){l.needsPMREMUpdate=!1;let m=e.get(l);return null===t&&(t=new TD(n)),m=h?t.fromEquirectangular(l,m):t.fromCubemap(l,m),e.set(l,m),m.texture}if(e.has(l))return e.get(l).texture;{const m=l.image;if(h&&m&&m.height>0||g&&m&&function i(l){let c=0;for(let g=0;g<6;g++)void 0!==l[g]&&c++;return 6===c}(m)){null===t&&(t=new TD(n));const _=h?t.fromEquirectangular(l):t.fromCubemap(l);return e.set(l,_),l.addEventListener("dispose",s),_.texture}return null}}}return l},dispose:function a(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function C5(n){const e={};function t(r){if(void 0!==e[r])return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return null!==t(r)},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const i=t(r);return null===i&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function I5(n,e,t,r){const i={},s=new WeakMap;function a(m){const _=m.target;null!==_.index&&e.remove(_.index);for(const A in _.attributes)e.remove(_.attributes[A]);_.removeEventListener("dispose",a),delete i[_.id];const T=s.get(_);T&&(e.remove(T),s.delete(_)),r.releaseStatesOfGeometry(_),!0===_.isInstancedBufferGeometry&&delete _._maxInstanceCount,t.memory.geometries--}function h(m){const _=[],T=m.index,A=m.attributes.position;let C=0;if(null!==T){const V=T.array;C=T.version;for(let z=0,G=V.length;z<G;z+=3){const X=V[z+0],J=V[z+1],ae=V[z+2];_.push(X,J,J,ae,ae,X)}}else{C=A.version;for(let z=0,G=A.array.length/3-1;z<G;z+=3){const X=z+0,J=z+1,ae=z+2;_.push(X,J,J,ae,ae,X)}}const O=new(rD(_)?vD:yD)(_,1);O.version=C;const B=s.get(m);B&&e.remove(B),s.set(m,O)}return{get:function l(m,_){return!0===i[_.id]||(_.addEventListener("dispose",a),i[_.id]=!0,t.memory.geometries++),_},update:function c(m){const _=m.attributes;for(const A in _)e.update(_[A],34962);const T=m.morphAttributes;for(const A in T){const C=T[A];for(let O=0,B=C.length;O<B;O++)e.update(C[O],34962)}},getWireframeAttribute:function g(m){const _=s.get(m);if(_){const T=m.index;null!==T&&_.version<T.version&&h(m)}else h(m);return s.get(m)}}}function P5(n,e,t,r){const i=r.isWebGL2;let s,l,c;this.setMode=function a(_){s=_},this.setIndex=function h(_){l=_.type,c=_.bytesPerElement},this.render=function g(_,T){n.drawElements(s,T,l,_*c),t.update(T,s,1)},this.renderInstances=function m(_,T,A){if(0===A)return;let C,O;if(i)C=n,O="drawElementsInstanced";else if(C=e.get("ANGLE_instanced_arrays"),O="drawElementsInstancedANGLE",null===C)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");C[O](s,T,l,_*c,A),t.update(T,s,A)}}function O5(n){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function i(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function r(s,a,l){switch(t.calls++,a){case 4:t.triangles+=l*(s/3);break;case 1:t.lines+=l*(s/2);break;case 3:t.lines+=l*(s-1);break;case 2:t.lines+=l*s;break;case 0:t.points+=l*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a)}}}}function R5(n,e){return n[0]-e[0]}function L5(n,e){return Math.abs(e[1])-Math.abs(n[1])}function nb(n,e){let t=1;const r=e.isInterleavedBufferAttribute?e.data.array:e.array;r instanceof Int8Array?t=127:r instanceof Uint8Array?t=255:r instanceof Uint16Array?t=65535:r instanceof Int16Array?t=32767:r instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),n.divideScalar(t)}function N5(n,e,t){const r={},i=new Float32Array(8),s=new WeakMap,a=new Ln,l=[];for(let h=0;h<8;h++)l[h]=[h,0];return{update:function c(h,g,m,_){const T=h.morphTargetInfluences;if(!0===e.isWebGL2){const A=g.morphAttributes.position||g.morphAttributes.normal||g.morphAttributes.color,C=void 0!==A?A.length:0;let O=s.get(g);if(void 0===O||O.count!==C){let Ie=function(){je.dispose(),s.delete(g),g.removeEventListener("dispose",Ie)};void 0!==O&&O.texture.dispose();const z=void 0!==g.morphAttributes.position,G=void 0!==g.morphAttributes.normal,X=void 0!==g.morphAttributes.color,J=g.morphAttributes.position||[],ae=g.morphAttributes.normal||[],Y=g.morphAttributes.color||[];let re=0;!0===z&&(re=1),!0===G&&(re=2),!0===X&&(re=3);let fe=g.attributes.position.count*re,ge=1;fe>e.maxTextureSize&&(ge=Math.ceil(fe/e.maxTextureSize),fe=e.maxTextureSize);const Ne=new Float32Array(fe*ge*4*C),je=new Iv(Ne,fe,ge,C);je.type=Ho,je.needsUpdate=!0;const me=4*re;for(let be=0;be<C;be++){const ke=J[be],Ve=ae[be],Te=Y[be],Pe=fe*ge*4*be;for(let qe=0;qe<ke.count;qe++){const Ge=qe*me;!0===z&&(a.fromBufferAttribute(ke,qe),!0===ke.normalized&&nb(a,ke),Ne[Pe+Ge+0]=a.x,Ne[Pe+Ge+1]=a.y,Ne[Pe+Ge+2]=a.z,Ne[Pe+Ge+3]=0),!0===G&&(a.fromBufferAttribute(Ve,qe),!0===Ve.normalized&&nb(a,Ve),Ne[Pe+Ge+4]=a.x,Ne[Pe+Ge+5]=a.y,Ne[Pe+Ge+6]=a.z,Ne[Pe+Ge+7]=0),!0===X&&(a.fromBufferAttribute(Te,qe),!0===Te.normalized&&nb(a,Te),Ne[Pe+Ge+8]=a.x,Ne[Pe+Ge+9]=a.y,Ne[Pe+Ge+10]=a.z,Ne[Pe+Ge+11]=4===Te.itemSize?a.w:1)}}O={count:C,texture:je,size:new Le(fe,ge)},s.set(g,O),g.addEventListener("dispose",Ie)}let B=0;for(let z=0;z<T.length;z++)B+=T[z];const V=g.morphTargetsRelative?1:1-B;_.getUniforms().setValue(n,"morphTargetBaseInfluence",V),_.getUniforms().setValue(n,"morphTargetInfluences",T),_.getUniforms().setValue(n,"morphTargetsTexture",O.texture,t),_.getUniforms().setValue(n,"morphTargetsTextureSize",O.size)}else{const A=void 0===T?0:T.length;let C=r[g.id];if(void 0===C||C.length!==A){C=[];for(let G=0;G<A;G++)C[G]=[G,0];r[g.id]=C}for(let G=0;G<A;G++){const X=C[G];X[0]=G,X[1]=T[G]}C.sort(L5);for(let G=0;G<8;G++)G<A&&C[G][1]?(l[G][0]=C[G][0],l[G][1]=C[G][1]):(l[G][0]=Number.MAX_SAFE_INTEGER,l[G][1]=0);l.sort(R5);const O=g.morphAttributes.position,B=g.morphAttributes.normal;let V=0;for(let G=0;G<8;G++){const X=l[G],J=X[0],ae=X[1];J!==Number.MAX_SAFE_INTEGER&&ae?(O&&g.getAttribute("morphTarget"+G)!==O[J]&&g.setAttribute("morphTarget"+G,O[J]),B&&g.getAttribute("morphNormal"+G)!==B[J]&&g.setAttribute("morphNormal"+G,B[J]),i[G]=ae,V+=ae):(O&&!0===g.hasAttribute("morphTarget"+G)&&g.deleteAttribute("morphTarget"+G),B&&!0===g.hasAttribute("morphNormal"+G)&&g.deleteAttribute("morphNormal"+G),i[G]=0)}const z=g.morphTargetsRelative?1:1-V;_.getUniforms().setValue(n,"morphTargetBaseInfluence",z),_.getUniforms().setValue(n,"morphTargetInfluences",i)}}}}function F5(n,e,t,r){let i=new WeakMap;function l(c){const h=c.target;h.removeEventListener("dispose",l),t.remove(h.instanceMatrix),null!==h.instanceColor&&t.remove(h.instanceColor)}return{update:function s(c){const h=r.render.frame,m=e.get(c,c.geometry);return i.get(m)!==h&&(e.update(m),i.set(m,h)),c.isInstancedMesh&&(!1===c.hasEventListener("dispose",l)&&c.addEventListener("dispose",l),t.update(c.instanceMatrix,34962),null!==c.instanceColor&&t.update(c.instanceColor,34962)),m},dispose:function a(){i=new WeakMap}}}const AD=new Go,CD=new Iv,ID=new oD,PD=new Ep,OD=[],RD=[],LD=new Float32Array(16),ND=new Float32Array(9),FD=new Float32Array(4);function ku(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=OD[i];if(void 0===s&&(s=new Float32Array(i),OD[i]=s),0!==e){r.toArray(s,0);for(let a=1,l=0;a!==e;++a)l+=t,n[a].toArray(s,l)}return s}function hi(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function fi(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function Cp(n,e){let t=RD[e];void 0===t&&(t=new Int32Array(e),RD[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function k5(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function B5(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(hi(t,e))return;n.uniform2fv(this.addr,e),fi(t,e)}}function U5(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(hi(t,e))return;n.uniform3fv(this.addr,e),fi(t,e)}}function V5(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(hi(t,e))return;n.uniform4fv(this.addr,e),fi(t,e)}}function z5(n,e){const t=this.cache,r=e.elements;if(void 0===r){if(hi(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),fi(t,e)}else{if(hi(t,r))return;FD.set(r),n.uniformMatrix2fv(this.addr,!1,FD),fi(t,r)}}function $5(n,e){const t=this.cache,r=e.elements;if(void 0===r){if(hi(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),fi(t,e)}else{if(hi(t,r))return;ND.set(r),n.uniformMatrix3fv(this.addr,!1,ND),fi(t,r)}}function H5(n,e){const t=this.cache,r=e.elements;if(void 0===r){if(hi(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),fi(t,e)}else{if(hi(t,r))return;LD.set(r),n.uniformMatrix4fv(this.addr,!1,LD),fi(t,r)}}function G5(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function j5(n,e){const t=this.cache;hi(t,e)||(n.uniform2iv(this.addr,e),fi(t,e))}function W5(n,e){const t=this.cache;hi(t,e)||(n.uniform3iv(this.addr,e),fi(t,e))}function q5(n,e){const t=this.cache;hi(t,e)||(n.uniform4iv(this.addr,e),fi(t,e))}function Y5(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function X5(n,e){const t=this.cache;hi(t,e)||(n.uniform2uiv(this.addr,e),fi(t,e))}function Z5(n,e){const t=this.cache;hi(t,e)||(n.uniform3uiv(this.addr,e),fi(t,e))}function K5(n,e){const t=this.cache;hi(t,e)||(n.uniform4uiv(this.addr,e),fi(t,e))}function J5(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2D(e||AD,i)}function Q5(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||ID,i)}function e$(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||PD,i)}function t$(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||CD,i)}function r$(n,e){n.uniform1fv(this.addr,e)}function i$(n,e){const t=ku(e,this.size,2);n.uniform2fv(this.addr,t)}function s$(n,e){const t=ku(e,this.size,3);n.uniform3fv(this.addr,t)}function o$(n,e){const t=ku(e,this.size,4);n.uniform4fv(this.addr,t)}function a$(n,e){const t=ku(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function l$(n,e){const t=ku(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function u$(n,e){const t=ku(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function c$(n,e){n.uniform1iv(this.addr,e)}function d$(n,e){n.uniform2iv(this.addr,e)}function h$(n,e){n.uniform3iv(this.addr,e)}function f$(n,e){n.uniform4iv(this.addr,e)}function p$(n,e){n.uniform1uiv(this.addr,e)}function g$(n,e){n.uniform2uiv(this.addr,e)}function m$(n,e){n.uniform3uiv(this.addr,e)}function y$(n,e){n.uniform4uiv(this.addr,e)}function v$(n,e,t){const r=e.length,i=Cp(t,r);n.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)t.setTexture2D(e[s]||AD,i[s])}function b$(n,e,t){const r=e.length,i=Cp(t,r);n.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)t.setTexture3D(e[s]||ID,i[s])}function _$(n,e,t){const r=e.length,i=Cp(t,r);n.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)t.setTextureCube(e[s]||PD,i[s])}function x$(n,e,t){const r=e.length,i=Cp(t,r);n.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)t.setTexture2DArray(e[s]||CD,i[s])}class S${constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=function n$(n){switch(n){case 5126:return k5;case 35664:return B5;case 35665:return U5;case 35666:return V5;case 35674:return z5;case 35675:return $5;case 35676:return H5;case 5124:case 35670:return G5;case 35667:case 35671:return j5;case 35668:case 35672:return W5;case 35669:case 35673:return q5;case 5125:return Y5;case 36294:return X5;case 36295:return Z5;case 36296:return K5;case 35678:case 36198:case 36298:case 36306:case 35682:return J5;case 35679:case 36299:case 36307:return Q5;case 35680:case 36300:case 36308:case 36293:return e$;case 36289:case 36303:case 36311:case 36292:return t$}}(t.type)}}class T${constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=function w$(n){switch(n){case 5126:return r$;case 35664:return i$;case 35665:return s$;case 35666:return o$;case 35674:return a$;case 35675:return l$;case 35676:return u$;case 5124:case 35670:return c$;case 35667:case 35671:return d$;case 35668:case 35672:return h$;case 35669:case 35673:return f$;case 5125:return p$;case 36294:return g$;case 36295:return m$;case 36296:return y$;case 35678:case 36198:case 36298:case 36306:case 35682:return v$;case 35679:case 36299:case 36307:return b$;case 35680:case 36300:case 36308:case 36293:return _$;case 36289:case 36303:case 36311:case 36292:return x$}}(t.type)}}class M${constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,a=i.length;s!==a;++s){const l=i[s];l.setValue(e,t[l.id],r)}}}const rb=/(\w+)(\])?(\[|\.)?/g;function kD(n,e){n.seq.push(e),n.map[e.id]=e}function E$(n,e,t){const r=n.name,i=r.length;for(rb.lastIndex=0;;){const s=rb.exec(r),a=rb.lastIndex;let l=s[1];const h=s[3];if("]"===s[2]&&(l|=0),void 0===h||"["===h&&a+2===i){kD(t,void 0===h?new S$(l,n,e):new T$(l,n,e));break}{let m=t.map[l];void 0===m&&(m=new M$(l),kD(t,m)),t=m}}}class Ip{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,35718);for(let i=0;i<r;++i){const s=e.getActiveUniform(t,i);E$(s,e.getUniformLocation(t,s.name),this)}}setValue(e,t,r,i){const s=this.map[t];void 0!==s&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];void 0!==i&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,a=t.length;s!==a;++s){const l=t[s],c=r[l.id];!1!==c.needsUpdate&&l.setValue(e,c.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const a=e[i];a.id in t&&r.push(a)}return r}}function BD(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}let D$=0;function UD(n,e,t){const r=n.getShaderParameter(e,35713),i=n.getShaderInfoLog(e).trim();if(r&&""===i)return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const a=parseInt(s[1]);return t.toUpperCase()+"\n\n"+i+"\n\n"+function A$(n,e){const t=n.split("\n"),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let a=i;a<s;a++){const l=a+1;r.push(`${l===e?">":" "} ${l}: ${t[a]}`)}return r.join("\n")}(n.getShaderSource(e),a)}return i}function I$(n,e){const t=function C$(n){switch(n){case Ba:return["Linear","( value )"];case sr:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function P$(n,e){let t;switch(e){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="OptimizedCineon";break;case 4:t="ACESFilmic";break;case 5:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function xd(n){return""!==n}function VD(n,e){return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function zD(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const N$=/^[ \t]*#include +<([\w\d./]+)>/gm;function ib(n){return n.replace(N$,F$)}function F$(n,e){const t=yn[e];if(void 0===t)throw new Error("Can not resolve #include <"+e+">");return ib(t)}const k$=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,B$=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function $D(n){return n.replace(B$,HD).replace(k$,U$)}function U$(n,e,t,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),HD(0,e,t,r)}function HD(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function GD(n){let e="precision "+n.precision+" float;\nprecision "+n.precision+" int;";return"highp"===n.precision?e+="\n#define HIGH_PRECISION":"mediump"===n.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===n.precision&&(e+="\n#define LOW_PRECISION"),e}function j$(n,e,t,r){const i=n.getContext(),s=t.defines;let a=t.vertexShader,l=t.fragmentShader;const c=function V$(n){let e="SHADOWMAP_TYPE_BASIC";return 1===n.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===n.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===n.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(t),h=function z$(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),g=function $$(n){let e="ENVMAP_MODE_REFLECTION";return n.envMap&&302===n.envMapMode&&(e="ENVMAP_MODE_REFRACTION"),e}(t),m=function H$(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(t),_=function G$(n){const e=n.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:r,maxMip:t}}(t),T=t.isWebGL2?"":function O$(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||"physical"===n.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(xd).join("\n")}(t),A=function R$(n){const e=[];for(const t in n){const r=n[t];!1!==r&&e.push("#define "+t+" "+r)}return e.join("\n")}(s),C=i.createProgram();let O,B,V=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(O=[A].filter(xd).join("\n"),O.length>0&&(O+="\n"),B=[T,A].filter(xd).join("\n"),B.length>0&&(B+="\n")):(O=[GD(t),"#define SHADER_NAME "+t.shaderName,A,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+g:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(xd).join("\n"),B=[T,GD(t),"#define SHADER_NAME "+t.shaderName,A,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.envMap?"#define "+g:"",t.envMap?"#define "+m:"",_?"#define CUBEUV_TEXEL_WIDTH "+_.texelWidth:"",_?"#define CUBEUV_TEXEL_HEIGHT "+_.texelHeight:"",_?"#define CUBEUV_MAX_MIP "+_.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==t.toneMapping?"#define TONE_MAPPING":"",0!==t.toneMapping?yn.tonemapping_pars_fragment:"",0!==t.toneMapping?P$("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",yn.encodings_pars_fragment,I$("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(xd).join("\n")),a=ib(a),a=VD(a,t),a=zD(a,t),l=ib(l),l=VD(l,t),l=zD(l,t),a=$D(a),l=$D(l),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(V="#version 300 es\n",O=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+O,B=["#define varying in","300 es"===t.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===t.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+B);const G=V+B+l,X=BD(i,35633,V+O+a),J=BD(i,35632,G);if(i.attachShader(C,X),i.attachShader(C,J),void 0!==t.index0AttributeName?i.bindAttribLocation(C,0,t.index0AttributeName):!0===t.morphTargets&&i.bindAttribLocation(C,0,"position"),i.linkProgram(C),n.debug.checkShaderErrors){const re=i.getProgramInfoLog(C).trim(),fe=i.getShaderInfoLog(X).trim(),ge=i.getShaderInfoLog(J).trim();let Ne=!0,je=!0;if(!1===i.getProgramParameter(C,35714)){Ne=!1;const me=UD(i,X,"vertex"),Ie=UD(i,J,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(C,35715)+"\n\nProgram Info Log: "+re+"\n"+me+"\n"+Ie)}else""!==re?console.warn("THREE.WebGLProgram: Program Info Log:",re):(""===fe||""===ge)&&(je=!1);je&&(this.diagnostics={runnable:Ne,programLog:re,vertexShader:{log:fe,prefix:O},fragmentShader:{log:ge,prefix:B}})}let ae,Y;return i.deleteShader(X),i.deleteShader(J),this.getUniforms=function(){return void 0===ae&&(ae=new Ip(i,C)),ae},this.getAttributes=function(){return void 0===Y&&(Y=function L$(n,e){const t={},r=n.getProgramParameter(e,35721);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),a=s.name;let l=1;35674===s.type&&(l=2),35675===s.type&&(l=3),35676===s.type&&(l=4),t[a]={type:s.type,location:n.getAttribLocation(e,a),locationSize:l}}return t}(i,C)),Y},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(C),this.program=void 0},this.name=t.shaderName,this.id=D$++,this.cacheKey=e,this.usedTimes=1,this.program=C,this.vertexShader=X,this.fragmentShader=J,this}let W$=0;class q${constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const r=e.fragmentShader,i=this._getShaderStage(e.vertexShader),s=this._getShaderStage(r),a=this._getShaderCacheForMaterial(e);return!1===a.has(i)&&(a.add(i),i.usedTimes++),!1===a.has(s)&&(a.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,0===r.usedTimes&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;return!1===t.has(e)&&t.set(e,new Set),t.get(e)}_getShaderStage(e){const t=this.shaderCache;if(!1===t.has(e)){const r=new Y$(e);t.set(e,r)}return t.get(e)}}class Y${constructor(e){this.id=W$++,this.code=e,this.usedTimes=0}}function X$(n,e,t,r,i,s,a){const l=new Bv,c=new q$,h=[],g=i.isWebGL2,m=i.logarithmicDepthBuffer,_=i.vertexTextures;let T=i.precision;const A={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function C(Y,re,fe,ge,Ne){const je=ge.fog,me=Ne.geometry,be=(Y.isMeshStandardMaterial?t:e).get(Y.envMap||(Y.isMeshStandardMaterial?ge.environment:null)),ke=be&&306===be.mapping?be.image.height:null,Ve=A[Y.type];null!==Y.precision&&(T=i.getMaxPrecision(Y.precision),T!==Y.precision&&console.warn("THREE.WebGLProgram.getParameters:",Y.precision,"not supported, using",T,"instead."));const Te=me.morphAttributes.position||me.morphAttributes.normal||me.morphAttributes.color,Pe=void 0!==Te?Te.length:0;let Ge,st,xt,Mt,qe=0;if(void 0!==me.morphAttributes.position&&(qe=1),void 0!==me.morphAttributes.normal&&(qe=2),void 0!==me.morphAttributes.color&&(qe=3),Ve){const on=Bs[Ve];Ge=on.vertexShader,st=on.fragmentShader}else Ge=Y.vertexShader,st=Y.fragmentShader,c.update(Y),xt=c.getVertexShaderID(Y),Mt=c.getFragmentShaderID(Y);const Oe=n.getRenderTarget(),Qt=Y.clearcoat>0,jt=Y.iridescence>0;return{isWebGL2:g,shaderID:Ve,shaderName:Y.type,vertexShader:Ge,fragmentShader:st,defines:Y.defines,customVertexShaderID:xt,customFragmentShaderID:Mt,isRawShaderMaterial:!0===Y.isRawShaderMaterial,glslVersion:Y.glslVersion,precision:T,instancing:!0===Ne.isInstancedMesh,instancingColor:!0===Ne.isInstancedMesh&&null!==Ne.instanceColor,supportsVertexTextures:_,outputEncoding:null===Oe?n.outputEncoding:!0===Oe.isXRRenderTarget?Oe.texture.encoding:Ba,map:!!Y.map,matcap:!!Y.matcap,envMap:!!be,envMapMode:be&&be.mapping,envMapCubeUVHeight:ke,lightMap:!!Y.lightMap,aoMap:!!Y.aoMap,emissiveMap:!!Y.emissiveMap,bumpMap:!!Y.bumpMap,normalMap:!!Y.normalMap,objectSpaceNormalMap:1===Y.normalMapType,tangentSpaceNormalMap:0===Y.normalMapType,decodeVideoTexture:!!Y.map&&!0===Y.map.isVideoTexture&&Y.map.encoding===sr,clearcoat:Qt,clearcoatMap:Qt&&!!Y.clearcoatMap,clearcoatRoughnessMap:Qt&&!!Y.clearcoatRoughnessMap,clearcoatNormalMap:Qt&&!!Y.clearcoatNormalMap,iridescence:jt,iridescenceMap:jt&&!!Y.iridescenceMap,iridescenceThicknessMap:jt&&!!Y.iridescenceThicknessMap,displacementMap:!!Y.displacementMap,roughnessMap:!!Y.roughnessMap,metalnessMap:!!Y.metalnessMap,specularMap:!!Y.specularMap,specularIntensityMap:!!Y.specularIntensityMap,specularColorMap:!!Y.specularColorMap,opaque:!1===Y.transparent&&1===Y.blending,alphaMap:!!Y.alphaMap,alphaTest:Y.alphaTest>0,gradientMap:!!Y.gradientMap,sheen:Y.sheen>0,sheenColorMap:!!Y.sheenColorMap,sheenRoughnessMap:!!Y.sheenRoughnessMap,transmission:Y.transmission>0,transmissionMap:!!Y.transmissionMap,thicknessMap:!!Y.thicknessMap,combine:Y.combine,vertexTangents:!!Y.normalMap&&!!me.attributes.tangent,vertexColors:Y.vertexColors,vertexAlphas:!0===Y.vertexColors&&!!me.attributes.color&&4===me.attributes.color.itemSize,vertexUvs:!!(Y.map||Y.bumpMap||Y.normalMap||Y.specularMap||Y.alphaMap||Y.emissiveMap||Y.roughnessMap||Y.metalnessMap||Y.clearcoatMap||Y.clearcoatRoughnessMap||Y.clearcoatNormalMap||Y.iridescenceMap||Y.iridescenceThicknessMap||Y.displacementMap||Y.transmissionMap||Y.thicknessMap||Y.specularIntensityMap||Y.specularColorMap||Y.sheenColorMap||Y.sheenRoughnessMap),uvsVertexOnly:!(Y.map||Y.bumpMap||Y.normalMap||Y.specularMap||Y.alphaMap||Y.emissiveMap||Y.roughnessMap||Y.metalnessMap||Y.clearcoatNormalMap||Y.iridescenceMap||Y.iridescenceThicknessMap||Y.transmission>0||Y.transmissionMap||Y.thicknessMap||Y.specularIntensityMap||Y.specularColorMap||Y.sheen>0||Y.sheenColorMap||Y.sheenRoughnessMap||!Y.displacementMap),fog:!!je,useFog:!0===Y.fog,fogExp2:je&&je.isFogExp2,flatShading:!!Y.flatShading,sizeAttenuation:Y.sizeAttenuation,logarithmicDepthBuffer:m,skinning:!0===Ne.isSkinnedMesh,morphTargets:void 0!==me.morphAttributes.position,morphNormals:void 0!==me.morphAttributes.normal,morphColors:void 0!==me.morphAttributes.color,morphTargetsCount:Pe,morphTextureStride:qe,numDirLights:re.directional.length,numPointLights:re.point.length,numSpotLights:re.spot.length,numRectAreaLights:re.rectArea.length,numHemiLights:re.hemi.length,numDirLightShadows:re.directionalShadowMap.length,numPointLightShadows:re.pointShadowMap.length,numSpotLightShadows:re.spotShadowMap.length,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:Y.dithering,shadowMapEnabled:n.shadowMap.enabled&&fe.length>0,shadowMapType:n.shadowMap.type,toneMapping:Y.toneMapped?n.toneMapping:0,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:Y.premultipliedAlpha,doubleSided:2===Y.side,flipSided:1===Y.side,useDepthPacking:!!Y.depthPacking,depthPacking:Y.depthPacking||0,index0AttributeName:Y.index0AttributeName,extensionDerivatives:Y.extensions&&Y.extensions.derivatives,extensionFragDepth:Y.extensions&&Y.extensions.fragDepth,extensionDrawBuffers:Y.extensions&&Y.extensions.drawBuffers,extensionShaderTextureLOD:Y.extensions&&Y.extensions.shaderTextureLOD,rendererExtensionFragDepth:g||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:g||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:g||r.has("EXT_shader_texture_lod"),customProgramCacheKey:Y.customProgramCacheKey()}},getProgramCacheKey:function O(Y){const re=[];if(Y.shaderID?re.push(Y.shaderID):(re.push(Y.customVertexShaderID),re.push(Y.customFragmentShaderID)),void 0!==Y.defines)for(const fe in Y.defines)re.push(fe),re.push(Y.defines[fe]);return!1===Y.isRawShaderMaterial&&(function B(Y,re){Y.push(re.precision),Y.push(re.outputEncoding),Y.push(re.envMapMode),Y.push(re.envMapCubeUVHeight),Y.push(re.combine),Y.push(re.vertexUvs),Y.push(re.fogExp2),Y.push(re.sizeAttenuation),Y.push(re.morphTargetsCount),Y.push(re.morphAttributeCount),Y.push(re.numDirLights),Y.push(re.numPointLights),Y.push(re.numSpotLights),Y.push(re.numHemiLights),Y.push(re.numRectAreaLights),Y.push(re.numDirLightShadows),Y.push(re.numPointLightShadows),Y.push(re.numSpotLightShadows),Y.push(re.shadowMapType),Y.push(re.toneMapping),Y.push(re.numClippingPlanes),Y.push(re.numClipIntersection),Y.push(re.depthPacking)}(re,Y),function V(Y,re){l.disableAll(),re.isWebGL2&&l.enable(0),re.supportsVertexTextures&&l.enable(1),re.instancing&&l.enable(2),re.instancingColor&&l.enable(3),re.map&&l.enable(4),re.matcap&&l.enable(5),re.envMap&&l.enable(6),re.lightMap&&l.enable(7),re.aoMap&&l.enable(8),re.emissiveMap&&l.enable(9),re.bumpMap&&l.enable(10),re.normalMap&&l.enable(11),re.objectSpaceNormalMap&&l.enable(12),re.tangentSpaceNormalMap&&l.enable(13),re.clearcoat&&l.enable(14),re.clearcoatMap&&l.enable(15),re.clearcoatRoughnessMap&&l.enable(16),re.clearcoatNormalMap&&l.enable(17),re.iridescence&&l.enable(18),re.iridescenceMap&&l.enable(19),re.iridescenceThicknessMap&&l.enable(20),re.displacementMap&&l.enable(21),re.specularMap&&l.enable(22),re.roughnessMap&&l.enable(23),re.metalnessMap&&l.enable(24),re.gradientMap&&l.enable(25),re.alphaMap&&l.enable(26),re.alphaTest&&l.enable(27),re.vertexColors&&l.enable(28),re.vertexAlphas&&l.enable(29),re.vertexUvs&&l.enable(30),re.vertexTangents&&l.enable(31),re.uvsVertexOnly&&l.enable(32),re.fog&&l.enable(33),Y.push(l.mask),l.disableAll(),re.useFog&&l.enable(0),re.flatShading&&l.enable(1),re.logarithmicDepthBuffer&&l.enable(2),re.skinning&&l.enable(3),re.morphTargets&&l.enable(4),re.morphNormals&&l.enable(5),re.morphColors&&l.enable(6),re.premultipliedAlpha&&l.enable(7),re.shadowMapEnabled&&l.enable(8),re.physicallyCorrectLights&&l.enable(9),re.doubleSided&&l.enable(10),re.flipSided&&l.enable(11),re.useDepthPacking&&l.enable(12),re.dithering&&l.enable(13),re.specularIntensityMap&&l.enable(14),re.specularColorMap&&l.enable(15),re.transmission&&l.enable(16),re.transmissionMap&&l.enable(17),re.thicknessMap&&l.enable(18),re.sheen&&l.enable(19),re.sheenColorMap&&l.enable(20),re.sheenRoughnessMap&&l.enable(21),re.decodeVideoTexture&&l.enable(22),re.opaque&&l.enable(23),Y.push(l.mask)}(re,Y),re.push(n.outputEncoding)),re.push(Y.customProgramCacheKey),re.join()},getUniforms:function z(Y){const re=A[Y.type];let fe;return fe=re?gV.clone(Bs[re].uniforms):Y.uniforms,fe},acquireProgram:function G(Y,re){let fe;for(let ge=0,Ne=h.length;ge<Ne;ge++){const je=h[ge];if(je.cacheKey===re){fe=je,++fe.usedTimes;break}}return void 0===fe&&(fe=new j$(n,re,Y,s),h.push(fe)),fe},releaseProgram:function X(Y){if(0==--Y.usedTimes){const re=h.indexOf(Y);h[re]=h[h.length-1],h.pop(),Y.destroy()}},releaseShaderCache:function J(Y){c.remove(Y)},programs:h,dispose:function ae(){c.dispose()}}}function Z$(){let n=new WeakMap;return{get:function e(s){let a=n.get(s);return void 0===a&&(a={},n.set(s,a)),a},remove:function t(s){n.delete(s)},update:function r(s,a,l){n.get(s)[a]=l},dispose:function i(){n=new WeakMap}}}function K$(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function jD(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function WD(){const n=[];let e=0;const t=[],r=[],i=[];function a(m,_,T,A,C,O){let B=n[e];return void 0===B?(B={id:m.id,object:m,geometry:_,material:T,groupOrder:A,renderOrder:m.renderOrder,z:C,group:O},n[e]=B):(B.id=m.id,B.object=m,B.geometry=_,B.material=T,B.groupOrder=A,B.renderOrder=m.renderOrder,B.z=C,B.group=O),e++,B}return{opaque:t,transmissive:r,transparent:i,init:function s(){e=0,t.length=0,r.length=0,i.length=0},push:function l(m,_,T,A,C,O){const B=a(m,_,T,A,C,O);T.transmission>0?r.push(B):!0===T.transparent?i.push(B):t.push(B)},unshift:function c(m,_,T,A,C,O){const B=a(m,_,T,A,C,O);T.transmission>0?r.unshift(B):!0===T.transparent?i.unshift(B):t.unshift(B)},finish:function g(){for(let m=e,_=n.length;m<_;m++){const T=n[m];if(null===T.id)break;T.id=null,T.object=null,T.geometry=null,T.material=null,T.group=null}},sort:function h(m,_){t.length>1&&t.sort(m||K$),r.length>1&&r.sort(_||jD),i.length>1&&i.sort(_||jD)}}}function J$(){let n=new WeakMap;return{get:function e(r,i){let s;return!1===n.has(r)?(s=new WD,n.set(r,[s])):i>=n.get(r).length?(s=new WD,n.get(r).push(s)):s=n.get(r)[i],s},dispose:function t(){n=new WeakMap}}}function Q$(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Q,color:new bt};break;case"SpotLight":t={position:new Q,direction:new Q,color:new bt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Q,color:new bt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Q,skyColor:new bt,groundColor:new bt};break;case"RectAreaLight":t={color:new bt,position:new Q,halfWidth:new Q,halfHeight:new Q}}return n[e.id]=t,t}}}let t8=0;function n8(n,e){return(e.castShadow?1:0)-(n.castShadow?1:0)}function r8(n,e){const t=new Q$,r=function e8(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Le};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Le,shadowCameraNear:1,shadowCameraFar:1e3}}return n[e.id]=t,t}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let g=0;g<9;g++)i.probe.push(new Q);const s=new Q,a=new un,l=new un;return{setup:function c(g,m){let _=0,T=0,A=0;for(let re=0;re<9;re++)i.probe[re].set(0,0,0);let C=0,O=0,B=0,V=0,z=0,G=0,X=0,J=0;g.sort(n8);const ae=!0!==m?Math.PI:1;for(let re=0,fe=g.length;re<fe;re++){const ge=g[re],Ne=ge.color,je=ge.intensity,me=ge.distance,Ie=ge.shadow&&ge.shadow.map?ge.shadow.map.texture:null;if(ge.isAmbientLight)_+=Ne.r*je*ae,T+=Ne.g*je*ae,A+=Ne.b*je*ae;else if(ge.isLightProbe)for(let be=0;be<9;be++)i.probe[be].addScaledVector(ge.sh.coefficients[be],je);else if(ge.isDirectionalLight){const be=t.get(ge);if(be.color.copy(ge.color).multiplyScalar(ge.intensity*ae),ge.castShadow){const ke=ge.shadow,Ve=r.get(ge);Ve.shadowBias=ke.bias,Ve.shadowNormalBias=ke.normalBias,Ve.shadowRadius=ke.radius,Ve.shadowMapSize=ke.mapSize,i.directionalShadow[C]=Ve,i.directionalShadowMap[C]=Ie,i.directionalShadowMatrix[C]=ge.shadow.matrix,G++}i.directional[C]=be,C++}else if(ge.isSpotLight){const be=t.get(ge);if(be.position.setFromMatrixPosition(ge.matrixWorld),be.color.copy(Ne).multiplyScalar(je*ae),be.distance=me,be.coneCos=Math.cos(ge.angle),be.penumbraCos=Math.cos(ge.angle*(1-ge.penumbra)),be.decay=ge.decay,ge.castShadow){const ke=ge.shadow,Ve=r.get(ge);Ve.shadowBias=ke.bias,Ve.shadowNormalBias=ke.normalBias,Ve.shadowRadius=ke.radius,Ve.shadowMapSize=ke.mapSize,i.spotShadow[B]=Ve,i.spotShadowMap[B]=Ie,i.spotShadowMatrix[B]=ge.shadow.matrix,J++}i.spot[B]=be,B++}else if(ge.isRectAreaLight){const be=t.get(ge);be.color.copy(Ne).multiplyScalar(je),be.halfWidth.set(.5*ge.width,0,0),be.halfHeight.set(0,.5*ge.height,0),i.rectArea[V]=be,V++}else if(ge.isPointLight){const be=t.get(ge);if(be.color.copy(ge.color).multiplyScalar(ge.intensity*ae),be.distance=ge.distance,be.decay=ge.decay,ge.castShadow){const ke=ge.shadow,Ve=r.get(ge);Ve.shadowBias=ke.bias,Ve.shadowNormalBias=ke.normalBias,Ve.shadowRadius=ke.radius,Ve.shadowMapSize=ke.mapSize,Ve.shadowCameraNear=ke.camera.near,Ve.shadowCameraFar=ke.camera.far,i.pointShadow[O]=Ve,i.pointShadowMap[O]=Ie,i.pointShadowMatrix[O]=ge.shadow.matrix,X++}i.point[O]=be,O++}else if(ge.isHemisphereLight){const be=t.get(ge);be.skyColor.copy(ge.color).multiplyScalar(je*ae),be.groundColor.copy(ge.groundColor).multiplyScalar(je*ae),i.hemi[z]=be,z++}}V>0&&(e.isWebGL2||!0===n.has("OES_texture_float_linear")?(i.rectAreaLTC1=lt.LTC_FLOAT_1,i.rectAreaLTC2=lt.LTC_FLOAT_2):!0===n.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=lt.LTC_HALF_1,i.rectAreaLTC2=lt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=_,i.ambient[1]=T,i.ambient[2]=A;const Y=i.hash;(Y.directionalLength!==C||Y.pointLength!==O||Y.spotLength!==B||Y.rectAreaLength!==V||Y.hemiLength!==z||Y.numDirectionalShadows!==G||Y.numPointShadows!==X||Y.numSpotShadows!==J)&&(i.directional.length=C,i.spot.length=B,i.rectArea.length=V,i.point.length=O,i.hemi.length=z,i.directionalShadow.length=G,i.directionalShadowMap.length=G,i.pointShadow.length=X,i.pointShadowMap.length=X,i.spotShadow.length=J,i.spotShadowMap.length=J,i.directionalShadowMatrix.length=G,i.pointShadowMatrix.length=X,i.spotShadowMatrix.length=J,Y.directionalLength=C,Y.pointLength=O,Y.spotLength=B,Y.rectAreaLength=V,Y.hemiLength=z,Y.numDirectionalShadows=G,Y.numPointShadows=X,Y.numSpotShadows=J,i.version=t8++)},setupView:function h(g,m){let _=0,T=0,A=0,C=0,O=0;const B=m.matrixWorldInverse;for(let V=0,z=g.length;V<z;V++){const G=g[V];if(G.isDirectionalLight){const X=i.directional[_];X.direction.setFromMatrixPosition(G.matrixWorld),s.setFromMatrixPosition(G.target.matrixWorld),X.direction.sub(s),X.direction.transformDirection(B),_++}else if(G.isSpotLight){const X=i.spot[A];X.position.setFromMatrixPosition(G.matrixWorld),X.position.applyMatrix4(B),X.direction.setFromMatrixPosition(G.matrixWorld),s.setFromMatrixPosition(G.target.matrixWorld),X.direction.sub(s),X.direction.transformDirection(B),A++}else if(G.isRectAreaLight){const X=i.rectArea[C];X.position.setFromMatrixPosition(G.matrixWorld),X.position.applyMatrix4(B),l.identity(),a.copy(G.matrixWorld),a.premultiply(B),l.extractRotation(a),X.halfWidth.set(.5*G.width,0,0),X.halfHeight.set(0,.5*G.height,0),X.halfWidth.applyMatrix4(l),X.halfHeight.applyMatrix4(l),C++}else if(G.isPointLight){const X=i.point[T];X.position.setFromMatrixPosition(G.matrixWorld),X.position.applyMatrix4(B),T++}else if(G.isHemisphereLight){const X=i.hemi[O];X.direction.setFromMatrixPosition(G.matrixWorld),X.direction.transformDirection(B),O++}}},state:i}}function qD(n,e){const t=new r8(n,e),r=[],i=[];return{init:function s(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:t},setupLights:function c(m){t.setup(r,m)},setupLightsView:function h(m){t.setupView(r,m)},pushLight:function a(m){r.push(m)},pushShadow:function l(m){i.push(m)}}}function i8(n,e){let t=new WeakMap;return{get:function r(s,a=0){let l;return!1===t.has(s)?(l=new qD(n,e),t.set(s,[l])):a>=t.get(s).length?(l=new qD(n,e),t.get(s).push(l)):l=t.get(s)[a],l},dispose:function i(){t=new WeakMap}}}class YD extends qa{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class XD extends qa{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new Q,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function a8(n,e,t){let r=new Kv;const i=new Le,s=new Le,a=new Ln,l=new YD({depthPacking:3201}),c=new XD,h={},g=t.maxTextureSize,m={0:1,1:0,2:2},_=new Qo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Le},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),T=_.clone();T.defines.HORIZONTAL_PASS=1;const A=new mn;A.setAttribute("position",new Or(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const C=new Mi(A,_),O=this;function B(G,X){const J=e.update(C);_.defines.VSM_SAMPLES!==G.blurSamples&&(_.defines.VSM_SAMPLES=G.blurSamples,T.defines.VSM_SAMPLES=G.blurSamples,_.needsUpdate=!0,T.needsUpdate=!0),null===G.mapPass&&(G.mapPass=new Ha(i.x,i.y)),_.uniforms.shadow_pass.value=G.map.texture,_.uniforms.resolution.value=G.mapSize,_.uniforms.radius.value=G.radius,n.setRenderTarget(G.mapPass),n.clear(),n.renderBufferDirect(X,null,J,_,C,null),T.uniforms.shadow_pass.value=G.mapPass.texture,T.uniforms.resolution.value=G.mapSize,T.uniforms.radius.value=G.radius,n.setRenderTarget(G.map),n.clear(),n.renderBufferDirect(X,null,J,T,C,null)}function V(G,X,J,ae,Y,re){let fe=null;const ge=!0===J.isPointLight?G.customDistanceMaterial:G.customDepthMaterial;if(fe=void 0!==ge?ge:!0===J.isPointLight?c:l,n.localClippingEnabled&&!0===X.clipShadows&&Array.isArray(X.clippingPlanes)&&0!==X.clippingPlanes.length||X.displacementMap&&0!==X.displacementScale||X.alphaMap&&X.alphaTest>0){const Ne=fe.uuid,je=X.uuid;let me=h[Ne];void 0===me&&(me={},h[Ne]=me);let Ie=me[je];void 0===Ie&&(Ie=fe.clone(),me[je]=Ie),fe=Ie}return fe.visible=X.visible,fe.wireframe=X.wireframe,fe.side=3===re?null!==X.shadowSide?X.shadowSide:X.side:null!==X.shadowSide?X.shadowSide:m[X.side],fe.alphaMap=X.alphaMap,fe.alphaTest=X.alphaTest,fe.clipShadows=X.clipShadows,fe.clippingPlanes=X.clippingPlanes,fe.clipIntersection=X.clipIntersection,fe.displacementMap=X.displacementMap,fe.displacementScale=X.displacementScale,fe.displacementBias=X.displacementBias,fe.wireframeLinewidth=X.wireframeLinewidth,fe.linewidth=X.linewidth,!0===J.isPointLight&&!0===fe.isMeshDistanceMaterial&&(fe.referencePosition.setFromMatrixPosition(J.matrixWorld),fe.nearDistance=ae,fe.farDistance=Y),fe}function z(G,X,J,ae,Y){if(!1===G.visible)return;if(G.layers.test(X.layers)&&(G.isMesh||G.isLine||G.isPoints)&&(G.castShadow||G.receiveShadow&&3===Y)&&(!G.frustumCulled||r.intersectsObject(G))){G.modelViewMatrix.multiplyMatrices(J.matrixWorldInverse,G.matrixWorld);const ge=e.update(G),Ne=G.material;if(Array.isArray(Ne)){const je=ge.groups;for(let me=0,Ie=je.length;me<Ie;me++){const be=je[me],ke=Ne[be.materialIndex];if(ke&&ke.visible){const Ve=V(G,ke,ae,J.near,J.far,Y);n.renderBufferDirect(J,null,ge,Ve,G,be)}}}else if(Ne.visible){const je=V(G,Ne,ae,J.near,J.far,Y);n.renderBufferDirect(J,null,ge,je,G,null)}}const fe=G.children;for(let ge=0,Ne=fe.length;ge<Ne;ge++)z(fe[ge],X,J,ae,Y)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(G,X,J){if(!1===O.enabled||!1===O.autoUpdate&&!1===O.needsUpdate||0===G.length)return;const ae=n.getRenderTarget(),Y=n.getActiveCubeFace(),re=n.getActiveMipmapLevel(),fe=n.state;fe.setBlending(0),fe.buffers.color.setClear(1,1,1,1),fe.buffers.depth.setTest(!0),fe.setScissorTest(!1);for(let ge=0,Ne=G.length;ge<Ne;ge++){const je=G[ge],me=je.shadow;if(void 0===me){console.warn("THREE.WebGLShadowMap:",je,"has no shadow.");continue}if(!1===me.autoUpdate&&!1===me.needsUpdate)continue;i.copy(me.mapSize);const Ie=me.getFrameExtents();i.multiply(Ie),s.copy(me.mapSize),(i.x>g||i.y>g)&&(i.x>g&&(s.x=Math.floor(g/Ie.x),i.x=s.x*Ie.x,me.mapSize.x=s.x),i.y>g&&(s.y=Math.floor(g/Ie.y),i.y=s.y*Ie.y,me.mapSize.y=s.y)),null===me.map&&(me.map=new Ha(i.x,i.y,3!==this.type?{minFilter:Mr,magFilter:Mr}:{}),me.map.texture.name=je.name+".shadowMap",me.camera.updateProjectionMatrix()),n.setRenderTarget(me.map),n.clear();const be=me.getViewportCount();for(let ke=0;ke<be;ke++){const Ve=me.getViewport(ke);a.set(s.x*Ve.x,s.y*Ve.y,s.x*Ve.z,s.y*Ve.w),fe.viewport(a),me.updateMatrices(je,ke),r=me.getFrustum(),z(X,J,me.camera,je,this.type)}!0!==me.isPointLightShadow&&3===this.type&&B(me,J),me.needsUpdate=!1}O.needsUpdate=!1,n.setRenderTarget(ae,Y,re)}}function l8(n,e,t){const r=t.isWebGL2,l=new function i(){let le=!1;const nt=new Ln;let Qe=null;const Vt=new Ln(0,0,0,0);return{setMask:function(ft){Qe!==ft&&!le&&(n.colorMask(ft,ft,ft,ft),Qe=ft)},setLocked:function(ft){le=ft},setClear:function(ft,Pt,rt,Xt,Nn){!0===Nn&&(ft*=Xt,Pt*=Xt,rt*=Xt),nt.set(ft,Pt,rt,Xt),!1===Vt.equals(nt)&&(n.clearColor(ft,Pt,rt,Xt),Vt.copy(nt))},reset:function(){le=!1,Qe=null,Vt.set(-1,0,0,0)}}},c=new function s(){let le=!1,nt=null,Qe=null,Vt=null;return{setTest:function(ft){ft?Mt(2929):Oe(2929)},setMask:function(ft){nt!==ft&&!le&&(n.depthMask(ft),nt=ft)},setFunc:function(ft){if(Qe!==ft){if(ft)switch(ft){case 0:n.depthFunc(512);break;case 1:n.depthFunc(519);break;case 2:n.depthFunc(513);break;case 3:default:n.depthFunc(515);break;case 4:n.depthFunc(514);break;case 5:n.depthFunc(518);break;case 6:n.depthFunc(516);break;case 7:n.depthFunc(517)}else n.depthFunc(515);Qe=ft}},setLocked:function(ft){le=ft},setClear:function(ft){Vt!==ft&&(n.clearDepth(ft),Vt=ft)},reset:function(){le=!1,nt=null,Qe=null,Vt=null}}},h=new function a(){let le=!1,nt=null,Qe=null,Vt=null,ft=null,Pt=null,rt=null,Xt=null,Nn=null;return{setTest:function(Fn){le||(Fn?Mt(2960):Oe(2960))},setMask:function(Fn){nt!==Fn&&!le&&(n.stencilMask(Fn),nt=Fn)},setFunc:function(Fn,gi,zs){(Qe!==Fn||Vt!==gi||ft!==zs)&&(n.stencilFunc(Fn,gi,zs),Qe=Fn,Vt=gi,ft=zs)},setOp:function(Fn,gi,zs){(Pt!==Fn||rt!==gi||Xt!==zs)&&(n.stencilOp(Fn,gi,zs),Pt=Fn,rt=gi,Xt=zs)},setLocked:function(Fn){le=Fn},setClear:function(Fn){Nn!==Fn&&(n.clearStencil(Fn),Nn=Fn)},reset:function(){le=!1,nt=null,Qe=null,Vt=null,ft=null,Pt=null,rt=null,Xt=null,Nn=null}}};let g={},m={},_=new WeakMap,T=[],A=null,C=!1,O=null,B=null,V=null,z=null,G=null,X=null,J=null,ae=!1,Y=null,re=null,fe=null,ge=null,Ne=null;const je=n.getParameter(35661);let me=!1,Ie=0;const be=n.getParameter(7938);-1!==be.indexOf("WebGL")?(Ie=parseFloat(/^WebGL (\d)/.exec(be)[1]),me=Ie>=1):-1!==be.indexOf("OpenGL ES")&&(Ie=parseFloat(/^OpenGL ES (\d)/.exec(be)[1]),me=Ie>=2);let ke=null,Ve={};const Te=n.getParameter(3088),Pe=n.getParameter(2978),qe=(new Ln).fromArray(Te),Ge=(new Ln).fromArray(Pe);function st(le,nt,Qe){const Vt=new Uint8Array(4),ft=n.createTexture();n.bindTexture(le,ft),n.texParameteri(le,10241,9728),n.texParameteri(le,10240,9728);for(let Pt=0;Pt<Qe;Pt++)n.texImage2D(nt+Pt,0,6408,1,1,0,6408,5121,Vt);return ft}const xt={};function Mt(le){!0!==g[le]&&(n.enable(le),g[le]=!0)}function Oe(le){!1!==g[le]&&(n.disable(le),g[le]=!1)}xt[3553]=st(3553,3553,1),xt[34067]=st(34067,34069,6),l.setClear(0,0,0,1),c.setClear(1),h.setClear(0),Mt(2929),c.setFunc(3),Je(!1),wt(1),Mt(2884),Be(0);const ot={100:32774,101:32778,102:32779};if(r)ot[103]=32775,ot[104]=32776;else{const le=e.get("EXT_blend_minmax");null!==le&&(ot[103]=le.MIN_EXT,ot[104]=le.MAX_EXT)}const on={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function Be(le,nt,Qe,Vt,ft,Pt,rt,Xt){if(0!==le){if(!1===C&&(Mt(3042),C=!0),5===le)ft=ft||nt,Pt=Pt||Qe,rt=rt||Vt,(nt!==B||ft!==G)&&(n.blendEquationSeparate(ot[nt],ot[ft]),B=nt,G=ft),(Qe!==V||Vt!==z||Pt!==X||rt!==J)&&(n.blendFuncSeparate(on[Qe],on[Vt],on[Pt],on[rt]),V=Qe,z=Vt,X=Pt,J=rt),O=le,ae=null;else if(le!==O||Xt!==ae){if((100!==B||100!==G)&&(n.blendEquation(32774),B=100,G=100),Xt)switch(le){case 1:n.blendFuncSeparate(1,771,1,771);break;case 2:n.blendFunc(1,1);break;case 3:n.blendFuncSeparate(0,769,0,1);break;case 4:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",le)}else switch(le){case 1:n.blendFuncSeparate(770,771,1,771);break;case 2:n.blendFunc(770,1);break;case 3:n.blendFuncSeparate(0,769,0,1);break;case 4:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",le)}V=null,z=null,X=null,J=null,O=le,ae=Xt}}else!0===C&&(Oe(3042),C=!1)}function Je(le){Y!==le&&(n.frontFace(le?2304:2305),Y=le)}function wt(le){0!==le?(Mt(2884),le!==re&&n.cullFace(1===le?1029:2===le?1028:1032)):Oe(2884),re=le}function Yt(le,nt,Qe){le?(Mt(32823),(ge!==nt||Ne!==Qe)&&(n.polygonOffset(nt,Qe),ge=nt,Ne=Qe)):Oe(32823)}function Lt(le){void 0===le&&(le=33984+je-1),ke!==le&&(n.activeTexture(le),ke=le)}return{buffers:{color:l,depth:c,stencil:h},enable:Mt,disable:Oe,bindFramebuffer:function Cn(le,nt){return m[le]!==nt&&(n.bindFramebuffer(le,nt),m[le]=nt,r&&(36009===le&&(m[36160]=nt),36160===le&&(m[36009]=nt)),!0)},drawBuffers:function Qt(le,nt){let Qe=T,Vt=!1;if(le)if(Qe=_.get(nt),void 0===Qe&&(Qe=[],_.set(nt,Qe)),le.isWebGLMultipleRenderTargets){const ft=le.texture;if(Qe.length!==ft.length||36064!==Qe[0]){for(let Pt=0,rt=ft.length;Pt<rt;Pt++)Qe[Pt]=36064+Pt;Qe.length=ft.length,Vt=!0}}else 36064!==Qe[0]&&(Qe[0]=36064,Vt=!0);else 1029!==Qe[0]&&(Qe[0]=1029,Vt=!0);Vt&&(t.isWebGL2?n.drawBuffers(Qe):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Qe))},useProgram:function jt(le){return A!==le&&(n.useProgram(le),A=le,!0)},setBlending:Be,setMaterial:function Fe(le,nt){2===le.side?Oe(2884):Mt(2884);let Qe=1===le.side;nt&&(Qe=!Qe),Je(Qe),1===le.blending&&!1===le.transparent?Be(0):Be(le.blending,le.blendEquation,le.blendSrc,le.blendDst,le.blendEquationAlpha,le.blendSrcAlpha,le.blendDstAlpha,le.premultipliedAlpha),c.setFunc(le.depthFunc),c.setTest(le.depthTest),c.setMask(le.depthWrite),l.setMask(le.colorWrite);const Vt=le.stencilWrite;h.setTest(Vt),Vt&&(h.setMask(le.stencilWriteMask),h.setFunc(le.stencilFunc,le.stencilRef,le.stencilFuncMask),h.setOp(le.stencilFail,le.stencilZFail,le.stencilZPass)),Yt(le.polygonOffset,le.polygonOffsetFactor,le.polygonOffsetUnits),!0===le.alphaToCoverage?Mt(32926):Oe(32926)},setFlipSided:Je,setCullFace:wt,setLineWidth:function ut(le){le!==fe&&(me&&n.lineWidth(le),fe=le)},setPolygonOffset:Yt,setScissorTest:function Ut(le){le?Mt(3089):Oe(3089)},activeTexture:Lt,bindTexture:function Vn(le,nt){null===ke&&Lt();let Qe=Ve[ke];void 0===Qe&&(Qe={type:void 0,texture:void 0},Ve[ke]=Qe),(Qe.type!==le||Qe.texture!==nt)&&(n.bindTexture(le,nt||xt[le]),Qe.type=le,Qe.texture=nt)},unbindTexture:function In(){const le=Ve[ke];void 0!==le&&void 0!==le.type&&(n.bindTexture(le.type,null),le.type=void 0,le.texture=void 0)},compressedTexImage2D:function ie(){try{n.compressedTexImage2D.apply(n,arguments)}catch(le){console.error("THREE.WebGLState:",le)}},texImage2D:function $t(){try{n.texImage2D.apply(n,arguments)}catch(le){console.error("THREE.WebGLState:",le)}},texImage3D:function ee(){try{n.texImage3D.apply(n,arguments)}catch(le){console.error("THREE.WebGLState:",le)}},texStorage2D:function Ze(){try{n.texStorage2D.apply(n,arguments)}catch(le){console.error("THREE.WebGLState:",le)}},texStorage3D:function ct(){try{n.texStorage3D.apply(n,arguments)}catch(le){console.error("THREE.WebGLState:",le)}},texSubImage2D:function K(){try{n.texSubImage2D.apply(n,arguments)}catch(le){console.error("THREE.WebGLState:",le)}},texSubImage3D:function Me(){try{n.texSubImage3D.apply(n,arguments)}catch(le){console.error("THREE.WebGLState:",le)}},compressedTexSubImage2D:function Ye(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(le){console.error("THREE.WebGLState:",le)}},scissor:function $e(le){!1===qe.equals(le)&&(n.scissor(le.x,le.y,le.z,le.w),qe.copy(le))},viewport:function et(le){!1===Ge.equals(le)&&(n.viewport(le.x,le.y,le.z,le.w),Ge.copy(le))},reset:function tt(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),!0===r&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),g={},ke=null,Ve={},m={},_=new WeakMap,T=[],A=null,C=!1,O=null,B=null,V=null,z=null,G=null,X=null,J=null,ae=!1,Y=null,re=null,fe=null,ge=null,Ne=null,qe.set(0,0,n.canvas.width,n.canvas.height),Ge.set(0,0,n.canvas.width,n.canvas.height),l.reset(),c.reset(),h.reset()}}}function u8(n,e,t,r,i,s,a){const l=i.isWebGL2,c=i.maxTextures,h=i.maxCubemapSize,g=i.maxTextureSize,m=i.maxSamples,_=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,T=/OculusBrowser/g.test(navigator.userAgent),A=new WeakMap;let C;const O=new WeakMap;let B=!1;try{B="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(ie){}function V(ie,K){return B?new OffscreenCanvas(ie,K):md("canvas")}function z(ie,K,Me,Ye){let Ze=1;if((ie.width>Ye||ie.height>Ye)&&(Ze=Ye/Math.max(ie.width,ie.height)),Ze<1||!0===K){if("undefined"!=typeof HTMLImageElement&&ie instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&ie instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&ie instanceof ImageBitmap){const ct=K?sp:Math.floor,$t=ct(Ze*ie.width),ee=ct(Ze*ie.height);void 0===C&&(C=V($t,ee));const $e=Me?V($t,ee):C;return $e.width=$t,$e.height=ee,$e.getContext("2d").drawImage(ie,0,0,$t,ee),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ie.width+"x"+ie.height+") to ("+$t+"x"+ee+")."),$e}return"data"in ie&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ie.width+"x"+ie.height+")."),ie}return ie}function G(ie){return Ev(ie.width)&&Ev(ie.height)}function J(ie,K){return ie.generateMipmaps&&K&&ie.minFilter!==Mr&&ie.minFilter!==yr}function ae(ie){n.generateMipmap(ie)}function Y(ie,K,Me,Ye,Ze=!1){if(!1===l)return K;if(null!==ie){if(void 0!==n[ie])return n[ie];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ie+"'")}let ct=K;return 6403===K&&(5126===Me&&(ct=33326),5131===Me&&(ct=33325),5121===Me&&(ct=33321)),33319===K&&(5126===Me&&(ct=33328),5131===Me&&(ct=33327),5121===Me&&(ct=33323)),6408===K&&(5126===Me&&(ct=34836),5131===Me&&(ct=34842),5121===Me&&(ct=Ye===sr&&!1===Ze?35907:32856),32819===Me&&(ct=32854),32820===Me&&(ct=32855)),(33325===ct||33326===ct||33327===ct||33328===ct||34842===ct||34836===ct)&&e.get("EXT_color_buffer_float"),ct}function re(ie,K,Me){return!0===J(ie,Me)||ie.isFramebufferTexture&&ie.minFilter!==Mr&&ie.minFilter!==yr?Math.log2(Math.max(K.width,K.height))+1:void 0!==ie.mipmaps&&ie.mipmaps.length>0?ie.mipmaps.length:ie.isCompressedTexture&&Array.isArray(ie.image)?K.mipmaps.length:1}function fe(ie){return ie===Mr||1004===ie||1005===ie?9728:9729}function ge(ie){const K=ie.target;K.removeEventListener("dispose",ge),function je(ie){const K=r.get(ie);if(void 0===K.__webglInit)return;const Me=ie.source,Ye=O.get(Me);if(Ye){const Ze=Ye[K.__cacheKey];Ze.usedTimes--,0===Ze.usedTimes&&me(ie),0===Object.keys(Ye).length&&O.delete(Me)}r.remove(ie)}(K),K.isVideoTexture&&A.delete(K)}function Ne(ie){const K=ie.target;K.removeEventListener("dispose",Ne),function Ie(ie){const K=ie.texture,Me=r.get(ie),Ye=r.get(K);if(void 0!==Ye.__webglTexture&&(n.deleteTexture(Ye.__webglTexture),a.memory.textures--),ie.depthTexture&&ie.depthTexture.dispose(),ie.isWebGLCubeRenderTarget)for(let Ze=0;Ze<6;Ze++)n.deleteFramebuffer(Me.__webglFramebuffer[Ze]),Me.__webglDepthbuffer&&n.deleteRenderbuffer(Me.__webglDepthbuffer[Ze]);else{if(n.deleteFramebuffer(Me.__webglFramebuffer),Me.__webglDepthbuffer&&n.deleteRenderbuffer(Me.__webglDepthbuffer),Me.__webglMultisampledFramebuffer&&n.deleteFramebuffer(Me.__webglMultisampledFramebuffer),Me.__webglColorRenderbuffer)for(let Ze=0;Ze<Me.__webglColorRenderbuffer.length;Ze++)Me.__webglColorRenderbuffer[Ze]&&n.deleteRenderbuffer(Me.__webglColorRenderbuffer[Ze]);Me.__webglDepthRenderbuffer&&n.deleteRenderbuffer(Me.__webglDepthRenderbuffer)}if(ie.isWebGLMultipleRenderTargets)for(let Ze=0,ct=K.length;Ze<ct;Ze++){const $t=r.get(K[Ze]);$t.__webglTexture&&(n.deleteTexture($t.__webglTexture),a.memory.textures--),r.remove(K[Ze])}r.remove(K),r.remove(ie)}(K)}function me(ie){const K=r.get(ie);n.deleteTexture(K.__webglTexture),delete O.get(ie.source)[K.__cacheKey],a.memory.textures--}let be=0;function Pe(ie,K){const Me=r.get(ie);if(ie.isVideoTexture&&function Vn(ie){const K=a.render.frame;A.get(ie)!==K&&(A.set(ie,K),ie.update())}(ie),!1===ie.isRenderTargetTexture&&ie.version>0&&Me.__version!==ie.version){const Ye=ie.image;if(null===Ye)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==Ye.complete)return void Qt(Me,ie,K);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.activeTexture(33984+K),t.bindTexture(3553,Me.__webglTexture)}const xt={1e3:10497,[Si]:33071,1002:33648},Mt={[Mr]:9728,1004:9984,1005:9986,[yr]:9729,1007:9985,1008:9987};function Oe(ie,K,Me){if(Me?(n.texParameteri(ie,10242,xt[K.wrapS]),n.texParameteri(ie,10243,xt[K.wrapT]),(32879===ie||35866===ie)&&n.texParameteri(ie,32882,xt[K.wrapR]),n.texParameteri(ie,10240,Mt[K.magFilter]),n.texParameteri(ie,10241,Mt[K.minFilter])):(n.texParameteri(ie,10242,33071),n.texParameteri(ie,10243,33071),(32879===ie||35866===ie)&&n.texParameteri(ie,32882,33071),(K.wrapS!==Si||K.wrapT!==Si)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(ie,10240,fe(K.magFilter)),n.texParameteri(ie,10241,fe(K.minFilter)),K.minFilter!==Mr&&K.minFilter!==yr&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const Ye=e.get("EXT_texture_filter_anisotropic");if(K.type===Ho&&!1===e.has("OES_texture_float_linear")||!1===l&&K.type===fd&&!1===e.has("OES_texture_half_float_linear"))return;(K.anisotropy>1||r.get(K).__currentAnisotropy)&&(n.texParameterf(ie,Ye.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(K.anisotropy,i.getMaxAnisotropy())),r.get(K).__currentAnisotropy=K.anisotropy)}}function Cn(ie,K){let Me=!1;void 0===ie.__webglInit&&(ie.__webglInit=!0,K.addEventListener("dispose",ge));const Ye=K.source;let Ze=O.get(Ye);void 0===Ze&&(Ze={},O.set(Ye,Ze));const ct=function Te(ie){const K=[];return K.push(ie.wrapS),K.push(ie.wrapT),K.push(ie.magFilter),K.push(ie.minFilter),K.push(ie.anisotropy),K.push(ie.internalFormat),K.push(ie.format),K.push(ie.type),K.push(ie.generateMipmaps),K.push(ie.premultiplyAlpha),K.push(ie.flipY),K.push(ie.unpackAlignment),K.push(ie.encoding),K.join()}(K);if(ct!==ie.__cacheKey){void 0===Ze[ct]&&(Ze[ct]={texture:n.createTexture(),usedTimes:0},a.memory.textures++,Me=!0),Ze[ct].usedTimes++;const $t=Ze[ie.__cacheKey];void 0!==$t&&(Ze[ie.__cacheKey].usedTimes--,0===$t.usedTimes&&me(K)),ie.__cacheKey=ct,ie.__webglTexture=Ze[ct].texture}return Me}function Qt(ie,K,Me){let Ye=3553;K.isDataArrayTexture&&(Ye=35866),K.isData3DTexture&&(Ye=32879);const Ze=Cn(ie,K),ct=K.source;if(t.activeTexture(33984+Me),t.bindTexture(Ye,ie.__webglTexture),ct.version!==ct.__currentVersion||!0===Ze){n.pixelStorei(37440,K.flipY),n.pixelStorei(37441,K.premultiplyAlpha),n.pixelStorei(3317,K.unpackAlignment),n.pixelStorei(37443,0);const $t=function X(ie){return!l&&(ie.wrapS!==Si||ie.wrapT!==Si||ie.minFilter!==Mr&&ie.minFilter!==yr)}(K)&&!1===G(K.image);let ee=z(K.image,$t,!1,g);ee=In(K,ee);const $e=G(ee)||l,et=s.convert(K.format,K.encoding);let nt,tt=s.convert(K.type),le=Y(K.internalFormat,et,tt,K.encoding,K.isVideoTexture);Oe(Ye,K,$e);const Qe=K.mipmaps,Vt=l&&!0!==K.isVideoTexture,ft=void 0===ct.__currentVersion||!0===Ze,Pt=re(K,ee,$e);if(K.isDepthTexture)le=6402,l?le=K.type===Ho?36012:K.type===Fa?33190:K.type===hu?35056:33189:K.type===Ho&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),K.format===ka&&6402===le&&1012!==K.type&&K.type!==Fa&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),K.type=Fa,tt=s.convert(K.type)),K.format===fu&&6402===le&&(le=34041,K.type!==hu&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),K.type=hu,tt=s.convert(K.type))),ft&&(Vt?t.texStorage2D(3553,1,le,ee.width,ee.height):t.texImage2D(3553,0,le,ee.width,ee.height,0,et,tt,null));else if(K.isDataTexture)if(Qe.length>0&&$e){Vt&&ft&&t.texStorage2D(3553,Pt,le,Qe[0].width,Qe[0].height);for(let rt=0,Xt=Qe.length;rt<Xt;rt++)nt=Qe[rt],Vt?t.texSubImage2D(3553,rt,0,0,nt.width,nt.height,et,tt,nt.data):t.texImage2D(3553,rt,le,nt.width,nt.height,0,et,tt,nt.data);K.generateMipmaps=!1}else Vt?(ft&&t.texStorage2D(3553,Pt,le,ee.width,ee.height),t.texSubImage2D(3553,0,0,0,ee.width,ee.height,et,tt,ee.data)):t.texImage2D(3553,0,le,ee.width,ee.height,0,et,tt,ee.data);else if(K.isCompressedTexture){Vt&&ft&&t.texStorage2D(3553,Pt,le,Qe[0].width,Qe[0].height);for(let rt=0,Xt=Qe.length;rt<Xt;rt++)nt=Qe[rt],K.format!==vs?null!==et?Vt?t.compressedTexSubImage2D(3553,rt,0,0,nt.width,nt.height,et,nt.data):t.compressedTexImage2D(3553,rt,le,nt.width,nt.height,0,nt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Vt?t.texSubImage2D(3553,rt,0,0,nt.width,nt.height,et,tt,nt.data):t.texImage2D(3553,rt,le,nt.width,nt.height,0,et,tt,nt.data)}else if(K.isDataArrayTexture)Vt?(ft&&t.texStorage3D(35866,Pt,le,ee.width,ee.height,ee.depth),t.texSubImage3D(35866,0,0,0,0,ee.width,ee.height,ee.depth,et,tt,ee.data)):t.texImage3D(35866,0,le,ee.width,ee.height,ee.depth,0,et,tt,ee.data);else if(K.isData3DTexture)Vt?(ft&&t.texStorage3D(32879,Pt,le,ee.width,ee.height,ee.depth),t.texSubImage3D(32879,0,0,0,0,ee.width,ee.height,ee.depth,et,tt,ee.data)):t.texImage3D(32879,0,le,ee.width,ee.height,ee.depth,0,et,tt,ee.data);else if(K.isFramebufferTexture){if(ft)if(Vt)t.texStorage2D(3553,Pt,le,ee.width,ee.height);else{let rt=ee.width,Xt=ee.height;for(let Nn=0;Nn<Pt;Nn++)t.texImage2D(3553,Nn,le,rt,Xt,0,et,tt,null),rt>>=1,Xt>>=1}}else if(Qe.length>0&&$e){Vt&&ft&&t.texStorage2D(3553,Pt,le,Qe[0].width,Qe[0].height);for(let rt=0,Xt=Qe.length;rt<Xt;rt++)nt=Qe[rt],Vt?t.texSubImage2D(3553,rt,0,0,et,tt,nt):t.texImage2D(3553,rt,le,et,tt,nt);K.generateMipmaps=!1}else Vt?(ft&&t.texStorage2D(3553,Pt,le,ee.width,ee.height),t.texSubImage2D(3553,0,0,0,et,tt,ee)):t.texImage2D(3553,0,le,et,tt,ee);J(K,$e)&&ae(Ye),ct.__currentVersion=ct.version,K.onUpdate&&K.onUpdate(K)}ie.__version=K.version}function ot(ie,K,Me,Ye,Ze){const ct=s.convert(Me.format,Me.encoding),$t=s.convert(Me.type),ee=Y(Me.internalFormat,ct,$t,Me.encoding);r.get(K).__hasExternalTextures||(32879===Ze||35866===Ze?t.texImage3D(Ze,0,ee,K.width,K.height,K.depth,0,ct,$t,null):t.texImage2D(Ze,0,ee,K.width,K.height,0,ct,$t,null)),t.bindFramebuffer(36160,ie),Lt(K)?_.framebufferTexture2DMultisampleEXT(36160,Ye,Ze,r.get(Me).__webglTexture,0,Ut(K)):n.framebufferTexture2D(36160,Ye,Ze,r.get(Me).__webglTexture,0),t.bindFramebuffer(36160,null)}function on(ie,K,Me){if(n.bindRenderbuffer(36161,ie),K.depthBuffer&&!K.stencilBuffer){let Ye=33189;if(Me||Lt(K)){const Ze=K.depthTexture;Ze&&Ze.isDepthTexture&&(Ze.type===Ho?Ye=36012:Ze.type===Fa&&(Ye=33190));const ct=Ut(K);Lt(K)?_.renderbufferStorageMultisampleEXT(36161,ct,Ye,K.width,K.height):n.renderbufferStorageMultisample(36161,ct,Ye,K.width,K.height)}else n.renderbufferStorage(36161,Ye,K.width,K.height);n.framebufferRenderbuffer(36160,36096,36161,ie)}else if(K.depthBuffer&&K.stencilBuffer){const Ye=Ut(K);Me&&!1===Lt(K)?n.renderbufferStorageMultisample(36161,Ye,35056,K.width,K.height):Lt(K)?_.renderbufferStorageMultisampleEXT(36161,Ye,35056,K.width,K.height):n.renderbufferStorage(36161,34041,K.width,K.height),n.framebufferRenderbuffer(36160,33306,36161,ie)}else{const Ye=!0===K.isWebGLMultipleRenderTargets?K.texture:[K.texture];for(let Ze=0;Ze<Ye.length;Ze++){const ct=Ye[Ze],$t=s.convert(ct.format,ct.encoding),ee=s.convert(ct.type),$e=Y(ct.internalFormat,$t,ee,ct.encoding),et=Ut(K);Me&&!1===Lt(K)?n.renderbufferStorageMultisample(36161,et,$e,K.width,K.height):Lt(K)?_.renderbufferStorageMultisampleEXT(36161,et,$e,K.width,K.height):n.renderbufferStorage(36161,$e,K.width,K.height)}}n.bindRenderbuffer(36161,null)}function Fe(ie){const K=r.get(ie),Me=!0===ie.isWebGLCubeRenderTarget;if(ie.depthTexture&&!K.__autoAllocateDepthBuffer){if(Me)throw new Error("target.depthTexture not supported in Cube render targets");!function Be(ie,K){if(K&&K.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,ie),!K.depthTexture||!K.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(K.depthTexture).__webglTexture||K.depthTexture.image.width!==K.width||K.depthTexture.image.height!==K.height)&&(K.depthTexture.image.width=K.width,K.depthTexture.image.height=K.height,K.depthTexture.needsUpdate=!0),Pe(K.depthTexture,0);const Ye=r.get(K.depthTexture).__webglTexture,Ze=Ut(K);if(K.depthTexture.format===ka)Lt(K)?_.framebufferTexture2DMultisampleEXT(36160,36096,3553,Ye,0,Ze):n.framebufferTexture2D(36160,36096,3553,Ye,0);else{if(K.depthTexture.format!==fu)throw new Error("Unknown depthTexture format");Lt(K)?_.framebufferTexture2DMultisampleEXT(36160,33306,3553,Ye,0,Ze):n.framebufferTexture2D(36160,33306,3553,Ye,0)}}(K.__webglFramebuffer,ie)}else if(Me){K.__webglDepthbuffer=[];for(let Ye=0;Ye<6;Ye++)t.bindFramebuffer(36160,K.__webglFramebuffer[Ye]),K.__webglDepthbuffer[Ye]=n.createRenderbuffer(),on(K.__webglDepthbuffer[Ye],ie,!1)}else t.bindFramebuffer(36160,K.__webglFramebuffer),K.__webglDepthbuffer=n.createRenderbuffer(),on(K.__webglDepthbuffer,ie,!1);t.bindFramebuffer(36160,null)}function Ut(ie){return Math.min(m,ie.samples)}function Lt(ie){const K=r.get(ie);return l&&ie.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==K.__useRenderToTexture}function In(ie,K){const Me=ie.encoding,Ye=ie.format,Ze=ie.type;return!0===ie.isCompressedTexture||!0===ie.isVideoTexture||1035===ie.format||Me!==Ba&&(Me===sr?!1===l?!0===e.has("EXT_sRGB")&&Ye===vs?(ie.format=1035,ie.minFilter=yr,ie.generateMipmaps=!1):K=sD.sRGBToLinear(K):(Ye!==vs||Ze!==Na)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",Me)),K}this.allocateTextureUnit=function Ve(){const ie=be;return ie>=c&&console.warn("THREE.WebGLTextures: Trying to use "+ie+" texture units while this GPU supports only "+c),be+=1,ie},this.resetTextureUnits=function ke(){be=0},this.setTexture2D=Pe,this.setTexture2DArray=function qe(ie,K){const Me=r.get(ie);ie.version>0&&Me.__version!==ie.version?Qt(Me,ie,K):(t.activeTexture(33984+K),t.bindTexture(35866,Me.__webglTexture))},this.setTexture3D=function Ge(ie,K){const Me=r.get(ie);ie.version>0&&Me.__version!==ie.version?Qt(Me,ie,K):(t.activeTexture(33984+K),t.bindTexture(32879,Me.__webglTexture))},this.setTextureCube=function st(ie,K){const Me=r.get(ie);ie.version>0&&Me.__version!==ie.version?function jt(ie,K,Me){if(6!==K.image.length)return;const Ye=Cn(ie,K),Ze=K.source;if(t.activeTexture(33984+Me),t.bindTexture(34067,ie.__webglTexture),Ze.version!==Ze.__currentVersion||!0===Ye){n.pixelStorei(37440,K.flipY),n.pixelStorei(37441,K.premultiplyAlpha),n.pixelStorei(3317,K.unpackAlignment),n.pixelStorei(37443,0);const ct=K.isCompressedTexture||K.image[0].isCompressedTexture,$t=K.image[0]&&K.image[0].isDataTexture,ee=[];for(let rt=0;rt<6;rt++)ee[rt]=ct||$t?$t?K.image[rt].image:K.image[rt]:z(K.image[rt],!1,!0,h),ee[rt]=In(K,ee[rt]);const $e=ee[0],et=G($e)||l,tt=s.convert(K.format,K.encoding),le=s.convert(K.type),nt=Y(K.internalFormat,tt,le,K.encoding),Qe=l&&!0!==K.isVideoTexture,Vt=void 0===Ze.__currentVersion||!0===Ye;let Pt,ft=re(K,$e,et);if(Oe(34067,K,et),ct){Qe&&Vt&&t.texStorage2D(34067,ft,nt,$e.width,$e.height);for(let rt=0;rt<6;rt++){Pt=ee[rt].mipmaps;for(let Xt=0;Xt<Pt.length;Xt++){const Nn=Pt[Xt];K.format!==vs?null!==tt?Qe?t.compressedTexSubImage2D(34069+rt,Xt,0,0,Nn.width,Nn.height,tt,Nn.data):t.compressedTexImage2D(34069+rt,Xt,nt,Nn.width,Nn.height,0,Nn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Qe?t.texSubImage2D(34069+rt,Xt,0,0,Nn.width,Nn.height,tt,le,Nn.data):t.texImage2D(34069+rt,Xt,nt,Nn.width,Nn.height,0,tt,le,Nn.data)}}}else{Pt=K.mipmaps,Qe&&Vt&&(Pt.length>0&&ft++,t.texStorage2D(34067,ft,nt,ee[0].width,ee[0].height));for(let rt=0;rt<6;rt++)if($t){Qe?t.texSubImage2D(34069+rt,0,0,0,ee[rt].width,ee[rt].height,tt,le,ee[rt].data):t.texImage2D(34069+rt,0,nt,ee[rt].width,ee[rt].height,0,tt,le,ee[rt].data);for(let Xt=0;Xt<Pt.length;Xt++){const Fn=Pt[Xt].image[rt].image;Qe?t.texSubImage2D(34069+rt,Xt+1,0,0,Fn.width,Fn.height,tt,le,Fn.data):t.texImage2D(34069+rt,Xt+1,nt,Fn.width,Fn.height,0,tt,le,Fn.data)}}else{Qe?t.texSubImage2D(34069+rt,0,0,0,tt,le,ee[rt]):t.texImage2D(34069+rt,0,nt,tt,le,ee[rt]);for(let Xt=0;Xt<Pt.length;Xt++){const Nn=Pt[Xt];Qe?t.texSubImage2D(34069+rt,Xt+1,0,0,tt,le,Nn.image[rt]):t.texImage2D(34069+rt,Xt+1,nt,tt,le,Nn.image[rt])}}}J(K,et)&&ae(34067),Ze.__currentVersion=Ze.version,K.onUpdate&&K.onUpdate(K)}ie.__version=K.version}(Me,ie,K):(t.activeTexture(33984+K),t.bindTexture(34067,Me.__webglTexture))},this.rebindTextures=function Je(ie,K,Me){const Ye=r.get(ie);void 0!==K&&ot(Ye.__webglFramebuffer,ie,ie.texture,36064,3553),void 0!==Me&&Fe(ie)},this.setupRenderTarget=function wt(ie){const K=ie.texture,Me=r.get(ie),Ye=r.get(K);ie.addEventListener("dispose",Ne),!0!==ie.isWebGLMultipleRenderTargets&&(void 0===Ye.__webglTexture&&(Ye.__webglTexture=n.createTexture()),Ye.__version=K.version,a.memory.textures++);const Ze=!0===ie.isWebGLCubeRenderTarget,ct=!0===ie.isWebGLMultipleRenderTargets,$t=G(ie)||l;if(Ze){Me.__webglFramebuffer=[];for(let ee=0;ee<6;ee++)Me.__webglFramebuffer[ee]=n.createFramebuffer()}else{if(Me.__webglFramebuffer=n.createFramebuffer(),ct)if(i.drawBuffers){const ee=ie.texture;for(let $e=0,et=ee.length;$e<et;$e++){const tt=r.get(ee[$e]);void 0===tt.__webglTexture&&(tt.__webglTexture=n.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(l&&ie.samples>0&&!1===Lt(ie)){const ee=ct?K:[K];Me.__webglMultisampledFramebuffer=n.createFramebuffer(),Me.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,Me.__webglMultisampledFramebuffer);for(let $e=0;$e<ee.length;$e++){const et=ee[$e];Me.__webglColorRenderbuffer[$e]=n.createRenderbuffer(),n.bindRenderbuffer(36161,Me.__webglColorRenderbuffer[$e]);const tt=s.convert(et.format,et.encoding),le=s.convert(et.type),nt=Y(et.internalFormat,tt,le,et.encoding),Qe=Ut(ie);n.renderbufferStorageMultisample(36161,Qe,nt,ie.width,ie.height),n.framebufferRenderbuffer(36160,36064+$e,36161,Me.__webglColorRenderbuffer[$e])}n.bindRenderbuffer(36161,null),ie.depthBuffer&&(Me.__webglDepthRenderbuffer=n.createRenderbuffer(),on(Me.__webglDepthRenderbuffer,ie,!0)),t.bindFramebuffer(36160,null)}}if(Ze){t.bindTexture(34067,Ye.__webglTexture),Oe(34067,K,$t);for(let ee=0;ee<6;ee++)ot(Me.__webglFramebuffer[ee],ie,K,36064,34069+ee);J(K,$t)&&ae(34067),t.unbindTexture()}else if(ct){const ee=ie.texture;for(let $e=0,et=ee.length;$e<et;$e++){const tt=ee[$e],le=r.get(tt);t.bindTexture(3553,le.__webglTexture),Oe(3553,tt,$t),ot(Me.__webglFramebuffer,ie,tt,36064+$e,3553),J(tt,$t)&&ae(3553)}t.unbindTexture()}else{let ee=3553;(ie.isWebGL3DRenderTarget||ie.isWebGLArrayRenderTarget)&&(l?ee=ie.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(ee,Ye.__webglTexture),Oe(ee,K,$t),ot(Me.__webglFramebuffer,ie,K,36064,ee),J(K,$t)&&ae(ee),t.unbindTexture()}ie.depthBuffer&&Fe(ie)},this.updateRenderTargetMipmap=function ut(ie){const K=G(ie)||l,Me=!0===ie.isWebGLMultipleRenderTargets?ie.texture:[ie.texture];for(let Ye=0,Ze=Me.length;Ye<Ze;Ye++){const ct=Me[Ye];if(J(ct,K)){const $t=ie.isWebGLCubeRenderTarget?34067:3553,ee=r.get(ct).__webglTexture;t.bindTexture($t,ee),ae($t),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function Yt(ie){if(l&&ie.samples>0&&!1===Lt(ie)){const K=ie.isWebGLMultipleRenderTargets?ie.texture:[ie.texture],Me=ie.width,Ye=ie.height;let Ze=16384;const ct=[],$t=ie.stencilBuffer?33306:36096,ee=r.get(ie),$e=!0===ie.isWebGLMultipleRenderTargets;if($e)for(let et=0;et<K.length;et++)t.bindFramebuffer(36160,ee.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+et,36161,null),t.bindFramebuffer(36160,ee.__webglFramebuffer),n.framebufferTexture2D(36009,36064+et,3553,null,0);t.bindFramebuffer(36008,ee.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,ee.__webglFramebuffer);for(let et=0;et<K.length;et++){ct.push(36064+et),ie.depthBuffer&&ct.push($t);const tt=void 0!==ee.__ignoreDepthValues&&ee.__ignoreDepthValues;if(!1===tt&&(ie.depthBuffer&&(Ze|=256),ie.stencilBuffer&&(Ze|=1024)),$e&&n.framebufferRenderbuffer(36008,36064,36161,ee.__webglColorRenderbuffer[et]),!0===tt&&(n.invalidateFramebuffer(36008,[$t]),n.invalidateFramebuffer(36009,[$t])),$e){const le=r.get(K[et]).__webglTexture;n.framebufferTexture2D(36009,36064,3553,le,0)}n.blitFramebuffer(0,0,Me,Ye,0,0,Me,Ye,Ze,9728),T&&n.invalidateFramebuffer(36008,ct)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),$e)for(let et=0;et<K.length;et++){t.bindFramebuffer(36160,ee.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+et,36161,ee.__webglColorRenderbuffer[et]);const tt=r.get(K[et]).__webglTexture;t.bindFramebuffer(36160,ee.__webglFramebuffer),n.framebufferTexture2D(36009,36064+et,3553,tt,0)}t.bindFramebuffer(36009,ee.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=Fe,this.setupFrameBufferTexture=ot,this.useMultisampledRTT=Lt}function c8(n,e,t){const r=t.isWebGL2;return{convert:function i(s,a=null){let l;if(s===Na)return 5121;if(1017===s)return 32819;if(1018===s)return 32820;if(1010===s)return 5120;if(1011===s)return 5122;if(1012===s)return 5123;if(1013===s)return 5124;if(s===Fa)return 5125;if(s===Ho)return 5126;if(s===fd)return r?5131:(l=e.get("OES_texture_half_float"),null!==l?l.HALF_FLOAT_OES:null);if(1021===s)return 6406;if(s===vs)return 6408;if(1024===s)return 6409;if(1025===s)return 6410;if(s===ka)return 6402;if(s===fu)return 34041;if(1028===s)return 6403;if(1022===s)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===s)return l=e.get("EXT_sRGB"),null!==l?l.SRGB_ALPHA_EXT:null;if(1029===s)return 36244;if(1030===s)return 33319;if(1031===s)return 33320;if(1033===s)return 36249;if(33776===s||33777===s||33778===s||33779===s)if(a===sr){if(l=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===l)return null;if(33776===s)return l.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===s)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===s)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===s)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(l=e.get("WEBGL_compressed_texture_s3tc"),null===l)return null;if(33776===s)return l.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===s)return l.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===s)return l.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===s)return l.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===s||35841===s||35842===s||35843===s){if(l=e.get("WEBGL_compressed_texture_pvrtc"),null===l)return null;if(35840===s)return l.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===s)return l.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===s)return l.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===s)return l.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===s)return l=e.get("WEBGL_compressed_texture_etc1"),null!==l?l.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===s||37496===s){if(l=e.get("WEBGL_compressed_texture_etc"),null===l)return null;if(37492===s)return a===sr?l.COMPRESSED_SRGB8_ETC2:l.COMPRESSED_RGB8_ETC2;if(37496===s)return a===sr?l.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:l.COMPRESSED_RGBA8_ETC2_EAC}if(37808===s||37809===s||37810===s||37811===s||37812===s||37813===s||37814===s||37815===s||37816===s||37817===s||37818===s||37819===s||37820===s||37821===s){if(l=e.get("WEBGL_compressed_texture_astc"),null===l)return null;if(37808===s)return a===sr?l.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:l.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===s)return a===sr?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:l.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===s)return a===sr?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:l.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===s)return a===sr?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:l.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===s)return a===sr?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:l.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===s)return a===sr?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:l.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===s)return a===sr?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:l.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===s)return a===sr?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:l.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===s)return a===sr?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:l.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===s)return a===sr?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:l.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===s)return a===sr?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:l.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===s)return a===sr?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:l.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===s)return a===sr?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:l.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===s)return a===sr?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:l.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===s){if(l=e.get("EXT_texture_compression_bptc"),null===l)return null;if(36492===s)return a===sr?l.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:l.COMPRESSED_RGBA_BPTC_UNORM_EXT}return s===hu?r?34042:(l=e.get("WEBGL_depth_texture"),null!==l?l.UNSIGNED_INT_24_8_WEBGL:null):void 0!==n[s]?n[s]:null}}}class d8 extends kr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class wd extends Ti{constructor(){super(),this.isGroup=!0,this.type="Group"}}const h8={type:"move"};class sb{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new wd,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new wd,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Q,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Q),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new wd,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Q,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Q),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,a=null;const l=this._targetRay,c=this._grip,h=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(h&&e.hand){a=!0;for(const C of e.hand.values()){const O=t.getJointPose(C,r);if(void 0===h.joints[C.jointName]){const V=new wd;V.matrixAutoUpdate=!1,V.visible=!1,h.joints[C.jointName]=V,h.add(V)}const B=h.joints[C.jointName];null!==O&&(B.matrix.fromArray(O.transform.matrix),B.matrix.decompose(B.position,B.rotation,B.scale),B.jointRadius=O.radius),B.visible=null!==O}const _=h.joints["index-finger-tip"].position.distanceTo(h.joints["thumb-tip"].position),T=.02,A=.005;h.inputState.pinching&&_>T+A?(h.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!h.inputState.pinching&&_<=T-A&&(h.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==c&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),null!==s&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));null!==l&&(i=t.getPose(e.targetRaySpace,r),null===i&&null!==s&&(i=s),null!==i&&(l.matrix.fromArray(i.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),i.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(i.linearVelocity)):l.hasLinearVelocity=!1,i.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(i.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(h8)))}return null!==l&&(l.visible=null!==i),null!==c&&(c.visible=null!==s),null!==h&&(h.visible=null!==a),this}}class f8 extends Go{constructor(e,t,r,i,s,a,l,c,h,g){if((g=void 0!==g?g:ka)!==ka&&g!==fu)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===r&&g===ka&&(r=Fa),void 0===r&&g===fu&&(r=hu),super(null,i,s,a,l,c,g,r,h),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==l?l:Mr,this.minFilter=void 0!==c?c:Mr,this.flipY=!1,this.generateMipmaps=!1}}class p8 extends Va{constructor(e,t){super();const r=this;let i=null,s=1,a=null,l="local-floor",c=null,h=null,g=null,m=null,_=null,T=null;const A=t.getContextAttributes();let C=null,O=null;const B=[],V=[],z=new kr;z.layers.enable(1),z.viewport=new Ln;const G=new kr;G.layers.enable(2),G.viewport=new Ln;const X=[z,G],J=new d8;J.layers.enable(1),J.layers.enable(2);let ae=null,Y=null;function re(Te){const Pe=V.indexOf(Te.inputSource);if(-1===Pe)return;const qe=B[Pe];void 0!==qe&&qe.dispatchEvent({type:Te.type,data:Te.inputSource})}function fe(){i.removeEventListener("select",re),i.removeEventListener("selectstart",re),i.removeEventListener("selectend",re),i.removeEventListener("squeeze",re),i.removeEventListener("squeezestart",re),i.removeEventListener("squeezeend",re),i.removeEventListener("end",fe),i.removeEventListener("inputsourceschange",ge);for(let Te=0;Te<B.length;Te++){const Pe=V[Te];null!==Pe&&(V[Te]=null,B[Te].disconnect(Pe))}ae=null,Y=null,e.setRenderTarget(C),_=null,m=null,g=null,i=null,O=null,Ve.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}function ge(Te){for(let Pe=0;Pe<Te.removed.length;Pe++){const qe=Te.removed[Pe],Ge=V.indexOf(qe);Ge>=0&&(V[Ge]=null,B[Ge].dispatchEvent({type:"disconnected",data:qe}))}for(let Pe=0;Pe<Te.added.length;Pe++){const qe=Te.added[Pe];let Ge=V.indexOf(qe);if(-1===Ge){for(let xt=0;xt<B.length;xt++){if(xt>=V.length){V.push(qe),Ge=xt;break}if(null===V[xt]){V[xt]=qe,Ge=xt;break}}if(-1===Ge)break}const st=B[Ge];st&&st.dispatchEvent({type:"connected",data:qe})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Te){let Pe=B[Te];return void 0===Pe&&(Pe=new sb,B[Te]=Pe),Pe.getTargetRaySpace()},this.getControllerGrip=function(Te){let Pe=B[Te];return void 0===Pe&&(Pe=new sb,B[Te]=Pe),Pe.getGripSpace()},this.getHand=function(Te){let Pe=B[Te];return void 0===Pe&&(Pe=new sb,B[Te]=Pe),Pe.getHandSpace()},this.setFramebufferScaleFactor=function(Te){s=Te,!0===r.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Te){l=Te,!0===r.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||a},this.setReferenceSpace=function(Te){c=Te},this.getBaseLayer=function(){return null!==m?m:_},this.getBinding=function(){return g},this.getFrame=function(){return T},this.getSession=function(){return i},this.setSession=function(){var Te=(0,Xf.Z)(function*(Pe){if(i=Pe,null!==i){if(C=e.getRenderTarget(),i.addEventListener("select",re),i.addEventListener("selectstart",re),i.addEventListener("selectend",re),i.addEventListener("squeeze",re),i.addEventListener("squeezestart",re),i.addEventListener("squeezeend",re),i.addEventListener("end",fe),i.addEventListener("inputsourceschange",ge),!0!==A.xrCompatible&&(yield t.makeXRCompatible()),void 0===i.renderState.layers||!1===e.capabilities.isWebGL2)_=new XRWebGLLayer(i,t,{antialias:void 0!==i.renderState.layers||A.antialias,alpha:A.alpha,depth:A.depth,stencil:A.stencil,framebufferScaleFactor:s}),i.updateRenderState({baseLayer:_}),O=new Ha(_.framebufferWidth,_.framebufferHeight,{format:vs,type:Na,encoding:e.outputEncoding});else{let qe=null,Ge=null,st=null;A.depth&&(st=A.stencil?35056:33190,qe=A.stencil?fu:ka,Ge=A.stencil?hu:Fa);const xt={colorFormat:32856,depthFormat:st,scaleFactor:s};g=new XRWebGLBinding(i,t),m=g.createProjectionLayer(xt),i.updateRenderState({layers:[m]}),O=new Ha(m.textureWidth,m.textureHeight,{format:vs,type:Na,depthTexture:new f8(m.textureWidth,m.textureHeight,Ge,void 0,void 0,void 0,void 0,void 0,void 0,qe),stencilBuffer:A.stencil,encoding:e.outputEncoding,samples:A.antialias?4:0}),e.properties.get(O).__ignoreDepthValues=m.ignoreDepthValues}O.isXRRenderTarget=!0,this.setFoveation(1),c=null,a=yield i.requestReferenceSpace(l),Ve.setContext(i),Ve.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}});return function(Pe){return Te.apply(this,arguments)}}();const Ne=new Q,je=new Q;function Ie(Te,Pe){null===Pe?Te.matrixWorld.copy(Te.matrix):Te.matrixWorld.multiplyMatrices(Pe.matrixWorld,Te.matrix),Te.matrixWorldInverse.copy(Te.matrixWorld).invert()}this.updateCamera=function(Te){if(null===i)return;J.near=G.near=z.near=Te.near,J.far=G.far=z.far=Te.far,(ae!==J.near||Y!==J.far)&&(i.updateRenderState({depthNear:J.near,depthFar:J.far}),ae=J.near,Y=J.far);const Pe=Te.parent,qe=J.cameras;Ie(J,Pe);for(let st=0;st<qe.length;st++)Ie(qe[st],Pe);J.matrixWorld.decompose(J.position,J.quaternion,J.scale),Te.position.copy(J.position),Te.quaternion.copy(J.quaternion),Te.scale.copy(J.scale),Te.matrix.copy(J.matrix),Te.matrixWorld.copy(J.matrixWorld);const Ge=Te.children;for(let st=0,xt=Ge.length;st<xt;st++)Ge[st].updateMatrixWorld(!0);2===qe.length?function me(Te,Pe,qe){Ne.setFromMatrixPosition(Pe.matrixWorld),je.setFromMatrixPosition(qe.matrixWorld);const Ge=Ne.distanceTo(je),st=Pe.projectionMatrix.elements,xt=qe.projectionMatrix.elements,Mt=st[14]/(st[10]-1),Oe=st[14]/(st[10]+1),Cn=(st[9]+1)/st[5],Qt=(st[9]-1)/st[5],jt=(st[8]-1)/st[0],ot=(xt[8]+1)/xt[0],on=Mt*jt,Be=Mt*ot,Fe=Ge/(-jt+ot),Je=Fe*-jt;Pe.matrixWorld.decompose(Te.position,Te.quaternion,Te.scale),Te.translateX(Je),Te.translateZ(Fe),Te.matrixWorld.compose(Te.position,Te.quaternion,Te.scale),Te.matrixWorldInverse.copy(Te.matrixWorld).invert();const wt=Mt+Fe,ut=Oe+Fe;Te.projectionMatrix.makePerspective(on-Je,Be+(Ge-Je),Cn*Oe/ut*wt,Qt*Oe/ut*wt,wt,ut)}(J,z,G):J.projectionMatrix.copy(z.projectionMatrix)},this.getCamera=function(){return J},this.getFoveation=function(){return null!==m?m.fixedFoveation:null!==_?_.fixedFoveation:void 0},this.setFoveation=function(Te){null!==m&&(m.fixedFoveation=Te),null!==_&&void 0!==_.fixedFoveation&&(_.fixedFoveation=Te)};let be=null;const Ve=new _D;Ve.setAnimationLoop(function ke(Te,Pe){if(h=Pe.getViewerPose(c||a),T=Pe,null!==h){const qe=h.views;null!==_&&(e.setRenderTargetFramebuffer(O,_.framebuffer),e.setRenderTarget(O));let Ge=!1;qe.length!==J.cameras.length&&(J.cameras.length=0,Ge=!0);for(let st=0;st<qe.length;st++){const xt=qe[st];let Mt=null;if(null!==_)Mt=_.getViewport(xt);else{const Cn=g.getViewSubImage(m,xt);Mt=Cn.viewport,0===st&&(e.setRenderTargetTextures(O,Cn.colorTexture,m.ignoreDepthValues?void 0:Cn.depthStencilTexture),e.setRenderTarget(O))}let Oe=X[st];void 0===Oe&&(Oe=new kr,Oe.layers.enable(st),Oe.viewport=new Ln,X[st]=Oe),Oe.matrix.fromArray(xt.transform.matrix),Oe.projectionMatrix.fromArray(xt.projectionMatrix),Oe.viewport.set(Mt.x,Mt.y,Mt.width,Mt.height),0===st&&J.matrix.copy(Oe.matrix),!0===Ge&&J.cameras.push(Oe)}}for(let qe=0;qe<B.length;qe++){const Ge=V[qe],st=B[qe];null!==Ge&&void 0!==st&&st.update(Ge,Pe,c||a)}be&&be(Te,Pe),T=null}),this.setAnimationLoop=function(Te){be=Te},this.dispose=function(){}}}function g8(n,e){function i(C,O){C.opacity.value=O.opacity,O.color&&C.diffuse.value.copy(O.color),O.emissive&&C.emissive.value.copy(O.emissive).multiplyScalar(O.emissiveIntensity),O.map&&(C.map.value=O.map),O.alphaMap&&(C.alphaMap.value=O.alphaMap),O.bumpMap&&(C.bumpMap.value=O.bumpMap,C.bumpScale.value=O.bumpScale,1===O.side&&(C.bumpScale.value*=-1)),O.displacementMap&&(C.displacementMap.value=O.displacementMap,C.displacementScale.value=O.displacementScale,C.displacementBias.value=O.displacementBias),O.emissiveMap&&(C.emissiveMap.value=O.emissiveMap),O.normalMap&&(C.normalMap.value=O.normalMap,C.normalScale.value.copy(O.normalScale),1===O.side&&C.normalScale.value.negate()),O.specularMap&&(C.specularMap.value=O.specularMap),O.alphaTest>0&&(C.alphaTest.value=O.alphaTest);const B=e.get(O).envMap;if(B&&(C.envMap.value=B,C.flipEnvMap.value=B.isCubeTexture&&!1===B.isRenderTargetTexture?-1:1,C.reflectivity.value=O.reflectivity,C.ior.value=O.ior,C.refractionRatio.value=O.refractionRatio),O.lightMap){C.lightMap.value=O.lightMap;const G=!0!==n.physicallyCorrectLights?Math.PI:1;C.lightMapIntensity.value=O.lightMapIntensity*G}let V,z;O.aoMap&&(C.aoMap.value=O.aoMap,C.aoMapIntensity.value=O.aoMapIntensity),O.map?V=O.map:O.specularMap?V=O.specularMap:O.displacementMap?V=O.displacementMap:O.normalMap?V=O.normalMap:O.bumpMap?V=O.bumpMap:O.roughnessMap?V=O.roughnessMap:O.metalnessMap?V=O.metalnessMap:O.alphaMap?V=O.alphaMap:O.emissiveMap?V=O.emissiveMap:O.clearcoatMap?V=O.clearcoatMap:O.clearcoatNormalMap?V=O.clearcoatNormalMap:O.clearcoatRoughnessMap?V=O.clearcoatRoughnessMap:O.iridescenceMap?V=O.iridescenceMap:O.iridescenceThicknessMap?V=O.iridescenceThicknessMap:O.specularIntensityMap?V=O.specularIntensityMap:O.specularColorMap?V=O.specularColorMap:O.transmissionMap?V=O.transmissionMap:O.thicknessMap?V=O.thicknessMap:O.sheenColorMap?V=O.sheenColorMap:O.sheenRoughnessMap&&(V=O.sheenRoughnessMap),void 0!==V&&(V.isWebGLRenderTarget&&(V=V.texture),!0===V.matrixAutoUpdate&&V.updateMatrix(),C.uvTransform.value.copy(V.matrix)),O.aoMap?z=O.aoMap:O.lightMap&&(z=O.lightMap),void 0!==z&&(z.isWebGLRenderTarget&&(z=z.texture),!0===z.matrixAutoUpdate&&z.updateMatrix(),C.uv2Transform.value.copy(z.matrix))}return{refreshFogUniforms:function t(C,O){C.fogColor.value.copy(O.color),O.isFog?(C.fogNear.value=O.near,C.fogFar.value=O.far):O.isFogExp2&&(C.fogDensity.value=O.density)},refreshMaterialUniforms:function r(C,O,B,V,z){O.isMeshBasicMaterial||O.isMeshLambertMaterial?i(C,O):O.isMeshToonMaterial?(i(C,O),function g(C,O){O.gradientMap&&(C.gradientMap.value=O.gradientMap)}(C,O)):O.isMeshPhongMaterial?(i(C,O),function h(C,O){C.specular.value.copy(O.specular),C.shininess.value=Math.max(O.shininess,1e-4)}(C,O)):O.isMeshStandardMaterial?(i(C,O),function m(C,O){C.roughness.value=O.roughness,C.metalness.value=O.metalness,O.roughnessMap&&(C.roughnessMap.value=O.roughnessMap),O.metalnessMap&&(C.metalnessMap.value=O.metalnessMap),e.get(O).envMap&&(C.envMapIntensity.value=O.envMapIntensity)}(C,O),O.isMeshPhysicalMaterial&&function _(C,O,B){C.ior.value=O.ior,O.sheen>0&&(C.sheenColor.value.copy(O.sheenColor).multiplyScalar(O.sheen),C.sheenRoughness.value=O.sheenRoughness,O.sheenColorMap&&(C.sheenColorMap.value=O.sheenColorMap),O.sheenRoughnessMap&&(C.sheenRoughnessMap.value=O.sheenRoughnessMap)),O.clearcoat>0&&(C.clearcoat.value=O.clearcoat,C.clearcoatRoughness.value=O.clearcoatRoughness,O.clearcoatMap&&(C.clearcoatMap.value=O.clearcoatMap),O.clearcoatRoughnessMap&&(C.clearcoatRoughnessMap.value=O.clearcoatRoughnessMap),O.clearcoatNormalMap&&(C.clearcoatNormalScale.value.copy(O.clearcoatNormalScale),C.clearcoatNormalMap.value=O.clearcoatNormalMap,1===O.side&&C.clearcoatNormalScale.value.negate())),O.iridescence>0&&(C.iridescence.value=O.iridescence,C.iridescenceIOR.value=O.iridescenceIOR,C.iridescenceThicknessMinimum.value=O.iridescenceThicknessRange[0],C.iridescenceThicknessMaximum.value=O.iridescenceThicknessRange[1],O.iridescenceMap&&(C.iridescenceMap.value=O.iridescenceMap),O.iridescenceThicknessMap&&(C.iridescenceThicknessMap.value=O.iridescenceThicknessMap)),O.transmission>0&&(C.transmission.value=O.transmission,C.transmissionSamplerMap.value=B.texture,C.transmissionSamplerSize.value.set(B.width,B.height),O.transmissionMap&&(C.transmissionMap.value=O.transmissionMap),C.thickness.value=O.thickness,O.thicknessMap&&(C.thicknessMap.value=O.thicknessMap),C.attenuationDistance.value=O.attenuationDistance,C.attenuationColor.value.copy(O.attenuationColor)),C.specularIntensity.value=O.specularIntensity,C.specularColor.value.copy(O.specularColor),O.specularIntensityMap&&(C.specularIntensityMap.value=O.specularIntensityMap),O.specularColorMap&&(C.specularColorMap.value=O.specularColorMap)}(C,O,z)):O.isMeshMatcapMaterial?(i(C,O),function T(C,O){O.matcap&&(C.matcap.value=O.matcap)}(C,O)):O.isMeshDepthMaterial?i(C,O):O.isMeshDistanceMaterial?(i(C,O),function A(C,O){C.referencePosition.value.copy(O.referencePosition),C.nearDistance.value=O.nearDistance,C.farDistance.value=O.farDistance}(C,O)):O.isMeshNormalMaterial?i(C,O):O.isLineBasicMaterial?(function s(C,O){C.diffuse.value.copy(O.color),C.opacity.value=O.opacity}(C,O),O.isLineDashedMaterial&&function a(C,O){C.dashSize.value=O.dashSize,C.totalSize.value=O.dashSize+O.gapSize,C.scale.value=O.scale}(C,O)):O.isPointsMaterial?function l(C,O,B,V){let z;C.diffuse.value.copy(O.color),C.opacity.value=O.opacity,C.size.value=O.size*B,C.scale.value=.5*V,O.map&&(C.map.value=O.map),O.alphaMap&&(C.alphaMap.value=O.alphaMap),O.alphaTest>0&&(C.alphaTest.value=O.alphaTest),O.map?z=O.map:O.alphaMap&&(z=O.alphaMap),void 0!==z&&(!0===z.matrixAutoUpdate&&z.updateMatrix(),C.uvTransform.value.copy(z.matrix))}(C,O,B,V):O.isSpriteMaterial?function c(C,O){let B;C.diffuse.value.copy(O.color),C.opacity.value=O.opacity,C.rotation.value=O.rotation,O.map&&(C.map.value=O.map),O.alphaMap&&(C.alphaMap.value=O.alphaMap),O.alphaTest>0&&(C.alphaTest.value=O.alphaTest),O.map?B=O.map:O.alphaMap&&(B=O.alphaMap),void 0!==B&&(!0===B.matrixAutoUpdate&&B.updateMatrix(),C.uvTransform.value.copy(B.matrix))}(C,O):O.isShadowMaterial?(C.color.value.copy(O.color),C.opacity.value=O.opacity):O.isShaderMaterial&&(O.uniformsNeedUpdate=!1)}}}function ZD(n={}){this.isWebGLRenderer=!0;const e=void 0!==n.canvas?n.canvas:function m8(){const n=md("canvas");return n.style.display="block",n}(),t=void 0!==n.context?n.context:null,r=void 0===n.depth||n.depth,i=void 0===n.stencil||n.stencil,s=void 0!==n.antialias&&n.antialias,a=void 0===n.premultipliedAlpha||n.premultipliedAlpha,l=void 0!==n.preserveDrawingBuffer&&n.preserveDrawingBuffer,c=void 0!==n.powerPreference?n.powerPreference:"default",h=void 0!==n.failIfMajorPerformanceCaveat&&n.failIfMajorPerformanceCaveat;let g;g=null!==t?t.getContextAttributes().alpha:void 0!==n.alpha&&n.alpha;let m=null,_=null;const T=[],A=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Ba,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const C=this;let O=!1,B=0,V=0,z=null,G=-1,X=null;const J=new Ln,ae=new Ln;let Y=null,re=e.width,fe=e.height,ge=1,Ne=null,je=null;const me=new Ln(0,0,re,fe),Ie=new Ln(0,0,re,fe);let be=!1;const ke=new Kv;let Ve=!1,Te=!1,Pe=null;const qe=new un,Ge=new Le,st=new Q,xt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Mt(){return null===z?ge:1}let Qt,jt,ot,on,Be,Fe,Je,wt,ut,Yt,Ut,Lt,Vn,In,ie,K,Me,Ye,Ze,ct,$t,ee,$e,Oe=t;function Cn(te,ve){for(let Ee=0;Ee<te.length;Ee++){const Ue=e.getContext(te[Ee],ve);if(null!==Ue)return Ue}return null}try{const te={alpha:!0,depth:r,stencil:i,antialias:s,premultipliedAlpha:a,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:h};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r142"),e.addEventListener("webglcontextlost",le,!1),e.addEventListener("webglcontextrestored",nt,!1),e.addEventListener("webglcontextcreationerror",Qe,!1),null===Oe){const ve=["webgl2","webgl","experimental-webgl"];if(!0===C.isWebGL1Renderer&&ve.shift(),Oe=Cn(ve,te),null===Oe)throw Cn(ve)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===Oe.getShaderPrecisionFormat&&(Oe.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(te){throw console.error("THREE.WebGLRenderer: "+te.message),te}function et(){Qt=new C5(Oe),jt=new S5(Oe,Qt,n),Qt.init(jt),ee=new c8(Oe,Qt,jt),ot=new l8(Oe,Qt,jt),on=new O5,Be=new Z$,Fe=new u8(Oe,Qt,ot,Be,jt,ee,on),Je=new M5(C),wt=new A5(C),ut=new wV(Oe,jt),$e=new x5(Oe,Qt,ut,jt),Yt=new I5(Oe,ut,on,$e),Ut=new F5(Oe,Yt,ut,on),Ze=new N5(Oe,jt,Fe),K=new T5(Be),Lt=new X$(C,Je,wt,Qt,jt,$e,K),Vn=new g8(C,Be),In=new J$,ie=new i8(Qt,jt),Ye=new _5(C,Je,ot,Ut,g,a),Me=new a8(C,Ut,jt),ct=new w5(Oe,Qt,on,jt),$t=new P5(Oe,Qt,on,jt),on.programs=Lt.programs,C.capabilities=jt,C.extensions=Qt,C.properties=Be,C.renderLists=In,C.shadowMap=Me,C.state=ot,C.info=on}et();const tt=new p8(C,Oe);function le(te){te.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),O=!0}function nt(){console.log("THREE.WebGLRenderer: Context Restored."),O=!1;const te=on.autoReset,ve=Me.enabled,Ee=Me.autoUpdate,we=Me.needsUpdate,Ue=Me.type;et(),on.autoReset=te,Me.enabled=ve,Me.autoUpdate=Ee,Me.needsUpdate=we,Me.type=Ue}function Qe(te){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",te.statusMessage)}function Vt(te){const ve=te.target;ve.removeEventListener("dispose",Vt),function ft(te){(function Pt(te){const ve=Be.get(te).programs;void 0!==ve&&(ve.forEach(function(Ee){Lt.releaseProgram(Ee)}),te.isShaderMaterial&&Lt.releaseShaderCache(te))})(te),Be.remove(te)}(ve)}this.xr=tt,this.getContext=function(){return Oe},this.getContextAttributes=function(){return Oe.getContextAttributes()},this.forceContextLoss=function(){const te=Qt.get("WEBGL_lose_context");te&&te.loseContext()},this.forceContextRestore=function(){const te=Qt.get("WEBGL_lose_context");te&&te.restoreContext()},this.getPixelRatio=function(){return ge},this.setPixelRatio=function(te){void 0!==te&&(ge=te,this.setSize(re,fe,!1))},this.getSize=function(te){return te.set(re,fe)},this.setSize=function(te,ve,Ee){tt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(re=te,fe=ve,e.width=Math.floor(te*ge),e.height=Math.floor(ve*ge),!1!==Ee&&(e.style.width=te+"px",e.style.height=ve+"px"),this.setViewport(0,0,te,ve))},this.getDrawingBufferSize=function(te){return te.set(re*ge,fe*ge).floor()},this.setDrawingBufferSize=function(te,ve,Ee){re=te,fe=ve,ge=Ee,e.width=Math.floor(te*Ee),e.height=Math.floor(ve*Ee),this.setViewport(0,0,te,ve)},this.getCurrentViewport=function(te){return te.copy(J)},this.getViewport=function(te){return te.copy(me)},this.setViewport=function(te,ve,Ee,we){te.isVector4?me.set(te.x,te.y,te.z,te.w):me.set(te,ve,Ee,we),ot.viewport(J.copy(me).multiplyScalar(ge).floor())},this.getScissor=function(te){return te.copy(Ie)},this.setScissor=function(te,ve,Ee,we){te.isVector4?Ie.set(te.x,te.y,te.z,te.w):Ie.set(te,ve,Ee,we),ot.scissor(ae.copy(Ie).multiplyScalar(ge).floor())},this.getScissorTest=function(){return be},this.setScissorTest=function(te){ot.setScissorTest(be=te)},this.setOpaqueSort=function(te){Ne=te},this.setTransparentSort=function(te){je=te},this.getClearColor=function(te){return te.copy(Ye.getClearColor())},this.setClearColor=function(){Ye.setClearColor.apply(Ye,arguments)},this.getClearAlpha=function(){return Ye.getClearAlpha()},this.setClearAlpha=function(){Ye.setClearAlpha.apply(Ye,arguments)},this.clear=function(te=!0,ve=!0,Ee=!0){let we=0;te&&(we|=16384),ve&&(we|=256),Ee&&(we|=1024),Oe.clear(we)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",le,!1),e.removeEventListener("webglcontextrestored",nt,!1),e.removeEventListener("webglcontextcreationerror",Qe,!1),In.dispose(),ie.dispose(),Be.dispose(),Je.dispose(),wt.dispose(),Ut.dispose(),$e.dispose(),Lt.dispose(),tt.dispose(),tt.removeEventListener("sessionstart",Nn),tt.removeEventListener("sessionend",Fn),Pe&&(Pe.dispose(),Pe=null),gi.stop()},this.renderBufferDirect=function(te,ve,Ee,we,Ue,Wt){null===ve&&(ve=xt);const an=Ue.isMesh&&Ue.matrixWorld.determinant()<0,fn=function xG(te,ve,Ee,we,Ue){!0!==ve.isScene&&(ve=xt),Fe.resetTextureUnits();const Wt=ve.fog,fn=null===z?C.outputEncoding:!0===z.isXRRenderTarget?z.texture.encoding:Ba,dn=(we.isMeshStandardMaterial?wt:Je).get(we.envMap||(we.isMeshStandardMaterial?ve.environment:null)),kn=!0===we.vertexColors&&!!Ee.attributes.color&&4===Ee.attributes.color.itemSize,wn=!!we.normalMap&&!!Ee.attributes.tangent,Mn=!!Ee.morphAttributes.position,ar=!!Ee.morphAttributes.normal,rl=!!Ee.morphAttributes.color,Xu=we.toneMapped?C.toneMapping:0,Zu=Ee.morphAttributes.position||Ee.morphAttributes.normal||Ee.morphAttributes.color,$s=void 0!==Zu?Zu.length:0,Pn=Be.get(we),Ku=_.state.lights;!0!==Ve||!0!==Te&&te===X||K.setState(we,te,te===X&&we.id===G);let br=!1;we.version===Pn.__version?(Pn.needsLights&&Pn.lightsStateVersion!==Ku.state.version||Pn.outputEncoding!==fn||Ue.isInstancedMesh&&!1===Pn.instancing||!Ue.isInstancedMesh&&!0===Pn.instancing||Ue.isSkinnedMesh&&!1===Pn.skinning||!Ue.isSkinnedMesh&&!0===Pn.skinning||Pn.envMap!==dn||!0===we.fog&&Pn.fog!==Wt||void 0!==Pn.numClippingPlanes&&(Pn.numClippingPlanes!==K.numPlanes||Pn.numIntersection!==K.numIntersection)||Pn.vertexAlphas!==kn||Pn.vertexTangents!==wn||Pn.morphTargets!==Mn||Pn.morphNormals!==ar||Pn.morphColors!==rl||Pn.toneMapping!==Xu||!0===jt.isWebGL2&&Pn.morphTargetsCount!==$s)&&(br=!0):(br=!0,Pn.__version=we.version);let Hs=Pn.currentProgram;!0===br&&(Hs=Pb(we,ve,Ue));let ia=!1,zd=!1,Ob=!1;const mi=Hs.getUniforms(),$d=Pn.uniforms;if(ot.useProgram(Hs.program)&&(ia=!0,zd=!0,Ob=!0),we.id!==G&&(G=we.id,zd=!0),ia||X!==te){if(mi.setValue(Oe,"projectionMatrix",te.projectionMatrix),jt.logarithmicDepthBuffer&&mi.setValue(Oe,"logDepthBufFC",2/(Math.log(te.far+1)/Math.LN2)),X!==te&&(X=te,zd=!0,Ob=!0),we.isShaderMaterial||we.isMeshPhongMaterial||we.isMeshToonMaterial||we.isMeshStandardMaterial||we.envMap){const Gs=mi.map.cameraPosition;void 0!==Gs&&Gs.setValue(Oe,st.setFromMatrixPosition(te.matrixWorld))}(we.isMeshPhongMaterial||we.isMeshToonMaterial||we.isMeshLambertMaterial||we.isMeshBasicMaterial||we.isMeshStandardMaterial||we.isShaderMaterial)&&mi.setValue(Oe,"isOrthographic",!0===te.isOrthographicCamera),(we.isMeshPhongMaterial||we.isMeshToonMaterial||we.isMeshLambertMaterial||we.isMeshBasicMaterial||we.isMeshStandardMaterial||we.isShaderMaterial||we.isShadowMaterial||Ue.isSkinnedMesh)&&mi.setValue(Oe,"viewMatrix",te.matrixWorldInverse)}if(Ue.isSkinnedMesh){mi.setOptional(Oe,Ue,"bindMatrix"),mi.setOptional(Oe,Ue,"bindMatrixInverse");const Gs=Ue.skeleton;Gs&&(jt.floatVertexTextures?(null===Gs.boneTexture&&Gs.computeBoneTexture(),mi.setValue(Oe,"boneTexture",Gs.boneTexture,Fe),mi.setValue(Oe,"boneTextureSize",Gs.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Rb=Ee.morphAttributes;return(void 0!==Rb.position||void 0!==Rb.normal||void 0!==Rb.color&&!0===jt.isWebGL2)&&Ze.update(Ue,Ee,we,Hs),(zd||Pn.receiveShadow!==Ue.receiveShadow)&&(Pn.receiveShadow=Ue.receiveShadow,mi.setValue(Oe,"receiveShadow",Ue.receiveShadow)),zd&&(mi.setValue(Oe,"toneMappingExposure",C.toneMappingExposure),Pn.needsLights&&function wG(te,ve){te.ambientLightColor.needsUpdate=ve,te.lightProbe.needsUpdate=ve,te.directionalLights.needsUpdate=ve,te.directionalLightShadows.needsUpdate=ve,te.pointLights.needsUpdate=ve,te.pointLightShadows.needsUpdate=ve,te.spotLights.needsUpdate=ve,te.spotLightShadows.needsUpdate=ve,te.rectAreaLights.needsUpdate=ve,te.hemisphereLights.needsUpdate=ve}($d,Ob),Wt&&!0===we.fog&&Vn.refreshFogUniforms($d,Wt),Vn.refreshMaterialUniforms($d,we,ge,fe,Pe),Ip.upload(Oe,Pn.uniformsList,$d,Fe)),we.isShaderMaterial&&!0===we.uniformsNeedUpdate&&(Ip.upload(Oe,Pn.uniformsList,$d,Fe),we.uniformsNeedUpdate=!1),we.isSpriteMaterial&&mi.setValue(Oe,"center",Ue.center),mi.setValue(Oe,"modelViewMatrix",Ue.modelViewMatrix),mi.setValue(Oe,"normalMatrix",Ue.normalMatrix),mi.setValue(Oe,"modelMatrix",Ue.matrixWorld),Hs}(te,ve,Ee,we,Ue);ot.setMaterial(we,an);let dn=Ee.index;const kn=Ee.attributes.position;if(null===dn){if(void 0===kn||0===kn.count)return}else if(0===dn.count)return;let wn=1;!0===we.wireframe&&(dn=Yt.getWireframeAttribute(Ee),wn=2),$e.setup(Ue,we,fn,Ee,dn);let Mn,ar=ct;null!==dn&&(Mn=ut.get(dn),ar=$t,ar.setIndex(Mn));const rl=null!==dn?dn.count:kn.count,Xu=Ee.drawRange.start*wn,Zu=Ee.drawRange.count*wn,$s=null!==Wt?Wt.start*wn:0,Pn=null!==Wt?Wt.count*wn:1/0,Ku=Math.max(Xu,$s),br=Math.min(rl,Xu+Zu,$s+Pn)-1,Hs=Math.max(0,br-Ku+1);if(0!==Hs){if(Ue.isMesh)!0===we.wireframe?(ot.setLineWidth(we.wireframeLinewidth*Mt()),ar.setMode(1)):ar.setMode(4);else if(Ue.isLine){let ia=we.linewidth;void 0===ia&&(ia=1),ot.setLineWidth(ia*Mt()),ar.setMode(Ue.isLineSegments?1:Ue.isLineLoop?2:3)}else Ue.isPoints?ar.setMode(0):Ue.isSprite&&ar.setMode(4);if(Ue.isInstancedMesh)ar.renderInstances(Ku,Hs,Ue.count);else if(Ee.isInstancedBufferGeometry){const ia=Math.min(Ee.instanceCount,Ee._maxInstanceCount);ar.renderInstances(Ku,Hs,ia)}else ar.render(Ku,Hs)}},this.compile=function(te,ve){_=ie.get(te),_.init(),A.push(_),te.traverseVisible(function(Ee){Ee.isLight&&Ee.layers.test(ve.layers)&&(_.pushLight(Ee),Ee.castShadow&&_.pushShadow(Ee))}),_.setupLights(C.physicallyCorrectLights),te.traverse(function(Ee){const we=Ee.material;if(we)if(Array.isArray(we))for(let Ue=0;Ue<we.length;Ue++)Pb(we[Ue],te,Ee);else Pb(we,te,Ee)}),A.pop(),_=null};let rt=null;function Nn(){gi.stop()}function Fn(){gi.start()}const gi=new _D;function zs(te,ve,Ee,we){if(!1===te.visible)return;if(te.layers.test(ve.layers))if(te.isGroup)Ee=te.renderOrder;else if(te.isLOD)!0===te.autoUpdate&&te.update(ve);else if(te.isLight)_.pushLight(te),te.castShadow&&_.pushShadow(te);else if(te.isSprite){if(!te.frustumCulled||ke.intersectsSprite(te)){we&&st.setFromMatrixPosition(te.matrixWorld).applyMatrix4(qe);const an=Ut.update(te),fn=te.material;fn.visible&&m.push(te,an,fn,Ee,st.z,null)}}else if((te.isMesh||te.isLine||te.isPoints)&&(te.isSkinnedMesh&&te.skeleton.frame!==on.render.frame&&(te.skeleton.update(),te.skeleton.frame=on.render.frame),!te.frustumCulled||ke.intersectsObject(te))){we&&st.setFromMatrixPosition(te.matrixWorld).applyMatrix4(qe);const an=Ut.update(te),fn=te.material;if(Array.isArray(fn)){const dn=an.groups;for(let kn=0,wn=dn.length;kn<wn;kn++){const Mn=dn[kn],ar=fn[Mn.materialIndex];ar&&ar.visible&&m.push(te,an,ar,Ee,st.z,Mn)}}else fn.visible&&m.push(te,an,fn,Ee,st.z,null)}const Wt=te.children;for(let an=0,fn=Wt.length;an<fn;an++)zs(Wt[an],ve,Ee,we)}function m2(te,ve,Ee,we){const Ue=te.opaque,Wt=te.transmissive,an=te.transparent;_.setupLightsView(Ee),Wt.length>0&&function bG(te,ve,Ee){const we=jt.isWebGL2;null===Pe&&(Pe=new Ha(1,1,{generateMipmaps:!0,type:Qt.has("EXT_color_buffer_half_float")?fd:Na,minFilter:1008,samples:we&&!0===s?4:0})),C.getDrawingBufferSize(Ge),we?Pe.setSize(Ge.x,Ge.y):Pe.setSize(sp(Ge.x),sp(Ge.y));const Ue=C.getRenderTarget();C.setRenderTarget(Pe),C.clear();const Wt=C.toneMapping;C.toneMapping=0,yg(te,ve,Ee),C.toneMapping=Wt,Fe.updateMultisampleRenderTarget(Pe),Fe.updateRenderTargetMipmap(Pe),C.setRenderTarget(Ue)}(Ue,ve,Ee),we&&ot.viewport(J.copy(we)),Ue.length>0&&yg(Ue,ve,Ee),Wt.length>0&&yg(Wt,ve,Ee),an.length>0&&yg(an,ve,Ee),ot.buffers.depth.setTest(!0),ot.buffers.depth.setMask(!0),ot.buffers.color.setMask(!0),ot.setPolygonOffset(!1)}function yg(te,ve,Ee){const we=!0===ve.isScene?ve.overrideMaterial:null;for(let Ue=0,Wt=te.length;Ue<Wt;Ue++){const an=te[Ue],fn=an.object,dn=an.geometry,kn=null===we?an.material:we,wn=an.group;fn.layers.test(Ee.layers)&&_G(fn,ve,Ee,dn,kn,wn)}}function _G(te,ve,Ee,we,Ue,Wt){te.onBeforeRender(C,ve,Ee,we,Ue,Wt),te.modelViewMatrix.multiplyMatrices(Ee.matrixWorldInverse,te.matrixWorld),te.normalMatrix.getNormalMatrix(te.modelViewMatrix),Ue.onBeforeRender(C,ve,Ee,we,te,Wt),!0===Ue.transparent&&2===Ue.side?(Ue.side=1,Ue.needsUpdate=!0,C.renderBufferDirect(Ee,ve,we,Ue,te,Wt),Ue.side=0,Ue.needsUpdate=!0,C.renderBufferDirect(Ee,ve,we,Ue,te,Wt),Ue.side=2):C.renderBufferDirect(Ee,ve,we,Ue,te,Wt),te.onAfterRender(C,ve,Ee,we,Ue,Wt)}function Pb(te,ve,Ee){!0!==ve.isScene&&(ve=xt);const we=Be.get(te),Ue=_.state.lights,an=Ue.state.version,fn=Lt.getParameters(te,Ue.state,_.state.shadowsArray,ve,Ee),dn=Lt.getProgramCacheKey(fn);let kn=we.programs;we.environment=te.isMeshStandardMaterial?ve.environment:null,we.fog=ve.fog,we.envMap=(te.isMeshStandardMaterial?wt:Je).get(te.envMap||we.environment),void 0===kn&&(te.addEventListener("dispose",Vt),kn=new Map,we.programs=kn);let wn=kn.get(dn);if(void 0!==wn){if(we.currentProgram===wn&&we.lightsStateVersion===an)return y2(te,fn),wn}else fn.uniforms=Lt.getUniforms(te),te.onBuild(Ee,fn,C),te.onBeforeCompile(fn,C),wn=Lt.acquireProgram(fn,dn),kn.set(dn,wn),we.uniforms=fn.uniforms;const Mn=we.uniforms;(!te.isShaderMaterial&&!te.isRawShaderMaterial||!0===te.clipping)&&(Mn.clippingPlanes=K.uniform),y2(te,fn),we.needsLights=function SG(te){return te.isMeshLambertMaterial||te.isMeshToonMaterial||te.isMeshPhongMaterial||te.isMeshStandardMaterial||te.isShadowMaterial||te.isShaderMaterial&&!0===te.lights}(te),we.lightsStateVersion=an,we.needsLights&&(Mn.ambientLightColor.value=Ue.state.ambient,Mn.lightProbe.value=Ue.state.probe,Mn.directionalLights.value=Ue.state.directional,Mn.directionalLightShadows.value=Ue.state.directionalShadow,Mn.spotLights.value=Ue.state.spot,Mn.spotLightShadows.value=Ue.state.spotShadow,Mn.rectAreaLights.value=Ue.state.rectArea,Mn.ltc_1.value=Ue.state.rectAreaLTC1,Mn.ltc_2.value=Ue.state.rectAreaLTC2,Mn.pointLights.value=Ue.state.point,Mn.pointLightShadows.value=Ue.state.pointShadow,Mn.hemisphereLights.value=Ue.state.hemi,Mn.directionalShadowMap.value=Ue.state.directionalShadowMap,Mn.directionalShadowMatrix.value=Ue.state.directionalShadowMatrix,Mn.spotShadowMap.value=Ue.state.spotShadowMap,Mn.spotShadowMatrix.value=Ue.state.spotShadowMatrix,Mn.pointShadowMap.value=Ue.state.pointShadowMap,Mn.pointShadowMatrix.value=Ue.state.pointShadowMatrix);const ar=wn.getUniforms(),rl=Ip.seqWithValue(ar.seq,Mn);return we.currentProgram=wn,we.uniformsList=rl,wn}function y2(te,ve){const Ee=Be.get(te);Ee.outputEncoding=ve.outputEncoding,Ee.instancing=ve.instancing,Ee.skinning=ve.skinning,Ee.morphTargets=ve.morphTargets,Ee.morphNormals=ve.morphNormals,Ee.morphColors=ve.morphColors,Ee.morphTargetsCount=ve.morphTargetsCount,Ee.numClippingPlanes=ve.numClippingPlanes,Ee.numIntersection=ve.numClipIntersection,Ee.vertexAlphas=ve.vertexAlphas,Ee.vertexTangents=ve.vertexTangents,Ee.toneMapping=ve.toneMapping}gi.setAnimationLoop(function Xt(te){rt&&rt(te)}),"undefined"!=typeof self&&gi.setContext(self),this.setAnimationLoop=function(te){rt=te,tt.setAnimationLoop(te),null===te?gi.stop():gi.start()},tt.addEventListener("sessionstart",Nn),tt.addEventListener("sessionend",Fn),this.render=function(te,ve){if(void 0===ve||!0===ve.isCamera){if(!0!==O){if(!0===te.autoUpdate&&te.updateMatrixWorld(),null===ve.parent&&ve.updateMatrixWorld(),!0===tt.enabled&&!0===tt.isPresenting&&(!0===tt.cameraAutoUpdate&&tt.updateCamera(ve),ve=tt.getCamera()),!0===te.isScene&&te.onBeforeRender(C,te,ve,z),_=ie.get(te,A.length),_.init(),A.push(_),qe.multiplyMatrices(ve.projectionMatrix,ve.matrixWorldInverse),ke.setFromProjectionMatrix(qe),Te=this.localClippingEnabled,Ve=K.init(this.clippingPlanes,Te,ve),m=In.get(te,T.length),m.init(),T.push(m),zs(te,ve,0,C.sortObjects),m.finish(),!0===C.sortObjects&&m.sort(Ne,je),!0===Ve&&K.beginShadows(),Me.render(_.state.shadowsArray,te,ve),!0===Ve&&K.endShadows(),!0===this.info.autoReset&&this.info.reset(),Ye.render(m,te),_.setupLights(C.physicallyCorrectLights),ve.isArrayCamera){const we=ve.cameras;for(let Ue=0,Wt=we.length;Ue<Wt;Ue++){const an=we[Ue];m2(m,te,an,an.viewport)}}else m2(m,te,ve);null!==z&&(Fe.updateMultisampleRenderTarget(z),Fe.updateRenderTargetMipmap(z)),!0===te.isScene&&te.onAfterRender(C,te,ve),$e.resetDefaultState(),G=-1,X=null,A.pop(),_=A.length>0?A[A.length-1]:null,T.pop(),m=T.length>0?T[T.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return B},this.getActiveMipmapLevel=function(){return V},this.getRenderTarget=function(){return z},this.setRenderTargetTextures=function(te,ve,Ee){Be.get(te.texture).__webglTexture=ve,Be.get(te.depthTexture).__webglTexture=Ee;const we=Be.get(te);we.__hasExternalTextures=!0,we.__hasExternalTextures&&(we.__autoAllocateDepthBuffer=void 0===Ee,we.__autoAllocateDepthBuffer||!0===Qt.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),we.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(te,ve){const Ee=Be.get(te);Ee.__webglFramebuffer=ve,Ee.__useDefaultFramebuffer=void 0===ve},this.setRenderTarget=function(te,ve=0,Ee=0){z=te,B=ve,V=Ee;let we=!0;if(te){const dn=Be.get(te);void 0!==dn.__useDefaultFramebuffer?(ot.bindFramebuffer(36160,null),we=!1):void 0===dn.__webglFramebuffer?Fe.setupRenderTarget(te):dn.__hasExternalTextures&&Fe.rebindTextures(te,Be.get(te.texture).__webglTexture,Be.get(te.depthTexture).__webglTexture)}let Ue=null,Wt=!1,an=!1;if(te){const dn=te.texture;(dn.isData3DTexture||dn.isDataArrayTexture)&&(an=!0);const kn=Be.get(te).__webglFramebuffer;te.isWebGLCubeRenderTarget?(Ue=kn[ve],Wt=!0):Ue=jt.isWebGL2&&te.samples>0&&!1===Fe.useMultisampledRTT(te)?Be.get(te).__webglMultisampledFramebuffer:kn,J.copy(te.viewport),ae.copy(te.scissor),Y=te.scissorTest}else J.copy(me).multiplyScalar(ge).floor(),ae.copy(Ie).multiplyScalar(ge).floor(),Y=be;if(ot.bindFramebuffer(36160,Ue)&&jt.drawBuffers&&we&&ot.drawBuffers(te,Ue),ot.viewport(J),ot.scissor(ae),ot.setScissorTest(Y),Wt){const dn=Be.get(te.texture);Oe.framebufferTexture2D(36160,36064,34069+ve,dn.__webglTexture,Ee)}else if(an){const dn=Be.get(te.texture);Oe.framebufferTextureLayer(36160,36064,dn.__webglTexture,Ee||0,ve||0)}G=-1},this.readRenderTargetPixels=function(te,ve,Ee,we,Ue,Wt,an){if(!te||!te.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let fn=Be.get(te).__webglFramebuffer;if(te.isWebGLCubeRenderTarget&&void 0!==an&&(fn=fn[an]),fn){ot.bindFramebuffer(36160,fn);try{const dn=te.texture,kn=dn.format,wn=dn.type;if(kn!==vs&&ee.convert(kn)!==Oe.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const Mn=wn===fd&&(Qt.has("EXT_color_buffer_half_float")||jt.isWebGL2&&Qt.has("EXT_color_buffer_float"));if(!(wn===Na||ee.convert(wn)===Oe.getParameter(35738)||wn===Ho&&(jt.isWebGL2||Qt.has("OES_texture_float")||Qt.has("WEBGL_color_buffer_float"))||Mn))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");ve>=0&&ve<=te.width-we&&Ee>=0&&Ee<=te.height-Ue&&Oe.readPixels(ve,Ee,we,Ue,ee.convert(kn),ee.convert(wn),Wt)}finally{const dn=null!==z?Be.get(z).__webglFramebuffer:null;ot.bindFramebuffer(36160,dn)}}},this.copyFramebufferToTexture=function(te,ve,Ee=0){const we=Math.pow(2,-Ee),Ue=Math.floor(ve.image.width*we),Wt=Math.floor(ve.image.height*we);Fe.setTexture2D(ve,0),Oe.copyTexSubImage2D(3553,Ee,0,0,te.x,te.y,Ue,Wt),ot.unbindTexture()},this.copyTextureToTexture=function(te,ve,Ee,we=0){const Ue=ve.image.width,Wt=ve.image.height,an=ee.convert(Ee.format),fn=ee.convert(Ee.type);Fe.setTexture2D(Ee,0),Oe.pixelStorei(37440,Ee.flipY),Oe.pixelStorei(37441,Ee.premultiplyAlpha),Oe.pixelStorei(3317,Ee.unpackAlignment),ve.isDataTexture?Oe.texSubImage2D(3553,we,te.x,te.y,Ue,Wt,an,fn,ve.image.data):ve.isCompressedTexture?Oe.compressedTexSubImage2D(3553,we,te.x,te.y,ve.mipmaps[0].width,ve.mipmaps[0].height,an,ve.mipmaps[0].data):Oe.texSubImage2D(3553,we,te.x,te.y,an,fn,ve.image),0===we&&Ee.generateMipmaps&&Oe.generateMipmap(3553),ot.unbindTexture()},this.copyTextureToTexture3D=function(te,ve,Ee,we,Ue=0){if(C.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const Wt=te.max.x-te.min.x+1,an=te.max.y-te.min.y+1,fn=te.max.z-te.min.z+1,dn=ee.convert(we.format),kn=ee.convert(we.type);let wn;if(we.isData3DTexture)Fe.setTexture3D(we,0),wn=32879;else{if(!we.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Fe.setTexture2DArray(we,0),wn=35866}Oe.pixelStorei(37440,we.flipY),Oe.pixelStorei(37441,we.premultiplyAlpha),Oe.pixelStorei(3317,we.unpackAlignment);const Mn=Oe.getParameter(3314),ar=Oe.getParameter(32878),rl=Oe.getParameter(3316),Xu=Oe.getParameter(3315),Zu=Oe.getParameter(32877),$s=Ee.isCompressedTexture?Ee.mipmaps[0]:Ee.image;Oe.pixelStorei(3314,$s.width),Oe.pixelStorei(32878,$s.height),Oe.pixelStorei(3316,te.min.x),Oe.pixelStorei(3315,te.min.y),Oe.pixelStorei(32877,te.min.z),Ee.isDataTexture||Ee.isData3DTexture?Oe.texSubImage3D(wn,Ue,ve.x,ve.y,ve.z,Wt,an,fn,dn,kn,$s.data):Ee.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Oe.compressedTexSubImage3D(wn,Ue,ve.x,ve.y,ve.z,Wt,an,fn,dn,$s.data)):Oe.texSubImage3D(wn,Ue,ve.x,ve.y,ve.z,Wt,an,fn,dn,kn,$s),Oe.pixelStorei(3314,Mn),Oe.pixelStorei(32878,ar),Oe.pixelStorei(3316,rl),Oe.pixelStorei(3315,Xu),Oe.pixelStorei(32877,Zu),0===Ue&&we.generateMipmaps&&Oe.generateMipmap(wn),ot.unbindTexture()},this.initTexture=function(te){te.isCubeTexture?Fe.setTextureCube(te,0):te.isData3DTexture?Fe.setTexture3D(te,0):te.isDataArrayTexture?Fe.setTexture2DArray(te,0):Fe.setTexture2D(te,0),ot.unbindTexture()},this.resetState=function(){B=0,V=0,z=null,ot.reset(),$e.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class y8 extends ZD{}).prototype.isWebGL1Renderer=!0;class KD extends Ti{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}class Vi extends qa{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new bt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const hA=new Q,fA=new Q,pA=new un,cb=new pp,Fp=new Tu;class Cd extends Ti{constructor(e=new mn,t=new Vi){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)hA.fromBufferAttribute(t,i-1),fA.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=hA.distanceTo(fA);e.setAttribute("lineDistance",new St(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,a=r.drawRange;if(null===r.boundingSphere&&r.computeBoundingSphere(),Fp.copy(r.boundingSphere),Fp.applyMatrix4(i),Fp.radius+=s,!1===e.ray.intersectsSphere(Fp))return;pA.copy(i).invert(),cb.copy(e.ray).applyMatrix4(pA);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,h=new Q,g=new Q,m=new Q,_=new Q,T=this.isLineSegments?2:1,A=r.index,O=r.attributes.position;if(null!==A)for(let z=Math.max(0,a.start),G=Math.min(A.count,a.start+a.count)-1;z<G;z+=T){const X=A.getX(z),J=A.getX(z+1);if(h.fromBufferAttribute(O,X),g.fromBufferAttribute(O,J),cb.distanceSqToSegment(h,g,_,m)>c)continue;_.applyMatrix4(this.matrixWorld);const Y=e.ray.origin.distanceTo(_);Y<e.near||Y>e.far||t.push({distance:Y,point:m.clone().applyMatrix4(this.matrixWorld),index:z,face:null,faceIndex:null,object:this})}else for(let z=Math.max(0,a.start),G=Math.min(O.count,a.start+a.count)-1;z<G;z+=T){if(h.fromBufferAttribute(O,z),g.fromBufferAttribute(O,z+1),cb.distanceSqToSegment(h,g,_,m)>c)continue;_.applyMatrix4(this.matrixWorld);const J=e.ray.origin.distanceTo(_);J<e.near||J>e.far||t.push({distance:J,point:m.clone().applyMatrix4(this.matrixWorld),index:z,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=i.length;s<a;s++){const l=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}const gA=new Q,mA=new Q;class Id extends Cd{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,r=[];for(let i=0,s=t.count;i<s;i+=2)gA.fromBufferAttribute(t,i),mA.fromBufferAttribute(t,i+1),r[i]=0===i?0:r[i-1],r[i+1]=r[i]+gA.distanceTo(mA);e.setAttribute("lineDistance",new St(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class RA extends qa{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new bt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Zn={arraySlice:function(n,e,t){return Zn.isTypedArray(n)?new n.constructor(n.subarray(e,void 0!==t?t:n.length)):n.slice(e,t)},convertArray:function(n,e,t){return!n||!t&&n.constructor===e?n:"number"==typeof e.BYTES_PER_ELEMENT?new e(n):Array.prototype.slice.call(n)},isTypedArray:function(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)},getKeyframeOrder:function(n){const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(function e(i,s){return n[i]-n[s]}),r},sortedArray:function(n,e,t){const r=n.length,i=new n.constructor(r);for(let s=0,a=0;a!==r;++s){const l=t[s]*e;for(let c=0;c!==e;++c)i[a++]=n[l+c]}return i},flattenJSON:function(n,e,t,r){let i=1,s=n[0];for(;void 0!==s&&void 0===s[r];)s=n[i++];if(void 0===s)return;let a=s[r];if(void 0!==a)if(Array.isArray(a))do{a=s[r],void 0!==a&&(e.push(s.time),t.push.apply(t,a)),s=n[i++]}while(void 0!==s);else if(void 0!==a.toArray)do{a=s[r],void 0!==a&&(e.push(s.time),a.toArray(t,t.length)),s=n[i++]}while(void 0!==s);else do{a=s[r],void 0!==a&&(e.push(s.time),t.push(a)),s=n[i++]}while(void 0!==s)},subclip:function(n,e,t,r,i=30){const s=n.clone();s.name=e;const a=[];for(let c=0;c<s.tracks.length;++c){const h=s.tracks[c],g=h.getValueSize(),m=[],_=[];for(let T=0;T<h.times.length;++T){const A=h.times[T]*i;if(!(A<t||A>=r)){m.push(h.times[T]);for(let C=0;C<g;++C)_.push(h.values[T*g+C])}}0!==m.length&&(h.times=Zn.convertArray(m,h.times.constructor),h.values=Zn.convertArray(_,h.values.constructor),a.push(h))}s.tracks=a;let l=1/0;for(let c=0;c<s.tracks.length;++c)l>s.tracks[c].times[0]&&(l=s.tracks[c].times[0]);for(let c=0;c<s.tracks.length;++c)s.tracks[c].shift(-1*l);return s.resetDuration(),s},makeClipAdditive:function(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,s=e/r;for(let a=0;a<i;++a){const l=t.tracks[a],c=l.ValueTypeName;if("bool"===c||"string"===c)continue;const h=n.tracks.find(function(B){return B.name===l.name&&B.ValueTypeName===c});if(void 0===h)continue;let g=0;const m=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(g=m/3);let _=0;const T=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(_=T/3);const A=l.times.length-1;let C;if(s<=l.times[0])C=Zn.arraySlice(l.values,g,m-g);else if(s>=l.times[A]){const B=A*m+g;C=Zn.arraySlice(l.values,B,B+m-g)}else{const B=l.createInterpolant(),V=g,z=m-g;B.evaluate(s),C=Zn.arraySlice(B.resultBuffer,V,z)}"quaternion"===c&&(new di).fromArray(C).normalize().conjugate().toArray(C);const O=h.times.length;for(let B=0;B<O;++B){const V=B*T+_;if("quaternion"===c)di.multiplyQuaternionsFlat(h.values,V,C,0,h.values,V);else{const z=T-2*_;for(let G=0;G<z;++G)h.values[V+G]-=C[G]}}}return n.blendMode=2501,n}};class sg{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],s=t[r-1];e:{t:{let a;n:{r:if(!(e<i)){for(let l=r+2;;){if(void 0===i){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===l)break;if(s=i,i=t[++r],e<i)break t}a=t.length;break n}if(e>=s)break e;{const l=t[1];e<l&&(r=2,s=l);for(let c=r-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(r===c)break;if(i=s,s=t[--r-1],e>=s)break t}a=r,r=0}}for(;r<a;){const l=r+a>>>1;e<t[l]?a=l:r=l+1}if(i=t[r],s=t[r-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===i)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let a=0;a!==i;++a)t[a]=r[s+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class mH extends sg{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,r){const i=this.parameterPositions;let s=e-2,a=e+1,l=i[s],c=i[a];if(void 0===l)switch(this.getSettings_().endingStart){case 2401:s=e,l=2*t-r;break;case 2402:s=i.length-2,l=t+i[s]-i[s+1];break;default:s=e,l=r}if(void 0===c)switch(this.getSettings_().endingEnd){case 2401:a=e,c=2*r-t;break;case 2402:a=1,c=r+i[1]-i[0];break;default:a=e-1,c=t}const h=.5*(r-t),g=this.valueSize;this._weightPrev=h/(t-l),this._weightNext=h/(c-r),this._offsetPrev=s*g,this._offsetNext=a*g}interpolate_(e,t,r,i){const s=this.resultBuffer,a=this.sampleValues,l=this.valueSize,c=e*l,h=c-l,g=this._offsetPrev,m=this._offsetNext,_=this._weightPrev,T=this._weightNext,A=(r-t)/(i-t),C=A*A,O=C*A,B=-_*O+2*_*C-_*A,V=(1+_)*O+(-1.5-2*_)*C+(-.5+_)*A+1,z=(-1-T)*O+(1.5+T)*C+.5*A,G=T*O-T*C;for(let X=0;X!==l;++X)s[X]=B*a[g+X]+V*a[h+X]+z*a[c+X]+G*a[m+X];return s}}class LA extends sg{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,a=this.sampleValues,l=this.valueSize,c=e*l,h=c-l,g=(r-t)/(i-t),m=1-g;for(let _=0;_!==l;++_)s[_]=a[h+_]*m+a[c+_]*g;return s}}class yH extends sg{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Vs{constructor(e,t,r,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Zn.convertArray(t,this.TimeBufferType),this.values=Zn.convertArray(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:Zn.convertArray(e.times,Array),values:Zn.convertArray(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new yH(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new LA(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new mH(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(r);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let s=0,a=i-1;for(;s!==i&&r[s]<e;)++s;for(;-1!==a&&r[a]>t;)--a;if(++a,0!==s||a!==i){s>=a&&(a=Math.max(a,1),s=a-1);const l=this.getValueSize();this.times=Zn.arraySlice(r,s,a),this.values=Zn.arraySlice(this.values,s*l,a*l)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let l=0;l!==s;l++){const c=r[l];if("number"==typeof c&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,c),e=!1;break}if(null!==a&&a>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,c,a),e=!1;break}a=c}if(void 0!==i&&Zn.isTypedArray(i))for(let l=0,c=i.length;l!==c;++l){const h=i[l];if(isNaN(h)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,h),e=!1;break}}return e}optimize(){const e=Zn.arraySlice(this.times),t=Zn.arraySlice(this.values),r=this.getValueSize(),i=2302===this.getInterpolation(),s=e.length-1;let a=1;for(let l=1;l<s;++l){let c=!1;const h=e[l];if(h!==e[l+1]&&(1!==l||h!==e[0]))if(i)c=!0;else{const m=l*r,_=m-r,T=m+r;for(let A=0;A!==r;++A){const C=t[m+A];if(C!==t[_+A]||C!==t[T+A]){c=!0;break}}}if(c){if(l!==a){e[a]=e[l];const m=l*r,_=a*r;for(let T=0;T!==r;++T)t[_+T]=t[m+T]}++a}}if(s>0){e[a]=e[s];for(let l=s*r,c=a*r,h=0;h!==r;++h)t[c+h]=t[l+h];++a}return a!==e.length?(this.times=Zn.arraySlice(e,0,a),this.values=Zn.arraySlice(t,0,a*r)):(this.times=e,this.values=t),this}clone(){const e=Zn.arraySlice(this.times,0),t=Zn.arraySlice(this.values,0),i=new(0,this.constructor)(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Vs.prototype.TimeBufferType=Float32Array,Vs.prototype.ValueBufferType=Float32Array,Vs.prototype.DefaultInterpolation=2301;class Wu extends Vs{}Wu.prototype.ValueTypeName="bool",Wu.prototype.ValueBufferType=Array,Wu.prototype.DefaultInterpolation=2300,Wu.prototype.InterpolantFactoryMethodLinear=void 0,Wu.prototype.InterpolantFactoryMethodSmooth=void 0;(class NA extends Vs{}).prototype.ValueTypeName="color";(class og extends Vs{}).prototype.ValueTypeName="number";class vH extends sg{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,a=this.sampleValues,l=this.valueSize,c=(r-t)/(i-t);let h=e*l;for(let g=h+l;h!==g;h+=4)di.slerpFlat(s,0,a,h-l,a,h,c);return s}}class Ud extends Vs{InterpolantFactoryMethodLinear(e){return new vH(this.times,this.values,this.getValueSize(),e)}}Ud.prototype.ValueTypeName="quaternion",Ud.prototype.DefaultInterpolation=2301,Ud.prototype.InterpolantFactoryMethodSmooth=void 0;class qu extends Vs{}qu.prototype.ValueTypeName="string",qu.prototype.ValueBufferType=Array,qu.prototype.DefaultInterpolation=2300,qu.prototype.InterpolantFactoryMethodLinear=void 0,qu.prototype.InterpolantFactoryMethodSmooth=void 0;(class ag extends Vs{}).prototype.ValueTypeName="vector";new class FA{constructor(e,t,r){const i=this;let c,s=!1,a=0,l=0;const h=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(g){l++,!1===s&&void 0!==i.onStart&&i.onStart(g,a,l),s=!0},this.itemEnd=function(g){a++,void 0!==i.onProgress&&i.onProgress(g,a,l),a===l&&(s=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(g){void 0!==i.onError&&i.onError(g)},this.resolveURL=function(g){return c?c(g):g},this.setURLModifier=function(g){return c=g,this},this.addHandler=function(g,m){return h.push(g,m),this},this.removeHandler=function(g){const m=h.indexOf(g);return-1!==m&&h.splice(m,2),this},this.getHandler=function(g){for(let m=0,_=h.length;m<_;m+=2){const T=h[m],A=h[m+1];if(T.global&&(T.lastIndex=0),T.test(g))return A}return null}}};class wb extends Ti{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new bt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}class kA extends wb{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Ti.DefaultUp),this.updateMatrix(),this.groundColor=new bt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const BA=new un,UA=new Q,VA=new Q;class DH extends class wH{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Le(512,512),this.map=null,this.mapPass=null,this.matrix=new un,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Kv,this._frameExtents=new Le(1,1),this._viewportCount=1,this._viewports=[new Ln(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;UA.setFromMatrixPosition(e.matrixWorld),t.position.copy(UA),VA.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(VA),t.updateMatrixWorld(),BA.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(BA),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(t.projectionMatrix),r.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}{constructor(){super(new Jv(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class $A extends wb{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Ti.DefaultUp),this.updateMatrix(),this.target=new Ti,this.shadow=new DH}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class HA extends wb{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}const Mb="\\[\\]\\.:\\/",BH=new RegExp("["+Mb+"]","g"),Eb="[^"+Mb+"]",UH="[^"+Mb.replace("\\.","")+"]",GH=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",Eb)+/(WCOD+)?/.source.replace("WCOD",UH)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Eb)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Eb)+"$"),jH=["material","materials","bones"];class WH{constructor(e,t,r){const i=r||qn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const i=this._bindings[this._targetGroup.nCachedObjects_];void 0!==i&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}let qn=(()=>{class n{constructor(t,r,i){this.path=r,this.parsedPath=i||n.parseTrackName(r),this.node=n.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,r,i){return t&&t.isAnimationObjectGroup?new n.Composite(t,r,i):new n(t,r,i)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(BH,"")}static parseTrackName(t){const r=GH.exec(t);if(null===r)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const i={nodeName:r[2],objectName:r[3],objectIndex:r[4],propertyName:r[5],propertyIndex:r[6]},s=i.nodeName&&i.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const a=i.nodeName.substring(s+1);-1!==jH.indexOf(a)&&(i.nodeName=i.nodeName.substring(0,s),i.objectName=a)}if(null===i.propertyName||0===i.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return i}static findNode(t,r){if(void 0===r||""===r||"."===r||-1===r||r===t.name||r===t.uuid)return t;if(t.skeleton){const i=t.skeleton.getBoneByName(r);if(void 0!==i)return i}if(t.children){const i=function(a){for(let l=0;l<a.length;l++){const c=a[l];if(c.name===r||c.uuid===r)return c;const h=i(c.children);if(h)return h}return null},s=i(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,r){t[r]=this.targetObject[this.propertyName]}_getValue_array(t,r){const i=this.resolvedProperty;for(let s=0,a=i.length;s!==a;++s)t[r++]=i[s]}_getValue_arrayElement(t,r){t[r]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,r){this.resolvedProperty.toArray(t,r)}_setValue_direct(t,r){this.targetObject[this.propertyName]=t[r]}_setValue_direct_setNeedsUpdate(t,r){this.targetObject[this.propertyName]=t[r],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,r){this.targetObject[this.propertyName]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,r){const i=this.resolvedProperty;for(let s=0,a=i.length;s!==a;++s)i[s]=t[r++]}_setValue_array_setNeedsUpdate(t,r){const i=this.resolvedProperty;for(let s=0,a=i.length;s!==a;++s)i[s]=t[r++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,r){const i=this.resolvedProperty;for(let s=0,a=i.length;s!==a;++s)i[s]=t[r++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,r){this.resolvedProperty[this.propertyIndex]=t[r]}_setValue_arrayElement_setNeedsUpdate(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,r){this.resolvedProperty.fromArray(t,r)}_setValue_fromArray_setNeedsUpdate(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,r){this.bind(),this.getValue(t,r)}_setValue_unbound(t,r){this.bind(),this.setValue(t,r)}bind(){let t=this.node;const r=this.parsedPath,i=r.objectName,s=r.propertyName;let a=r.propertyIndex;if(t||(t=n.findNode(this.rootNode,r.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(i){let g=r.objectIndex;switch(i){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let m=0;m<t.length;m++)if(t[m].name===g){g=m;break}break;default:if(void 0===t[i])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[i]}if(void 0!==g){if(void 0===t[g])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[g]}}const l=t[s];if(void 0===l)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+r.nodeName+"."+s+" but it wasn't found.",t);let c=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?c=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate);let h=this.BindingType.Direct;if(void 0!==a){if("morphTargetInfluences"===s){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[a]&&(a=t.morphTargetDictionary[a])}h=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=a}else void 0!==l.fromArray&&void 0!==l.toArray?(h=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(h=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=s;this.getValue=this.GetterByBindingType[h],this.setValue=this.SetterByBindingTypeAndVersioning[h][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=WH,n})();qn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},qn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},qn.prototype.GetterByBindingType=[qn.prototype._getValue_direct,qn.prototype._getValue_array,qn.prototype._getValue_arrayElement,qn.prototype._getValue_toArray],qn.prototype.SetterByBindingTypeAndVersioning=[[qn.prototype._setValue_direct,qn.prototype._setValue_direct_setNeedsUpdate,qn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[qn.prototype._setValue_array,qn.prototype._setValue_array_setNeedsUpdate,qn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[qn.prototype._setValue_arrayElement,qn.prototype._setValue_arrayElement_setNeedsUpdate,qn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[qn.prototype._setValue_fromArray,qn.prototype._setValue_fromArray_setNeedsUpdate,qn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class t2{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(cr(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class ZH extends Id{constructor(e=10,t=10,r=4473924,i=8947848){r=new bt(r),i=new bt(i);const s=t/2,a=e/t,l=e/2,c=[],h=[];for(let _=0,T=0,A=-l;_<=t;_++,A+=a){c.push(-l,0,A,l,0,A),c.push(A,0,-l,A,0,l);const C=_===s?r:i;C.toArray(h,T),T+=3,C.toArray(h,T),T+=3,C.toArray(h,T),T+=3,C.toArray(h,T),T+=3}const g=new mn;g.setAttribute("position",new St(c,3)),g.setAttribute("color",new St(h,3)),super(g,new Vi({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}const pg=new Q,or=new Xv;class KH extends Id{constructor(e){const t=new mn,r=new Vi({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],a={};function l(A,C){c(A),c(C)}function c(A){i.push(0,0,0),s.push(0,0,0),void 0===a[A]&&(a[A]=[]),a[A].push(i.length/3-1)}l("n1","n2"),l("n2","n4"),l("n4","n3"),l("n3","n1"),l("f1","f2"),l("f2","f4"),l("f4","f3"),l("f3","f1"),l("n1","f1"),l("n2","f2"),l("n3","f3"),l("n4","f4"),l("p","n1"),l("p","n2"),l("p","n3"),l("p","n4"),l("u1","u2"),l("u2","u3"),l("u3","u1"),l("c","t"),l("p","c"),l("cn1","cn2"),l("cn3","cn4"),l("cf1","cf2"),l("cf3","cf4"),t.setAttribute("position",new St(i,3)),t.setAttribute("color",new St(s,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const h=new bt(16755200),g=new bt(16711680),m=new bt(43775),_=new bt(16777215),T=new bt(3355443);this.setColors(h,g,m,_,T)}setColors(e,t,r,i,s){const l=this.geometry.getAttribute("color");l.setXYZ(0,e.r,e.g,e.b),l.setXYZ(1,e.r,e.g,e.b),l.setXYZ(2,e.r,e.g,e.b),l.setXYZ(3,e.r,e.g,e.b),l.setXYZ(4,e.r,e.g,e.b),l.setXYZ(5,e.r,e.g,e.b),l.setXYZ(6,e.r,e.g,e.b),l.setXYZ(7,e.r,e.g,e.b),l.setXYZ(8,e.r,e.g,e.b),l.setXYZ(9,e.r,e.g,e.b),l.setXYZ(10,e.r,e.g,e.b),l.setXYZ(11,e.r,e.g,e.b),l.setXYZ(12,e.r,e.g,e.b),l.setXYZ(13,e.r,e.g,e.b),l.setXYZ(14,e.r,e.g,e.b),l.setXYZ(15,e.r,e.g,e.b),l.setXYZ(16,e.r,e.g,e.b),l.setXYZ(17,e.r,e.g,e.b),l.setXYZ(18,e.r,e.g,e.b),l.setXYZ(19,e.r,e.g,e.b),l.setXYZ(20,e.r,e.g,e.b),l.setXYZ(21,e.r,e.g,e.b),l.setXYZ(22,e.r,e.g,e.b),l.setXYZ(23,e.r,e.g,e.b),l.setXYZ(24,t.r,t.g,t.b),l.setXYZ(25,t.r,t.g,t.b),l.setXYZ(26,t.r,t.g,t.b),l.setXYZ(27,t.r,t.g,t.b),l.setXYZ(28,t.r,t.g,t.b),l.setXYZ(29,t.r,t.g,t.b),l.setXYZ(30,t.r,t.g,t.b),l.setXYZ(31,t.r,t.g,t.b),l.setXYZ(32,r.r,r.g,r.b),l.setXYZ(33,r.r,r.g,r.b),l.setXYZ(34,r.r,r.g,r.b),l.setXYZ(35,r.r,r.g,r.b),l.setXYZ(36,r.r,r.g,r.b),l.setXYZ(37,r.r,r.g,r.b),l.setXYZ(38,i.r,i.g,i.b),l.setXYZ(39,i.r,i.g,i.b),l.setXYZ(40,s.r,s.g,s.b),l.setXYZ(41,s.r,s.g,s.b),l.setXYZ(42,s.r,s.g,s.b),l.setXYZ(43,s.r,s.g,s.b),l.setXYZ(44,s.r,s.g,s.b),l.setXYZ(45,s.r,s.g,s.b),l.setXYZ(46,s.r,s.g,s.b),l.setXYZ(47,s.r,s.g,s.b),l.setXYZ(48,s.r,s.g,s.b),l.setXYZ(49,s.r,s.g,s.b),l.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap;or.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),dr("c",t,e,or,0,0,-1),dr("t",t,e,or,0,0,1),dr("n1",t,e,or,-1,-1,-1),dr("n2",t,e,or,1,-1,-1),dr("n3",t,e,or,-1,1,-1),dr("n4",t,e,or,1,1,-1),dr("f1",t,e,or,-1,-1,1),dr("f2",t,e,or,1,-1,1),dr("f3",t,e,or,-1,1,1),dr("f4",t,e,or,1,1,1),dr("u1",t,e,or,.7,1.1,-1),dr("u2",t,e,or,-.7,1.1,-1),dr("u3",t,e,or,0,2,-1),dr("cf1",t,e,or,-1,0,1),dr("cf2",t,e,or,1,0,1),dr("cf3",t,e,or,0,-1,1),dr("cf4",t,e,or,0,1,1),dr("cn1",t,e,or,-1,0,-1),dr("cn2",t,e,or,1,0,-1),dr("cn3",t,e,or,0,-1,-1),dr("cn4",t,e,or,0,1,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function dr(n,e,t,r,i,s,a){pg.set(i,s,a).unproject(r);const l=e[n];if(void 0!==l){const c=t.getAttribute("position");for(let h=0,g=l.length;h<g;h++)c.setXYZ(l[h],pg.x,pg.y,pg.z)}}class JH extends Id{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=new mn;i.setAttribute("position",new St(t,3)),i.setAttribute("color",new St([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(i,new Vi({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,r){const i=new bt,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function iG(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let c=0;c<256;++c){const h=c-127;h<-27?(r[c]=0,r[256|c]=32768,i[c]=24,i[256|c]=24):h<-14?(r[c]=1024>>-h-14,r[256|c]=1024>>-h-14|32768,i[c]=-h-1,i[256|c]=-h-1):h<=15?(r[c]=h+15<<10,r[256|c]=h+15<<10|32768,i[c]=13,i[256|c]=13):h<128?(r[c]=31744,r[256|c]=64512,i[c]=24,i[256|c]=24):(r[c]=31744,r[256|c]=64512,i[c]=13,i[256|c]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),l=new Uint32Array(64);for(let c=1;c<1024;++c){let h=c<<13,g=0;for(;0==(8388608&h);)h<<=1,g-=8388608;h&=-8388609,g+=947912704,s[c]=h|g}for(let c=1024;c<2048;++c)s[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)a[c]=c<<23;a[31]=1199570944,a[32]=2147483648;for(let c=33;c<63;++c)a[c]=2147483648+(c-32<<23);a[63]=3347054592;for(let c=1;c<64;++c)32!==c&&(l[c]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:a,offsetTable:l}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"142"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="142");const f2={type:"change"},Ib={type:"start"},p2={type:"end"};class aG extends Va{constructor(e,t){super(),void 0===t&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new Q,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},this.touches={ONE:0,TWO:2},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return l.phi},this.getAzimuthalAngle=function(){return l.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(ee){ee.addEventListener("keydown",In),this._domElementKeyEvents=ee},this.saveState=function(){r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=function(){r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(f2),r.update(),s=i.NONE},this.update=function(){const ee=new Q,$e=(new di).setFromUnitVectors(e.up,new Q(0,1,0)),et=$e.clone().invert(),tt=new Q,le=new di,nt=2*Math.PI;return function(){const Vt=r.object.position;ee.copy(Vt).sub(r.target),ee.applyQuaternion($e),l.setFromVector3(ee),r.autoRotate&&s===i.NONE&&re(function ae(){return 2*Math.PI/60/60*r.autoRotateSpeed}()),r.enableDamping?(l.theta+=c.theta*r.dampingFactor,l.phi+=c.phi*r.dampingFactor):(l.theta+=c.theta,l.phi+=c.phi);let ft=r.minAzimuthAngle,Pt=r.maxAzimuthAngle;return isFinite(ft)&&isFinite(Pt)&&(ft<-Math.PI?ft+=nt:ft>Math.PI&&(ft-=nt),Pt<-Math.PI?Pt+=nt:Pt>Math.PI&&(Pt-=nt),l.theta=ft<=Pt?Math.max(ft,Math.min(Pt,l.theta)):l.theta>(ft+Pt)/2?Math.max(ft,l.theta):Math.min(Pt,l.theta)),l.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,l.phi)),l.makeSafe(),l.radius*=h,l.radius=Math.max(r.minDistance,Math.min(r.maxDistance,l.radius)),!0===r.enableDamping?r.target.addScaledVector(g,r.dampingFactor):r.target.add(g),ee.setFromSpherical(l),ee.applyQuaternion(et),Vt.copy(r.target).add(ee),r.object.lookAt(r.target),!0===r.enableDamping?(c.theta*=1-r.dampingFactor,c.phi*=1-r.dampingFactor,g.multiplyScalar(1-r.dampingFactor)):(c.set(0,0,0),g.set(0,0,0)),h=1,!!(m||tt.distanceToSquared(r.object.position)>a||8*(1-le.dot(r.object.quaternion))>a)&&(r.dispatchEvent(f2),tt.copy(r.object.position),le.copy(r.object.quaternion),m=!1,!0)}}(),this.dispose=function(){r.domElement.removeEventListener("contextmenu",Me),r.domElement.removeEventListener("pointerdown",Je),r.domElement.removeEventListener("pointercancel",Yt),r.domElement.removeEventListener("wheel",Vn),r.domElement.removeEventListener("pointermove",wt),r.domElement.removeEventListener("pointerup",ut),null!==r._domElementKeyEvents&&r._domElementKeyEvents.removeEventListener("keydown",In)};const r=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=i.NONE;const a=1e-6,l=new t2,c=new t2;let h=1;const g=new Q;let m=!1;const _=new Le,T=new Le,A=new Le,C=new Le,O=new Le,B=new Le,V=new Le,z=new Le,G=new Le,X=[],J={};function Y(){return Math.pow(.95,r.zoomSpeed)}function re(ee){c.theta-=ee}function fe(ee){c.phi-=ee}const ge=function(){const ee=new Q;return function(et,tt){ee.setFromMatrixColumn(tt,0),ee.multiplyScalar(-et),g.add(ee)}}(),Ne=function(){const ee=new Q;return function(et,tt){!0===r.screenSpacePanning?ee.setFromMatrixColumn(tt,1):(ee.setFromMatrixColumn(tt,0),ee.crossVectors(r.object.up,ee)),ee.multiplyScalar(et),g.add(ee)}}(),je=function(){const ee=new Q;return function(et,tt){const le=r.domElement;if(r.object.isPerspectiveCamera){ee.copy(r.object.position).sub(r.target);let Qe=ee.length();Qe*=Math.tan(r.object.fov/2*Math.PI/180),ge(2*et*Qe/le.clientHeight,r.object.matrix),Ne(2*tt*Qe/le.clientHeight,r.object.matrix)}else r.object.isOrthographicCamera?(ge(et*(r.object.right-r.object.left)/r.object.zoom/le.clientWidth,r.object.matrix),Ne(tt*(r.object.top-r.object.bottom)/r.object.zoom/le.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}}();function me(ee){r.object.isPerspectiveCamera?h/=ee:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom*ee)),r.object.updateProjectionMatrix(),m=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function Ie(ee){r.object.isPerspectiveCamera?h*=ee:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/ee)),r.object.updateProjectionMatrix(),m=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function be(ee){_.set(ee.clientX,ee.clientY)}function Ve(ee){C.set(ee.clientX,ee.clientY)}function xt(){1===X.length?_.set(X[0].pageX,X[0].pageY):_.set(.5*(X[0].pageX+X[1].pageX),.5*(X[0].pageY+X[1].pageY))}function Mt(){1===X.length?C.set(X[0].pageX,X[0].pageY):C.set(.5*(X[0].pageX+X[1].pageX),.5*(X[0].pageY+X[1].pageY))}function Oe(){const ee=X[0].pageX-X[1].pageX,$e=X[0].pageY-X[1].pageY,et=Math.sqrt(ee*ee+$e*$e);V.set(0,et)}function jt(ee){if(1==X.length)T.set(ee.pageX,ee.pageY);else{const et=$t(ee);T.set(.5*(ee.pageX+et.x),.5*(ee.pageY+et.y))}A.subVectors(T,_).multiplyScalar(r.rotateSpeed);const $e=r.domElement;re(2*Math.PI*A.x/$e.clientHeight),fe(2*Math.PI*A.y/$e.clientHeight),_.copy(T)}function ot(ee){if(1===X.length)O.set(ee.pageX,ee.pageY);else{const $e=$t(ee);O.set(.5*(ee.pageX+$e.x),.5*(ee.pageY+$e.y))}B.subVectors(O,C).multiplyScalar(r.panSpeed),je(B.x,B.y),C.copy(O)}function on(ee){const $e=$t(ee),et=ee.pageX-$e.x,tt=ee.pageY-$e.y,le=Math.sqrt(et*et+tt*tt);z.set(0,le),G.set(0,Math.pow(z.y/V.y,r.zoomSpeed)),me(G.y),V.copy(z)}function Je(ee){!1!==r.enabled&&(0===X.length&&(r.domElement.setPointerCapture(ee.pointerId),r.domElement.addEventListener("pointermove",wt),r.domElement.addEventListener("pointerup",ut)),function Ye(ee){X.push(ee)}(ee),"touch"===ee.pointerType?function ie(ee){switch(ct(ee),X.length){case 1:switch(r.touches.ONE){case 0:if(!1===r.enableRotate)return;xt(),s=i.TOUCH_ROTATE;break;case 1:if(!1===r.enablePan)return;Mt(),s=i.TOUCH_PAN;break;default:s=i.NONE}break;case 2:switch(r.touches.TWO){case 2:if(!1===r.enableZoom&&!1===r.enablePan)return;(function Cn(){r.enableZoom&&Oe(),r.enablePan&&Mt()})(),s=i.TOUCH_DOLLY_PAN;break;case 3:if(!1===r.enableZoom&&!1===r.enableRotate)return;(function Qt(){r.enableZoom&&Oe(),r.enableRotate&&xt()})(),s=i.TOUCH_DOLLY_ROTATE;break;default:s=i.NONE}break;default:s=i.NONE}s!==i.NONE&&r.dispatchEvent(Ib)}(ee):function Ut(ee){let $e;switch(ee.button){case 0:$e=r.mouseButtons.LEFT;break;case 1:$e=r.mouseButtons.MIDDLE;break;case 2:$e=r.mouseButtons.RIGHT;break;default:$e=-1}switch($e){case 1:if(!1===r.enableZoom)return;(function ke(ee){V.set(ee.clientX,ee.clientY)})(ee),s=i.DOLLY;break;case 0:if(ee.ctrlKey||ee.metaKey||ee.shiftKey){if(!1===r.enablePan)return;Ve(ee),s=i.PAN}else{if(!1===r.enableRotate)return;be(ee),s=i.ROTATE}break;case 2:if(ee.ctrlKey||ee.metaKey||ee.shiftKey){if(!1===r.enableRotate)return;be(ee),s=i.ROTATE}else{if(!1===r.enablePan)return;Ve(ee),s=i.PAN}break;default:s=i.NONE}s!==i.NONE&&r.dispatchEvent(Ib)}(ee))}function wt(ee){!1!==r.enabled&&("touch"===ee.pointerType?function K(ee){switch(ct(ee),s){case i.TOUCH_ROTATE:if(!1===r.enableRotate)return;jt(ee),r.update();break;case i.TOUCH_PAN:if(!1===r.enablePan)return;ot(ee),r.update();break;case i.TOUCH_DOLLY_PAN:if(!1===r.enableZoom&&!1===r.enablePan)return;(function Be(ee){r.enableZoom&&on(ee),r.enablePan&&ot(ee)})(ee),r.update();break;case i.TOUCH_DOLLY_ROTATE:if(!1===r.enableZoom&&!1===r.enableRotate)return;(function Fe(ee){r.enableZoom&&on(ee),r.enableRotate&&jt(ee)})(ee),r.update();break;default:s=i.NONE}}(ee):function Lt(ee){if(!1!==r.enabled)switch(s){case i.ROTATE:if(!1===r.enableRotate)return;!function Te(ee){T.set(ee.clientX,ee.clientY),A.subVectors(T,_).multiplyScalar(r.rotateSpeed);const $e=r.domElement;re(2*Math.PI*A.x/$e.clientHeight),fe(2*Math.PI*A.y/$e.clientHeight),_.copy(T),r.update()}(ee);break;case i.DOLLY:if(!1===r.enableZoom)return;!function Pe(ee){z.set(ee.clientX,ee.clientY),G.subVectors(z,V),G.y>0?me(Y()):G.y<0&&Ie(Y()),V.copy(z),r.update()}(ee);break;case i.PAN:if(!1===r.enablePan)return;!function qe(ee){O.set(ee.clientX,ee.clientY),B.subVectors(O,C).multiplyScalar(r.panSpeed),je(B.x,B.y),C.copy(O),r.update()}(ee)}}(ee))}function ut(ee){Ze(ee),0===X.length&&(r.domElement.releasePointerCapture(ee.pointerId),r.domElement.removeEventListener("pointermove",wt),r.domElement.removeEventListener("pointerup",ut)),r.dispatchEvent(p2),s=i.NONE}function Yt(ee){Ze(ee)}function Vn(ee){!1===r.enabled||!1===r.enableZoom||s!==i.NONE||(ee.preventDefault(),r.dispatchEvent(Ib),function Ge(ee){ee.deltaY<0?Ie(Y()):ee.deltaY>0&&me(Y()),r.update()}(ee),r.dispatchEvent(p2))}function In(ee){!1===r.enabled||!1===r.enablePan||function st(ee){let $e=!1;switch(ee.code){case r.keys.UP:je(0,r.keyPanSpeed),$e=!0;break;case r.keys.BOTTOM:je(0,-r.keyPanSpeed),$e=!0;break;case r.keys.LEFT:je(r.keyPanSpeed,0),$e=!0;break;case r.keys.RIGHT:je(-r.keyPanSpeed,0),$e=!0}$e&&(ee.preventDefault(),r.update())}(ee)}function Me(ee){!1!==r.enabled&&ee.preventDefault()}function Ze(ee){delete J[ee.pointerId];for(let $e=0;$e<X.length;$e++)if(X[$e].pointerId==ee.pointerId)return void X.splice($e,1)}function ct(ee){let $e=J[ee.pointerId];void 0===$e&&($e=new Le,J[ee.pointerId]=$e),$e.set(ee.pageX,ee.pageY)}function $t(ee){return J[(ee.pointerId===X[0].pointerId?X[1]:X[0]).pointerId]}r.domElement.addEventListener("contextmenu",Me),r.domElement.addEventListener("pointerdown",Je),r.domElement.addEventListener("pointercancel",Yt),r.domElement.addEventListener("wheel",Vn,{passive:!1}),this.update()}}class lG extends aG{constructor(e,t){super(e,t),this.screenSpacePanning=!1,this.mouseButtons.LEFT=2,this.mouseButtons.RIGHT=0,this.touches.ONE=1,this.touches.TWO=3}}class g2{constructor(){this.init()}init(){this.createRenderer(),this.createCamera(),this.createControls(),this.createScene(),this.createLight(),this.timestamp=0}createRenderer(){this.renderer=new ZD({alpha:!0,antialias:!0}),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=2,this.renderer.setPixelRatio(window.devicePixelRatio)}createCamera(){this.camera=new kr(55,1,.01,2e6),this.camera.position.set(0,100,100),this.camera.lookAt(new Q(0,0,0))}createControls(){this.controls=new lG(this.camera,this.renderer.domElement),this.controls.target.set(0,0,0),this.controls.minDistance=20,this.controls.maxDistance=1e4,this.controls.minPolarAngle=0,this.controls.maxPolarAngle=.48*Math.PI}createLight(){let e=new kA(11184810,0,.9),t=new HA(14452852,.5),r=new $A(16777215,.9);r.position.set(150,350,350),r.castShadow=!0,r.shadow.camera.left=-400,r.shadow.camera.right=400,r.shadow.camera.top=400,r.shadow.camera.bottom=-400,r.shadow.camera.near=1,r.shadow.camera.far=1e3,r.shadow.mapSize.width=4096,r.shadow.mapSize.height=4096;let i=new KH(r.shadow.camera);this.scene.add(i),this.scene.add(e),this.scene.add(r),this.scene.add(t)}createScene(){let e,t;this.scene=new KD,this.scene.add(new ZH(100,5)),this.scene.add(new JH(100)),e=new Jo(10,10,10),t=new RA({color:4210752,wireframe:!1}),this.ms_Cube=new Mi(e,t),this.ms_Cube.position.set(0,20,0),this.ms_Cube.rotation.set(0,0,0),this.ms_Cube.castShadow=!0,this.scene.add(this.ms_Cube)}createSea(){}update(e){this.controls.update(),this.ms_Cube.rotation.x+=.01,this.ms_Cube.rotation.y+=.02}render(){this.renderer.render(this.scene,this.camera)}SetContainer(e){this.Resize(e.offsetWidth,e.offsetHeight),e.appendChild(this.renderer.domElement)}Resize(e,t){this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.renderer.setSize(e,t)}MainLoop(e){this.timestamp||(this.timestamp=e);let t=e-this.timestamp;this.timestamp=e,this.update(t),this.render(),window.requestAnimationFrame(r=>this.MainLoop(r))}addStars(e){}}const uG=["canvas"];let cG=(()=>{class n{constructor(t){this.renderer=t,!1===bE.isWebGL2Available()&&document.body.appendChild(bE.getWebGL2ErrorMessage())}get canvas(){return this.canvasRef.nativeElement}ngAfterViewInit(){this.renderer.SetContainer(this.canvas),this.renderer.MainLoop(0)}onResize(t){let r=document.getElementById("cv_container").offsetWidth,i=document.getElementById("cv_container").offsetHeight;this.renderer.Resize(r,i),console.log("onResize >> %s x %s",r,i)}addStars(t){this.renderer.addStars(t)}}return n.\u0275fac=function(t){return new(t||n)(Dt(g2))},n.\u0275cmp=Ai({type:n,selectors:[["ng-component"]],viewQuery:function(t,r){if(1&t&&Qh(uG,5),2&t){let i;Kl(i=Jl())&&(r.canvasRef=i.first)}},decls:17,vars:0,consts:[["id","cv_container",3,"resize"],["canvas",""],["id","cv_modifier"],["routerLink","/","routerLinkActive","active"],["type","number","min","1","max","25"],[3,"click"]],template:function(t,r){1&t&&(Ke(0,"div",0,1),xi("resize",function(s){return r.onResize(s)},0,Z_),it(),Ke(2,"div",2)(3,"a",3)(4,"h4"),It(5,"Vision Example"),it()(),Ke(6,"label"),It(7," Scale: "),pn(8,"input",4),it(),Ke(9,"div"),It(10," Stars: "),Ke(11,"button",5),xi("click",function(){return r.addStars(100)}),It(12,"+100"),it(),Ke(13,"button",5),xi("click",function(){return r.addStars(1e3)}),It(14,"+1000"),it(),Ke(15,"button",5),xi("click",function(){return r.addStars(1e4)}),It(16,"+10000"),it()()())},dependencies:[ou,lE],styles:["#cv_container[_ngcontent-%COMP%]{background:linear-gradient(#e4e0ba,#f7d9aa);display:block;overflow:hidden;width:100vw;height:100vh}#cv_modifier[_ngcontent-%COMP%]{position:absolute;top:20px;left:20px;font-size:11px;width:200px;height:100px}"]}),n})();const dG=["canvas"];let hG=(()=>{class n{constructor(){this.init()}ngOnInit(){}init(){return(0,Xf.Z)(function*(){})()}get canvas(){return this.canvasRef.nativeElement}onSubmit(){var t="https://39.117.105.224:7777/api/v1/file",r=new FormData;r.append("attached",$("#input_file")[0].files[0]),$.ajax({type:"POST",url:t,processData:!1,contentType:!1,data:r,success:function(i){var s=JSON.parse(i);$.ajax({type:"GET",url:t+"/"+s.message,processData:!1,contentType:!1,data:r,success:function(a){$("#generated_image").attr("src","data:image/png;base64, "+a)},error:function(a,l,c){alert("unknown exception!\n"+c)}})},error:function(i,s,a){alert("unknown exception!\n"+a)}})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Ai({type:n,selectors:[["ng-component"]],viewQuery:function(t,r){if(1&t&&Qh(dG,5),2&t){let i;Kl(i=Jl())&&(r.canvasRef=i.first)}},decls:21,vars:0,consts:[[1,"ui","main","text"],[2,"height","3em"],[1,"ui","stackable","three","column","padded","grid"],[1,"three","wide","column","olive"],[1,"ten","wide","column","black"],[1,"ui","centered","grid"],[1,"row"],["type","file","id","input_file","name","input_file"],["type","button","value","submit",3,"click"],[2,"margin-top","20px","width","500px","height","400px"],["id","generated_image",2,"width","100%","height","100%"]],template:function(t,r){1&t&&(pn(0,"appHeader"),Ke(1,"div",0)(2,"div",1),It(3,"\xa0"),it(),Ke(4,"div",2)(5,"div",3),pn(6,"appSideMenu"),it(),Ke(7,"div",4)(8,"div",5)(9,"div",6),It(10," onSubmit \ud568\uc218 \ub0b4 URL \ubcc0\uacbd! "),it(),Ke(11,"div",6)(12,"form"),pn(13,"input",7),Ke(14,"input",8),xi("click",function(){return r.onSubmit()}),it()()(),Ke(15,"div",6)(16,"div",9),pn(17,"img",10),it()()()(),Ke(18,"div",3),pn(19,"appBanner"),it()()(),pn(20,"appFooter"))},dependencies:[jf,Wf,qf,Yf]}),n})(),fG=(()=>{class n{constructor(t){this.sanitizer=t,this.files=new Gr,this.background="#eee"}onDragOver(t){t.preventDefault(),t.stopPropagation(),this.background="#999"}onDragLeave(t){t.preventDefault(),t.stopPropagation(),this.background="#eee"}onDrop(t){t.preventDefault(),t.stopPropagation(),this.background="#eee";let r=[];for(let i=0;i<t.dataTransfer.files.length;i++){const s=t.dataTransfer.files[i],a=this.sanitizer.bypassSecurityTrustUrl(window.URL.createObjectURL(s));r.push({file:s,url:a})}r.length>0&&this.files.emit(r)}}return n.\u0275fac=function(t){return new(t||n)(Dt(oM))},n.\u0275dir=Nr({type:n,selectors:[["","appImageDrag",""]],hostVars:2,hostBindings:function(t,r){1&t&&xi("dragover",function(s){return r.onDragOver(s)})("dragleave",function(s){return r.onDragLeave(s)})("drop",function(s){return r.onDrop(s)}),2&t&&Sy("background",r.background)},outputs:{files:"files"}}),n})();function pG(n,e){if(1&n&&(Ke(0,"div",6)(1,"div",10),pn(2,"img",11),it()()),2&n){const t=e.$implicit;Pm(2),zh("src",t.url,Eh)}}const gG=[{path:"main",component:VU},{path:"onnx",component:$U},{path:"renderer",component:cG},{path:"portrait",component:hG},{path:"template",component:(()=>{class n{constructor(){this.uploadedFiles=[]}ngOnInit(){}filesDropped(t){this.uploadedFiles=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Ai({type:n,selectors:[["ng-component"]],decls:17,vars:1,consts:[[1,"ui","main","text"],[2,"height","3em"],[1,"ui","stackable","three","column","padded","grid"],[1,"three","wide","column","olive"],[1,"ten","wide","column","black"],[1,"ui","centered","grid"],[1,"row"],["appImageDrag","",2,"width","500px","height","250px","text-align","center",3,"files"],[2,"font-size","25px"],["class","row",4,"ngFor","ngForOf"],[2,"margin-top","20px","width","500px","height","400px"],[2,"width","100%","height","100%",3,"src"]],template:function(t,r){1&t&&(pn(0,"appHeader"),Ke(1,"div",0)(2,"div",1),It(3,"\xa0"),it(),Ke(4,"div",2)(5,"div",3),pn(6,"appSideMenu"),it(),Ke(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7),xi("files",function(s){return r.filesDropped(s)}),Ke(11,"span",8),It(12,"Drop your files here"),it()()(),function Iw(n,e,t,r,i,s,a,l){const c=ze(),h=_n(),g=n+22,m=h.firstCreatePass?function KO(n,e,t,r,i,s,a,l,c){const h=e.consts,g=Nl(e,n,4,a||null,Ao(h,l));cy(e,t,g,Ao(h,c)),lh(e,g);const m=g.tViews=uy(2,g,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,h);return null!==e.queries&&(e.queries.template(e,g),m.queries=e.queries.embeddedTView(g)),g}(g,h,c,e,t,r,i,s,a):h.data[g];As(m,!1);const _=c[11].createComment("");Ah(h,c,_,m),$r(_,c),kh(c,c[g]=dw(_,c,_,m)),sh(m)&&ay(h,c,m),null!=a&&ly(c,m,l)}(13,pG,3,1,"div",9),it()(),Ke(14,"div",3),pn(15,"appBanner"),it()()(),pn(16,"appFooter")),2&t&&(Pm(13),zh("ngForOf",r.uploadedFiles))},dependencies:[NT,fG,jf,Wf,qf,Yf]}),n})()},{path:"**",redirectTo:"main",pathMatch:"full"}];let mG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ua({type:n}),n.\u0275inj=Rn({imports:[gE.forRoot(gG),gE]}),n})(),yG=(()=>{class n{constructor(){this.title="myApp"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Ai({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&pn(0,"router-outlet")},dependencies:[Q0]}),n})(),vG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ua({type:n,bootstrap:[yG]}),n.\u0275inj=Rn({providers:[{provide:h0,useValue:"/"},g2],imports:[e4,mG]}),n})();(function LN(){uT=!1})(),Qk().bootstrapModule(vG).catch(n=>console.error(n))},667:(ye,M,k)=>{"use strict";k.r(M),k.d(M,{InferenceSession:()=>R,Tensor:()=>x,env:()=>b,registerBackend:()=>v});var I=k(861);const D={},P=[],v=(N,L,F)=>{if(!L||"function"!=typeof L.init||"function"!=typeof L.createSessionHandler)throw new TypeError("not a valid backend");{const H=D[N];if(void 0!==H){if(H.backend===L)return;throw new Error(`backend "${N}" is already registered`)}if(D[N]={backend:L,priority:F},F>=0){for(let q=0;q<P.length;q++)if(D[P[q]].priority<=F)return void P.splice(q,0,N);P.push(N)}}},w=function(){var N=(0,I.Z)(function*(L){const F=0===L.length?P:L,H=[];for(const q of F){const W=D[q];if(W){if(W.initialized)return W.backend;if(W.aborted)continue;const U=!!W.initPromise;try{return U||(W.initPromise=W.backend.init()),yield W.initPromise,W.initialized=!0,W.backend}catch(ne){U||H.push({name:q,err:ne}),W.aborted=!0}finally{delete W.initPromise}}}throw new Error(`no available backend found. ERR: ${H.map(q=>`[${q.name}] ${q.err}`).join(", ")}`)});return function(F){return N.apply(this,arguments)}}(),b=new class S{constructor(){this.wasm={},this.webgl={},this.logLevelInternal="warning"}set logLevel(L){if(void 0!==L){if("string"!=typeof L||-1===["verbose","info","warning","error","fatal"].indexOf(L))throw new Error(`Unsupported logging level: ${L}`);this.logLevelInternal=L}}get logLevel(){return this.logLevelInternal}},p="undefined"!=typeof BigInt64Array&&"function"==typeof BigInt64Array.from,u="undefined"!=typeof BigUint64Array&&"function"==typeof BigUint64Array.from,o=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),d=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]);p&&(o.set("int64",BigInt64Array),d.set(BigInt64Array,"int64")),u&&(o.set("uint64",BigUint64Array),d.set(BigUint64Array,"uint64"));class y{constructor(L,F,H){let q,W,U;if("string"==typeof L)if(q=L,U=H,"string"===L){if(!Array.isArray(F))throw new TypeError("A string tensor's data must be a string array.");W=F}else{const de=o.get(L);if(void 0===de)throw new TypeError(`Unsupported tensor type: ${L}.`);if(Array.isArray(F))W=de.from(F);else{if(!(F instanceof de))throw new TypeError(`A ${q} tensor's data must be type of ${de}`);W=F}}else if(U=F,Array.isArray(L)){if(0===L.length)throw new TypeError("Tensor type cannot be inferred from an empty array.");const de=typeof L[0];if("string"===de)q="string",W=L;else{if("boolean"!==de)throw new TypeError(`Invalid element type of data array: ${de}.`);q="bool",W=Uint8Array.from(L)}}else{const de=d.get(L.constructor);if(void 0===de)throw new TypeError(`Unsupported type for tensor data: ${L.constructor}.`);q=de,W=L}if(void 0===U)U=[W.length];else if(!Array.isArray(U))throw new TypeError("A tensor's dims must be a number array");const ne=(N=>{let L=1;for(let F=0;F<N.length;F++){const H=N[F];if("number"!=typeof H||!Number.isSafeInteger(H))throw new TypeError(`dims[${F}] must be an integer, got: ${H}`);if(H<0)throw new RangeError(`dims[${F}] must be a non-negative integer, got: ${H}`);L*=H}return L})(U);if(ne!==W.length)throw new Error(`Tensor's size(${ne}) does not match data length(${W.length}).`);this.dims=U,this.type=q,this.data=W,this.size=ne}reshape(L){return new y(this.type,this.data,L)}}const x=y;class E{constructor(L){this.handler=L}run(L,F,H){var q=this;return(0,I.Z)(function*(){const W={};let U={};if("object"!=typeof L||null===L||L instanceof x||Array.isArray(L))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let ne=!0;if("object"==typeof F){if(null===F)throw new TypeError("Unexpected argument[1]: cannot be null.");if(F instanceof x)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(F)){if(0===F.length)throw new TypeError("'fetches' cannot be an empty array.");ne=!1;for(const ue of F){if("string"!=typeof ue)throw new TypeError("'fetches' must be a string array or an object.");if(-1===q.outputNames.indexOf(ue))throw new RangeError(`'fetches' contains invalid output name: ${ue}.`);W[ue]=null}if("object"==typeof H&&null!==H)U=H;else if(void 0!==H)throw new TypeError("'options' must be an object.")}else{let ue=!1;const Ae=Object.getOwnPropertyNames(F);for(const Se of q.outputNames)if(-1!==Ae.indexOf(Se)){const he=F[Se];(null===he||he instanceof x)&&(ue=!0,ne=!1,W[Se]=he)}if(ue){if("object"==typeof H&&null!==H)U=H;else if(void 0!==H)throw new TypeError("'options' must be an object.")}else U=F}}else if(void 0!==F)throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(const ue of q.inputNames)if(void 0===L[ue])throw new Error(`input '${ue}' is missing in 'feeds'.`);if(ne)for(const ue of q.outputNames)W[ue]=null;const de=yield q.handler.run(L,W,U),De={};for(const ue in de)Object.hasOwnProperty.call(de,ue)&&(De[ue]=new x(de[ue].type,de[ue].data,de[ue].dims));return De})()}static create(L,F,H,q){return(0,I.Z)(function*(){let W,U={};if("string"==typeof L){if(W=L,"object"==typeof F&&null!==F)U=F;else if(void 0!==F)throw new TypeError("'options' must be an object.")}else if(L instanceof Uint8Array){if(W=L,"object"==typeof F&&null!==F)U=F;else if(void 0!==F)throw new TypeError("'options' must be an object.")}else{if(!(L instanceof ArrayBuffer||"undefined"!=typeof SharedArrayBuffer&&L instanceof SharedArrayBuffer))throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");{const Ae=L;let Se=0,he=L.byteLength;if("object"==typeof F&&null!==F)U=F;else if("number"==typeof F){if(Se=F,!Number.isSafeInteger(Se))throw new RangeError("'byteOffset' must be an integer.");if(Se<0||Se>=Ae.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${Ae.byteLength}).`);if(he=L.byteLength-Se,"number"==typeof H){if(he=H,!Number.isSafeInteger(he))throw new RangeError("'byteLength' must be an integer.");if(he<=0||Se+he>Ae.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${Ae.byteLength-Se}].`);if("object"==typeof q&&null!==q)U=q;else if(void 0!==q)throw new TypeError("'options' must be an object.")}else if(void 0!==H)throw new TypeError("'byteLength' must be a number.")}else if(void 0!==F)throw new TypeError("'options' must be an object.");W=new Uint8Array(Ae,Se,he)}}const de=(U.executionProviders||[]).map(Ae=>"string"==typeof Ae?Ae:Ae.name),ue=yield(yield w(de)).createSessionHandler(W,U);return new E(ue)})()}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}const R=E},534:(module,__unused_webpack_exports,__webpack_require__)=>{var _asyncToGenerator=__webpack_require__(156).default,M;self,M=function(__WEBPACK_EXTERNAL_MODULE__2174__){return(()=>{var __webpack_modules__={3474:(ye,M,k)=>{var I,D=(I=(I="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(P){function v(){return mt.buffer!=Kt&&_r(mt.buffer),rn}function w(){return mt.buffer!=Kt&&_r(mt.buffer),On}function S(){return mt.buffer!=Kt&&_r(mt.buffer),At}function b(){return mt.buffer!=Kt&&_r(mt.buffer),hn}var p;P=P||{},p||(p=void 0!==P?P:{});var u,o,d=Object.assign;p.ready=new Promise(function(j,Z){u=j,o=Z});var f,y,x,E,R,N,L=d({},p),F="./this.program",H=(j,Z)=>{throw Z},q="object"==typeof window,W="function"==typeof importScripts,U="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,ne=p.ENVIRONMENT_IS_PTHREAD||!1,de="";function De(j){return p.locateFile?p.locateFile(j,de):de+j}if(U){let j;de=W?k(908).dirname(de)+"/":"//",N=()=>{R||(E=k(1384),R=k(908))},f=function(Z,oe){return N(),Z=R.normalize(Z),E.readFileSync(Z,oe?null:"utf8")},x=Z=>((Z=f(Z,!0)).buffer||(Z=new Uint8Array(Z)),Z),y=(Z,oe,ce)=>{N(),Z=R.normalize(Z),E.readFile(Z,function(at,pt){at?ce(at):oe(pt.buffer)})},1<process.argv.length&&(F=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(Z){if(!(Z instanceof hl))throw Z}),process.on("unhandledRejection",function(Z){throw Z}),H=(Z,oe)=>{if(Qr())throw process.exitCode=Z,oe;oe instanceof hl||Xe("exiting due to exception: "+oe),process.exit(Z)},p.inspect=function(){return"[Emscripten Module object]"};try{j=k(9925)}catch(Z){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),Z}k.g.Worker=j.Worker}else(q||W)&&(W?de=self.location.href:"undefined"!=typeof document&&document.currentScript&&(de=document.currentScript.src),I&&(de=I),de=0!==de.indexOf("blob:")?de.substr(0,de.replace(/[?#].*/,"").lastIndexOf("/")+1):"",U||(f=j=>{var Z=new XMLHttpRequest;return Z.open("GET",j,!1),Z.send(null),Z.responseText},W&&(x=j=>{var Z=new XMLHttpRequest;return Z.open("GET",j,!1),Z.responseType="arraybuffer",Z.send(null),new Uint8Array(Z.response)}),y=(j,Z,oe)=>{var ce=new XMLHttpRequest;ce.open("GET",j,!0),ce.responseType="arraybuffer",ce.onload=()=>{200==ce.status||0==ce.status&&ce.response?Z(ce.response):oe()},ce.onerror=oe,ce.send(null)}));U&&"undefined"==typeof performance&&(k.g.performance=k(6953).performance);var ue=console.log.bind(console),Ae=console.warn.bind(console);U&&(N(),ue=j=>E.writeSync(1,j+"\n"),Ae=j=>E.writeSync(2,j+"\n"));var Se,he,_e=p.print||ue,Xe=p.printErr||Ae;d(p,L),L=null,p.thisProgram&&(F=p.thisProgram),p.quit&&(H=p.quit),p.wasmBinary&&(he=p.wasmBinary);var We=p.noExitRuntime||!1;"object"!=typeof WebAssembly&&Hi("no native wasm support detected");var mt,Zt,Dn=!1;function Lr(j){var Z=new TextDecoder(j);this.decode=oe=>(oe.buffer instanceof SharedArrayBuffer&&(oe=new Uint8Array(oe)),Z.decode.call(Z,oe))}var Kt,rn,On,At,hn,Zr="undefined"!=typeof TextDecoder?new Lr("utf8"):void 0;function en(j,Z,oe){var ce=Z+oe;for(oe=Z;j[oe]&&!(oe>=ce);)++oe;if(16<oe-Z&&j.subarray&&Zr)return Zr.decode(j.subarray(Z,oe));for(ce="";Z<oe;){var at=j[Z++];if(128&at){var pt=63&j[Z++];if(192==(224&at))ce+=String.fromCharCode((31&at)<<6|pt);else{var Ct=63&j[Z++];65536>(at=224==(240&at)?(15&at)<<12|pt<<6|Ct:(7&at)<<18|pt<<12|Ct<<6|63&j[Z++])?ce+=String.fromCharCode(at):(at-=65536,ce+=String.fromCharCode(55296|at>>10,56320|1023&at))}}else ce+=String.fromCharCode(at)}return ce}function Yn(j,Z){return j?en(w(),j,Z):""}function Br(j,Z,oe,ce){if(!(0<ce))return 0;var at=oe;ce=oe+ce-1;for(var pt=0;pt<j.length;++pt){var Ct=j.charCodeAt(pt);if(55296<=Ct&&57343>=Ct&&(Ct=65536+((1023&Ct)<<10)|1023&j.charCodeAt(++pt)),127>=Ct){if(oe>=ce)break;Z[oe++]=Ct}else{if(2047>=Ct){if(oe+1>=ce)break;Z[oe++]=192|Ct>>6}else{if(65535>=Ct){if(oe+2>=ce)break;Z[oe++]=224|Ct>>12}else{if(oe+3>=ce)break;Z[oe++]=240|Ct>>18,Z[oe++]=128|Ct>>12&63}Z[oe++]=128|Ct>>6&63}Z[oe++]=128|63&Ct}}return Z[oe]=0,oe-at}function Kr(j,Z,oe){return Br(j,w(),Z,oe)}function An(j){for(var Z=0,oe=0;oe<j.length;++oe){var ce=j.charCodeAt(oe);55296<=ce&&57343>=ce&&(ce=65536+((1023&ce)<<10)|1023&j.charCodeAt(++oe)),127>=ce?++Z:Z=2047>=ce?Z+2:65535>=ce?Z+3:Z+4}return Z}function Jr(j){var Z=An(j)+1,oe=dl(Z);return oe&&Br(j,v(),oe,Z),oe}function _r(j){Kt=j,p.HEAP8=rn=new Int8Array(j),p.HEAP16=new Int16Array(j),p.HEAP32=At=new Int32Array(j),p.HEAPU8=On=new Uint8Array(j),p.HEAPU16=new Uint16Array(j),p.HEAPU32=new Uint32Array(j),p.HEAPF32=new Float32Array(j),p.HEAPF64=hn=new Float64Array(j)}"undefined"!=typeof TextDecoder&&new Lr("utf-16le"),ne&&(Kt=p.buffer);var ns=p.INITIAL_MEMORY||16777216;if(ne)mt=p.wasmMemory,Kt=p.buffer;else if(p.wasmMemory)mt=p.wasmMemory;else if(!((mt=new WebAssembly.Memory({initial:ns/65536,maximum:32768,shared:!0})).buffer instanceof SharedArrayBuffer))throw Xe("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),U&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");mt&&(Kt=mt.buffer),ns=Kt.byteLength,_r(Kt);var Ts,wo=[],zi=[],js=[],Ei=[];function Qr(){return We||!1}function il(){var j=p.preRun.shift();wo.unshift(j)}var Ur,Di=0,ei=null,$i=null;function Hi(j){throw ne?postMessage({cmd:"onAbort",arg:j}):p.onAbort&&p.onAbort(j),Xe(j="Aborted("+j+")"),Dn=!0,j=new WebAssembly.RuntimeError(j+". Build with -s ASSERTIONS=1 for more info."),o(j),j}function Ws(){return Ur.startsWith("data:application/octet-stream;base64,")}function sl(){var j=Ur;try{if(j==Ur&&he)return new Uint8Array(he);if(x)return x(j);throw"both async and sync fetching of the wasm failed"}catch(Z){Hi(Z)}}p.preloadedImages={},p.preloadedAudios={},Ur="ort-wasm-threaded.wasm",Ws()||(Ur=De(Ur));var Ju={};function rs(j){for(;0<j.length;){var Z=j.shift();if("function"==typeof Z)Z(p);else{var oe=Z.Tb;"number"==typeof oe?void 0===Z.Sa?Ys(oe)():Ys(oe)(Z.Sa):oe(void 0===Z.Sa?null:Z.Sa)}}}function ol(j){var Z=Qd();return j=j(),yi(Z),j}function sa(j){var Z=kt.Oa[j];Z&&(S()[j>>2]=0,kt.jb(Z.worker))}var kt={Pa:[],Va:[],fb:[],Wb:function(){},ub:function(){kt.receiveObjectTransfer=kt.zb,kt.threadInit=kt.lb,kt.setExitStatus=kt.Bb},Oa:{},Bb:function(){},kb:function(){for(var j in kt.Oa){var Z=kt.Oa[j];Z&&Z.worker&&kt.jb(Z.worker)}for(j=0;j<kt.Pa.length;++j)kt.Pa[j].terminate();kt.Pa=[]},jb:function(j){kt.Ab(function(){delete kt.Oa[j.Qa.eb],kt.Pa.push(j),kt.Va.splice(kt.Va.indexOf(j),1),Eo(j.Qa.eb),j.Qa=void 0})},Ab:function(j){S()[Tg>>2]=0;try{j()}finally{S()[Tg>>2]=1}},zb:function(){},lb:function(){for(var j in kt.fb)kt.fb[j]()},wb:function(j,Z){j.onmessage=oe=>{var ce=(oe=oe.data).cmd;if(j.Qa&&(kt.pb=j.Qa.eb),oe.targetThread&&oe.targetThread!=Mo()){var at=kt.Oa[oe.bc];at?at.worker.postMessage(oe,oe.transferList):Xe('Internal error! Worker sent a message "'+ce+'" to target pthread '+oe.targetThread+", but that thread no longer exists!")}else"processQueuedMainThreadWork"===ce?zt():"spawnThread"===ce?se(oe):"cleanupThread"===ce?sa(oe.thread):"killThread"===ce?(oe=oe.thread,S()[oe>>2]=0,ce=kt.Oa[oe],delete kt.Oa[oe],ce.worker.terminate(),Eo(oe),kt.Va.splice(kt.Va.indexOf(ce.worker),1),ce.worker.Qa=void 0):"cancelThread"===ce?kt.Oa[oe.thread].worker.postMessage({cmd:"cancel"}):"loaded"===ce?(j.loaded=!0,Z&&Z(j),j.Ua&&(j.Ua(),delete j.Ua)):"print"===ce?_e("Thread "+oe.threadId+": "+oe.text):"printErr"===ce?Xe("Thread "+oe.threadId+": "+oe.text):"alert"===ce?alert("Thread "+oe.threadId+": "+oe.text):"setimmediate"===oe.target?j.postMessage(oe):"onAbort"===ce?p.onAbort&&p.onAbort(oe.arg):Xe("worker sent an unknown command "+ce);kt.pb=void 0},j.onerror=oe=>{throw Xe("worker sent an error! "+oe.filename+":"+oe.lineno+": "+oe.message),oe},U&&(j.on("message",function(oe){j.onmessage({data:oe})}),j.on("error",function(oe){j.onerror(oe)}),j.on("detachedExit",function(){})),j.postMessage({cmd:"load",urlOrBlob:p.mainScriptUrlOrBlob||I,wasmMemory:mt,wasmModule:Zt})},mb:function(){var j=De("ort-wasm-threaded.worker.js");kt.Pa.push(new Worker(j))},rb:function(){return 0==kt.Pa.length&&(kt.mb(),kt.wb(kt.Pa[0])),kt.Pa.pop()}};function al(j){if(ne)return zn(1,0,j);try{Mg(j)}catch(Z){Z instanceof hl||"unwind"==Z||H(1,Z)}}p.establishStackSpace=function(){var j=Mo(),Z=S()[j+44>>2];j=S()[j+48>>2],Jd(Z,Z-j),yi(Z)};var qs,Ms=[];function Ys(j){var Z=Ms[j];return Z||(j>=Ms.length&&(Ms.length=j+1),Ms[j]=Z=Ts.get(j)),Z}function So(j){this.Ta=j-16,this.Gb=function(Z){S()[this.Ta+4>>2]=Z},this.Db=function(Z){S()[this.Ta+8>>2]=Z},this.Eb=function(){S()[this.Ta>>2]=0},this.Cb=function(){v()[this.Ta+12>>0]=0},this.Fb=function(){v()[this.Ta+13>>0]=0},this.sb=function(Z,oe){this.Gb(Z),this.Db(oe),this.Eb(),this.Cb(),this.Fb()}}function se(j){var Z=kt.rb();if(!Z)return 6;kt.Va.push(Z);var oe=kt.Oa[j.cb]={worker:Z,eb:j.cb};Z.Qa=oe;var ce={cmd:"run",start_routine:j.Hb,arg:j.Sa,threadInfoStruct:j.cb};return Z.Ua=()=>{ce.time=performance.now(),Z.postMessage(ce,j.Mb)},Z.loaded&&(Z.Ua(),delete Z.Ua),0}p.invokeEntryPoint=function(j,Z){return Ys(j)(Z)},qs=U?()=>{var j=process.hrtime();return 1e3*j[0]+j[1]/1e6}:ne?()=>performance.now()-p.__performance_now_clock_drift:()=>performance.now();var pe={},Re=[null,[],[]];function He(j,Z){var oe=Re[j];0===Z||10===Z?((1===j?_e:Xe)(en(oe,0)),oe.length=0):oe.push(Z)}var _t={};function vt(j,Z,oe){return ne?zn(2,1,j,Z,oe):0}function Tt(j,Z){if(ne)return zn(3,1,j,Z)}function lr(j,Z,oe,ce){if(ne)return zn(4,1,j,Z,oe,ce)}function Dr(j,Z){if(ne)return zn(5,1,j,Z)}function Ar(j,Z,oe){if(ne)return zn(6,1,j,Z,oe)}function er(j,Z,oe){return ne?zn(7,1,j,Z,oe):0}function Gi(j,Z){if(ne)return zn(8,1,j,Z)}function is(j,Z){return ne?zn(9,1,j,Z):(j=Yn(j),_t.Qb(j,Z))}function Ce(j,Z,oe,ce,at,pt){if(ne)Z=zn(10,1,j,Z,oe,ce,at,pt);else if(pt<<=12,0!=(16&ce)&&j%65536!=0)Z=-28;else if(0!=(32&ce)){var Ct=65536*Math.ceil(Z/65536);(j=Sg(65536,Ct))?w().fill(0,j,j+Ct):j=0,j?(pe[j]={yb:j,vb:Z,nb:!0,fd:at,Zb:oe,flags:ce,offset:pt},Z=j):Z=-48}else Z=-52;return Z}function Ht(j,Z){if(ne)j=zn(11,1,j,Z);else{var oe=pe[j];0!==Z&&oe?(Z===oe.vb&&(pe[j]=null,oe.nb&&yt(oe.yb)),j=0):j=-28}return j}function Wn(j,Z,oe){if(ne)return zn(12,1,j,Z,oe)}function Bn(j,Z,oe){return ne?zn(13,1,j,Z,oe):(j=Yn(j),_t.Rb(j,Z,oe))}function ji(j){if(ne)return zn(14,1,j)}function Wi(j,Z){if(ne)return zn(15,1,j,Z)}function vg(j){if(ne)return zn(16,1,j)}function Hd(j,Z,oe){function ce(Rn){return(Rn=Rn.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Rn[1]:"GMT"}if(ne)return zn(17,1,j,Z,oe);var at=(new Date).getFullYear(),pt=new Date(at,0,1),Ct=new Date(at,6,1);at=pt.getTimezoneOffset();var gt=Ct.getTimezoneOffset(),Ir=Math.max(at,gt);S()[j>>2]=60*Ir,S()[Z>>2]=Number(at!=gt),j=ce(pt),Z=ce(Ct),j=Jr(j),Z=Jr(Z),gt<at?(S()[oe>>2]=j,S()[oe+4>>2]=Z):(S()[oe>>2]=Z,S()[oe+4>>2]=j)}function zn(j,Z){var oe=arguments.length-2,ce=arguments;return ol(function(){for(var at=rc(8*oe),pt=at>>3,Ct=0;Ct<oe;Ct++){var gt=ce[2+Ct];b()[pt+Ct]=gt}return wg(j,oe,at,Z)})}var oa=[],bg=[0,"undefined"!=typeof document?document:0,"undefined"!=typeof window?window:0];function Xs(j){return j=2<j?Yn(j):j,bg[j]||("undefined"!=typeof document?document.querySelector(j):void 0)}function Gd(j,Z,oe){var at,pt,Ct,gt,ce=Xs(j);return ce?(ce.Za&&(S()[ce.Za>>2]=Z,S()[ce.Za+4>>2]=oe),!ce.ib&&ce.Ob?ce.Za?(at=ce=S()[ce.Za+8>>2],pt=j=j?Yn(j):"",Ct=Z,gt=oe,ol(function(){var Ir=rc(12),Rn=0;if(pt){Rn=An(pt)+1;var Kn=dl(Rn);Kr(pt,Kn,Rn),Rn=Kn}S()[Ir>>2]=Rn,S()[Ir+4>>2]=Ct,S()[Ir+8>>2]=gt,Kd(at,657457152,0,Rn,Ir)}),1):-4:(ce.ib&&(ce=ce.ib),j=!1,ce.Ya&&ce.Ya.Xa&&(j=0===(j=ce.Ya.Xa.getParameter(2978))[0]&&0===j[1]&&j[2]===ce.width&&j[3]===ce.height),ce.width=Z,ce.height=oe,j&&ce.Ya.Xa.viewport(0,0,Z,oe),0)):-4}function Qu(j,Z,oe){return ne?zn(18,1,j,Z,oe):Gd(j,Z,oe)}var ll,_g=["default","low-power","high-performance"],ec={};function jd(){if(!ll){var j,Z={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:F||"./this.program"};for(j in ec)void 0===ec[j]?delete Z[j]:Z[j]=ec[j];var oe=[];for(j in Z)oe.push(j+"="+Z[j]);ll=oe}return ll}function Wd(j,Z){if(ne)return zn(19,1,j,Z);var oe=0;return jd().forEach(function(ce,at){var pt=Z+oe;for(at=S()[j+4*at>>2]=pt,pt=0;pt<ce.length;++pt)v()[at++>>0]=ce.charCodeAt(pt);v()[at>>0]=0,oe+=ce.length+1}),0}function tc(j,Z){if(ne)return zn(20,1,j,Z);var oe=jd();S()[j>>2]=oe.length;var ce=0;return oe.forEach(function(at){ce+=at.length+1}),S()[Z>>2]=ce,0}function qd(j){return ne?zn(21,1,j):0}function Yd(j,Z,oe,ce){return ne?zn(22,1,j,Z,oe,ce):(j=_t.Ub(j),Z=_t.Sb(j,Z,oe),S()[ce>>2]=Z,0)}function hr(j,Z,oe,ce,at){if(ne)return zn(23,1,j,Z,oe,ce,at)}function Xd(j,Z,oe,ce){if(ne)return zn(24,1,j,Z,oe,ce);for(var at=0,pt=0;pt<oe;pt++){var Ct=S()[Z>>2],gt=S()[Z+4>>2];Z+=8;for(var Ir=0;Ir<gt;Ir++)He(j,w()[Ct+Ir]);at+=gt}return S()[ce>>2]=at,0}function ul(j){return j%4==0&&(j%100!=0||j%400==0)}function aa(j,Z){for(var oe=0,ce=0;ce<=Z;oe+=j[ce++]);return oe}var Sn=[31,29,31,30,31,30,31,31,30,31,30,31],To=[31,28,31,30,31,30,31,31,30,31,30,31];function Tn(j,Z){for(j=new Date(j.getTime());0<Z;){var oe=j.getMonth(),ce=(ul(j.getFullYear())?Sn:To)[oe];if(!(Z>ce-j.getDate())){j.setDate(j.getDate()+Z);break}Z-=ce-j.getDate()+1,j.setDate(1),11>oe?j.setMonth(oe+1):(j.setMonth(0),j.setFullYear(j.getFullYear()+1))}return j}function cl(j,Z,oe,ce){function at(xe,Ot,xn){for(xe="number"==typeof xe?xe.toString():xe||"";xe.length<Ot;)xe=xn[0]+xe;return xe}function pt(xe,Ot){return at(xe,Ot,"0")}function Ct(xe,Ot){function xn(Zs){return 0>Zs?-1:0<Zs?1:0}var ni;return 0===(ni=xn(xe.getFullYear()-Ot.getFullYear()))&&0===(ni=xn(xe.getMonth()-Ot.getMonth()))&&(ni=xn(xe.getDate()-Ot.getDate())),ni}function gt(xe){switch(xe.getDay()){case 0:return new Date(xe.getFullYear()-1,11,29);case 1:return xe;case 2:return new Date(xe.getFullYear(),0,3);case 3:return new Date(xe.getFullYear(),0,2);case 4:return new Date(xe.getFullYear(),0,1);case 5:return new Date(xe.getFullYear()-1,11,31);case 6:return new Date(xe.getFullYear()-1,11,30)}}function Ir(xe){xe=Tn(new Date(xe.Na+1900,0,1),xe.bb);var Ot=new Date(xe.getFullYear()+1,0,4),xn=gt(new Date(xe.getFullYear(),0,4));return Ot=gt(Ot),0>=Ct(xn,xe)?0>=Ct(Ot,xe)?xe.getFullYear()+1:xe.getFullYear():xe.getFullYear()-1}var Rn=S()[ce+40>>2];for(var Kn in ce={Kb:S()[ce>>2],Jb:S()[ce+4>>2],$a:S()[ce+8>>2],Wa:S()[ce+12>>2],Ra:S()[ce+16>>2],Na:S()[ce+20>>2],ab:S()[ce+24>>2],bb:S()[ce+28>>2],cc:S()[ce+32>>2],Ib:S()[ce+36>>2],Lb:Rn?Yn(Rn):""},oe=Yn(oe),Rn={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})oe=oe.replace(new RegExp(Kn,"g"),Rn[Kn]);var xe,Ot,ti="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),tr="January February March April May June July August September October November December".split(" ");for(Kn in Rn={"%a":function(xe){return ti[xe.ab].substring(0,3)},"%A":function(xe){return ti[xe.ab]},"%b":function(xe){return tr[xe.Ra].substring(0,3)},"%B":function(xe){return tr[xe.Ra]},"%C":function(xe){return pt((xe.Na+1900)/100|0,2)},"%d":function(xe){return pt(xe.Wa,2)},"%e":function(xe){return at(xe.Wa,2," ")},"%g":function(xe){return Ir(xe).toString().substring(2)},"%G":function(xe){return Ir(xe)},"%H":function(xe){return pt(xe.$a,2)},"%I":function(xe){return 0==(xe=xe.$a)?xe=12:12<xe&&(xe-=12),pt(xe,2)},"%j":function(xe){return pt(xe.Wa+aa(ul(xe.Na+1900)?Sn:To,xe.Ra-1),3)},"%m":function(xe){return pt(xe.Ra+1,2)},"%M":function(xe){return pt(xe.Jb,2)},"%n":function(){return"\n"},"%p":function(xe){return 0<=xe.$a&&12>xe.$a?"AM":"PM"},"%S":function(xe){return pt(xe.Kb,2)},"%t":function(){return"\t"},"%u":function(xe){return xe.ab||7},"%U":function(xe){var Ot=new Date(xe.Na+1900,0,1),xn=0===Ot.getDay()?Ot:Tn(Ot,7-Ot.getDay());return 0>Ct(xn,xe=new Date(xe.Na+1900,xe.Ra,xe.Wa))?pt(Math.ceil((31-xn.getDate()+(aa(ul(xe.getFullYear())?Sn:To,xe.getMonth()-1)-31)+xe.getDate())/7),2):0===Ct(xn,Ot)?"01":"00"},"%V":function(xe){var Ot=new Date(xe.Na+1901,0,4),xn=gt(new Date(xe.Na+1900,0,4));Ot=gt(Ot);var ni=Tn(new Date(xe.Na+1900,0,1),xe.bb);return 0>Ct(ni,xn)?"53":0>=Ct(Ot,ni)?"01":pt(Math.ceil((xn.getFullYear()<xe.Na+1900?xe.bb+32-xn.getDate():xe.bb+1-xn.getDate())/7),2)},"%w":function(xe){return xe.ab},"%W":function(xe){var Ot=new Date(xe.Na,0,1),xn=1===Ot.getDay()?Ot:Tn(Ot,0===Ot.getDay()?1:7-Ot.getDay()+1);return 0>Ct(xn,xe=new Date(xe.Na+1900,xe.Ra,xe.Wa))?pt(Math.ceil((31-xn.getDate()+(aa(ul(xe.getFullYear())?Sn:To,xe.getMonth()-1)-31)+xe.getDate())/7),2):0===Ct(xn,Ot)?"01":"00"},"%y":function(xe){return(xe.Na+1900).toString().substring(2)},"%Y":function(xe){return xe.Na+1900},"%z":function(xe){var Ot=0<=(xe=xe.Ib);return xe=Math.abs(xe)/60,(Ot?"+":"-")+String("0000"+(xe/60*100+xe%60)).slice(-4)},"%Z":function(xe){return xe.Lb},"%%":function(){return"%"}})oe.includes(Kn)&&(oe=oe.replace(new RegExp(Kn,"g"),Rn[Kn](ce)));return Br(xe=oe,Ot=Array(An(xe)+1),0,Ot.length),(Kn=Ot).length>Z?0:(function(xe,Ot){v().set(xe,Ot)}(Kn,j),Kn.length-1)}var xg=[null,al,vt,Tt,lr,Dr,Ar,er,Gi,is,Ce,Ht,Wn,Bn,ji,Wi,vg,Hd,Qu,Wd,tc,qd,Yd,hr,Xd],nc={b:function(j){return dl(j+16)+16},c:function(j,Z,oe){throw new So(j).sb(Z,oe),j},M:function(j){bn(j,!W,1,!q),kt.lb()},n:function(j){ne?postMessage({cmd:"cleanupThread",thread:j}):sa(j)},p:function(j,Z,oe,ce){if("undefined"==typeof SharedArrayBuffer)return Xe("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var at=[];return ne&&0===at.length?Zd(687865856,j,Z,oe,ce):(j={Hb:oe,cb:j,Sa:ce,Mb:at},ne?(j.Nb="spawnThread",postMessage(j,at),0):se(j))},i:vt,U:Tt,R:lr,y:Dr,A:Ar,t:er,S:Gi,H:is,G:Ce,F:Ht,o:Wn,z:Bn,w:ji,T:Wi,x:vg,j:function(){Hi("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},_:function(){Hi("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},E:function(){return 2097152},Z:function(j,Z,oe){var ce=performance.now();for(oe=ce+oe,Atomics.exchange(S(),ic>>2,j);;){if((ce=performance.now())>oe)return Atomics.exchange(S(),ic>>2,0),-73;if(0==(ce=Atomics.exchange(S(),ic>>2,0)))break;if(zt(),Atomics.load(S(),j>>2)!=Z)return-6;Atomics.exchange(S(),ic>>2,j)}return 0},N:function(j,Z){if(j==Z)postMessage({cmd:"processQueuedMainThreadWork"});else if(ne)postMessage({targetThread:j,cmd:"processThreadQueue"});else{if(!(j=(j=kt.Oa[j])&&j.worker))return;j.postMessage({cmd:"processThreadQueue"})}return 1},V:function(j,Z){j=new Date(1e3*S()[j>>2]),S()[Z>>2]=j.getUTCSeconds(),S()[Z+4>>2]=j.getUTCMinutes(),S()[Z+8>>2]=j.getUTCHours(),S()[Z+12>>2]=j.getUTCDate(),S()[Z+16>>2]=j.getUTCMonth(),S()[Z+20>>2]=j.getUTCFullYear()-1900,S()[Z+24>>2]=j.getUTCDay(),j=(j.getTime()-Date.UTC(j.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,S()[Z+28>>2]=j},W:function(j,Z){j=new Date(1e3*S()[j>>2]),S()[Z>>2]=j.getSeconds(),S()[Z+4>>2]=j.getMinutes(),S()[Z+8>>2]=j.getHours(),S()[Z+12>>2]=j.getDate(),S()[Z+16>>2]=j.getMonth(),S()[Z+20>>2]=j.getFullYear()-1900,S()[Z+24>>2]=j.getDay();var oe=new Date(j.getFullYear(),0,1),ce=(j.getTime()-oe.getTime())/864e5|0;S()[Z+28>>2]=ce,S()[Z+36>>2]=-60*j.getTimezoneOffset(),ce=new Date(j.getFullYear(),6,1).getTimezoneOffset(),j=0|(ce!=(oe=oe.getTimezoneOffset())&&j.getTimezoneOffset()==Math.min(oe,ce)),S()[Z+32>>2]=j},X:function(j){var Z=new Date(S()[j+20>>2]+1900,S()[j+16>>2],S()[j+12>>2],S()[j+8>>2],S()[j+4>>2],S()[j>>2],0),oe=S()[j+32>>2],ce=Z.getTimezoneOffset(),at=new Date(Z.getFullYear(),0,1),pt=new Date(Z.getFullYear(),6,1).getTimezoneOffset(),Ct=at.getTimezoneOffset(),gt=Math.min(Ct,pt);return 0>oe?S()[j+32>>2]=Number(pt!=Ct&&gt==ce):0<oe!=(gt==ce)&&(pt=Math.max(Ct,pt),Z.setTime(Z.getTime()+6e4*((0<oe?gt:pt)-ce))),S()[j+24>>2]=Z.getDay(),oe=(Z.getTime()-at.getTime())/864e5|0,S()[j+28>>2]=oe,S()[j>>2]=Z.getSeconds(),S()[j+4>>2]=Z.getMinutes(),S()[j+8>>2]=Z.getHours(),S()[j+12>>2]=Z.getDate(),S()[j+16>>2]=Z.getMonth(),Z.getTime()/1e3|0},Y:function j(Z,oe,ce){j.ob||(j.ob=!0,Hd(Z,oe,ce))},d:function(){Hi("")},q:function(j,Z){if(0===j)j=Date.now();else{if(1!==j&&4!==j)return S()[Nt()>>2]=28,-1;j=qs()}return S()[Z>>2]=j/1e3|0,S()[Z+4>>2]=j%1e3*1e6|0,0},B:function(j,Z){return j-Z},m:function(){U||W||(Se||(Se={}),Se["Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread"]||(Se["Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread"]=1,Xe("Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread")))},v:function(){return 2147483648},f:qs,Q:function(j,Z,oe){w().copyWithin(j,Z,Z+oe)},g:function(){return U?k(3993).cpus().length:navigator.hardwareConcurrency},I:function(j,Z,oe){oa.length=Z,oe>>=3;for(var ce=0;ce<Z;ce++)oa[ce]=b()[oe+ce];return(0>j?Ju[-j-1]:xg[j]).apply(null,oa)},u:function(j){var Z=w().length;if((j>>>=0)<=Z||2147483648<j)return!1;for(var oe=1;4>=oe;oe*=2){var ce=Z*(1+.2/oe);ce=Math.min(ce,j+100663296),0<(ce=Math.max(j,ce))%65536&&(ce+=65536-ce%65536);e:{try{mt.grow(Math.min(2147483648,ce)-Kt.byteLength+65535>>>16),_r(mt.buffer);var at=1;break e}catch(pt){}at=void 0}if(at)return!0}return!1},K:function(j,Z,oe){return Xs(j)?Gd(j,Z,oe):Qu(j,Z,oe)},C:function(){throw"unwind"},L:function(j,Z){Z>>=2;var oe=S()[Z+6];return Z={alpha:!!S()[Z],depth:!!S()[Z+1],stencil:!!S()[Z+2],antialias:!!S()[Z+3],premultipliedAlpha:!!S()[Z+4],preserveDrawingBuffer:!!S()[Z+5],powerPreference:_g[oe],failIfMajorPerformanceCaveat:!!S()[Z+7],xb:S()[Z+8],Xb:S()[Z+9],gb:S()[Z+10],qb:S()[Z+11],$b:S()[Z+12],ac:S()[Z+13]},!(j=Xs(j))||Z.qb?0:function(ce,at){ce.hb||(ce.hb=ce.getContext,ce.getContext=function(Ct,gt){return"webgl"==Ct==(gt=ce.hb(Ct,gt))instanceof WebGLRenderingContext?gt:null});var pt=ce.getContext("webgl",at);return pt?function(Ct,gt){var Ir=dl(8);S()[Ir+4>>2]=Mo();var Rn={Vb:Ir,attributes:gt,version:gt.xb,Xa:Ct};return Ct.canvas&&(Ct.canvas.Ya=Rn),(void 0===gt.gb||gt.gb)&&function(Kn){if(Kn||(Kn=void 0),!Kn.tb){Kn.tb=!0;var ti=Kn.Xa;(xe=(tr=ti).getExtension("ANGLE_instanced_arrays"))&&(tr.vertexAttribDivisor=function(Ot,xn){xe.vertexAttribDivisorANGLE(Ot,xn)},tr.drawArraysInstanced=function(Ot,xn,ni,Zs){xe.drawArraysInstancedANGLE(Ot,xn,ni,Zs)},tr.drawElementsInstanced=function(Ot,xn,ni,Zs,Eg){xe.drawElementsInstancedANGLE(Ot,xn,ni,Zs,Eg)}),function(tr){var xe=tr.getExtension("OES_vertex_array_object");xe&&(tr.createVertexArray=function(){return xe.createVertexArrayOES()},tr.deleteVertexArray=function(Ot){xe.deleteVertexArrayOES(Ot)},tr.bindVertexArray=function(Ot){xe.bindVertexArrayOES(Ot)},tr.isVertexArray=function(Ot){return xe.isVertexArrayOES(Ot)})}(ti),function(tr){var xe=tr.getExtension("WEBGL_draw_buffers");xe&&(tr.drawBuffers=function(Ot,xn){xe.drawBuffersWEBGL(Ot,xn)})}(ti),ti.Pb=ti.getExtension("EXT_disjoint_timer_query"),ti.Yb=ti.getExtension("WEBGL_multi_draw"),(ti.getSupportedExtensions()||[]).forEach(function(tr){tr.includes("lose_context")||tr.includes("debug")||ti.getExtension(tr)})}var tr,xe}(Rn),Ir}(pt,at):0}(j,Z)},O:Wd,P:tc,D:function(j){Mg(j)},h:qd,l:Yd,s:hr,k:Xd,J:function(j){var Z=Date.now();return S()[j>>2]=Z/1e3|0,S()[j+4>>2]=Z%1e3*1e3|0,0},a:mt||p.wasmMemory,r:cl,e:function(j,Z,oe,ce){return cl(j,Z,oe,ce)}};(function(){function j(at,pt){p.asm=at.exports,kt.fb.push(p.asm.xa),Ts=p.asm.Ba,zi.unshift(p.asm.$),Zt=pt,ne||(Di--,p.monitorRunDependencies&&p.monitorRunDependencies(Di),0==Di&&(null!==ei&&(clearInterval(ei),ei=null),$i&&(at=$i,$i=null,at())))}function Z(at){j(at.instance,at.module)}function oe(at){return function(){if(!he&&(q||W)){if("function"==typeof fetch&&!Ur.startsWith("file://"))return fetch(Ur,{credentials:"same-origin"}).then(function(pt){if(!pt.ok)throw"failed to load wasm binary file at '"+Ur+"'";return pt.arrayBuffer()}).catch(function(){return sl()});if(y)return new Promise(function(pt,Ct){y(Ur,function(gt){pt(new Uint8Array(gt))},Ct)})}return Promise.resolve().then(function(){return sl()})}().then(function(pt){return WebAssembly.instantiate(pt,ce)}).then(function(pt){return pt}).then(at,function(pt){Xe("failed to asynchronously prepare wasm: "+pt),Hi(pt)})}var ce={a:nc};if(ne||(Di++,p.monitorRunDependencies&&p.monitorRunDependencies(Di)),p.instantiateWasm)try{return p.instantiateWasm(ce,j)}catch(at){return Xe("Module.instantiateWasm callback failed with error: "+at),!1}(he||"function"!=typeof WebAssembly.instantiateStreaming||Ws()||Ur.startsWith("file://")||"function"!=typeof fetch?oe(Z):fetch(Ur,{credentials:"same-origin"}).then(function(at){return WebAssembly.instantiateStreaming(at,ce).then(Z,function(pt){return Xe("wasm streaming compile failed: "+pt),Xe("falling back to ArrayBuffer instantiation"),oe(Z)})})).catch(o)})(),p.___wasm_call_ctors=function(){return(p.___wasm_call_ctors=p.asm.$).apply(null,arguments)},p._OrtInit=function(){return(p._OrtInit=p.asm.aa).apply(null,arguments)},p._OrtCreateSessionOptions=function(){return(p._OrtCreateSessionOptions=p.asm.ba).apply(null,arguments)},p._OrtAddSessionConfigEntry=function(){return(p._OrtAddSessionConfigEntry=p.asm.ca).apply(null,arguments)},p._OrtReleaseSessionOptions=function(){return(p._OrtReleaseSessionOptions=p.asm.da).apply(null,arguments)},p._OrtCreateSession=function(){return(p._OrtCreateSession=p.asm.ea).apply(null,arguments)},p._OrtReleaseSession=function(){return(p._OrtReleaseSession=p.asm.fa).apply(null,arguments)},p._OrtGetInputCount=function(){return(p._OrtGetInputCount=p.asm.ga).apply(null,arguments)},p._OrtGetOutputCount=function(){return(p._OrtGetOutputCount=p.asm.ha).apply(null,arguments)},p._OrtGetInputName=function(){return(p._OrtGetInputName=p.asm.ia).apply(null,arguments)},p._OrtGetOutputName=function(){return(p._OrtGetOutputName=p.asm.ja).apply(null,arguments)},p._OrtFree=function(){return(p._OrtFree=p.asm.ka).apply(null,arguments)},p._OrtCreateTensor=function(){return(p._OrtCreateTensor=p.asm.la).apply(null,arguments)},p._OrtGetTensorData=function(){return(p._OrtGetTensorData=p.asm.ma).apply(null,arguments)},p._OrtReleaseTensor=function(){return(p._OrtReleaseTensor=p.asm.na).apply(null,arguments)},p._OrtCreateRunOptions=function(){return(p._OrtCreateRunOptions=p.asm.oa).apply(null,arguments)},p._OrtAddRunConfigEntry=function(){return(p._OrtAddRunConfigEntry=p.asm.pa).apply(null,arguments)},p._OrtReleaseRunOptions=function(){return(p._OrtReleaseRunOptions=p.asm.qa).apply(null,arguments)},p._OrtRun=function(){return(p._OrtRun=p.asm.ra).apply(null,arguments)},p._OrtEndProfiling=function(){return(p._OrtEndProfiling=p.asm.sa).apply(null,arguments)};var Nt=p.___errno_location=function(){return(Nt=p.___errno_location=p.asm.ta).apply(null,arguments)},Mo=p._pthread_self=function(){return(Mo=p._pthread_self=p.asm.ua).apply(null,arguments)},dl=p._malloc=function(){return(dl=p._malloc=p.asm.va).apply(null,arguments)},yt=p._free=function(){return(yt=p._free=p.asm.wa).apply(null,arguments)};p._emscripten_tls_init=function(){return(p._emscripten_tls_init=p.asm.xa).apply(null,arguments)};var la=p.___funcs_on_exit=function(){return(la=p.___funcs_on_exit=p.asm.ya).apply(null,arguments)},zt=p._emscripten_main_thread_process_queued_calls=function(){return(zt=p._emscripten_main_thread_process_queued_calls=p.asm.za).apply(null,arguments)},bn=p.__emscripten_thread_init=function(){return(bn=p.__emscripten_thread_init=p.asm.Aa).apply(null,arguments)};p._emscripten_current_thread_process_queued_calls=function(){return(p._emscripten_current_thread_process_queued_calls=p.asm.Ca).apply(null,arguments)};var Zd=p._emscripten_sync_run_in_main_thread_4=function(){return(Zd=p._emscripten_sync_run_in_main_thread_4=p.asm.Da).apply(null,arguments)},wg=p._emscripten_run_in_main_runtime_thread_js=function(){return(wg=p._emscripten_run_in_main_runtime_thread_js=p.asm.Ea).apply(null,arguments)},Kd=p._emscripten_dispatch_to_thread_=function(){return(Kd=p._emscripten_dispatch_to_thread_=p.asm.Fa).apply(null,arguments)},Eo=p.__emscripten_thread_free_data=function(){return(Eo=p.__emscripten_thread_free_data=p.asm.Ga).apply(null,arguments)};p.__emscripten_thread_exit=function(){return(p.__emscripten_thread_exit=p.asm.Ha).apply(null,arguments)};var Cr,Sg=p._memalign=function(){return(Sg=p._memalign=p.asm.Ia).apply(null,arguments)},Jd=p._emscripten_stack_set_limits=function(){return(Jd=p._emscripten_stack_set_limits=p.asm.Ja).apply(null,arguments)},Qd=p.stackSave=function(){return(Qd=p.stackSave=p.asm.Ka).apply(null,arguments)},yi=p.stackRestore=function(){return(yi=p.stackRestore=p.asm.La).apply(null,arguments)},rc=p.stackAlloc=function(){return(rc=p.stackAlloc=p.asm.Ma).apply(null,arguments)},ic=p.__emscripten_main_thread_futex=724520,Tg=p.__emscripten_allow_main_runtime_queued_calls=719156;function hl(j){this.name="ExitStatus",this.message="Program terminated with exit("+j+")",this.status=j}function sc(){function j(){if(!Cr&&(Cr=!0,p.calledRun=!0,!Dn)&&(ne||rs(zi),u(p),p.onRuntimeInitialized&&p.onRuntimeInitialized(),!ne)){if(p.postRun)for("function"==typeof p.postRun&&(p.postRun=[p.postRun]);p.postRun.length;){var Z=p.postRun.shift();Ei.unshift(Z)}rs(Ei)}}if(!(0<Di))if(ne)u(p),ne||rs(zi),postMessage({cmd:"loaded"});else{if(p.preRun)for("function"==typeof p.preRun&&(p.preRun=[p.preRun]);p.preRun.length;)il();rs(wo),0<Di||(p.setStatus?(p.setStatus("Running..."),setTimeout(function(){setTimeout(function(){p.setStatus("")},1),j()},1)):j())}}function Mg(j){if(ne)throw al(j),"unwind";Qr()||ne||(la(),rs(js),Re[1].length&&He(1,10),Re[2].length&&He(2,10),kt.kb()),Qr()||(kt.kb(),p.onExit&&p.onExit(j),Dn=!0),H(j,new hl(j))}if(p.UTF8ToString=Yn,p.stringToUTF8=Kr,p.lengthBytesUTF8=An,p.keepRuntimeAlive=Qr,p.PThread=kt,p.stackSave=Qd,p.stackRestore=yi,p.stackAlloc=rc,p.PThread=kt,p.wasmMemory=mt,p.ExitStatus=hl,$i=function j(){Cr||sc(),Cr||($i=j)},p.run=sc,p.preInit)for("function"==typeof p.preInit&&(p.preInit=[p.preInit]);0<p.preInit.length;)p.preInit.pop()();return ne&&(We=!1,kt.ub()),sc(),P.ready});ye.exports=D},5118:ye=>{"use strict";ye.exports='"use strict";var e={};if("object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node){var t=require("worker_threads"),r=t.parentPort;r.on("message",(function(e){onmessage({data:e})}));var a=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:t.Worker,importScripts:function(e){(0,eval)(a.readFileSync(e,"utf8"))},postMessage:function(e){r.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=function(){var e=Array.prototype.slice.call(arguments).join(" ");console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.threadInfoStruct,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInit();try{var a=e.invokeEntryPoint(t.data.start_routine,t.data.arg);e.keepRuntimeAlive()?e.PThread.setExitStatus(a):e.__emscripten_thread_exit(a)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processThreadQueue"===t.data.cmd?e._pthread_self()&&e._emscripten_current_thread_process_queued_calls():(s("worker.js received unknown command "+t.data.cmd),s(t.data)))}catch(e){throw s("worker.js onmessage() captured an uncaught exception: "+e),e&&e.stack&&s(e.stack),e}};\n'},932:(ye,M,k)=>{var I,D=(I=(I="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(P){var v;P=P||{},v||(v=void 0!==P?P:{});var w,S,b=Object.assign;v.ready=new Promise(function(se,pe){w=se,S=pe});var p,u,o,d,f,y,x=b({},v),E="./this.program",R="object"==typeof window,N="function"==typeof importScripts,L="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,F="";L?(F=N?k(908).dirname(F)+"/":"//",y=()=>{f||(d=k(1384),f=k(908))},p=function(se,pe){return y(),se=f.normalize(se),d.readFileSync(se,pe?null:"utf8")},o=se=>((se=p(se,!0)).buffer||(se=new Uint8Array(se)),se),u=(se,pe,Re)=>{y(),se=f.normalize(se),d.readFile(se,function(He,_t){He?Re(He):pe(_t.buffer)})},1<process.argv.length&&(E=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(se){throw se}),process.on("unhandledRejection",function(se){throw se}),v.inspect=function(){return"[Emscripten Module object]"}):(R||N)&&(N?F=self.location.href:"undefined"!=typeof document&&document.currentScript&&(F=document.currentScript.src),I&&(F=I),F=0!==F.indexOf("blob:")?F.substr(0,F.replace(/[?#].*/,"").lastIndexOf("/")+1):"",p=se=>{var pe=new XMLHttpRequest;return pe.open("GET",se,!1),pe.send(null),pe.responseText},N&&(o=se=>{var pe=new XMLHttpRequest;return pe.open("GET",se,!1),pe.responseType="arraybuffer",pe.send(null),new Uint8Array(pe.response)}),u=(se,pe,Re)=>{var He=new XMLHttpRequest;He.open("GET",se,!0),He.responseType="arraybuffer",He.onload=()=>{200==He.status||0==He.status&&He.response?pe(He.response):Re()},He.onerror=Re,He.send(null)});var H,q=v.print||console.log.bind(console),W=v.printErr||console.warn.bind(console);b(v,x),x=null,v.thisProgram&&(E=v.thisProgram),v.wasmBinary&&(H=v.wasmBinary),"object"!=typeof WebAssembly&&Yn("no native wasm support detected");var U,ne,de,De,ue,Ae=!1,Se="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function he(se,pe,Re){var He=pe+Re;for(Re=pe;se[Re]&&!(Re>=He);)++Re;if(16<Re-pe&&se.subarray&&Se)return Se.decode(se.subarray(pe,Re));for(He="";pe<Re;){var _t=se[pe++];if(128&_t){var vt=63&se[pe++];if(192==(224&_t))He+=String.fromCharCode((31&_t)<<6|vt);else{var Tt=63&se[pe++];65536>(_t=224==(240&_t)?(15&_t)<<12|vt<<6|Tt:(7&_t)<<18|vt<<12|Tt<<6|63&se[pe++])?He+=String.fromCharCode(_t):(_t-=65536,He+=String.fromCharCode(55296|_t>>10,56320|1023&_t))}}else He+=String.fromCharCode(_t)}return He}function _e(se,pe){return se?he(De,se,pe):""}function Xe(se,pe,Re,He){if(!(0<He))return 0;var _t=Re;He=Re+He-1;for(var vt=0;vt<se.length;++vt){var Tt=se.charCodeAt(vt);if(55296<=Tt&&57343>=Tt&&(Tt=65536+((1023&Tt)<<10)|1023&se.charCodeAt(++vt)),127>=Tt){if(Re>=He)break;pe[Re++]=Tt}else{if(2047>=Tt){if(Re+1>=He)break;pe[Re++]=192|Tt>>6}else{if(65535>=Tt){if(Re+2>=He)break;pe[Re++]=224|Tt>>12}else{if(Re+3>=He)break;pe[Re++]=240|Tt>>18,pe[Re++]=128|Tt>>12&63}pe[Re++]=128|Tt>>6&63}pe[Re++]=128|63&Tt}}return pe[Re]=0,Re-_t}function We(se){for(var pe=0,Re=0;Re<se.length;++Re){var He=se.charCodeAt(Re);55296<=He&&57343>=He&&(He=65536+((1023&He)<<10)|1023&se.charCodeAt(++Re)),127>=He?++pe:pe=2047>=He?pe+2:65535>=He?pe+3:pe+4}return pe}function mt(se){var pe=We(se)+1,Re=sa(pe);return Re&&Xe(se,de,Re,pe),Re}function Zt(){var se=U.buffer;ne=se,v.HEAP8=de=new Int8Array(se),v.HEAP16=new Int16Array(se),v.HEAP32=ue=new Int32Array(se),v.HEAPU8=De=new Uint8Array(se),v.HEAPU16=new Uint16Array(se),v.HEAPU32=new Uint32Array(se),v.HEAPF32=new Float32Array(se),v.HEAPF64=new Float64Array(se)}var Dn,Lr=[],Kt=[],rn=[];function On(){var se=v.preRun.shift();Lr.unshift(se)}var At,hn=0,Zr=null,en=null;function Yn(se){throw v.onAbort&&v.onAbort(se),W(se="Aborted("+se+")"),Ae=!0,se=new WebAssembly.RuntimeError(se+". Build with -s ASSERTIONS=1 for more info."),S(se),se}function Br(){return At.startsWith("data:application/octet-stream;base64,")}if(v.preloadedImages={},v.preloadedAudios={},At="ort-wasm.wasm",!Br()){var Kr=At;At=v.locateFile?v.locateFile(Kr,F):F+Kr}function An(){var se=At;try{if(se==At&&H)return new Uint8Array(H);if(o)return o(se);throw"both async and sync fetching of the wasm failed"}catch(pe){Yn(pe)}}function Jr(se){for(;0<se.length;){var pe=se.shift();if("function"==typeof pe)pe(v);else{var Re=pe.Na;"number"==typeof Re?void 0===pe.va?ns(Re)():ns(Re)(pe.va):Re(void 0===pe.va?null:pe.va)}}}var _r=[];function ns(se){var pe=_r[se];return pe||(se>=_r.length&&(_r.length=se+1),_r[se]=pe=Dn.get(se)),pe}function Ts(se){this.qa=se-16,this.Fa=function(pe){ue[this.qa+4>>2]=pe},this.Ca=function(pe){ue[this.qa+8>>2]=pe},this.Da=function(){ue[this.qa>>2]=0},this.Ba=function(){de[this.qa+12>>0]=0},this.Ea=function(){de[this.qa+13>>0]=0},this.ya=function(pe,Re){this.Fa(pe),this.Ca(Re),this.Da(),this.Ba(),this.Ea()}}var wo,zi,js={},Ei=[null,[],[]],Qr={},il={};function Ur(){if(!zi){var se,pe={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:E||"./this.program"};for(se in il)void 0===il[se]?delete pe[se]:pe[se]=il[se];var Re=[];for(se in pe)Re.push(se+"="+pe[se]);zi=Re}return zi}function Di(se){return se%4==0&&(se%100!=0||se%400==0)}function ei(se,pe){for(var Re=0,He=0;He<=pe;Re+=se[He++]);return Re}var $i=[31,29,31,30,31,30,31,31,30,31,30,31],Hi=[31,28,31,30,31,30,31,31,30,31,30,31];function Ws(se,pe){for(se=new Date(se.getTime());0<pe;){var Re=se.getMonth(),He=(Di(se.getFullYear())?$i:Hi)[Re];if(!(pe>He-se.getDate())){se.setDate(se.getDate()+pe);break}pe-=He-se.getDate()+1,se.setDate(1),11>Re?se.setMonth(Re+1):(se.setMonth(0),se.setFullYear(se.getFullYear()+1))}return se}function sl(se,pe,Re,He){function _t(Ce,Ht,Wn){for(Ce="number"==typeof Ce?Ce.toString():Ce||"";Ce.length<Ht;)Ce=Wn[0]+Ce;return Ce}function vt(Ce,Ht){return _t(Ce,Ht,"0")}function Tt(Ce,Ht){function Wn(ji){return 0>ji?-1:0<ji?1:0}var Bn;return 0===(Bn=Wn(Ce.getFullYear()-Ht.getFullYear()))&&0===(Bn=Wn(Ce.getMonth()-Ht.getMonth()))&&(Bn=Wn(Ce.getDate()-Ht.getDate())),Bn}function lr(Ce){switch(Ce.getDay()){case 0:return new Date(Ce.getFullYear()-1,11,29);case 1:return Ce;case 2:return new Date(Ce.getFullYear(),0,3);case 3:return new Date(Ce.getFullYear(),0,2);case 4:return new Date(Ce.getFullYear(),0,1);case 5:return new Date(Ce.getFullYear()-1,11,31);case 6:return new Date(Ce.getFullYear()-1,11,30)}}function Dr(Ce){Ce=Ws(new Date(Ce.oa+1900,0,1),Ce.ua);var Ht=new Date(Ce.getFullYear()+1,0,4),Wn=lr(new Date(Ce.getFullYear(),0,4));return Ht=lr(Ht),0>=Tt(Wn,Ce)?0>=Tt(Ht,Ce)?Ce.getFullYear()+1:Ce.getFullYear():Ce.getFullYear()-1}var Ar=ue[He+40>>2];for(var er in He={Ia:ue[He>>2],Ha:ue[He+4>>2],sa:ue[He+8>>2],ra:ue[He+12>>2],pa:ue[He+16>>2],oa:ue[He+20>>2],ta:ue[He+24>>2],ua:ue[He+28>>2],Qa:ue[He+32>>2],Ga:ue[He+36>>2],Ja:Ar?_e(Ar):""},Re=_e(Re),Ar={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})Re=Re.replace(new RegExp(er,"g"),Ar[er]);var Ce,Ht,Gi="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),is="January February March April May June July August September October November December".split(" ");for(er in Ar={"%a":function(Ce){return Gi[Ce.ta].substring(0,3)},"%A":function(Ce){return Gi[Ce.ta]},"%b":function(Ce){return is[Ce.pa].substring(0,3)},"%B":function(Ce){return is[Ce.pa]},"%C":function(Ce){return vt((Ce.oa+1900)/100|0,2)},"%d":function(Ce){return vt(Ce.ra,2)},"%e":function(Ce){return _t(Ce.ra,2," ")},"%g":function(Ce){return Dr(Ce).toString().substring(2)},"%G":function(Ce){return Dr(Ce)},"%H":function(Ce){return vt(Ce.sa,2)},"%I":function(Ce){return 0==(Ce=Ce.sa)?Ce=12:12<Ce&&(Ce-=12),vt(Ce,2)},"%j":function(Ce){return vt(Ce.ra+ei(Di(Ce.oa+1900)?$i:Hi,Ce.pa-1),3)},"%m":function(Ce){return vt(Ce.pa+1,2)},"%M":function(Ce){return vt(Ce.Ha,2)},"%n":function(){return"\n"},"%p":function(Ce){return 0<=Ce.sa&&12>Ce.sa?"AM":"PM"},"%S":function(Ce){return vt(Ce.Ia,2)},"%t":function(){return"\t"},"%u":function(Ce){return Ce.ta||7},"%U":function(Ce){var Ht=new Date(Ce.oa+1900,0,1),Wn=0===Ht.getDay()?Ht:Ws(Ht,7-Ht.getDay());return 0>Tt(Wn,Ce=new Date(Ce.oa+1900,Ce.pa,Ce.ra))?vt(Math.ceil((31-Wn.getDate()+(ei(Di(Ce.getFullYear())?$i:Hi,Ce.getMonth()-1)-31)+Ce.getDate())/7),2):0===Tt(Wn,Ht)?"01":"00"},"%V":function(Ce){var Ht=new Date(Ce.oa+1901,0,4),Wn=lr(new Date(Ce.oa+1900,0,4));Ht=lr(Ht);var Bn=Ws(new Date(Ce.oa+1900,0,1),Ce.ua);return 0>Tt(Bn,Wn)?"53":0>=Tt(Ht,Bn)?"01":vt(Math.ceil((Wn.getFullYear()<Ce.oa+1900?Ce.ua+32-Wn.getDate():Ce.ua+1-Wn.getDate())/7),2)},"%w":function(Ce){return Ce.ta},"%W":function(Ce){var Ht=new Date(Ce.oa,0,1),Wn=1===Ht.getDay()?Ht:Ws(Ht,0===Ht.getDay()?1:7-Ht.getDay()+1);return 0>Tt(Wn,Ce=new Date(Ce.oa+1900,Ce.pa,Ce.ra))?vt(Math.ceil((31-Wn.getDate()+(ei(Di(Ce.getFullYear())?$i:Hi,Ce.getMonth()-1)-31)+Ce.getDate())/7),2):0===Tt(Wn,Ht)?"01":"00"},"%y":function(Ce){return(Ce.oa+1900).toString().substring(2)},"%Y":function(Ce){return Ce.oa+1900},"%z":function(Ce){var Ht=0<=(Ce=Ce.Ga);return Ce=Math.abs(Ce)/60,(Ht?"+":"-")+String("0000"+(Ce/60*100+Ce%60)).slice(-4)},"%Z":function(Ce){return Ce.Ja},"%%":function(){return"%"}})Re.includes(er)&&(Re=Re.replace(new RegExp(er,"g"),Ar[er](He)));return Xe(Ce=Re,Ht=Array(We(Ce)+1),0,Ht.length),(er=Ht).length>pe?0:(de.set(er,se),er.length-1)}var Ju={a:function(se){return sa(se+16)+16},b:function(se,pe,Re){throw new Ts(se).ya(pe,Re),se},g:function(){return 0},I:function(){},F:function(){},v:function(){},y:function(){},r:function(){return 0},G:function(){},B:function(se,pe){return se=_e(se),Qr.Ka(se,pe)},A:function(se,pe,Re,He,_t,vt){if(vt<<=12,0!=(16&He)&&se%65536!=0)pe=-28;else if(0!=(32&He)){se=65536*Math.ceil(pe/65536);var Tt=al(65536,se);Tt?(De.fill(0,Tt,Tt+se),se=Tt):se=0,se?(js[se]={Aa:se,za:pe,wa:!0,fd:_t,Pa:Re,flags:He,offset:vt},pe=se):pe=-48}else pe=-52;return pe},z:function(se,pe){var Re=js[se];return 0!==pe&&Re?(pe===Re.za&&(js[se]=null,Re.wa&&kt(Re.Aa)),se=0):se=-28,se},k:function(){},x:function(se,pe,Re){return se=_e(se),Qr.La(se,pe,Re)},t:function(){},H:function(){},u:function(){},h:function(){Yn("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},n:function(){Yn("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},J:function(se,pe){se=new Date(1e3*ue[se>>2]),ue[pe>>2]=se.getUTCSeconds(),ue[pe+4>>2]=se.getUTCMinutes(),ue[pe+8>>2]=se.getUTCHours(),ue[pe+12>>2]=se.getUTCDate(),ue[pe+16>>2]=se.getUTCMonth(),ue[pe+20>>2]=se.getUTCFullYear()-1900,ue[pe+24>>2]=se.getUTCDay(),ue[pe+28>>2]=(se.getTime()-Date.UTC(se.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},K:function(se,pe){se=new Date(1e3*ue[se>>2]),ue[pe>>2]=se.getSeconds(),ue[pe+4>>2]=se.getMinutes(),ue[pe+8>>2]=se.getHours(),ue[pe+12>>2]=se.getDate(),ue[pe+16>>2]=se.getMonth(),ue[pe+20>>2]=se.getFullYear()-1900,ue[pe+24>>2]=se.getDay();var Re=new Date(se.getFullYear(),0,1);ue[pe+28>>2]=(se.getTime()-Re.getTime())/864e5|0,ue[pe+36>>2]=-60*se.getTimezoneOffset();var He=new Date(se.getFullYear(),6,1).getTimezoneOffset();Re=Re.getTimezoneOffset(),ue[pe+32>>2]=0|(He!=Re&&se.getTimezoneOffset()==Math.min(Re,He))},L:function(se){var pe=new Date(ue[se+20>>2]+1900,ue[se+16>>2],ue[se+12>>2],ue[se+8>>2],ue[se+4>>2],ue[se>>2],0),Re=ue[se+32>>2],He=pe.getTimezoneOffset(),_t=new Date(pe.getFullYear(),0,1),vt=new Date(pe.getFullYear(),6,1).getTimezoneOffset(),Tt=_t.getTimezoneOffset(),lr=Math.min(Tt,vt);return 0>Re?ue[se+32>>2]=Number(vt!=Tt&&lr==He):0<Re!=(lr==He)&&(vt=Math.max(Tt,vt),pe.setTime(pe.getTime()+6e4*((0<Re?lr:vt)-He))),ue[se+24>>2]=pe.getDay(),ue[se+28>>2]=(pe.getTime()-_t.getTime())/864e5|0,ue[se>>2]=pe.getSeconds(),ue[se+4>>2]=pe.getMinutes(),ue[se+8>>2]=pe.getHours(),ue[se+12>>2]=pe.getDate(),ue[se+16>>2]=pe.getMonth(),pe.getTime()/1e3|0},M:function se(pe,Re,He){se.xa||(se.xa=!0,function(_t,vt,Tt){function lr(is){return(is=is.toTimeString().match(/\(([A-Za-z ]+)\)$/))?is[1]:"GMT"}var Dr=(new Date).getFullYear(),Ar=new Date(Dr,0,1),er=new Date(Dr,6,1);Dr=Ar.getTimezoneOffset();var Gi=er.getTimezoneOffset();ue[_t>>2]=60*Math.max(Dr,Gi),ue[vt>>2]=Number(Dr!=Gi),_t=lr(Ar),vt=lr(er),_t=mt(_t),vt=mt(vt),Gi<Dr?(ue[Tt>>2]=_t,ue[Tt+4>>2]=vt):(ue[Tt>>2]=vt,ue[Tt+4>>2]=_t)}(pe,Re,He))},d:function(){Yn("")},m:function(se,pe){if(0===se)se=Date.now();else{if(1!==se&&4!==se)return ue[ol()>>2]=28,-1;se=wo()}return ue[pe>>2]=se/1e3|0,ue[pe+4>>2]=se%1e3*1e6|0,0},p:function(se,pe){return se-pe},s:function(){return 2147483648},l:wo=L?()=>{var se=process.hrtime();return 1e3*se[0]+se[1]/1e6}:()=>performance.now(),E:function(se,pe,Re){De.copyWithin(se,pe,pe+Re)},f:function(se){var pe=De.length;if(2147483648<(se>>>=0))return!1;for(var Re=1;4>=Re;Re*=2){var He=pe*(1+.2/Re);He=Math.min(He,se+100663296),0<(He=Math.max(se,He))%65536&&(He+=65536-He%65536);e:{try{U.grow(Math.min(2147483648,He)-ne.byteLength+65535>>>16),Zt();var _t=1;break e}catch(vt){}_t=void 0}if(_t)return!0}return!1},C:function(se,pe){var Re=0;return Ur().forEach(function(He,_t){var vt=pe+Re;for(_t=ue[se+4*_t>>2]=vt,vt=0;vt<He.length;++vt)de[_t++>>0]=He.charCodeAt(vt);de[_t>>0]=0,Re+=He.length+1}),0},D:function(se,pe){var Re=Ur();ue[se>>2]=Re.length;var He=0;return Re.forEach(function(_t){He+=_t.length+1}),ue[pe>>2]=He,0},e:function(){return 0},j:function(se,pe,Re,He){return se=Qr.Oa(se),pe=Qr.Ma(se,pe,Re),ue[He>>2]=pe,0},q:function(){},i:function(se,pe,Re,He){for(var _t=0,vt=0;vt<Re;vt++){var Tt=ue[pe>>2],lr=ue[pe+4>>2];pe+=8;for(var Dr=0;Dr<lr;Dr++){var Ar=De[Tt+Dr],er=Ei[se];0===Ar||10===Ar?((1===se?q:W)(he(er,0)),er.length=0):er.push(Ar)}_t+=lr}return ue[He>>2]=_t,0},w:function(se){var pe=Date.now();return ue[se>>2]=pe/1e3|0,ue[se+4>>2]=pe%1e3*1e3|0,0},o:sl,c:function(se,pe,Re,He){return sl(se,pe,Re,He)}};(function(){function se(_t){v.asm=_t.exports,U=v.asm.N,Zt(),Dn=v.asm.ja,Kt.unshift(v.asm.O),hn--,v.monitorRunDependencies&&v.monitorRunDependencies(hn),0==hn&&(null!==Zr&&(clearInterval(Zr),Zr=null),en&&(_t=en,en=null,_t()))}function pe(_t){se(_t.instance)}function Re(_t){return function(){if(!H&&(R||N)){if("function"==typeof fetch&&!At.startsWith("file://"))return fetch(At,{credentials:"same-origin"}).then(function(vt){if(!vt.ok)throw"failed to load wasm binary file at '"+At+"'";return vt.arrayBuffer()}).catch(function(){return An()});if(u)return new Promise(function(vt,Tt){u(At,function(lr){vt(new Uint8Array(lr))},Tt)})}return Promise.resolve().then(function(){return An()})}().then(function(vt){return WebAssembly.instantiate(vt,He)}).then(function(vt){return vt}).then(_t,function(vt){W("failed to asynchronously prepare wasm: "+vt),Yn(vt)})}var He={a:Ju};if(hn++,v.monitorRunDependencies&&v.monitorRunDependencies(hn),v.instantiateWasm)try{return v.instantiateWasm(He,se)}catch(_t){return W("Module.instantiateWasm callback failed with error: "+_t),!1}(H||"function"!=typeof WebAssembly.instantiateStreaming||Br()||At.startsWith("file://")||"function"!=typeof fetch?Re(pe):fetch(At,{credentials:"same-origin"}).then(function(_t){return WebAssembly.instantiateStreaming(_t,He).then(pe,function(vt){return W("wasm streaming compile failed: "+vt),W("falling back to ArrayBuffer instantiation"),Re(pe)})})).catch(S)})(),v.___wasm_call_ctors=function(){return(v.___wasm_call_ctors=v.asm.O).apply(null,arguments)},v._OrtInit=function(){return(v._OrtInit=v.asm.P).apply(null,arguments)},v._OrtCreateSessionOptions=function(){return(v._OrtCreateSessionOptions=v.asm.Q).apply(null,arguments)},v._OrtAddSessionConfigEntry=function(){return(v._OrtAddSessionConfigEntry=v.asm.R).apply(null,arguments)},v._OrtReleaseSessionOptions=function(){return(v._OrtReleaseSessionOptions=v.asm.S).apply(null,arguments)},v._OrtCreateSession=function(){return(v._OrtCreateSession=v.asm.T).apply(null,arguments)},v._OrtReleaseSession=function(){return(v._OrtReleaseSession=v.asm.U).apply(null,arguments)},v._OrtGetInputCount=function(){return(v._OrtGetInputCount=v.asm.V).apply(null,arguments)},v._OrtGetOutputCount=function(){return(v._OrtGetOutputCount=v.asm.W).apply(null,arguments)},v._OrtGetInputName=function(){return(v._OrtGetInputName=v.asm.X).apply(null,arguments)},v._OrtGetOutputName=function(){return(v._OrtGetOutputName=v.asm.Y).apply(null,arguments)},v._OrtFree=function(){return(v._OrtFree=v.asm.Z).apply(null,arguments)},v._OrtCreateTensor=function(){return(v._OrtCreateTensor=v.asm._).apply(null,arguments)},v._OrtGetTensorData=function(){return(v._OrtGetTensorData=v.asm.$).apply(null,arguments)},v._OrtReleaseTensor=function(){return(v._OrtReleaseTensor=v.asm.aa).apply(null,arguments)},v._OrtCreateRunOptions=function(){return(v._OrtCreateRunOptions=v.asm.ba).apply(null,arguments)},v._OrtAddRunConfigEntry=function(){return(v._OrtAddRunConfigEntry=v.asm.ca).apply(null,arguments)},v._OrtReleaseRunOptions=function(){return(v._OrtReleaseRunOptions=v.asm.da).apply(null,arguments)},v._OrtRun=function(){return(v._OrtRun=v.asm.ea).apply(null,arguments)},v._OrtEndProfiling=function(){return(v._OrtEndProfiling=v.asm.fa).apply(null,arguments)};var rs,ol=v.___errno_location=function(){return(ol=v.___errno_location=v.asm.ga).apply(null,arguments)},sa=v._malloc=function(){return(sa=v._malloc=v.asm.ha).apply(null,arguments)},kt=v._free=function(){return(kt=v._free=v.asm.ia).apply(null,arguments)},al=v._memalign=function(){return(al=v._memalign=v.asm.ka).apply(null,arguments)},qs=v.stackSave=function(){return(qs=v.stackSave=v.asm.la).apply(null,arguments)},Ms=v.stackRestore=function(){return(Ms=v.stackRestore=v.asm.ma).apply(null,arguments)},Ys=v.stackAlloc=function(){return(Ys=v.stackAlloc=v.asm.na).apply(null,arguments)};function So(){function se(){if(!rs&&(rs=!0,v.calledRun=!0,!Ae)){if(Jr(Kt),w(v),v.onRuntimeInitialized&&v.onRuntimeInitialized(),v.postRun)for("function"==typeof v.postRun&&(v.postRun=[v.postRun]);v.postRun.length;){var pe=v.postRun.shift();rn.unshift(pe)}Jr(rn)}}if(!(0<hn)){if(v.preRun)for("function"==typeof v.preRun&&(v.preRun=[v.preRun]);v.preRun.length;)On();Jr(Lr),0<hn||(v.setStatus?(v.setStatus("Running..."),setTimeout(function(){setTimeout(function(){v.setStatus("")},1),se()},1)):se())}}if(v.UTF8ToString=_e,v.stringToUTF8=function(se,pe,Re){return Xe(se,De,pe,Re)},v.lengthBytesUTF8=We,v.stackSave=qs,v.stackRestore=Ms,v.stackAlloc=Ys,en=function se(){rs||So(),rs||(en=se)},v.run=So,v.preInit)for("function"==typeof v.preInit&&(v.preInit=[v.preInit]);0<v.preInit.length;)v.preInit.pop()();return So(),P.ready});ye.exports=D},4537:ye=>{"use strict";ye.exports=function(M,k){for(var I=new Array(arguments.length-1),D=0,P=2,v=!0;P<arguments.length;)I[D++]=arguments[P++];return new Promise(function(w,S){I[D]=function(b){if(v)if(v=!1,b)S(b);else{for(var p=new Array(arguments.length-1),u=0;u<p.length;)p[u++]=arguments[u];w.apply(null,p)}};try{M.apply(k||null,I)}catch(b){v&&(v=!1,S(b))}})}},7419:(ye,M)=>{"use strict";var k=M;k.length=function(w){var S=w.length;if(!S)return 0;for(var b=0;--S%4>1&&"="===w.charAt(S);)++b;return Math.ceil(3*w.length)/4-b};for(var I=new Array(64),D=new Array(123),P=0;P<64;)D[I[P]=P<26?P+65:P<52?P+71:P<62?P-4:P-59|43]=P++;k.encode=function(w,S,b){for(var p,u=null,o=[],d=0,f=0;S<b;){var y=w[S++];switch(f){case 0:o[d++]=I[y>>2],p=(3&y)<<4,f=1;break;case 1:o[d++]=I[p|y>>4],p=(15&y)<<2,f=2;break;case 2:o[d++]=I[p|y>>6],o[d++]=I[63&y],f=0}d>8191&&((u||(u=[])).push(String.fromCharCode.apply(String,o)),d=0)}return f&&(o[d++]=I[p],o[d++]=61,1===f&&(o[d++]=61)),u?(d&&u.push(String.fromCharCode.apply(String,o.slice(0,d))),u.join("")):String.fromCharCode.apply(String,o.slice(0,d))};var v="invalid encoding";k.decode=function(w,S,b){for(var p,u=b,o=0,d=0;d<w.length;){var f=w.charCodeAt(d++);if(61===f&&o>1)break;if(void 0===(f=D[f]))throw Error(v);switch(o){case 0:p=f,o=1;break;case 1:S[b++]=p<<2|(48&f)>>4,p=f,o=2;break;case 2:S[b++]=(15&p)<<4|(60&f)>>2,p=f,o=3;break;case 3:S[b++]=(3&p)<<6|f,o=0}}if(1===o)throw Error(v);return b-u},k.test=function(w){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(w)}},9211:ye=>{"use strict";function M(){this._listeners={}}ye.exports=M,M.prototype.on=function(k,I,D){return(this._listeners[k]||(this._listeners[k]=[])).push({fn:I,ctx:D||this}),this},M.prototype.off=function(k,I){if(void 0===k)this._listeners={};else if(void 0===I)this._listeners[k]=[];else for(var D=this._listeners[k],P=0;P<D.length;)D[P].fn===I?D.splice(P,1):++P;return this},M.prototype.emit=function(k){var I=this._listeners[k];if(I){for(var D=[],P=1;P<arguments.length;)D.push(arguments[P++]);for(P=0;P<I.length;)I[P].fn.apply(I[P++].ctx,D)}return this}},945:ye=>{"use strict";function M(v){return"undefined"!=typeof Float32Array?function(){var w=new Float32Array([-0]),S=new Uint8Array(w.buffer),b=128===S[3];function p(f,y,x){w[0]=f,y[x]=S[0],y[x+1]=S[1],y[x+2]=S[2],y[x+3]=S[3]}function u(f,y,x){w[0]=f,y[x]=S[3],y[x+1]=S[2],y[x+2]=S[1],y[x+3]=S[0]}function o(f,y){return S[0]=f[y],S[1]=f[y+1],S[2]=f[y+2],S[3]=f[y+3],w[0]}function d(f,y){return S[3]=f[y],S[2]=f[y+1],S[1]=f[y+2],S[0]=f[y+3],w[0]}v.writeFloatLE=b?p:u,v.writeFloatBE=b?u:p,v.readFloatLE=b?o:d,v.readFloatBE=b?d:o}():function(){function w(b,p,u,o){var d=p<0?1:0;if(d&&(p=-p),0===p)b(1/p>0?0:2147483648,u,o);else if(isNaN(p))b(2143289344,u,o);else if(p>34028234663852886e22)b((d<<31|2139095040)>>>0,u,o);else if(p<11754943508222875e-54)b((d<<31|Math.round(p/1401298464324817e-60))>>>0,u,o);else{var f=Math.floor(Math.log(p)/Math.LN2);b((d<<31|f+127<<23|8388607&Math.round(p*Math.pow(2,-f)*8388608))>>>0,u,o)}}function S(b,p,u){var o=b(p,u),d=2*(o>>31)+1,f=o>>>23&255,y=8388607&o;return 255===f?y?NaN:d*(1/0):0===f?1401298464324817e-60*d*y:d*Math.pow(2,f-150)*(y+8388608)}v.writeFloatLE=w.bind(null,k),v.writeFloatBE=w.bind(null,I),v.readFloatLE=S.bind(null,D),v.readFloatBE=S.bind(null,P)}(),"undefined"!=typeof Float64Array?function(){var w=new Float64Array([-0]),S=new Uint8Array(w.buffer),b=128===S[7];function p(f,y,x){w[0]=f,y[x]=S[0],y[x+1]=S[1],y[x+2]=S[2],y[x+3]=S[3],y[x+4]=S[4],y[x+5]=S[5],y[x+6]=S[6],y[x+7]=S[7]}function u(f,y,x){w[0]=f,y[x]=S[7],y[x+1]=S[6],y[x+2]=S[5],y[x+3]=S[4],y[x+4]=S[3],y[x+5]=S[2],y[x+6]=S[1],y[x+7]=S[0]}function o(f,y){return S[0]=f[y],S[1]=f[y+1],S[2]=f[y+2],S[3]=f[y+3],S[4]=f[y+4],S[5]=f[y+5],S[6]=f[y+6],S[7]=f[y+7],w[0]}function d(f,y){return S[7]=f[y],S[6]=f[y+1],S[5]=f[y+2],S[4]=f[y+3],S[3]=f[y+4],S[2]=f[y+5],S[1]=f[y+6],S[0]=f[y+7],w[0]}v.writeDoubleLE=b?p:u,v.writeDoubleBE=b?u:p,v.readDoubleLE=b?o:d,v.readDoubleBE=b?d:o}():function(){function w(b,p,u,o,d,f){var y=o<0?1:0;if(y&&(o=-o),0===o)b(0,d,f+p),b(1/o>0?0:2147483648,d,f+u);else if(isNaN(o))b(0,d,f+p),b(2146959360,d,f+u);else if(o>17976931348623157e292)b(0,d,f+p),b((y<<31|2146435072)>>>0,d,f+u);else{var x;if(o<22250738585072014e-324)b((x=o/5e-324)>>>0,d,f+p),b((y<<31|x/4294967296)>>>0,d,f+u);else{var E=Math.floor(Math.log(o)/Math.LN2);1024===E&&(E=1023),b(4503599627370496*(x=o*Math.pow(2,-E))>>>0,d,f+p),b((y<<31|E+1023<<20|1048576*x&1048575)>>>0,d,f+u)}}}function S(b,p,u,o,d){var f=b(o,d+p),y=b(o,d+u),x=2*(y>>31)+1,E=y>>>20&2047,R=4294967296*(1048575&y)+f;return 2047===E?R?NaN:x*(1/0):0===E?5e-324*x*R:x*Math.pow(2,E-1075)*(R+4503599627370496)}v.writeDoubleLE=w.bind(null,k,0,4),v.writeDoubleBE=w.bind(null,I,4,0),v.readDoubleLE=S.bind(null,D,0,4),v.readDoubleBE=S.bind(null,P,4,0)}(),v}function k(v,w,S){w[S]=255&v,w[S+1]=v>>>8&255,w[S+2]=v>>>16&255,w[S+3]=v>>>24}function I(v,w,S){w[S]=v>>>24,w[S+1]=v>>>16&255,w[S+2]=v>>>8&255,w[S+3]=255&v}function D(v,w){return(v[w]|v[w+1]<<8|v[w+2]<<16|v[w+3]<<24)>>>0}function P(v,w){return(v[w]<<24|v[w+1]<<16|v[w+2]<<8|v[w+3])>>>0}ye.exports=M(M)},7199:module=>{"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(ye){}return null}module.exports=inquire},6662:ye=>{"use strict";ye.exports=function(M,k,I){var D=I||8192,P=D>>>1,v=null,w=D;return function(S){if(S<1||S>P)return M(S);w+S>D&&(v=M(D),w=0);var b=k.call(v,w,w+=S);return 7&w&&(w=1+(7|w)),b}}},4997:(ye,M)=>{"use strict";var k=M;k.length=function(I){for(var D=0,P=0,v=0;v<I.length;++v)(P=I.charCodeAt(v))<128?D+=1:P<2048?D+=2:55296==(64512&P)&&56320==(64512&I.charCodeAt(v+1))?(++v,D+=4):D+=3;return D},k.read=function(I,D,P){if(P-D<1)return"";for(var v,w=null,S=[],b=0;D<P;)(v=I[D++])<128?S[b++]=v:v>191&&v<224?S[b++]=(31&v)<<6|63&I[D++]:v>239&&v<365?(v=((7&v)<<18|(63&I[D++])<<12|(63&I[D++])<<6|63&I[D++])-65536,S[b++]=55296+(v>>10),S[b++]=56320+(1023&v)):S[b++]=(15&v)<<12|(63&I[D++])<<6|63&I[D++],b>8191&&((w||(w=[])).push(String.fromCharCode.apply(String,S)),b=0);return w?(b&&w.push(String.fromCharCode.apply(String,S.slice(0,b))),w.join("")):String.fromCharCode.apply(String,S.slice(0,b))},k.write=function(I,D,P){for(var v,w,S=P,b=0;b<I.length;++b)(v=I.charCodeAt(b))<128?D[P++]=v:v<2048?(D[P++]=v>>6|192,D[P++]=63&v|128):55296==(64512&v)&&56320==(64512&(w=I.charCodeAt(b+1)))?(++b,D[P++]=(v=65536+((1023&v)<<10)+(1023&w))>>18|240,D[P++]=v>>12&63|128,D[P++]=v>>6&63|128,D[P++]=63&v|128):(D[P++]=v>>12|224,D[P++]=v>>6&63|128,D[P++]=63&v|128);return P-S}},4819:(ye,M,k)=>{"use strict";k.r(M),k.d(M,{flatbuffers:()=>I});var I={SIZEOF_SHORT:2,SIZEOF_INT:4,FILE_IDENTIFIER_LENGTH:4,SIZE_PREFIX_LENGTH:4,Encoding:{UTF8_BYTES:1,UTF16_STRING:2}};I.int32=new Int32Array(2),I.float32=new Float32Array(I.int32.buffer),I.float64=new Float64Array(I.int32.buffer),I.isLittleEndian=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0],I.Long=function(D,P){this.low=0|D,this.high=0|P},I.Long.create=function(D,P){return 0==D&&0==P?I.Long.ZERO:new I.Long(D,P)},I.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},I.Long.prototype.equals=function(D){return this.low==D.low&&this.high==D.high},I.Long.ZERO=new I.Long(0,0),I.Builder=function(D){if(D)P=D;else var P=1024;this.bb=I.ByteBuffer.allocate(P),this.space=P,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},I.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},I.Builder.prototype.forceDefaults=function(D){this.force_defaults=D},I.Builder.prototype.dataBuffer=function(){return this.bb},I.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},I.Builder.prototype.prep=function(D,P){D>this.minalign&&(this.minalign=D);for(var v=1+~(this.bb.capacity()-this.space+P)&D-1;this.space<v+D+P;){var w=this.bb.capacity();this.bb=I.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-w}this.pad(v)},I.Builder.prototype.pad=function(D){for(var P=0;P<D;P++)this.bb.writeInt8(--this.space,0)},I.Builder.prototype.writeInt8=function(D){this.bb.writeInt8(this.space-=1,D)},I.Builder.prototype.writeInt16=function(D){this.bb.writeInt16(this.space-=2,D)},I.Builder.prototype.writeInt32=function(D){this.bb.writeInt32(this.space-=4,D)},I.Builder.prototype.writeInt64=function(D){this.bb.writeInt64(this.space-=8,D)},I.Builder.prototype.writeFloat32=function(D){this.bb.writeFloat32(this.space-=4,D)},I.Builder.prototype.writeFloat64=function(D){this.bb.writeFloat64(this.space-=8,D)},I.Builder.prototype.addInt8=function(D){this.prep(1,0),this.writeInt8(D)},I.Builder.prototype.addInt16=function(D){this.prep(2,0),this.writeInt16(D)},I.Builder.prototype.addInt32=function(D){this.prep(4,0),this.writeInt32(D)},I.Builder.prototype.addInt64=function(D){this.prep(8,0),this.writeInt64(D)},I.Builder.prototype.addFloat32=function(D){this.prep(4,0),this.writeFloat32(D)},I.Builder.prototype.addFloat64=function(D){this.prep(8,0),this.writeFloat64(D)},I.Builder.prototype.addFieldInt8=function(D,P,v){(this.force_defaults||P!=v)&&(this.addInt8(P),this.slot(D))},I.Builder.prototype.addFieldInt16=function(D,P,v){(this.force_defaults||P!=v)&&(this.addInt16(P),this.slot(D))},I.Builder.prototype.addFieldInt32=function(D,P,v){(this.force_defaults||P!=v)&&(this.addInt32(P),this.slot(D))},I.Builder.prototype.addFieldInt64=function(D,P,v){!this.force_defaults&&P.equals(v)||(this.addInt64(P),this.slot(D))},I.Builder.prototype.addFieldFloat32=function(D,P,v){(this.force_defaults||P!=v)&&(this.addFloat32(P),this.slot(D))},I.Builder.prototype.addFieldFloat64=function(D,P,v){(this.force_defaults||P!=v)&&(this.addFloat64(P),this.slot(D))},I.Builder.prototype.addFieldOffset=function(D,P,v){(this.force_defaults||P!=v)&&(this.addOffset(P),this.slot(D))},I.Builder.prototype.addFieldStruct=function(D,P,v){P!=v&&(this.nested(P),this.slot(D))},I.Builder.prototype.nested=function(D){if(D!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},I.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},I.Builder.prototype.slot=function(D){this.vtable[D]=this.offset()},I.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},I.Builder.growByteBuffer=function(D){var P=D.capacity();if(3221225472&P)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var v=P<<1,w=I.ByteBuffer.allocate(v);return w.setPosition(v-P),w.bytes().set(D.bytes(),v-P),w},I.Builder.prototype.addOffset=function(D){this.prep(I.SIZEOF_INT,0),this.writeInt32(this.offset()-D+I.SIZEOF_INT)},I.Builder.prototype.startObject=function(D){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=D;for(var P=0;P<D;P++)this.vtable[P]=0;this.isNested=!0,this.object_start=this.offset()},I.Builder.prototype.endObject=function(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var D=this.offset(),P=this.vtable_in_use-1;P>=0&&0==this.vtable[P];P--);for(var v=P+1;P>=0;P--)this.addInt16(0!=this.vtable[P]?D-this.vtable[P]:0);this.addInt16(D-this.object_start);var w=(v+2)*I.SIZEOF_SHORT;this.addInt16(w);var S=0,b=this.space;e:for(P=0;P<this.vtables.length;P++){var p=this.bb.capacity()-this.vtables[P];if(w==this.bb.readInt16(p)){for(var u=I.SIZEOF_SHORT;u<w;u+=I.SIZEOF_SHORT)if(this.bb.readInt16(b+u)!=this.bb.readInt16(p+u))continue e;S=this.vtables[P];break}}return S?(this.space=this.bb.capacity()-D,this.bb.writeInt32(this.space,S-D)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-D,this.offset()-D)),this.isNested=!1,D},I.Builder.prototype.finish=function(D,P,v){var w=v?I.SIZE_PREFIX_LENGTH:0;if(P){var S=P;if(this.prep(this.minalign,I.SIZEOF_INT+I.FILE_IDENTIFIER_LENGTH+w),S.length!=I.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+I.FILE_IDENTIFIER_LENGTH);for(var b=I.FILE_IDENTIFIER_LENGTH-1;b>=0;b--)this.writeInt8(S.charCodeAt(b))}this.prep(this.minalign,I.SIZEOF_INT+w),this.addOffset(D),w&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},I.Builder.prototype.finishSizePrefixed=function(D,P){this.finish(D,P,!0)},I.Builder.prototype.requiredField=function(D,P){var v=this.bb.capacity()-D,w=v-this.bb.readInt32(v);if(0==this.bb.readInt16(w+P))throw new Error("FlatBuffers: field "+P+" must be set")},I.Builder.prototype.startVector=function(D,P,v){this.notNested(),this.vector_num_elems=P,this.prep(I.SIZEOF_INT,D*P),this.prep(v,D*P)},I.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},I.Builder.prototype.createString=function(D){if(D instanceof Uint8Array)var P=D;else{P=[];for(var v=0;v<D.length;){var w,S=D.charCodeAt(v++);(w=S<55296||S>=56320?S:(S<<10)+D.charCodeAt(v++)+-56613888)<128?P.push(w):(w<2048?P.push(w>>6&31|192):(w<65536?P.push(w>>12&15|224):P.push(w>>18&7|240,w>>12&63|128),P.push(w>>6&63|128)),P.push(63&w|128))}}this.addInt8(0),this.startVector(1,P.length,1),this.bb.setPosition(this.space-=P.length),v=0;for(var b=this.space,p=this.bb.bytes();v<P.length;v++)p[b++]=P[v];return this.endVector()},I.Builder.prototype.createLong=function(D,P){return I.Long.create(D,P)},I.ByteBuffer=function(D){this.bytes_=D,this.position_=0},I.ByteBuffer.allocate=function(D){return new I.ByteBuffer(new Uint8Array(D))},I.ByteBuffer.prototype.clear=function(){this.position_=0},I.ByteBuffer.prototype.bytes=function(){return this.bytes_},I.ByteBuffer.prototype.position=function(){return this.position_},I.ByteBuffer.prototype.setPosition=function(D){this.position_=D},I.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},I.ByteBuffer.prototype.readInt8=function(D){return this.readUint8(D)<<24>>24},I.ByteBuffer.prototype.readUint8=function(D){return this.bytes_[D]},I.ByteBuffer.prototype.readInt16=function(D){return this.readUint16(D)<<16>>16},I.ByteBuffer.prototype.readUint16=function(D){return this.bytes_[D]|this.bytes_[D+1]<<8},I.ByteBuffer.prototype.readInt32=function(D){return this.bytes_[D]|this.bytes_[D+1]<<8|this.bytes_[D+2]<<16|this.bytes_[D+3]<<24},I.ByteBuffer.prototype.readUint32=function(D){return this.readInt32(D)>>>0},I.ByteBuffer.prototype.readInt64=function(D){return new I.Long(this.readInt32(D),this.readInt32(D+4))},I.ByteBuffer.prototype.readUint64=function(D){return new I.Long(this.readUint32(D),this.readUint32(D+4))},I.ByteBuffer.prototype.readFloat32=function(D){return I.int32[0]=this.readInt32(D),I.float32[0]},I.ByteBuffer.prototype.readFloat64=function(D){return I.int32[I.isLittleEndian?0:1]=this.readInt32(D),I.int32[I.isLittleEndian?1:0]=this.readInt32(D+4),I.float64[0]},I.ByteBuffer.prototype.writeInt8=function(D,P){this.bytes_[D]=P},I.ByteBuffer.prototype.writeUint8=function(D,P){this.bytes_[D]=P},I.ByteBuffer.prototype.writeInt16=function(D,P){this.bytes_[D]=P,this.bytes_[D+1]=P>>8},I.ByteBuffer.prototype.writeUint16=function(D,P){this.bytes_[D]=P,this.bytes_[D+1]=P>>8},I.ByteBuffer.prototype.writeInt32=function(D,P){this.bytes_[D]=P,this.bytes_[D+1]=P>>8,this.bytes_[D+2]=P>>16,this.bytes_[D+3]=P>>24},I.ByteBuffer.prototype.writeUint32=function(D,P){this.bytes_[D]=P,this.bytes_[D+1]=P>>8,this.bytes_[D+2]=P>>16,this.bytes_[D+3]=P>>24},I.ByteBuffer.prototype.writeInt64=function(D,P){this.writeInt32(D,P.low),this.writeInt32(D+4,P.high)},I.ByteBuffer.prototype.writeUint64=function(D,P){this.writeUint32(D,P.low),this.writeUint32(D+4,P.high)},I.ByteBuffer.prototype.writeFloat32=function(D,P){I.float32[0]=P,this.writeInt32(D,I.int32[0])},I.ByteBuffer.prototype.writeFloat64=function(D,P){I.float64[0]=P,this.writeInt32(D,I.int32[I.isLittleEndian?0:1]),this.writeInt32(D+4,I.int32[I.isLittleEndian?1:0])},I.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+I.SIZEOF_INT+I.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var D="",P=0;P<I.FILE_IDENTIFIER_LENGTH;P++)D+=String.fromCharCode(this.readInt8(this.position_+I.SIZEOF_INT+P));return D},I.ByteBuffer.prototype.__offset=function(D,P){var v=D-this.readInt32(D);return P<this.readInt16(v)?this.readInt16(v+P):0},I.ByteBuffer.prototype.__union=function(D,P){return D.bb_pos=P+this.readInt32(P),D.bb=this,D},I.ByteBuffer.prototype.__string=function(D,P){D+=this.readInt32(D);var v=this.readInt32(D),w="",S=0;if(D+=I.SIZEOF_INT,P===I.Encoding.UTF8_BYTES)return this.bytes_.subarray(D,D+v);for(;S<v;){var b,p=this.readUint8(D+S++);if(p<192)b=p;else{var u=this.readUint8(D+S++);if(p<224)b=(31&p)<<6|63&u;else{var o=this.readUint8(D+S++);b=p<240?(15&p)<<12|(63&u)<<6|63&o:(7&p)<<18|(63&u)<<12|(63&o)<<6|63&this.readUint8(D+S++)}}b<65536?w+=String.fromCharCode(b):(b-=65536,w+=String.fromCharCode(55296+(b>>10),56320+(1023&b)))}return w},I.ByteBuffer.prototype.__indirect=function(D){return D+this.readInt32(D)},I.ByteBuffer.prototype.__vector=function(D){return D+this.readInt32(D)+I.SIZEOF_INT},I.ByteBuffer.prototype.__vector_len=function(D){return this.readInt32(D+this.readInt32(D))},I.ByteBuffer.prototype.__has_identifier=function(D){if(D.length!=I.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+I.FILE_IDENTIFIER_LENGTH);for(var P=0;P<I.FILE_IDENTIFIER_LENGTH;P++)if(D.charCodeAt(P)!=this.readInt8(this.position_+I.SIZEOF_INT+P))return!1;return!0},I.ByteBuffer.prototype.createLong=function(D,P){return I.Long.create(D,P)}},3442:(ye,M)=>{"use strict";M.__esModule=!0;var k=function(){function I(D){if(!D)throw new TypeError("Invalid argument; `value` has no value.");this.value=I.EMPTY,D&&I.isGuid(D)&&(this.value=D)}return I.isGuid=function(D){var P=D.toString();return D&&(D instanceof I||I.validator.test(P))},I.create=function(){return new I([I.gen(2),I.gen(1),I.gen(1),I.gen(1),I.gen(3)].join("-"))},I.createEmpty=function(){return new I("emptyguid")},I.parse=function(D){return new I(D)},I.raw=function(){return[I.gen(2),I.gen(1),I.gen(1),I.gen(1),I.gen(3)].join("-")},I.gen=function(D){for(var P="",v=0;v<D;v++)P+=(65536*(1+Math.random())|0).toString(16).substring(1);return P},I.prototype.equals=function(D){return I.isGuid(D)&&this.value===D.toString()},I.prototype.isEmpty=function(){return this.value===I.EMPTY},I.prototype.toString=function(){return this.value},I.prototype.toJSON=function(){return{value:this.value}},I.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),I.EMPTY="00000000-0000-0000-0000-000000000000",I}();M.Guid=k},3720:ye=>{ye.exports=k;var M=null;try{M=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(U){}function k(U,ne,de){this.low=0|U,this.high=0|ne,this.unsigned=!!de}function I(U){return!0===(U&&U.__isLong__)}Object.defineProperty(k.prototype,"__isLong__",{value:!0}),k.isLong=I;var D={},P={};function v(U,ne){var de,De,ue;return ne?(ue=0<=(U>>>=0)&&U<256)&&(De=P[U])?De:(de=S(U,(0|U)<0?-1:0,!0),ue&&(P[U]=de),de):(ue=-128<=(U|=0)&&U<128)&&(De=D[U])?De:(de=S(U,U<0?-1:0,!1),ue&&(D[U]=de),de)}function w(U,ne){if(isNaN(U))return ne?E:x;if(ne){if(U<0)return E;if(U>=d)return H}else{if(U<=-f)return q;if(U+1>=f)return F}return U<0?w(-U,ne).neg():S(U%o|0,U/o|0,ne)}function S(U,ne,de){return new k(U,ne,de)}k.fromInt=v,k.fromNumber=w,k.fromBits=S;var b=Math.pow;function p(U,ne,de){if(0===U.length)throw Error("empty string");if("NaN"===U||"Infinity"===U||"+Infinity"===U||"-Infinity"===U)return x;if("number"==typeof ne?(de=ne,ne=!1):ne=!!ne,(de=de||10)<2||36<de)throw RangeError("radix");var De;if((De=U.indexOf("-"))>0)throw Error("interior hyphen");if(0===De)return p(U.substring(1),ne,de).neg();for(var ue=w(b(de,8)),Ae=x,Se=0;Se<U.length;Se+=8){var he=Math.min(8,U.length-Se),_e=parseInt(U.substring(Se,Se+he),de);if(he<8){var Xe=w(b(de,he));Ae=Ae.mul(Xe).add(w(_e))}else Ae=(Ae=Ae.mul(ue)).add(w(_e))}return Ae.unsigned=ne,Ae}function u(U,ne){return"number"==typeof U?w(U,ne):"string"==typeof U?p(U,ne):S(U.low,U.high,"boolean"==typeof ne?ne:U.unsigned)}k.fromString=p,k.fromValue=u;var o=4294967296,d=o*o,f=d/2,y=v(1<<24),x=v(0);k.ZERO=x;var E=v(0,!0);k.UZERO=E;var R=v(1);k.ONE=R;var N=v(1,!0);k.UONE=N;var L=v(-1);k.NEG_ONE=L;var F=S(-1,2147483647,!1);k.MAX_VALUE=F;var H=S(-1,-1,!0);k.MAX_UNSIGNED_VALUE=H;var q=S(0,-2147483648,!1);k.MIN_VALUE=q;var W=k.prototype;W.toInt=function(){return this.unsigned?this.low>>>0:this.low},W.toNumber=function(){return this.unsigned?(this.high>>>0)*o+(this.low>>>0):this.high*o+(this.low>>>0)},W.toString=function(U){if((U=U||10)<2||36<U)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(q)){var ne=w(U),de=this.div(ne),De=de.mul(ne).sub(this);return de.toString(U)+De.toInt().toString(U)}return"-"+this.neg().toString(U)}for(var ue=w(b(U,6),this.unsigned),Ae=this,Se="";;){var he=Ae.div(ue),_e=(Ae.sub(he.mul(ue)).toInt()>>>0).toString(U);if((Ae=he).isZero())return _e+Se;for(;_e.length<6;)_e="0"+_e;Se=""+_e+Se}},W.getHighBits=function(){return this.high},W.getHighBitsUnsigned=function(){return this.high>>>0},W.getLowBits=function(){return this.low},W.getLowBitsUnsigned=function(){return this.low>>>0},W.getNumBitsAbs=function(){if(this.isNegative())return this.eq(q)?64:this.neg().getNumBitsAbs();for(var U=0!=this.high?this.high:this.low,ne=31;ne>0&&0==(U&1<<ne);ne--);return 0!=this.high?ne+33:ne+1},W.isZero=function(){return 0===this.high&&0===this.low},W.eqz=W.isZero,W.isNegative=function(){return!this.unsigned&&this.high<0},W.isPositive=function(){return this.unsigned||this.high>=0},W.isOdd=function(){return 1==(1&this.low)},W.isEven=function(){return 0==(1&this.low)},W.equals=function(U){return I(U)||(U=u(U)),(this.unsigned===U.unsigned||this.high>>>31!=1||U.high>>>31!=1)&&this.high===U.high&&this.low===U.low},W.eq=W.equals,W.notEquals=function(U){return!this.eq(U)},W.neq=W.notEquals,W.ne=W.notEquals,W.lessThan=function(U){return this.comp(U)<0},W.lt=W.lessThan,W.lessThanOrEqual=function(U){return this.comp(U)<=0},W.lte=W.lessThanOrEqual,W.le=W.lessThanOrEqual,W.greaterThan=function(U){return this.comp(U)>0},W.gt=W.greaterThan,W.greaterThanOrEqual=function(U){return this.comp(U)>=0},W.gte=W.greaterThanOrEqual,W.ge=W.greaterThanOrEqual,W.compare=function(U){if(I(U)||(U=u(U)),this.eq(U))return 0;var ne=this.isNegative(),de=U.isNegative();return ne&&!de?-1:!ne&&de?1:this.unsigned?U.high>>>0>this.high>>>0||U.high===this.high&&U.low>>>0>this.low>>>0?-1:1:this.sub(U).isNegative()?-1:1},W.comp=W.compare,W.negate=function(){return!this.unsigned&&this.eq(q)?q:this.not().add(R)},W.neg=W.negate,W.add=function(U){I(U)||(U=u(U));var _e=0,Xe=0,We=0,mt=0;return We+=(mt+=(65535&this.low)+(65535&U.low))>>>16,Xe+=(We+=(this.low>>>16)+(U.low>>>16))>>>16,_e+=(Xe+=(65535&this.high)+(65535&U.high))>>>16,_e+=(this.high>>>16)+(U.high>>>16),S((We&=65535)<<16|(mt&=65535),(_e&=65535)<<16|(Xe&=65535),this.unsigned)},W.subtract=function(U){return I(U)||(U=u(U)),this.add(U.neg())},W.sub=W.subtract,W.multiply=function(U){if(this.isZero())return x;if(I(U)||(U=u(U)),M)return S(M.mul(this.low,this.high,U.low,U.high),M.get_high(),this.unsigned);if(U.isZero())return x;if(this.eq(q))return U.isOdd()?q:x;if(U.eq(q))return this.isOdd()?q:x;if(this.isNegative())return U.isNegative()?this.neg().mul(U.neg()):this.neg().mul(U).neg();if(U.isNegative())return this.mul(U.neg()).neg();if(this.lt(y)&&U.lt(y))return w(this.toNumber()*U.toNumber(),this.unsigned);var de=65535&this.high,De=this.low>>>16,ue=65535&this.low,Se=65535&U.high,he=U.low>>>16,_e=65535&U.low,Xe=0,We=0,mt=0,Zt=0;return mt+=(Zt+=ue*_e)>>>16,We+=(mt+=De*_e)>>>16,mt&=65535,We+=(mt+=ue*he)>>>16,Xe+=(We+=de*_e)>>>16,We&=65535,Xe+=(We+=De*he)>>>16,We&=65535,Xe+=(We+=ue*Se)>>>16,Xe+=(this.high>>>16)*_e+de*he+De*Se+ue*(U.high>>>16),S((mt&=65535)<<16|(Zt&=65535),(Xe&=65535)<<16|(We&=65535),this.unsigned)},W.mul=W.multiply,W.divide=function(U){if(I(U)||(U=u(U)),U.isZero())throw Error("division by zero");var ne,de,De;if(M)return this.unsigned||-2147483648!==this.high||-1!==U.low||-1!==U.high?S((this.unsigned?M.div_u:M.div_s)(this.low,this.high,U.low,U.high),M.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?E:x;if(this.unsigned){if(U.unsigned||(U=U.toUnsigned()),U.gt(this))return E;if(U.gt(this.shru(1)))return N;De=E}else{if(this.eq(q))return U.eq(R)||U.eq(L)?q:U.eq(q)?R:(ne=this.shr(1).div(U).shl(1)).eq(x)?U.isNegative()?R:L:(de=this.sub(U.mul(ne)),De=ne.add(de.div(U)));if(U.eq(q))return this.unsigned?E:x;if(this.isNegative())return U.isNegative()?this.neg().div(U.neg()):this.neg().div(U).neg();if(U.isNegative())return this.div(U.neg()).neg();De=x}for(de=this;de.gte(U);){ne=Math.max(1,Math.floor(de.toNumber()/U.toNumber()));for(var ue=Math.ceil(Math.log(ne)/Math.LN2),Ae=ue<=48?1:b(2,ue-48),Se=w(ne),he=Se.mul(U);he.isNegative()||he.gt(de);)he=(Se=w(ne-=Ae,this.unsigned)).mul(U);Se.isZero()&&(Se=R),De=De.add(Se),de=de.sub(he)}return De},W.div=W.divide,W.modulo=function(U){return I(U)||(U=u(U)),M?S((this.unsigned?M.rem_u:M.rem_s)(this.low,this.high,U.low,U.high),M.get_high(),this.unsigned):this.sub(this.div(U).mul(U))},W.mod=W.modulo,W.rem=W.modulo,W.not=function(){return S(~this.low,~this.high,this.unsigned)},W.and=function(U){return I(U)||(U=u(U)),S(this.low&U.low,this.high&U.high,this.unsigned)},W.or=function(U){return I(U)||(U=u(U)),S(this.low|U.low,this.high|U.high,this.unsigned)},W.xor=function(U){return I(U)||(U=u(U)),S(this.low^U.low,this.high^U.high,this.unsigned)},W.shiftLeft=function(U){return I(U)&&(U=U.toInt()),0==(U&=63)?this:U<32?S(this.low<<U,this.high<<U|this.low>>>32-U,this.unsigned):S(0,this.low<<U-32,this.unsigned)},W.shl=W.shiftLeft,W.shiftRight=function(U){return I(U)&&(U=U.toInt()),0==(U&=63)?this:U<32?S(this.low>>>U|this.high<<32-U,this.high>>U,this.unsigned):S(this.high>>U-32,this.high>=0?0:-1,this.unsigned)},W.shr=W.shiftRight,W.shiftRightUnsigned=function(U){if(I(U)&&(U=U.toInt()),0==(U&=63))return this;var ne=this.high;return U<32?S(this.low>>>U|ne<<32-U,ne>>>U,this.unsigned):S(32===U?ne:ne>>>U-32,0,this.unsigned)},W.shru=W.shiftRightUnsigned,W.shr_u=W.shiftRightUnsigned,W.toSigned=function(){return this.unsigned?S(this.low,this.high,!1):this},W.toUnsigned=function(){return this.unsigned?this:S(this.low,this.high,!0)},W.toBytes=function(U){return U?this.toBytesLE():this.toBytesBE()},W.toBytesLE=function(){var U=this.high,ne=this.low;return[255&ne,ne>>>8&255,ne>>>16&255,ne>>>24,255&U,U>>>8&255,U>>>16&255,U>>>24]},W.toBytesBE=function(){var U=this.high,ne=this.low;return[U>>>24,U>>>16&255,U>>>8&255,255&U,ne>>>24,ne>>>16&255,ne>>>8&255,255&ne]},k.fromBytes=function(U,ne,de){return de?k.fromBytesLE(U,ne):k.fromBytesBE(U,ne)},k.fromBytesLE=function(U,ne){return new k(U[0]|U[1]<<8|U[2]<<16|U[3]<<24,U[4]|U[5]<<8|U[6]<<16|U[7]<<24,ne)},k.fromBytesBE=function(U,ne){return new k(U[4]<<24|U[5]<<16|U[6]<<8|U[7],U[0]<<24|U[1]<<16|U[2]<<8|U[3],ne)}},1446:(ye,M,k)=>{"use strict";var I,D,P,v=k(2100),w=v.Reader,S=v.Writer,b=v.util,p=v.roots.default||(v.roots.default={});p.onnx=((P={}).Version=(I={},(D=Object.create(I))[I[0]="_START_VERSION"]=0,D[I[1]="IR_VERSION_2017_10_10"]=1,D[I[2]="IR_VERSION_2017_10_30"]=2,D[I[3]="IR_VERSION_2017_11_3"]=3,D[I[4]="IR_VERSION_2019_1_22"]=4,D[I[5]="IR_VERSION"]=5,D),P.AttributeProto=function(){function u(o){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],o)for(var d=Object.keys(o),f=0;f<d.length;++f)null!=o[d[f]]&&(this[d[f]]=o[d[f]])}return u.prototype.name="",u.prototype.refAttrName="",u.prototype.docString="",u.prototype.type=0,u.prototype.f=0,u.prototype.i=b.Long?b.Long.fromBits(0,0,!1):0,u.prototype.s=b.newBuffer([]),u.prototype.t=null,u.prototype.g=null,u.prototype.floats=b.emptyArray,u.prototype.ints=b.emptyArray,u.prototype.strings=b.emptyArray,u.prototype.tensors=b.emptyArray,u.prototype.graphs=b.emptyArray,u.create=function(o){return new u(o)},u.encode=function(o,d){if(d||(d=S.create()),null!=o.name&&o.hasOwnProperty("name")&&d.uint32(10).string(o.name),null!=o.f&&o.hasOwnProperty("f")&&d.uint32(21).float(o.f),null!=o.i&&o.hasOwnProperty("i")&&d.uint32(24).int64(o.i),null!=o.s&&o.hasOwnProperty("s")&&d.uint32(34).bytes(o.s),null!=o.t&&o.hasOwnProperty("t")&&p.onnx.TensorProto.encode(o.t,d.uint32(42).fork()).ldelim(),null!=o.g&&o.hasOwnProperty("g")&&p.onnx.GraphProto.encode(o.g,d.uint32(50).fork()).ldelim(),null!=o.floats&&o.floats.length){d.uint32(58).fork();for(var f=0;f<o.floats.length;++f)d.float(o.floats[f]);d.ldelim()}if(null!=o.ints&&o.ints.length){for(d.uint32(66).fork(),f=0;f<o.ints.length;++f)d.int64(o.ints[f]);d.ldelim()}if(null!=o.strings&&o.strings.length)for(f=0;f<o.strings.length;++f)d.uint32(74).bytes(o.strings[f]);if(null!=o.tensors&&o.tensors.length)for(f=0;f<o.tensors.length;++f)p.onnx.TensorProto.encode(o.tensors[f],d.uint32(82).fork()).ldelim();if(null!=o.graphs&&o.graphs.length)for(f=0;f<o.graphs.length;++f)p.onnx.GraphProto.encode(o.graphs[f],d.uint32(90).fork()).ldelim();return null!=o.docString&&o.hasOwnProperty("docString")&&d.uint32(106).string(o.docString),null!=o.type&&o.hasOwnProperty("type")&&d.uint32(160).int32(o.type),null!=o.refAttrName&&o.hasOwnProperty("refAttrName")&&d.uint32(170).string(o.refAttrName),d},u.encodeDelimited=function(o,d){return this.encode(o,d).ldelim()},u.decode=function(o,d){o instanceof w||(o=w.create(o));for(var f=void 0===d?o.len:o.pos+d,y=new p.onnx.AttributeProto;o.pos<f;){var x=o.uint32();switch(x>>>3){case 1:y.name=o.string();break;case 21:y.refAttrName=o.string();break;case 13:y.docString=o.string();break;case 20:y.type=o.int32();break;case 2:y.f=o.float();break;case 3:y.i=o.int64();break;case 4:y.s=o.bytes();break;case 5:y.t=p.onnx.TensorProto.decode(o,o.uint32());break;case 6:y.g=p.onnx.GraphProto.decode(o,o.uint32());break;case 7:if(y.floats&&y.floats.length||(y.floats=[]),2==(7&x))for(var E=o.uint32()+o.pos;o.pos<E;)y.floats.push(o.float());else y.floats.push(o.float());break;case 8:if(y.ints&&y.ints.length||(y.ints=[]),2==(7&x))for(E=o.uint32()+o.pos;o.pos<E;)y.ints.push(o.int64());else y.ints.push(o.int64());break;case 9:y.strings&&y.strings.length||(y.strings=[]),y.strings.push(o.bytes());break;case 10:y.tensors&&y.tensors.length||(y.tensors=[]),y.tensors.push(p.onnx.TensorProto.decode(o,o.uint32()));break;case 11:y.graphs&&y.graphs.length||(y.graphs=[]),y.graphs.push(p.onnx.GraphProto.decode(o,o.uint32()));break;default:o.skipType(7&x)}}return y},u.decodeDelimited=function(o){return o instanceof w||(o=new w(o)),this.decode(o,o.uint32())},u.verify=function(o){if("object"!=typeof o||null===o)return"object expected";if(null!=o.name&&o.hasOwnProperty("name")&&!b.isString(o.name))return"name: string expected";if(null!=o.refAttrName&&o.hasOwnProperty("refAttrName")&&!b.isString(o.refAttrName))return"refAttrName: string expected";if(null!=o.docString&&o.hasOwnProperty("docString")&&!b.isString(o.docString))return"docString: string expected";if(null!=o.type&&o.hasOwnProperty("type"))switch(o.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:}if(null!=o.f&&o.hasOwnProperty("f")&&"number"!=typeof o.f)return"f: number expected";if(null!=o.i&&o.hasOwnProperty("i")&&!(b.isInteger(o.i)||o.i&&b.isInteger(o.i.low)&&b.isInteger(o.i.high)))return"i: integer|Long expected";if(null!=o.s&&o.hasOwnProperty("s")&&!(o.s&&"number"==typeof o.s.length||b.isString(o.s)))return"s: buffer expected";if(null!=o.t&&o.hasOwnProperty("t")&&(f=p.onnx.TensorProto.verify(o.t)))return"t."+f;if(null!=o.g&&o.hasOwnProperty("g")&&(f=p.onnx.GraphProto.verify(o.g)))return"g."+f;if(null!=o.floats&&o.hasOwnProperty("floats")){if(!Array.isArray(o.floats))return"floats: array expected";for(var d=0;d<o.floats.length;++d)if("number"!=typeof o.floats[d])return"floats: number[] expected"}if(null!=o.ints&&o.hasOwnProperty("ints")){if(!Array.isArray(o.ints))return"ints: array expected";for(d=0;d<o.ints.length;++d)if(!(b.isInteger(o.ints[d])||o.ints[d]&&b.isInteger(o.ints[d].low)&&b.isInteger(o.ints[d].high)))return"ints: integer|Long[] expected"}if(null!=o.strings&&o.hasOwnProperty("strings")){if(!Array.isArray(o.strings))return"strings: array expected";for(d=0;d<o.strings.length;++d)if(!(o.strings[d]&&"number"==typeof o.strings[d].length||b.isString(o.strings[d])))return"strings: buffer[] expected"}if(null!=o.tensors&&o.hasOwnProperty("tensors")){if(!Array.isArray(o.tensors))return"tensors: array expected";for(d=0;d<o.tensors.length;++d)if(f=p.onnx.TensorProto.verify(o.tensors[d]))return"tensors."+f}if(null!=o.graphs&&o.hasOwnProperty("graphs")){if(!Array.isArray(o.graphs))return"graphs: array expected";for(d=0;d<o.graphs.length;++d){var f;if(f=p.onnx.GraphProto.verify(o.graphs[d]))return"graphs."+f}}return null},u.fromObject=function(o){if(o instanceof p.onnx.AttributeProto)return o;var d=new p.onnx.AttributeProto;switch(null!=o.name&&(d.name=String(o.name)),null!=o.refAttrName&&(d.refAttrName=String(o.refAttrName)),null!=o.docString&&(d.docString=String(o.docString)),o.type){case"UNDEFINED":case 0:d.type=0;break;case"FLOAT":case 1:d.type=1;break;case"INT":case 2:d.type=2;break;case"STRING":case 3:d.type=3;break;case"TENSOR":case 4:d.type=4;break;case"GRAPH":case 5:d.type=5;break;case"FLOATS":case 6:d.type=6;break;case"INTS":case 7:d.type=7;break;case"STRINGS":case 8:d.type=8;break;case"TENSORS":case 9:d.type=9;break;case"GRAPHS":case 10:d.type=10}if(null!=o.f&&(d.f=Number(o.f)),null!=o.i&&(b.Long?(d.i=b.Long.fromValue(o.i)).unsigned=!1:"string"==typeof o.i?d.i=parseInt(o.i,10):"number"==typeof o.i?d.i=o.i:"object"==typeof o.i&&(d.i=new b.LongBits(o.i.low>>>0,o.i.high>>>0).toNumber())),null!=o.s&&("string"==typeof o.s?b.base64.decode(o.s,d.s=b.newBuffer(b.base64.length(o.s)),0):o.s.length&&(d.s=o.s)),null!=o.t){if("object"!=typeof o.t)throw TypeError(".onnx.AttributeProto.t: object expected");d.t=p.onnx.TensorProto.fromObject(o.t)}if(null!=o.g){if("object"!=typeof o.g)throw TypeError(".onnx.AttributeProto.g: object expected");d.g=p.onnx.GraphProto.fromObject(o.g)}if(o.floats){if(!Array.isArray(o.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");d.floats=[];for(var f=0;f<o.floats.length;++f)d.floats[f]=Number(o.floats[f])}if(o.ints){if(!Array.isArray(o.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");for(d.ints=[],f=0;f<o.ints.length;++f)b.Long?(d.ints[f]=b.Long.fromValue(o.ints[f])).unsigned=!1:"string"==typeof o.ints[f]?d.ints[f]=parseInt(o.ints[f],10):"number"==typeof o.ints[f]?d.ints[f]=o.ints[f]:"object"==typeof o.ints[f]&&(d.ints[f]=new b.LongBits(o.ints[f].low>>>0,o.ints[f].high>>>0).toNumber())}if(o.strings){if(!Array.isArray(o.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");for(d.strings=[],f=0;f<o.strings.length;++f)"string"==typeof o.strings[f]?b.base64.decode(o.strings[f],d.strings[f]=b.newBuffer(b.base64.length(o.strings[f])),0):o.strings[f].length&&(d.strings[f]=o.strings[f])}if(o.tensors){if(!Array.isArray(o.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");for(d.tensors=[],f=0;f<o.tensors.length;++f){if("object"!=typeof o.tensors[f])throw TypeError(".onnx.AttributeProto.tensors: object expected");d.tensors[f]=p.onnx.TensorProto.fromObject(o.tensors[f])}}if(o.graphs){if(!Array.isArray(o.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");for(d.graphs=[],f=0;f<o.graphs.length;++f){if("object"!=typeof o.graphs[f])throw TypeError(".onnx.AttributeProto.graphs: object expected");d.graphs[f]=p.onnx.GraphProto.fromObject(o.graphs[f])}}return d},u.toObject=function(o,d){d||(d={});var f={};if((d.arrays||d.defaults)&&(f.floats=[],f.ints=[],f.strings=[],f.tensors=[],f.graphs=[]),d.defaults){if(f.name="",f.f=0,b.Long){var y=new b.Long(0,0,!1);f.i=d.longs===String?y.toString():d.longs===Number?y.toNumber():y}else f.i=d.longs===String?"0":0;d.bytes===String?f.s="":(f.s=[],d.bytes!==Array&&(f.s=b.newBuffer(f.s))),f.t=null,f.g=null,f.docString="",f.type=d.enums===String?"UNDEFINED":0,f.refAttrName=""}if(null!=o.name&&o.hasOwnProperty("name")&&(f.name=o.name),null!=o.f&&o.hasOwnProperty("f")&&(f.f=d.json&&!isFinite(o.f)?String(o.f):o.f),null!=o.i&&o.hasOwnProperty("i")&&(f.i="number"==typeof o.i?d.longs===String?String(o.i):o.i:d.longs===String?b.Long.prototype.toString.call(o.i):d.longs===Number?new b.LongBits(o.i.low>>>0,o.i.high>>>0).toNumber():o.i),null!=o.s&&o.hasOwnProperty("s")&&(f.s=d.bytes===String?b.base64.encode(o.s,0,o.s.length):d.bytes===Array?Array.prototype.slice.call(o.s):o.s),null!=o.t&&o.hasOwnProperty("t")&&(f.t=p.onnx.TensorProto.toObject(o.t,d)),null!=o.g&&o.hasOwnProperty("g")&&(f.g=p.onnx.GraphProto.toObject(o.g,d)),o.floats&&o.floats.length){f.floats=[];for(var x=0;x<o.floats.length;++x)f.floats[x]=d.json&&!isFinite(o.floats[x])?String(o.floats[x]):o.floats[x]}if(o.ints&&o.ints.length)for(f.ints=[],x=0;x<o.ints.length;++x)f.ints[x]="number"==typeof o.ints[x]?d.longs===String?String(o.ints[x]):o.ints[x]:d.longs===String?b.Long.prototype.toString.call(o.ints[x]):d.longs===Number?new b.LongBits(o.ints[x].low>>>0,o.ints[x].high>>>0).toNumber():o.ints[x];if(o.strings&&o.strings.length)for(f.strings=[],x=0;x<o.strings.length;++x)f.strings[x]=d.bytes===String?b.base64.encode(o.strings[x],0,o.strings[x].length):d.bytes===Array?Array.prototype.slice.call(o.strings[x]):o.strings[x];if(o.tensors&&o.tensors.length)for(f.tensors=[],x=0;x<o.tensors.length;++x)f.tensors[x]=p.onnx.TensorProto.toObject(o.tensors[x],d);if(o.graphs&&o.graphs.length)for(f.graphs=[],x=0;x<o.graphs.length;++x)f.graphs[x]=p.onnx.GraphProto.toObject(o.graphs[x],d);return null!=o.docString&&o.hasOwnProperty("docString")&&(f.docString=o.docString),null!=o.type&&o.hasOwnProperty("type")&&(f.type=d.enums===String?p.onnx.AttributeProto.AttributeType[o.type]:o.type),null!=o.refAttrName&&o.hasOwnProperty("refAttrName")&&(f.refAttrName=o.refAttrName),f},u.prototype.toJSON=function(){return this.constructor.toObject(this,v.util.toJSONOptions)},u.AttributeType=(o={},(d=Object.create(o))[o[0]="UNDEFINED"]=0,d[o[1]="FLOAT"]=1,d[o[2]="INT"]=2,d[o[3]="STRING"]=3,d[o[4]="TENSOR"]=4,d[o[5]="GRAPH"]=5,d[o[6]="FLOATS"]=6,d[o[7]="INTS"]=7,d[o[8]="STRINGS"]=8,d[o[9]="TENSORS"]=9,d[o[10]="GRAPHS"]=10,d),u;var o,d}(),P.ValueInfoProto=function(){function u(o){if(o)for(var d=Object.keys(o),f=0;f<d.length;++f)null!=o[d[f]]&&(this[d[f]]=o[d[f]])}return u.prototype.name="",u.prototype.type=null,u.prototype.docString="",u.create=function(o){return new u(o)},u.encode=function(o,d){return d||(d=S.create()),null!=o.name&&o.hasOwnProperty("name")&&d.uint32(10).string(o.name),null!=o.type&&o.hasOwnProperty("type")&&p.onnx.TypeProto.encode(o.type,d.uint32(18).fork()).ldelim(),null!=o.docString&&o.hasOwnProperty("docString")&&d.uint32(26).string(o.docString),d},u.encodeDelimited=function(o,d){return this.encode(o,d).ldelim()},u.decode=function(o,d){o instanceof w||(o=w.create(o));for(var f=void 0===d?o.len:o.pos+d,y=new p.onnx.ValueInfoProto;o.pos<f;){var x=o.uint32();switch(x>>>3){case 1:y.name=o.string();break;case 2:y.type=p.onnx.TypeProto.decode(o,o.uint32());break;case 3:y.docString=o.string();break;default:o.skipType(7&x)}}return y},u.decodeDelimited=function(o){return o instanceof w||(o=new w(o)),this.decode(o,o.uint32())},u.verify=function(o){if("object"!=typeof o||null===o)return"object expected";if(null!=o.name&&o.hasOwnProperty("name")&&!b.isString(o.name))return"name: string expected";if(null!=o.type&&o.hasOwnProperty("type")){var d=p.onnx.TypeProto.verify(o.type);if(d)return"type."+d}return null!=o.docString&&o.hasOwnProperty("docString")&&!b.isString(o.docString)?"docString: string expected":null},u.fromObject=function(o){if(o instanceof p.onnx.ValueInfoProto)return o;var d=new p.onnx.ValueInfoProto;if(null!=o.name&&(d.name=String(o.name)),null!=o.type){if("object"!=typeof o.type)throw TypeError(".onnx.ValueInfoProto.type: object expected");d.type=p.onnx.TypeProto.fromObject(o.type)}return null!=o.docString&&(d.docString=String(o.docString)),d},u.toObject=function(o,d){d||(d={});var f={};return d.defaults&&(f.name="",f.type=null,f.docString=""),null!=o.name&&o.hasOwnProperty("name")&&(f.name=o.name),null!=o.type&&o.hasOwnProperty("type")&&(f.type=p.onnx.TypeProto.toObject(o.type,d)),null!=o.docString&&o.hasOwnProperty("docString")&&(f.docString=o.docString),f},u.prototype.toJSON=function(){return this.constructor.toObject(this,v.util.toJSONOptions)},u}(),P.NodeProto=function(){function u(o){if(this.input=[],this.output=[],this.attribute=[],o)for(var d=Object.keys(o),f=0;f<d.length;++f)null!=o[d[f]]&&(this[d[f]]=o[d[f]])}return u.prototype.input=b.emptyArray,u.prototype.output=b.emptyArray,u.prototype.name="",u.prototype.opType="",u.prototype.domain="",u.prototype.attribute=b.emptyArray,u.prototype.docString="",u.create=function(o){return new u(o)},u.encode=function(o,d){if(d||(d=S.create()),null!=o.input&&o.input.length)for(var f=0;f<o.input.length;++f)d.uint32(10).string(o.input[f]);if(null!=o.output&&o.output.length)for(f=0;f<o.output.length;++f)d.uint32(18).string(o.output[f]);if(null!=o.name&&o.hasOwnProperty("name")&&d.uint32(26).string(o.name),null!=o.opType&&o.hasOwnProperty("opType")&&d.uint32(34).string(o.opType),null!=o.attribute&&o.attribute.length)for(f=0;f<o.attribute.length;++f)p.onnx.AttributeProto.encode(o.attribute[f],d.uint32(42).fork()).ldelim();return null!=o.docString&&o.hasOwnProperty("docString")&&d.uint32(50).string(o.docString),null!=o.domain&&o.hasOwnProperty("domain")&&d.uint32(58).string(o.domain),d},u.encodeDelimited=function(o,d){return this.encode(o,d).ldelim()},u.decode=function(o,d){o instanceof w||(o=w.create(o));for(var f=void 0===d?o.len:o.pos+d,y=new p.onnx.NodeProto;o.pos<f;){var x=o.uint32();switch(x>>>3){case 1:y.input&&y.input.length||(y.input=[]),y.input.push(o.string());break;case 2:y.output&&y.output.length||(y.output=[]),y.output.push(o.string());break;case 3:y.name=o.string();break;case 4:y.opType=o.string();break;case 7:y.domain=o.string();break;case 5:y.attribute&&y.attribute.length||(y.attribute=[]),y.attribute.push(p.onnx.AttributeProto.decode(o,o.uint32()));break;case 6:y.docString=o.string();break;default:o.skipType(7&x)}}return y},u.decodeDelimited=function(o){return o instanceof w||(o=new w(o)),this.decode(o,o.uint32())},u.verify=function(o){if("object"!=typeof o||null===o)return"object expected";if(null!=o.input&&o.hasOwnProperty("input")){if(!Array.isArray(o.input))return"input: array expected";for(var d=0;d<o.input.length;++d)if(!b.isString(o.input[d]))return"input: string[] expected"}if(null!=o.output&&o.hasOwnProperty("output")){if(!Array.isArray(o.output))return"output: array expected";for(d=0;d<o.output.length;++d)if(!b.isString(o.output[d]))return"output: string[] expected"}if(null!=o.name&&o.hasOwnProperty("name")&&!b.isString(o.name))return"name: string expected";if(null!=o.opType&&o.hasOwnProperty("opType")&&!b.isString(o.opType))return"opType: string expected";if(null!=o.domain&&o.hasOwnProperty("domain")&&!b.isString(o.domain))return"domain: string expected";if(null!=o.attribute&&o.hasOwnProperty("attribute")){if(!Array.isArray(o.attribute))return"attribute: array expected";for(d=0;d<o.attribute.length;++d){var f=p.onnx.AttributeProto.verify(o.attribute[d]);if(f)return"attribute."+f}}return null!=o.docString&&o.hasOwnProperty("docString")&&!b.isString(o.docString)?"docString: string expected":null},u.fromObject=function(o){if(o instanceof p.onnx.NodeProto)return o;var d=new p.onnx.NodeProto;if(o.input){if(!Array.isArray(o.input))throw TypeError(".onnx.NodeProto.input: array expected");d.input=[];for(var f=0;f<o.input.length;++f)d.input[f]=String(o.input[f])}if(o.output){if(!Array.isArray(o.output))throw TypeError(".onnx.NodeProto.output: array expected");for(d.output=[],f=0;f<o.output.length;++f)d.output[f]=String(o.output[f])}if(null!=o.name&&(d.name=String(o.name)),null!=o.opType&&(d.opType=String(o.opType)),null!=o.domain&&(d.domain=String(o.domain)),o.attribute){if(!Array.isArray(o.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");for(d.attribute=[],f=0;f<o.attribute.length;++f){if("object"!=typeof o.attribute[f])throw TypeError(".onnx.NodeProto.attribute: object expected");d.attribute[f]=p.onnx.AttributeProto.fromObject(o.attribute[f])}}return null!=o.docString&&(d.docString=String(o.docString)),d},u.toObject=function(o,d){d||(d={});var f={};if((d.arrays||d.defaults)&&(f.input=[],f.output=[],f.attribute=[]),d.defaults&&(f.name="",f.opType="",f.docString="",f.domain=""),o.input&&o.input.length){f.input=[];for(var y=0;y<o.input.length;++y)f.input[y]=o.input[y]}if(o.output&&o.output.length)for(f.output=[],y=0;y<o.output.length;++y)f.output[y]=o.output[y];if(null!=o.name&&o.hasOwnProperty("name")&&(f.name=o.name),null!=o.opType&&o.hasOwnProperty("opType")&&(f.opType=o.opType),o.attribute&&o.attribute.length)for(f.attribute=[],y=0;y<o.attribute.length;++y)f.attribute[y]=p.onnx.AttributeProto.toObject(o.attribute[y],d);return null!=o.docString&&o.hasOwnProperty("docString")&&(f.docString=o.docString),null!=o.domain&&o.hasOwnProperty("domain")&&(f.domain=o.domain),f},u.prototype.toJSON=function(){return this.constructor.toObject(this,v.util.toJSONOptions)},u}(),P.ModelProto=function(){function u(o){if(this.opsetImport=[],this.metadataProps=[],o)for(var d=Object.keys(o),f=0;f<d.length;++f)null!=o[d[f]]&&(this[d[f]]=o[d[f]])}return u.prototype.irVersion=b.Long?b.Long.fromBits(0,0,!1):0,u.prototype.opsetImport=b.emptyArray,u.prototype.producerName="",u.prototype.producerVersion="",u.prototype.domain="",u.prototype.modelVersion=b.Long?b.Long.fromBits(0,0,!1):0,u.prototype.docString="",u.prototype.graph=null,u.prototype.metadataProps=b.emptyArray,u.create=function(o){return new u(o)},u.encode=function(o,d){if(d||(d=S.create()),null!=o.irVersion&&o.hasOwnProperty("irVersion")&&d.uint32(8).int64(o.irVersion),null!=o.producerName&&o.hasOwnProperty("producerName")&&d.uint32(18).string(o.producerName),null!=o.producerVersion&&o.hasOwnProperty("producerVersion")&&d.uint32(26).string(o.producerVersion),null!=o.domain&&o.hasOwnProperty("domain")&&d.uint32(34).string(o.domain),null!=o.modelVersion&&o.hasOwnProperty("modelVersion")&&d.uint32(40).int64(o.modelVersion),null!=o.docString&&o.hasOwnProperty("docString")&&d.uint32(50).string(o.docString),null!=o.graph&&o.hasOwnProperty("graph")&&p.onnx.GraphProto.encode(o.graph,d.uint32(58).fork()).ldelim(),null!=o.opsetImport&&o.opsetImport.length)for(var f=0;f<o.opsetImport.length;++f)p.onnx.OperatorSetIdProto.encode(o.opsetImport[f],d.uint32(66).fork()).ldelim();if(null!=o.metadataProps&&o.metadataProps.length)for(f=0;f<o.metadataProps.length;++f)p.onnx.StringStringEntryProto.encode(o.metadataProps[f],d.uint32(114).fork()).ldelim();return d},u.encodeDelimited=function(o,d){return this.encode(o,d).ldelim()},u.decode=function(o,d){o instanceof w||(o=w.create(o));for(var f=void 0===d?o.len:o.pos+d,y=new p.onnx.ModelProto;o.pos<f;){var x=o.uint32();switch(x>>>3){case 1:y.irVersion=o.int64();break;case 8:y.opsetImport&&y.opsetImport.length||(y.opsetImport=[]),y.opsetImport.push(p.onnx.OperatorSetIdProto.decode(o,o.uint32()));break;case 2:y.producerName=o.string();break;case 3:y.producerVersion=o.string();break;case 4:y.domain=o.string();break;case 5:y.modelVersion=o.int64();break;case 6:y.docString=o.string();break;case 7:y.graph=p.onnx.GraphProto.decode(o,o.uint32());break;case 14:y.metadataProps&&y.metadataProps.length||(y.metadataProps=[]),y.metadataProps.push(p.onnx.StringStringEntryProto.decode(o,o.uint32()));break;default:o.skipType(7&x)}}return y},u.decodeDelimited=function(o){return o instanceof w||(o=new w(o)),this.decode(o,o.uint32())},u.verify=function(o){if("object"!=typeof o||null===o)return"object expected";if(null!=o.irVersion&&o.hasOwnProperty("irVersion")&&!(b.isInteger(o.irVersion)||o.irVersion&&b.isInteger(o.irVersion.low)&&b.isInteger(o.irVersion.high)))return"irVersion: integer|Long expected";if(null!=o.opsetImport&&o.hasOwnProperty("opsetImport")){if(!Array.isArray(o.opsetImport))return"opsetImport: array expected";for(var d=0;d<o.opsetImport.length;++d)if(f=p.onnx.OperatorSetIdProto.verify(o.opsetImport[d]))return"opsetImport."+f}if(null!=o.producerName&&o.hasOwnProperty("producerName")&&!b.isString(o.producerName))return"producerName: string expected";if(null!=o.producerVersion&&o.hasOwnProperty("producerVersion")&&!b.isString(o.producerVersion))return"producerVersion: string expected";if(null!=o.domain&&o.hasOwnProperty("domain")&&!b.isString(o.domain))return"domain: string expected";if(null!=o.modelVersion&&o.hasOwnProperty("modelVersion")&&!(b.isInteger(o.modelVersion)||o.modelVersion&&b.isInteger(o.modelVersion.low)&&b.isInteger(o.modelVersion.high)))return"modelVersion: integer|Long expected";if(null!=o.docString&&o.hasOwnProperty("docString")&&!b.isString(o.docString))return"docString: string expected";if(null!=o.graph&&o.hasOwnProperty("graph")&&(f=p.onnx.GraphProto.verify(o.graph)))return"graph."+f;if(null!=o.metadataProps&&o.hasOwnProperty("metadataProps")){if(!Array.isArray(o.metadataProps))return"metadataProps: array expected";for(d=0;d<o.metadataProps.length;++d){var f;if(f=p.onnx.StringStringEntryProto.verify(o.metadataProps[d]))return"metadataProps."+f}}return null},u.fromObject=function(o){if(o instanceof p.onnx.ModelProto)return o;var d=new p.onnx.ModelProto;if(null!=o.irVersion&&(b.Long?(d.irVersion=b.Long.fromValue(o.irVersion)).unsigned=!1:"string"==typeof o.irVersion?d.irVersion=parseInt(o.irVersion,10):"number"==typeof o.irVersion?d.irVersion=o.irVersion:"object"==typeof o.irVersion&&(d.irVersion=new b.LongBits(o.irVersion.low>>>0,o.irVersion.high>>>0).toNumber())),o.opsetImport){if(!Array.isArray(o.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");d.opsetImport=[];for(var f=0;f<o.opsetImport.length;++f){if("object"!=typeof o.opsetImport[f])throw TypeError(".onnx.ModelProto.opsetImport: object expected");d.opsetImport[f]=p.onnx.OperatorSetIdProto.fromObject(o.opsetImport[f])}}if(null!=o.producerName&&(d.producerName=String(o.producerName)),null!=o.producerVersion&&(d.producerVersion=String(o.producerVersion)),null!=o.domain&&(d.domain=String(o.domain)),null!=o.modelVersion&&(b.Long?(d.modelVersion=b.Long.fromValue(o.modelVersion)).unsigned=!1:"string"==typeof o.modelVersion?d.modelVersion=parseInt(o.modelVersion,10):"number"==typeof o.modelVersion?d.modelVersion=o.modelVersion:"object"==typeof o.modelVersion&&(d.modelVersion=new b.LongBits(o.modelVersion.low>>>0,o.modelVersion.high>>>0).toNumber())),null!=o.docString&&(d.docString=String(o.docString)),null!=o.graph){if("object"!=typeof o.graph)throw TypeError(".onnx.ModelProto.graph: object expected");d.graph=p.onnx.GraphProto.fromObject(o.graph)}if(o.metadataProps){if(!Array.isArray(o.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");for(d.metadataProps=[],f=0;f<o.metadataProps.length;++f){if("object"!=typeof o.metadataProps[f])throw TypeError(".onnx.ModelProto.metadataProps: object expected");d.metadataProps[f]=p.onnx.StringStringEntryProto.fromObject(o.metadataProps[f])}}return d},u.toObject=function(o,d){d||(d={});var f={};if((d.arrays||d.defaults)&&(f.opsetImport=[],f.metadataProps=[]),d.defaults){if(b.Long){var y=new b.Long(0,0,!1);f.irVersion=d.longs===String?y.toString():d.longs===Number?y.toNumber():y}else f.irVersion=d.longs===String?"0":0;f.producerName="",f.producerVersion="",f.domain="",b.Long?(y=new b.Long(0,0,!1),f.modelVersion=d.longs===String?y.toString():d.longs===Number?y.toNumber():y):f.modelVersion=d.longs===String?"0":0,f.docString="",f.graph=null}if(null!=o.irVersion&&o.hasOwnProperty("irVersion")&&(f.irVersion="number"==typeof o.irVersion?d.longs===String?String(o.irVersion):o.irVersion:d.longs===String?b.Long.prototype.toString.call(o.irVersion):d.longs===Number?new b.LongBits(o.irVersion.low>>>0,o.irVersion.high>>>0).toNumber():o.irVersion),null!=o.producerName&&o.hasOwnProperty("producerName")&&(f.producerName=o.producerName),null!=o.producerVersion&&o.hasOwnProperty("producerVersion")&&(f.producerVersion=o.producerVersion),null!=o.domain&&o.hasOwnProperty("domain")&&(f.domain=o.domain),null!=o.modelVersion&&o.hasOwnProperty("modelVersion")&&(f.modelVersion="number"==typeof o.modelVersion?d.longs===String?String(o.modelVersion):o.modelVersion:d.longs===String?b.Long.prototype.toString.call(o.modelVersion):d.longs===Number?new b.LongBits(o.modelVersion.low>>>0,o.modelVersion.high>>>0).toNumber():o.modelVersion),null!=o.docString&&o.hasOwnProperty("docString")&&(f.docString=o.docString),null!=o.graph&&o.hasOwnProperty("graph")&&(f.graph=p.onnx.GraphProto.toObject(o.graph,d)),o.opsetImport&&o.opsetImport.length){f.opsetImport=[];for(var x=0;x<o.opsetImport.length;++x)f.opsetImport[x]=p.onnx.OperatorSetIdProto.toObject(o.opsetImport[x],d)}if(o.metadataProps&&o.metadataProps.length)for(f.metadataProps=[],x=0;x<o.metadataProps.length;++x)f.metadataProps[x]=p.onnx.StringStringEntryProto.toObject(o.metadataProps[x],d);return f},u.prototype.toJSON=function(){return this.constructor.toObject(this,v.util.toJSONOptions)},u}(),P.StringStringEntryProto=function(){function u(o){if(o)for(var d=Object.keys(o),f=0;f<d.length;++f)null!=o[d[f]]&&(this[d[f]]=o[d[f]])}return u.prototype.key="",u.prototype.value="",u.create=function(o){return new u(o)},u.encode=function(o,d){return d||(d=S.create()),null!=o.key&&o.hasOwnProperty("key")&&d.uint32(10).string(o.key),null!=o.value&&o.hasOwnProperty("value")&&d.uint32(18).string(o.value),d},u.encodeDelimited=function(o,d){return this.encode(o,d).ldelim()},u.decode=function(o,d){o instanceof w||(o=w.create(o));for(var f=void 0===d?o.len:o.pos+d,y=new p.onnx.StringStringEntryProto;o.pos<f;){var x=o.uint32();switch(x>>>3){case 1:y.key=o.string();break;case 2:y.value=o.string();break;default:o.skipType(7&x)}}return y},u.decodeDelimited=function(o){return o instanceof w||(o=new w(o)),this.decode(o,o.uint32())},u.verify=function(o){return"object"!=typeof o||null===o?"object expected":null!=o.key&&o.hasOwnProperty("key")&&!b.isString(o.key)?"key: string expected":null!=o.value&&o.hasOwnProperty("value")&&!b.isString(o.value)?"value: string expected":null},u.fromObject=function(o){if(o instanceof p.onnx.StringStringEntryProto)return o;var d=new p.onnx.StringStringEntryProto;return null!=o.key&&(d.key=String(o.key)),null!=o.value&&(d.value=String(o.value)),d},u.toObject=function(o,d){d||(d={});var f={};return d.defaults&&(f.key="",f.value=""),null!=o.key&&o.hasOwnProperty("key")&&(f.key=o.key),null!=o.value&&o.hasOwnProperty("value")&&(f.value=o.value),f},u.prototype.toJSON=function(){return this.constructor.toObject(this,v.util.toJSONOptions)},u}(),P.TensorAnnotation=function(){function u(o){if(this.quantParameterTensorNames=[],o)for(var d=Object.keys(o),f=0;f<d.length;++f)null!=o[d[f]]&&(this[d[f]]=o[d[f]])}return u.prototype.tensorName="",u.prototype.quantParameterTensorNames=b.emptyArray,u.create=function(o){return new u(o)},u.encode=function(o,d){if(d||(d=S.create()),null!=o.tensorName&&o.hasOwnProperty("tensorName")&&d.uint32(10).string(o.tensorName),null!=o.quantParameterTensorNames&&o.quantParameterTensorNames.length)for(var f=0;f<o.quantParameterTensorNames.length;++f)p.onnx.StringStringEntryProto.encode(o.quantParameterTensorNames[f],d.uint32(18).fork()).ldelim();return d},u.encodeDelimited=function(o,d){return this.encode(o,d).ldelim()},u.decode=function(o,d){o instanceof w||(o=w.create(o));for(var f=void 0===d?o.len:o.pos+d,y=new p.onnx.TensorAnnotation;o.pos<f;){var x=o.uint32();switch(x>>>3){case 1:y.tensorName=o.string();break;case 2:y.quantParameterTensorNames&&y.quantParameterTensorNames.length||(y.quantParameterTensorNames=[]),y.quantParameterTensorNames.push(p.onnx.StringStringEntryProto.decode(o,o.uint32()));break;default:o.skipType(7&x)}}return y},u.decodeDelimited=function(o){return o instanceof w||(o=new w(o)),this.decode(o,o.uint32())},u.verify=function(o){if("object"!=typeof o||null===o)return"object expected";if(null!=o.tensorName&&o.hasOwnProperty("tensorName")&&!b.isString(o.tensorName))return"tensorName: string expected";if(null!=o.quantParameterTensorNames&&o.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(o.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var d=0;d<o.quantParameterTensorNames.length;++d){var f=p.onnx.StringStringEntryProto.verify(o.quantParameterTensorNames[d]);if(f)return"quantParameterTensorNames."+f}}return null},u.fromObject=function(o){if(o instanceof p.onnx.TensorAnnotation)return o;var d=new p.onnx.TensorAnnotation;if(null!=o.tensorName&&(d.tensorName=String(o.tensorName)),o.quantParameterTensorNames){if(!Array.isArray(o.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");d.quantParameterTensorNames=[];for(var f=0;f<o.quantParameterTensorNames.length;++f){if("object"!=typeof o.quantParameterTensorNames[f])throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");d.quantParameterTensorNames[f]=p.onnx.StringStringEntryProto.fromObject(o.quantParameterTensorNames[f])}}return d},u.toObject=function(o,d){d||(d={});var f={};if((d.arrays||d.defaults)&&(f.quantParameterTensorNames=[]),d.defaults&&(f.tensorName=""),null!=o.tensorName&&o.hasOwnProperty("tensorName")&&(f.tensorName=o.tensorName),o.quantParameterTensorNames&&o.quantParameterTensorNames.length){f.quantParameterTensorNames=[];for(var y=0;y<o.quantParameterTensorNames.length;++y)f.quantParameterTensorNames[y]=p.onnx.StringStringEntryProto.toObject(o.quantParameterTensorNames[y],d)}return f},u.prototype.toJSON=function(){return this.constructor.toObject(this,v.util.toJSONOptions)},u}(),P.GraphProto=function(){function u(o){if(this.node=[],this.initializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],o)for(var d=Object.keys(o),f=0;f<d.length;++f)null!=o[d[f]]&&(this[d[f]]=o[d[f]])}return u.prototype.node=b.emptyArray,u.prototype.name="",u.prototype.initializer=b.emptyArray,u.prototype.docString="",u.prototype.input=b.emptyArray,u.prototype.output=b.emptyArray,u.prototype.valueInfo=b.emptyArray,u.prototype.quantizationAnnotation=b.emptyArray,u.create=function(o){return new u(o)},u.encode=function(o,d){if(d||(d=S.create()),null!=o.node&&o.node.length)for(var f=0;f<o.node.length;++f)p.onnx.NodeProto.encode(o.node[f],d.uint32(10).fork()).ldelim();if(null!=o.name&&o.hasOwnProperty("name")&&d.uint32(18).string(o.name),null!=o.initializer&&o.initializer.length)for(f=0;f<o.initializer.length;++f)p.onnx.TensorProto.encode(o.initializer[f],d.uint32(42).fork()).ldelim();if(null!=o.docString&&o.hasOwnProperty("docString")&&d.uint32(82).string(o.docString),null!=o.input&&o.input.length)for(f=0;f<o.input.length;++f)p.onnx.ValueInfoProto.encode(o.input[f],d.uint32(90).fork()).ldelim();if(null!=o.output&&o.output.length)for(f=0;f<o.output.length;++f)p.onnx.ValueInfoProto.encode(o.output[f],d.uint32(98).fork()).ldelim();if(null!=o.valueInfo&&o.valueInfo.length)for(f=0;f<o.valueInfo.length;++f)p.onnx.ValueInfoProto.encode(o.valueInfo[f],d.uint32(106).fork()).ldelim();if(null!=o.quantizationAnnotation&&o.quantizationAnnotation.length)for(f=0;f<o.quantizationAnnotation.length;++f)p.onnx.TensorAnnotation.encode(o.quantizationAnnotation[f],d.uint32(114).fork()).ldelim();return d},u.encodeDelimited=function(o,d){return this.encode(o,d).ldelim()},u.decode=function(o,d){o instanceof w||(o=w.create(o));for(var f=void 0===d?o.len:o.pos+d,y=new p.onnx.GraphProto;o.pos<f;){var x=o.uint32();switch(x>>>3){case 1:y.node&&y.node.length||(y.node=[]),y.node.push(p.onnx.NodeProto.decode(o,o.uint32()));break;case 2:y.name=o.string();break;case 5:y.initializer&&y.initializer.length||(y.initializer=[]),y.initializer.push(p.onnx.TensorProto.decode(o,o.uint32()));break;case 10:y.docString=o.string();break;case 11:y.input&&y.input.length||(y.input=[]),y.input.push(p.onnx.ValueInfoProto.decode(o,o.uint32()));break;case 12:y.output&&y.output.length||(y.output=[]),y.output.push(p.onnx.ValueInfoProto.decode(o,o.uint32()));break;case 13:y.valueInfo&&y.valueInfo.length||(y.valueInfo=[]),y.valueInfo.push(p.onnx.ValueInfoProto.decode(o,o.uint32()));break;case 14:y.quantizationAnnotation&&y.quantizationAnnotation.length||(y.quantizationAnnotation=[]),y.quantizationAnnotation.push(p.onnx.TensorAnnotation.decode(o,o.uint32()));break;default:o.skipType(7&x)}}return y},u.decodeDelimited=function(o){return o instanceof w||(o=new w(o)),this.decode(o,o.uint32())},u.verify=function(o){if("object"!=typeof o||null===o)return"object expected";if(null!=o.node&&o.hasOwnProperty("node")){if(!Array.isArray(o.node))return"node: array expected";for(var d=0;d<o.node.length;++d)if(f=p.onnx.NodeProto.verify(o.node[d]))return"node."+f}if(null!=o.name&&o.hasOwnProperty("name")&&!b.isString(o.name))return"name: string expected";if(null!=o.initializer&&o.hasOwnProperty("initializer")){if(!Array.isArray(o.initializer))return"initializer: array expected";for(d=0;d<o.initializer.length;++d)if(f=p.onnx.TensorProto.verify(o.initializer[d]))return"initializer."+f}if(null!=o.docString&&o.hasOwnProperty("docString")&&!b.isString(o.docString))return"docString: string expected";if(null!=o.input&&o.hasOwnProperty("input")){if(!Array.isArray(o.input))return"input: array expected";for(d=0;d<o.input.length;++d)if(f=p.onnx.ValueInfoProto.verify(o.input[d]))return"input."+f}if(null!=o.output&&o.hasOwnProperty("output")){if(!Array.isArray(o.output))return"output: array expected";for(d=0;d<o.output.length;++d)if(f=p.onnx.ValueInfoProto.verify(o.output[d]))return"output."+f}if(null!=o.valueInfo&&o.hasOwnProperty("valueInfo")){if(!Array.isArray(o.valueInfo))return"valueInfo: array expected";for(d=0;d<o.valueInfo.length;++d)if(f=p.onnx.ValueInfoProto.verify(o.valueInfo[d]))return"valueInfo."+f}if(null!=o.quantizationAnnotation&&o.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(o.quantizationAnnotation))return"quantizationAnnotation: array expected";for(d=0;d<o.quantizationAnnotation.length;++d){var f;if(f=p.onnx.TensorAnnotation.verify(o.quantizationAnnotation[d]))return"quantizationAnnotation."+f}}return null},u.fromObject=function(o){if(o instanceof p.onnx.GraphProto)return o;var d=new p.onnx.GraphProto;if(o.node){if(!Array.isArray(o.node))throw TypeError(".onnx.GraphProto.node: array expected");d.node=[];for(var f=0;f<o.node.length;++f){if("object"!=typeof o.node[f])throw TypeError(".onnx.GraphProto.node: object expected");d.node[f]=p.onnx.NodeProto.fromObject(o.node[f])}}if(null!=o.name&&(d.name=String(o.name)),o.initializer){if(!Array.isArray(o.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");for(d.initializer=[],f=0;f<o.initializer.length;++f){if("object"!=typeof o.initializer[f])throw TypeError(".onnx.GraphProto.initializer: object expected");d.initializer[f]=p.onnx.TensorProto.fromObject(o.initializer[f])}}if(null!=o.docString&&(d.docString=String(o.docString)),o.input){if(!Array.isArray(o.input))throw TypeError(".onnx.GraphProto.input: array expected");for(d.input=[],f=0;f<o.input.length;++f){if("object"!=typeof o.input[f])throw TypeError(".onnx.GraphProto.input: object expected");d.input[f]=p.onnx.ValueInfoProto.fromObject(o.input[f])}}if(o.output){if(!Array.isArray(o.output))throw TypeError(".onnx.GraphProto.output: array expected");for(d.output=[],f=0;f<o.output.length;++f){if("object"!=typeof o.output[f])throw TypeError(".onnx.GraphProto.output: object expected");d.output[f]=p.onnx.ValueInfoProto.fromObject(o.output[f])}}if(o.valueInfo){if(!Array.isArray(o.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");for(d.valueInfo=[],f=0;f<o.valueInfo.length;++f){if("object"!=typeof o.valueInfo[f])throw TypeError(".onnx.GraphProto.valueInfo: object expected");d.valueInfo[f]=p.onnx.ValueInfoProto.fromObject(o.valueInfo[f])}}if(o.quantizationAnnotation){if(!Array.isArray(o.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");for(d.quantizationAnnotation=[],f=0;f<o.quantizationAnnotation.length;++f){if("object"!=typeof o.quantizationAnnotation[f])throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");d.quantizationAnnotation[f]=p.onnx.TensorAnnotation.fromObject(o.quantizationAnnotation[f])}}return d},u.toObject=function(o,d){d||(d={});var f={};if((d.arrays||d.defaults)&&(f.node=[],f.initializer=[],f.input=[],f.output=[],f.valueInfo=[],f.quantizationAnnotation=[]),d.defaults&&(f.name="",f.docString=""),o.node&&o.node.length){f.node=[];for(var y=0;y<o.node.length;++y)f.node[y]=p.onnx.NodeProto.toObject(o.node[y],d)}if(null!=o.name&&o.hasOwnProperty("name")&&(f.name=o.name),o.initializer&&o.initializer.length)for(f.initializer=[],y=0;y<o.initializer.length;++y)f.initializer[y]=p.onnx.TensorProto.toObject(o.initializer[y],d);if(null!=o.docString&&o.hasOwnProperty("docString")&&(f.docString=o.docString),o.input&&o.input.length)for(f.input=[],y=0;y<o.input.length;++y)f.input[y]=p.onnx.ValueInfoProto.toObject(o.input[y],d);if(o.output&&o.output.length)for(f.output=[],y=0;y<o.output.length;++y)f.output[y]=p.onnx.ValueInfoProto.toObject(o.output[y],d);if(o.valueInfo&&o.valueInfo.length)for(f.valueInfo=[],y=0;y<o.valueInfo.length;++y)f.valueInfo[y]=p.onnx.ValueInfoProto.toObject(o.valueInfo[y],d);if(o.quantizationAnnotation&&o.quantizationAnnotation.length)for(f.quantizationAnnotation=[],y=0;y<o.quantizationAnnotation.length;++y)f.quantizationAnnotation[y]=p.onnx.TensorAnnotation.toObject(o.quantizationAnnotation[y],d);return f},u.prototype.toJSON=function(){return this.constructor.toObject(this,v.util.toJSONOptions)},u}(),P.TensorProto=function(){function u(o){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],o)for(var d=Object.keys(o),f=0;f<d.length;++f)null!=o[d[f]]&&(this[d[f]]=o[d[f]])}return u.prototype.dims=b.emptyArray,u.prototype.dataType=0,u.prototype.segment=null,u.prototype.floatData=b.emptyArray,u.prototype.int32Data=b.emptyArray,u.prototype.stringData=b.emptyArray,u.prototype.int64Data=b.emptyArray,u.prototype.name="",u.prototype.docString="",u.prototype.rawData=b.newBuffer([]),u.prototype.externalData=b.emptyArray,u.prototype.dataLocation=0,u.prototype.doubleData=b.emptyArray,u.prototype.uint64Data=b.emptyArray,u.create=function(o){return new u(o)},u.encode=function(o,d){if(d||(d=S.create()),null!=o.dims&&o.dims.length){d.uint32(10).fork();for(var f=0;f<o.dims.length;++f)d.int64(o.dims[f]);d.ldelim()}if(null!=o.dataType&&o.hasOwnProperty("dataType")&&d.uint32(16).int32(o.dataType),null!=o.segment&&o.hasOwnProperty("segment")&&p.onnx.TensorProto.Segment.encode(o.segment,d.uint32(26).fork()).ldelim(),null!=o.floatData&&o.floatData.length){for(d.uint32(34).fork(),f=0;f<o.floatData.length;++f)d.float(o.floatData[f]);d.ldelim()}if(null!=o.int32Data&&o.int32Data.length){for(d.uint32(42).fork(),f=0;f<o.int32Data.length;++f)d.int32(o.int32Data[f]);d.ldelim()}if(null!=o.stringData&&o.stringData.length)for(f=0;f<o.stringData.length;++f)d.uint32(50).bytes(o.stringData[f]);if(null!=o.int64Data&&o.int64Data.length){for(d.uint32(58).fork(),f=0;f<o.int64Data.length;++f)d.int64(o.int64Data[f]);d.ldelim()}if(null!=o.name&&o.hasOwnProperty("name")&&d.uint32(66).string(o.name),null!=o.rawData&&o.hasOwnProperty("rawData")&&d.uint32(74).bytes(o.rawData),null!=o.doubleData&&o.doubleData.length){for(d.uint32(82).fork(),f=0;f<o.doubleData.length;++f)d.double(o.doubleData[f]);d.ldelim()}if(null!=o.uint64Data&&o.uint64Data.length){for(d.uint32(90).fork(),f=0;f<o.uint64Data.length;++f)d.uint64(o.uint64Data[f]);d.ldelim()}if(null!=o.docString&&o.hasOwnProperty("docString")&&d.uint32(98).string(o.docString),null!=o.externalData&&o.externalData.length)for(f=0;f<o.externalData.length;++f)p.onnx.StringStringEntryProto.encode(o.externalData[f],d.uint32(106).fork()).ldelim();return null!=o.dataLocation&&o.hasOwnProperty("dataLocation")&&d.uint32(112).int32(o.dataLocation),d},u.encodeDelimited=function(o,d){return this.encode(o,d).ldelim()},u.decode=function(o,d){o instanceof w||(o=w.create(o));for(var f=void 0===d?o.len:o.pos+d,y=new p.onnx.TensorProto;o.pos<f;){var x=o.uint32();switch(x>>>3){case 1:if(y.dims&&y.dims.length||(y.dims=[]),2==(7&x))for(var E=o.uint32()+o.pos;o.pos<E;)y.dims.push(o.int64());else y.dims.push(o.int64());break;case 2:y.dataType=o.int32();break;case 3:y.segment=p.onnx.TensorProto.Segment.decode(o,o.uint32());break;case 4:if(y.floatData&&y.floatData.length||(y.floatData=[]),2==(7&x))for(E=o.uint32()+o.pos;o.pos<E;)y.floatData.push(o.float());else y.floatData.push(o.float());break;case 5:if(y.int32Data&&y.int32Data.length||(y.int32Data=[]),2==(7&x))for(E=o.uint32()+o.pos;o.pos<E;)y.int32Data.push(o.int32());else y.int32Data.push(o.int32());break;case 6:y.stringData&&y.stringData.length||(y.stringData=[]),y.stringData.push(o.bytes());break;case 7:if(y.int64Data&&y.int64Data.length||(y.int64Data=[]),2==(7&x))for(E=o.uint32()+o.pos;o.pos<E;)y.int64Data.push(o.int64());else y.int64Data.push(o.int64());break;case 8:y.name=o.string();break;case 12:y.docString=o.string();break;case 9:y.rawData=o.bytes();break;case 13:y.externalData&&y.externalData.length||(y.externalData=[]),y.externalData.push(p.onnx.StringStringEntryProto.decode(o,o.uint32()));break;case 14:y.dataLocation=o.int32();break;case 10:if(y.doubleData&&y.doubleData.length||(y.doubleData=[]),2==(7&x))for(E=o.uint32()+o.pos;o.pos<E;)y.doubleData.push(o.double());else y.doubleData.push(o.double());break;case 11:if(y.uint64Data&&y.uint64Data.length||(y.uint64Data=[]),2==(7&x))for(E=o.uint32()+o.pos;o.pos<E;)y.uint64Data.push(o.uint64());else y.uint64Data.push(o.uint64());break;default:o.skipType(7&x)}}return y},u.decodeDelimited=function(o){return o instanceof w||(o=new w(o)),this.decode(o,o.uint32())},u.verify=function(o){if("object"!=typeof o||null===o)return"object expected";if(null!=o.dims&&o.hasOwnProperty("dims")){if(!Array.isArray(o.dims))return"dims: array expected";for(var d=0;d<o.dims.length;++d)if(!(b.isInteger(o.dims[d])||o.dims[d]&&b.isInteger(o.dims[d].low)&&b.isInteger(o.dims[d].high)))return"dims: integer|Long[] expected"}if(null!=o.dataType&&o.hasOwnProperty("dataType")&&!b.isInteger(o.dataType))return"dataType: integer expected";if(null!=o.segment&&o.hasOwnProperty("segment")&&(f=p.onnx.TensorProto.Segment.verify(o.segment)))return"segment."+f;if(null!=o.floatData&&o.hasOwnProperty("floatData")){if(!Array.isArray(o.floatData))return"floatData: array expected";for(d=0;d<o.floatData.length;++d)if("number"!=typeof o.floatData[d])return"floatData: number[] expected"}if(null!=o.int32Data&&o.hasOwnProperty("int32Data")){if(!Array.isArray(o.int32Data))return"int32Data: array expected";for(d=0;d<o.int32Data.length;++d)if(!b.isInteger(o.int32Data[d]))return"int32Data: integer[] expected"}if(null!=o.stringData&&o.hasOwnProperty("stringData")){if(!Array.isArray(o.stringData))return"stringData: array expected";for(d=0;d<o.stringData.length;++d)if(!(o.stringData[d]&&"number"==typeof o.stringData[d].length||b.isString(o.stringData[d])))return"stringData: buffer[] expected"}if(null!=o.int64Data&&o.hasOwnProperty("int64Data")){if(!Array.isArray(o.int64Data))return"int64Data: array expected";for(d=0;d<o.int64Data.length;++d)if(!(b.isInteger(o.int64Data[d])||o.int64Data[d]&&b.isInteger(o.int64Data[d].low)&&b.isInteger(o.int64Data[d].high)))return"int64Data: integer|Long[] expected"}if(null!=o.name&&o.hasOwnProperty("name")&&!b.isString(o.name))return"name: string expected";if(null!=o.docString&&o.hasOwnProperty("docString")&&!b.isString(o.docString))return"docString: string expected";if(null!=o.rawData&&o.hasOwnProperty("rawData")&&!(o.rawData&&"number"==typeof o.rawData.length||b.isString(o.rawData)))return"rawData: buffer expected";if(null!=o.externalData&&o.hasOwnProperty("externalData")){if(!Array.isArray(o.externalData))return"externalData: array expected";for(d=0;d<o.externalData.length;++d){var f;if(f=p.onnx.StringStringEntryProto.verify(o.externalData[d]))return"externalData."+f}}if(null!=o.dataLocation&&o.hasOwnProperty("dataLocation"))switch(o.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:}if(null!=o.doubleData&&o.hasOwnProperty("doubleData")){if(!Array.isArray(o.doubleData))return"doubleData: array expected";for(d=0;d<o.doubleData.length;++d)if("number"!=typeof o.doubleData[d])return"doubleData: number[] expected"}if(null!=o.uint64Data&&o.hasOwnProperty("uint64Data")){if(!Array.isArray(o.uint64Data))return"uint64Data: array expected";for(d=0;d<o.uint64Data.length;++d)if(!(b.isInteger(o.uint64Data[d])||o.uint64Data[d]&&b.isInteger(o.uint64Data[d].low)&&b.isInteger(o.uint64Data[d].high)))return"uint64Data: integer|Long[] expected"}return null},u.fromObject=function(o){if(o instanceof p.onnx.TensorProto)return o;var d=new p.onnx.TensorProto;if(o.dims){if(!Array.isArray(o.dims))throw TypeError(".onnx.TensorProto.dims: array expected");d.dims=[];for(var f=0;f<o.dims.length;++f)b.Long?(d.dims[f]=b.Long.fromValue(o.dims[f])).unsigned=!1:"string"==typeof o.dims[f]?d.dims[f]=parseInt(o.dims[f],10):"number"==typeof o.dims[f]?d.dims[f]=o.dims[f]:"object"==typeof o.dims[f]&&(d.dims[f]=new b.LongBits(o.dims[f].low>>>0,o.dims[f].high>>>0).toNumber())}if(null!=o.dataType&&(d.dataType=0|o.dataType),null!=o.segment){if("object"!=typeof o.segment)throw TypeError(".onnx.TensorProto.segment: object expected");d.segment=p.onnx.TensorProto.Segment.fromObject(o.segment)}if(o.floatData){if(!Array.isArray(o.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");for(d.floatData=[],f=0;f<o.floatData.length;++f)d.floatData[f]=Number(o.floatData[f])}if(o.int32Data){if(!Array.isArray(o.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");for(d.int32Data=[],f=0;f<o.int32Data.length;++f)d.int32Data[f]=0|o.int32Data[f]}if(o.stringData){if(!Array.isArray(o.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");for(d.stringData=[],f=0;f<o.stringData.length;++f)"string"==typeof o.stringData[f]?b.base64.decode(o.stringData[f],d.stringData[f]=b.newBuffer(b.base64.length(o.stringData[f])),0):o.stringData[f].length&&(d.stringData[f]=o.stringData[f])}if(o.int64Data){if(!Array.isArray(o.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");for(d.int64Data=[],f=0;f<o.int64Data.length;++f)b.Long?(d.int64Data[f]=b.Long.fromValue(o.int64Data[f])).unsigned=!1:"string"==typeof o.int64Data[f]?d.int64Data[f]=parseInt(o.int64Data[f],10):"number"==typeof o.int64Data[f]?d.int64Data[f]=o.int64Data[f]:"object"==typeof o.int64Data[f]&&(d.int64Data[f]=new b.LongBits(o.int64Data[f].low>>>0,o.int64Data[f].high>>>0).toNumber())}if(null!=o.name&&(d.name=String(o.name)),null!=o.docString&&(d.docString=String(o.docString)),null!=o.rawData&&("string"==typeof o.rawData?b.base64.decode(o.rawData,d.rawData=b.newBuffer(b.base64.length(o.rawData)),0):o.rawData.length&&(d.rawData=o.rawData)),o.externalData){if(!Array.isArray(o.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");for(d.externalData=[],f=0;f<o.externalData.length;++f){if("object"!=typeof o.externalData[f])throw TypeError(".onnx.TensorProto.externalData: object expected");d.externalData[f]=p.onnx.StringStringEntryProto.fromObject(o.externalData[f])}}switch(o.dataLocation){case"DEFAULT":case 0:d.dataLocation=0;break;case"EXTERNAL":case 1:d.dataLocation=1}if(o.doubleData){if(!Array.isArray(o.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");for(d.doubleData=[],f=0;f<o.doubleData.length;++f)d.doubleData[f]=Number(o.doubleData[f])}if(o.uint64Data){if(!Array.isArray(o.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");for(d.uint64Data=[],f=0;f<o.uint64Data.length;++f)b.Long?(d.uint64Data[f]=b.Long.fromValue(o.uint64Data[f])).unsigned=!0:"string"==typeof o.uint64Data[f]?d.uint64Data[f]=parseInt(o.uint64Data[f],10):"number"==typeof o.uint64Data[f]?d.uint64Data[f]=o.uint64Data[f]:"object"==typeof o.uint64Data[f]&&(d.uint64Data[f]=new b.LongBits(o.uint64Data[f].low>>>0,o.uint64Data[f].high>>>0).toNumber(!0))}return d},u.toObject=function(o,d){d||(d={});var f={};if((d.arrays||d.defaults)&&(f.dims=[],f.floatData=[],f.int32Data=[],f.stringData=[],f.int64Data=[],f.doubleData=[],f.uint64Data=[],f.externalData=[]),d.defaults&&(f.dataType=0,f.segment=null,f.name="",d.bytes===String?f.rawData="":(f.rawData=[],d.bytes!==Array&&(f.rawData=b.newBuffer(f.rawData))),f.docString="",f.dataLocation=d.enums===String?"DEFAULT":0),o.dims&&o.dims.length){f.dims=[];for(var y=0;y<o.dims.length;++y)f.dims[y]="number"==typeof o.dims[y]?d.longs===String?String(o.dims[y]):o.dims[y]:d.longs===String?b.Long.prototype.toString.call(o.dims[y]):d.longs===Number?new b.LongBits(o.dims[y].low>>>0,o.dims[y].high>>>0).toNumber():o.dims[y]}if(null!=o.dataType&&o.hasOwnProperty("dataType")&&(f.dataType=o.dataType),null!=o.segment&&o.hasOwnProperty("segment")&&(f.segment=p.onnx.TensorProto.Segment.toObject(o.segment,d)),o.floatData&&o.floatData.length)for(f.floatData=[],y=0;y<o.floatData.length;++y)f.floatData[y]=d.json&&!isFinite(o.floatData[y])?String(o.floatData[y]):o.floatData[y];if(o.int32Data&&o.int32Data.length)for(f.int32Data=[],y=0;y<o.int32Data.length;++y)f.int32Data[y]=o.int32Data[y];if(o.stringData&&o.stringData.length)for(f.stringData=[],y=0;y<o.stringData.length;++y)f.stringData[y]=d.bytes===String?b.base64.encode(o.stringData[y],0,o.stringData[y].length):d.bytes===Array?Array.prototype.slice.call(o.stringData[y]):o.stringData[y];if(o.int64Data&&o.int64Data.length)for(f.int64Data=[],y=0;y<o.int64Data.length;++y)f.int64Data[y]="number"==typeof o.int64Data[y]?d.longs===String?String(o.int64Data[y]):o.int64Data[y]:d.longs===String?b.Long.prototype.toString.call(o.int64Data[y]):d.longs===Number?new b.LongBits(o.int64Data[y].low>>>0,o.int64Data[y].high>>>0).toNumber():o.int64Data[y];if(null!=o.name&&o.hasOwnProperty("name")&&(f.name=o.name),null!=o.rawData&&o.hasOwnProperty("rawData")&&(f.rawData=d.bytes===String?b.base64.encode(o.rawData,0,o.rawData.length):d.bytes===Array?Array.prototype.slice.call(o.rawData):o.rawData),o.doubleData&&o.doubleData.length)for(f.doubleData=[],y=0;y<o.doubleData.length;++y)f.doubleData[y]=d.json&&!isFinite(o.doubleData[y])?String(o.doubleData[y]):o.doubleData[y];if(o.uint64Data&&o.uint64Data.length)for(f.uint64Data=[],y=0;y<o.uint64Data.length;++y)f.uint64Data[y]="number"==typeof o.uint64Data[y]?d.longs===String?String(o.uint64Data[y]):o.uint64Data[y]:d.longs===String?b.Long.prototype.toString.call(o.uint64Data[y]):d.longs===Number?new b.LongBits(o.uint64Data[y].low>>>0,o.uint64Data[y].high>>>0).toNumber(!0):o.uint64Data[y];if(null!=o.docString&&o.hasOwnProperty("docString")&&(f.docString=o.docString),o.externalData&&o.externalData.length)for(f.externalData=[],y=0;y<o.externalData.length;++y)f.externalData[y]=p.onnx.StringStringEntryProto.toObject(o.externalData[y],d);return null!=o.dataLocation&&o.hasOwnProperty("dataLocation")&&(f.dataLocation=d.enums===String?p.onnx.TensorProto.DataLocation[o.dataLocation]:o.dataLocation),f},u.prototype.toJSON=function(){return this.constructor.toObject(this,v.util.toJSONOptions)},u.DataType=(o={},(d=Object.create(o))[o[0]="UNDEFINED"]=0,d[o[1]="FLOAT"]=1,d[o[2]="UINT8"]=2,d[o[3]="INT8"]=3,d[o[4]="UINT16"]=4,d[o[5]="INT16"]=5,d[o[6]="INT32"]=6,d[o[7]="INT64"]=7,d[o[8]="STRING"]=8,d[o[9]="BOOL"]=9,d[o[10]="FLOAT16"]=10,d[o[11]="DOUBLE"]=11,d[o[12]="UINT32"]=12,d[o[13]="UINT64"]=13,d[o[14]="COMPLEX64"]=14,d[o[15]="COMPLEX128"]=15,d[o[16]="BFLOAT16"]=16,d),u.Segment=function(){function o(d){if(d)for(var f=Object.keys(d),y=0;y<f.length;++y)null!=d[f[y]]&&(this[f[y]]=d[f[y]])}return o.prototype.begin=b.Long?b.Long.fromBits(0,0,!1):0,o.prototype.end=b.Long?b.Long.fromBits(0,0,!1):0,o.create=function(d){return new o(d)},o.encode=function(d,f){return f||(f=S.create()),null!=d.begin&&d.hasOwnProperty("begin")&&f.uint32(8).int64(d.begin),null!=d.end&&d.hasOwnProperty("end")&&f.uint32(16).int64(d.end),f},o.encodeDelimited=function(d,f){return this.encode(d,f).ldelim()},o.decode=function(d,f){d instanceof w||(d=w.create(d));for(var y=void 0===f?d.len:d.pos+f,x=new p.onnx.TensorProto.Segment;d.pos<y;){var E=d.uint32();switch(E>>>3){case 1:x.begin=d.int64();break;case 2:x.end=d.int64();break;default:d.skipType(7&E)}}return x},o.decodeDelimited=function(d){return d instanceof w||(d=new w(d)),this.decode(d,d.uint32())},o.verify=function(d){return"object"!=typeof d||null===d?"object expected":null!=d.begin&&d.hasOwnProperty("begin")&&!(b.isInteger(d.begin)||d.begin&&b.isInteger(d.begin.low)&&b.isInteger(d.begin.high))?"begin: integer|Long expected":null!=d.end&&d.hasOwnProperty("end")&&!(b.isInteger(d.end)||d.end&&b.isInteger(d.end.low)&&b.isInteger(d.end.high))?"end: integer|Long expected":null},o.fromObject=function(d){if(d instanceof p.onnx.TensorProto.Segment)return d;var f=new p.onnx.TensorProto.Segment;return null!=d.begin&&(b.Long?(f.begin=b.Long.fromValue(d.begin)).unsigned=!1:"string"==typeof d.begin?f.begin=parseInt(d.begin,10):"number"==typeof d.begin?f.begin=d.begin:"object"==typeof d.begin&&(f.begin=new b.LongBits(d.begin.low>>>0,d.begin.high>>>0).toNumber())),null!=d.end&&(b.Long?(f.end=b.Long.fromValue(d.end)).unsigned=!1:"string"==typeof d.end?f.end=parseInt(d.end,10):"number"==typeof d.end?f.end=d.end:"object"==typeof d.end&&(f.end=new b.LongBits(d.end.low>>>0,d.end.high>>>0).toNumber())),f},o.toObject=function(d,f){f||(f={});var y={};if(f.defaults){if(b.Long){var x=new b.Long(0,0,!1);y.begin=f.longs===String?x.toString():f.longs===Number?x.toNumber():x}else y.begin=f.longs===String?"0":0;b.Long?(x=new b.Long(0,0,!1),y.end=f.longs===String?x.toString():f.longs===Number?x.toNumber():x):y.end=f.longs===String?"0":0}return null!=d.begin&&d.hasOwnProperty("begin")&&(y.begin="number"==typeof d.begin?f.longs===String?String(d.begin):d.begin:f.longs===String?b.Long.prototype.toString.call(d.begin):f.longs===Number?new b.LongBits(d.begin.low>>>0,d.begin.high>>>0).toNumber():d.begin),null!=d.end&&d.hasOwnProperty("end")&&(y.end="number"==typeof d.end?f.longs===String?String(d.end):d.end:f.longs===String?b.Long.prototype.toString.call(d.end):f.longs===Number?new b.LongBits(d.end.low>>>0,d.end.high>>>0).toNumber():d.end),y},o.prototype.toJSON=function(){return this.constructor.toObject(this,v.util.toJSONOptions)},o}(),u.DataLocation=function(){var o={},d=Object.create(o);return d[o[0]="DEFAULT"]=0,d[o[1]="EXTERNAL"]=1,d}(),u;var o,d}(),P.TensorShapeProto=function(){function u(o){if(this.dim=[],o)for(var d=Object.keys(o),f=0;f<d.length;++f)null!=o[d[f]]&&(this[d[f]]=o[d[f]])}return u.prototype.dim=b.emptyArray,u.create=function(o){return new u(o)},u.encode=function(o,d){if(d||(d=S.create()),null!=o.dim&&o.dim.length)for(var f=0;f<o.dim.length;++f)p.onnx.TensorShapeProto.Dimension.encode(o.dim[f],d.uint32(10).fork()).ldelim();return d},u.encodeDelimited=function(o,d){return this.encode(o,d).ldelim()},u.decode=function(o,d){o instanceof w||(o=w.create(o));for(var f=void 0===d?o.len:o.pos+d,y=new p.onnx.TensorShapeProto;o.pos<f;){var x=o.uint32();x>>>3==1?(y.dim&&y.dim.length||(y.dim=[]),y.dim.push(p.onnx.TensorShapeProto.Dimension.decode(o,o.uint32()))):o.skipType(7&x)}return y},u.decodeDelimited=function(o){return o instanceof w||(o=new w(o)),this.decode(o,o.uint32())},u.verify=function(o){if("object"!=typeof o||null===o)return"object expected";if(null!=o.dim&&o.hasOwnProperty("dim")){if(!Array.isArray(o.dim))return"dim: array expected";for(var d=0;d<o.dim.length;++d){var f=p.onnx.TensorShapeProto.Dimension.verify(o.dim[d]);if(f)return"dim."+f}}return null},u.fromObject=function(o){if(o instanceof p.onnx.TensorShapeProto)return o;var d=new p.onnx.TensorShapeProto;if(o.dim){if(!Array.isArray(o.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");d.dim=[];for(var f=0;f<o.dim.length;++f){if("object"!=typeof o.dim[f])throw TypeError(".onnx.TensorShapeProto.dim: object expected");d.dim[f]=p.onnx.TensorShapeProto.Dimension.fromObject(o.dim[f])}}return d},u.toObject=function(o,d){d||(d={});var f={};if((d.arrays||d.defaults)&&(f.dim=[]),o.dim&&o.dim.length){f.dim=[];for(var y=0;y<o.dim.length;++y)f.dim[y]=p.onnx.TensorShapeProto.Dimension.toObject(o.dim[y],d)}return f},u.prototype.toJSON=function(){return this.constructor.toObject(this,v.util.toJSONOptions)},u.Dimension=function(){function o(f){if(f)for(var y=Object.keys(f),x=0;x<y.length;++x)null!=f[y[x]]&&(this[y[x]]=f[y[x]])}var d;return o.prototype.dimValue=b.Long?b.Long.fromBits(0,0,!1):0,o.prototype.dimParam="",o.prototype.denotation="",Object.defineProperty(o.prototype,"value",{get:b.oneOfGetter(d=["dimValue","dimParam"]),set:b.oneOfSetter(d)}),o.create=function(f){return new o(f)},o.encode=function(f,y){return y||(y=S.create()),null!=f.dimValue&&f.hasOwnProperty("dimValue")&&y.uint32(8).int64(f.dimValue),null!=f.dimParam&&f.hasOwnProperty("dimParam")&&y.uint32(18).string(f.dimParam),null!=f.denotation&&f.hasOwnProperty("denotation")&&y.uint32(26).string(f.denotation),y},o.encodeDelimited=function(f,y){return this.encode(f,y).ldelim()},o.decode=function(f,y){f instanceof w||(f=w.create(f));for(var x=void 0===y?f.len:f.pos+y,E=new p.onnx.TensorShapeProto.Dimension;f.pos<x;){var R=f.uint32();switch(R>>>3){case 1:E.dimValue=f.int64();break;case 2:E.dimParam=f.string();break;case 3:E.denotation=f.string();break;default:f.skipType(7&R)}}return E},o.decodeDelimited=function(f){return f instanceof w||(f=new w(f)),this.decode(f,f.uint32())},o.verify=function(f){if("object"!=typeof f||null===f)return"object expected";var y={};if(null!=f.dimValue&&f.hasOwnProperty("dimValue")&&(y.value=1,!(b.isInteger(f.dimValue)||f.dimValue&&b.isInteger(f.dimValue.low)&&b.isInteger(f.dimValue.high))))return"dimValue: integer|Long expected";if(null!=f.dimParam&&f.hasOwnProperty("dimParam")){if(1===y.value)return"value: multiple values";if(y.value=1,!b.isString(f.dimParam))return"dimParam: string expected"}return null!=f.denotation&&f.hasOwnProperty("denotation")&&!b.isString(f.denotation)?"denotation: string expected":null},o.fromObject=function(f){if(f instanceof p.onnx.TensorShapeProto.Dimension)return f;var y=new p.onnx.TensorShapeProto.Dimension;return null!=f.dimValue&&(b.Long?(y.dimValue=b.Long.fromValue(f.dimValue)).unsigned=!1:"string"==typeof f.dimValue?y.dimValue=parseInt(f.dimValue,10):"number"==typeof f.dimValue?y.dimValue=f.dimValue:"object"==typeof f.dimValue&&(y.dimValue=new b.LongBits(f.dimValue.low>>>0,f.dimValue.high>>>0).toNumber())),null!=f.dimParam&&(y.dimParam=String(f.dimParam)),null!=f.denotation&&(y.denotation=String(f.denotation)),y},o.toObject=function(f,y){y||(y={});var x={};return y.defaults&&(x.denotation=""),null!=f.dimValue&&f.hasOwnProperty("dimValue")&&(x.dimValue="number"==typeof f.dimValue?y.longs===String?String(f.dimValue):f.dimValue:y.longs===String?b.Long.prototype.toString.call(f.dimValue):y.longs===Number?new b.LongBits(f.dimValue.low>>>0,f.dimValue.high>>>0).toNumber():f.dimValue,y.oneofs&&(x.value="dimValue")),null!=f.dimParam&&f.hasOwnProperty("dimParam")&&(x.dimParam=f.dimParam,y.oneofs&&(x.value="dimParam")),null!=f.denotation&&f.hasOwnProperty("denotation")&&(x.denotation=f.denotation),x},o.prototype.toJSON=function(){return this.constructor.toObject(this,v.util.toJSONOptions)},o}(),u}(),P.TypeProto=function(){function u(d){if(d)for(var f=Object.keys(d),y=0;y<f.length;++y)null!=d[f[y]]&&(this[f[y]]=d[f[y]])}var o;return u.prototype.tensorType=null,u.prototype.denotation="",Object.defineProperty(u.prototype,"value",{get:b.oneOfGetter(o=["tensorType"]),set:b.oneOfSetter(o)}),u.create=function(d){return new u(d)},u.encode=function(d,f){return f||(f=S.create()),null!=d.tensorType&&d.hasOwnProperty("tensorType")&&p.onnx.TypeProto.Tensor.encode(d.tensorType,f.uint32(10).fork()).ldelim(),null!=d.denotation&&d.hasOwnProperty("denotation")&&f.uint32(50).string(d.denotation),f},u.encodeDelimited=function(d,f){return this.encode(d,f).ldelim()},u.decode=function(d,f){d instanceof w||(d=w.create(d));for(var y=void 0===f?d.len:d.pos+f,x=new p.onnx.TypeProto;d.pos<y;){var E=d.uint32();switch(E>>>3){case 1:x.tensorType=p.onnx.TypeProto.Tensor.decode(d,d.uint32());break;case 6:x.denotation=d.string();break;default:d.skipType(7&E)}}return x},u.decodeDelimited=function(d){return d instanceof w||(d=new w(d)),this.decode(d,d.uint32())},u.verify=function(d){if("object"!=typeof d||null===d)return"object expected";if(null!=d.tensorType&&d.hasOwnProperty("tensorType")){var f=p.onnx.TypeProto.Tensor.verify(d.tensorType);if(f)return"tensorType."+f}return null!=d.denotation&&d.hasOwnProperty("denotation")&&!b.isString(d.denotation)?"denotation: string expected":null},u.fromObject=function(d){if(d instanceof p.onnx.TypeProto)return d;var f=new p.onnx.TypeProto;if(null!=d.tensorType){if("object"!=typeof d.tensorType)throw TypeError(".onnx.TypeProto.tensorType: object expected");f.tensorType=p.onnx.TypeProto.Tensor.fromObject(d.tensorType)}return null!=d.denotation&&(f.denotation=String(d.denotation)),f},u.toObject=function(d,f){f||(f={});var y={};return f.defaults&&(y.denotation=""),null!=d.tensorType&&d.hasOwnProperty("tensorType")&&(y.tensorType=p.onnx.TypeProto.Tensor.toObject(d.tensorType,f),f.oneofs&&(y.value="tensorType")),null!=d.denotation&&d.hasOwnProperty("denotation")&&(y.denotation=d.denotation),y},u.prototype.toJSON=function(){return this.constructor.toObject(this,v.util.toJSONOptions)},u.Tensor=function(){function d(f){if(f)for(var y=Object.keys(f),x=0;x<y.length;++x)null!=f[y[x]]&&(this[y[x]]=f[y[x]])}return d.prototype.elemType=0,d.prototype.shape=null,d.create=function(f){return new d(f)},d.encode=function(f,y){return y||(y=S.create()),null!=f.elemType&&f.hasOwnProperty("elemType")&&y.uint32(8).int32(f.elemType),null!=f.shape&&f.hasOwnProperty("shape")&&p.onnx.TensorShapeProto.encode(f.shape,y.uint32(18).fork()).ldelim(),y},d.encodeDelimited=function(f,y){return this.encode(f,y).ldelim()},d.decode=function(f,y){f instanceof w||(f=w.create(f));for(var x=void 0===y?f.len:f.pos+y,E=new p.onnx.TypeProto.Tensor;f.pos<x;){var R=f.uint32();switch(R>>>3){case 1:E.elemType=f.int32();break;case 2:E.shape=p.onnx.TensorShapeProto.decode(f,f.uint32());break;default:f.skipType(7&R)}}return E},d.decodeDelimited=function(f){return f instanceof w||(f=new w(f)),this.decode(f,f.uint32())},d.verify=function(f){if("object"!=typeof f||null===f)return"object expected";if(null!=f.elemType&&f.hasOwnProperty("elemType")&&!b.isInteger(f.elemType))return"elemType: integer expected";if(null!=f.shape&&f.hasOwnProperty("shape")){var y=p.onnx.TensorShapeProto.verify(f.shape);if(y)return"shape."+y}return null},d.fromObject=function(f){if(f instanceof p.onnx.TypeProto.Tensor)return f;var y=new p.onnx.TypeProto.Tensor;if(null!=f.elemType&&(y.elemType=0|f.elemType),null!=f.shape){if("object"!=typeof f.shape)throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");y.shape=p.onnx.TensorShapeProto.fromObject(f.shape)}return y},d.toObject=function(f,y){y||(y={});var x={};return y.defaults&&(x.elemType=0,x.shape=null),null!=f.elemType&&f.hasOwnProperty("elemType")&&(x.elemType=f.elemType),null!=f.shape&&f.hasOwnProperty("shape")&&(x.shape=p.onnx.TensorShapeProto.toObject(f.shape,y)),x},d.prototype.toJSON=function(){return this.constructor.toObject(this,v.util.toJSONOptions)},d}(),u}(),P.OperatorSetIdProto=function(){function u(o){if(o)for(var d=Object.keys(o),f=0;f<d.length;++f)null!=o[d[f]]&&(this[d[f]]=o[d[f]])}return u.prototype.domain="",u.prototype.version=b.Long?b.Long.fromBits(0,0,!1):0,u.create=function(o){return new u(o)},u.encode=function(o,d){return d||(d=S.create()),null!=o.domain&&o.hasOwnProperty("domain")&&d.uint32(10).string(o.domain),null!=o.version&&o.hasOwnProperty("version")&&d.uint32(16).int64(o.version),d},u.encodeDelimited=function(o,d){return this.encode(o,d).ldelim()},u.decode=function(o,d){o instanceof w||(o=w.create(o));for(var f=void 0===d?o.len:o.pos+d,y=new p.onnx.OperatorSetIdProto;o.pos<f;){var x=o.uint32();switch(x>>>3){case 1:y.domain=o.string();break;case 2:y.version=o.int64();break;default:o.skipType(7&x)}}return y},u.decodeDelimited=function(o){return o instanceof w||(o=new w(o)),this.decode(o,o.uint32())},u.verify=function(o){return"object"!=typeof o||null===o?"object expected":null!=o.domain&&o.hasOwnProperty("domain")&&!b.isString(o.domain)?"domain: string expected":null!=o.version&&o.hasOwnProperty("version")&&!(b.isInteger(o.version)||o.version&&b.isInteger(o.version.low)&&b.isInteger(o.version.high))?"version: integer|Long expected":null},u.fromObject=function(o){if(o instanceof p.onnx.OperatorSetIdProto)return o;var d=new p.onnx.OperatorSetIdProto;return null!=o.domain&&(d.domain=String(o.domain)),null!=o.version&&(b.Long?(d.version=b.Long.fromValue(o.version)).unsigned=!1:"string"==typeof o.version?d.version=parseInt(o.version,10):"number"==typeof o.version?d.version=o.version:"object"==typeof o.version&&(d.version=new b.LongBits(o.version.low>>>0,o.version.high>>>0).toNumber())),d},u.toObject=function(o,d){d||(d={});var f={};if(d.defaults)if(f.domain="",b.Long){var y=new b.Long(0,0,!1);f.version=d.longs===String?y.toString():d.longs===Number?y.toNumber():y}else f.version=d.longs===String?"0":0;return null!=o.domain&&o.hasOwnProperty("domain")&&(f.domain=o.domain),null!=o.version&&o.hasOwnProperty("version")&&(f.version="number"==typeof o.version?d.longs===String?String(o.version):o.version:d.longs===String?b.Long.prototype.toString.call(o.version):d.longs===Number?new b.LongBits(o.version.low>>>0,o.version.high>>>0).toNumber():o.version),f},u.prototype.toJSON=function(){return this.constructor.toObject(this,v.util.toJSONOptions)},u}(),P),ye.exports=p},2100:(ye,M,k)=>{"use strict";ye.exports=k(9482)},9482:(ye,M,k)=>{"use strict";var I=M;function D(){I.util._configure(),I.Writer._configure(I.BufferWriter),I.Reader._configure(I.BufferReader)}I.build="minimal",I.Writer=k(1173),I.BufferWriter=k(3155),I.Reader=k(1408),I.BufferReader=k(593),I.util=k(9693),I.rpc=k(5994),I.roots=k(5054),I.configure=D,D()},1408:(ye,M,k)=>{"use strict";ye.exports=S;var I,D=k(9693),P=D.LongBits,v=D.utf8;function w(y,x){return RangeError("index out of range: "+y.pos+" + "+(x||1)+" > "+y.len)}function S(y){this.buf=y,this.pos=0,this.len=y.length}var b,p="undefined"!=typeof Uint8Array?function(y){if(y instanceof Uint8Array||Array.isArray(y))return new S(y);throw Error("illegal buffer")}:function(y){if(Array.isArray(y))return new S(y);throw Error("illegal buffer")},u=function(){return D.Buffer?function(y){return(S.create=function(x){return D.Buffer.isBuffer(x)?new I(x):p(x)})(y)}:p};function o(){var y=new P(0,0),x=0;if(!(this.len-this.pos>4)){for(;x<3;++x){if(this.pos>=this.len)throw w(this);if(y.lo=(y.lo|(127&this.buf[this.pos])<<7*x)>>>0,this.buf[this.pos++]<128)return y}return y.lo=(y.lo|(127&this.buf[this.pos++])<<7*x)>>>0,y}for(;x<4;++x)if(y.lo=(y.lo|(127&this.buf[this.pos])<<7*x)>>>0,this.buf[this.pos++]<128)return y;if(y.lo=(y.lo|(127&this.buf[this.pos])<<28)>>>0,y.hi=(y.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return y;if(x=0,this.len-this.pos>4){for(;x<5;++x)if(y.hi=(y.hi|(127&this.buf[this.pos])<<7*x+3)>>>0,this.buf[this.pos++]<128)return y}else for(;x<5;++x){if(this.pos>=this.len)throw w(this);if(y.hi=(y.hi|(127&this.buf[this.pos])<<7*x+3)>>>0,this.buf[this.pos++]<128)return y}throw Error("invalid varint encoding")}function d(y,x){return(y[x-4]|y[x-3]<<8|y[x-2]<<16|y[x-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw w(this,8);return new P(d(this.buf,this.pos+=4),d(this.buf,this.pos+=4))}S.create=u(),S.prototype._slice=D.Array.prototype.subarray||D.Array.prototype.slice,S.prototype.uint32=(b=4294967295,function(){if(b=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(b=(b|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(b=(b|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(b=(b|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(b=(b|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return b;if((this.pos+=5)>this.len)throw this.pos=this.len,w(this,10);return b}),S.prototype.int32=function(){return 0|this.uint32()},S.prototype.sint32=function(){var y=this.uint32();return y>>>1^-(1&y)|0},S.prototype.bool=function(){return 0!==this.uint32()},S.prototype.fixed32=function(){if(this.pos+4>this.len)throw w(this,4);return d(this.buf,this.pos+=4)},S.prototype.sfixed32=function(){if(this.pos+4>this.len)throw w(this,4);return 0|d(this.buf,this.pos+=4)},S.prototype.float=function(){if(this.pos+4>this.len)throw w(this,4);var y=D.float.readFloatLE(this.buf,this.pos);return this.pos+=4,y},S.prototype.double=function(){if(this.pos+8>this.len)throw w(this,4);var y=D.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,y},S.prototype.bytes=function(){var y=this.uint32(),x=this.pos,E=this.pos+y;if(E>this.len)throw w(this,y);return this.pos+=y,Array.isArray(this.buf)?this.buf.slice(x,E):x===E?new this.buf.constructor(0):this._slice.call(this.buf,x,E)},S.prototype.string=function(){var y=this.bytes();return v.read(y,0,y.length)},S.prototype.skip=function(y){if("number"==typeof y){if(this.pos+y>this.len)throw w(this,y);this.pos+=y}else do{if(this.pos>=this.len)throw w(this)}while(128&this.buf[this.pos++]);return this},S.prototype.skipType=function(y){switch(y){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(y=7&this.uint32());)this.skipType(y);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+y+" at offset "+this.pos)}return this},S._configure=function(y){I=y,S.create=u(),I._configure();var x=D.Long?"toLong":"toNumber";D.merge(S.prototype,{int64:function(){return o.call(this)[x](!1)},uint64:function(){return o.call(this)[x](!0)},sint64:function(){return o.call(this).zzDecode()[x](!1)},fixed64:function(){return f.call(this)[x](!0)},sfixed64:function(){return f.call(this)[x](!1)}})}},593:(ye,M,k)=>{"use strict";ye.exports=P;var I=k(1408);(P.prototype=Object.create(I.prototype)).constructor=P;var D=k(9693);function P(v){I.call(this,v)}P._configure=function(){D.Buffer&&(P.prototype._slice=D.Buffer.prototype.slice)},P.prototype.string=function(){var v=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+v,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+v,this.len))},P._configure()},5054:ye=>{"use strict";ye.exports={}},5994:(ye,M,k)=>{"use strict";M.Service=k(7948)},7948:(ye,M,k)=>{"use strict";ye.exports=D;var I=k(9693);function D(P,v,w){if("function"!=typeof P)throw TypeError("rpcImpl must be a function");I.EventEmitter.call(this),this.rpcImpl=P,this.requestDelimited=Boolean(v),this.responseDelimited=Boolean(w)}(D.prototype=Object.create(I.EventEmitter.prototype)).constructor=D,D.prototype.rpcCall=function P(v,w,S,b,p){if(!b)throw TypeError("request must be specified");var u=this;if(!p)return I.asPromise(P,u,v,w,S,b);if(u.rpcImpl)try{return u.rpcImpl(v,w[u.requestDelimited?"encodeDelimited":"encode"](b).finish(),function(o,d){if(o)return u.emit("error",o,v),p(o);if(null!==d){if(!(d instanceof S))try{d=S[u.responseDelimited?"decodeDelimited":"decode"](d)}catch(f){return u.emit("error",f,v),p(f)}return u.emit("data",d,v),p(null,d)}u.end(!0)})}catch(o){return u.emit("error",o,v),void setTimeout(function(){p(o)},0)}else setTimeout(function(){p(Error("already ended"))},0)},D.prototype.end=function(P){return this.rpcImpl&&(P||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1945:(ye,M,k)=>{"use strict";ye.exports=D;var I=k(9693);function D(S,b){this.lo=S>>>0,this.hi=b>>>0}var P=D.zero=new D(0,0);P.toNumber=function(){return 0},P.zzEncode=P.zzDecode=function(){return this},P.length=function(){return 1};var v=D.zeroHash="\0\0\0\0\0\0\0\0";D.fromNumber=function(S){if(0===S)return P;var b=S<0;b&&(S=-S);var p=S>>>0,u=(S-p)/4294967296>>>0;return b&&(u=~u>>>0,p=~p>>>0,++p>4294967295&&(p=0,++u>4294967295&&(u=0))),new D(p,u)},D.from=function(S){if("number"==typeof S)return D.fromNumber(S);if(I.isString(S)){if(!I.Long)return D.fromNumber(parseInt(S,10));S=I.Long.fromString(S)}return S.low||S.high?new D(S.low>>>0,S.high>>>0):P},D.prototype.toNumber=function(S){if(!S&&this.hi>>>31){var b=1+~this.lo>>>0,p=~this.hi>>>0;return b||(p=p+1>>>0),-(b+4294967296*p)}return this.lo+4294967296*this.hi},D.prototype.toLong=function(S){return I.Long?new I.Long(0|this.lo,0|this.hi,Boolean(S)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(S)}};var w=String.prototype.charCodeAt;D.fromHash=function(S){return S===v?P:new D((w.call(S,0)|w.call(S,1)<<8|w.call(S,2)<<16|w.call(S,3)<<24)>>>0,(w.call(S,4)|w.call(S,5)<<8|w.call(S,6)<<16|w.call(S,7)<<24)>>>0)},D.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},D.prototype.zzEncode=function(){var S=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^S)>>>0,this.lo=(this.lo<<1^S)>>>0,this},D.prototype.zzDecode=function(){var S=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^S)>>>0,this.hi=(this.hi>>>1^S)>>>0,this},D.prototype.length=function(){var S=this.lo,b=(this.lo>>>28|this.hi<<4)>>>0,p=this.hi>>>24;return 0===p?0===b?S<16384?S<128?1:2:S<2097152?3:4:b<16384?b<128?5:6:b<2097152?7:8:p<128?9:10}},9693:function(ye,M,k){"use strict";var I=M;function D(v,w,S){for(var b=Object.keys(w),p=0;p<b.length;++p)void 0!==v[b[p]]&&S||(v[b[p]]=w[b[p]]);return v}function P(v){function w(S,b){if(!(this instanceof w))return new w(S,b);Object.defineProperty(this,"message",{get:function(){return S}}),Error.captureStackTrace?Error.captureStackTrace(this,w):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),b&&D(this,b)}return(w.prototype=Object.create(Error.prototype)).constructor=w,Object.defineProperty(w.prototype,"name",{get:function(){return v}}),w.prototype.toString=function(){return this.name+": "+this.message},w}I.asPromise=k(4537),I.base64=k(7419),I.EventEmitter=k(9211),I.float=k(945),I.inquire=k(7199),I.utf8=k(4997),I.pool=k(6662),I.LongBits=k(1945),I.isNode=Boolean(void 0!==k.g&&k.g&&k.g.process&&k.g.process.versions&&k.g.process.versions.node),I.global=I.isNode&&k.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,I.emptyArray=Object.freeze?Object.freeze([]):[],I.emptyObject=Object.freeze?Object.freeze({}):{},I.isInteger=Number.isInteger||function(v){return"number"==typeof v&&isFinite(v)&&Math.floor(v)===v},I.isString=function(v){return"string"==typeof v||v instanceof String},I.isObject=function(v){return v&&"object"==typeof v},I.isset=I.isSet=function(v,w){var S=v[w];return!(null==S||!v.hasOwnProperty(w))&&("object"!=typeof S||(Array.isArray(S)?S.length:Object.keys(S).length)>0)},I.Buffer=function(){try{var v=I.inquire("buffer").Buffer;return v.prototype.utf8Write?v:null}catch(w){return null}}(),I._Buffer_from=null,I._Buffer_allocUnsafe=null,I.newBuffer=function(v){return"number"==typeof v?I.Buffer?I._Buffer_allocUnsafe(v):new I.Array(v):I.Buffer?I._Buffer_from(v):"undefined"==typeof Uint8Array?v:new Uint8Array(v)},I.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,I.Long=I.global.dcodeIO&&I.global.dcodeIO.Long||I.global.Long||I.inquire("long"),I.key2Re=/^true|false|0|1$/,I.key32Re=/^-?(?:0|[1-9][0-9]*)$/,I.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,I.longToHash=function(v){return v?I.LongBits.from(v).toHash():I.LongBits.zeroHash},I.longFromHash=function(v,w){var S=I.LongBits.fromHash(v);return I.Long?I.Long.fromBits(S.lo,S.hi,w):S.toNumber(Boolean(w))},I.merge=D,I.lcFirst=function(v){return v.charAt(0).toLowerCase()+v.substring(1)},I.newError=P,I.ProtocolError=P("ProtocolError"),I.oneOfGetter=function(v){for(var w={},S=0;S<v.length;++S)w[v[S]]=1;return function(){for(var b=Object.keys(this),p=b.length-1;p>-1;--p)if(1===w[b[p]]&&null!=this[b[p]])return b[p]}},I.oneOfSetter=function(v){return function(w){for(var S=0;S<v.length;++S)v[S]!==w&&delete this[v[S]]}},I.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},I._configure=function(){var v=I.Buffer;v?(I._Buffer_from=v.from!==Uint8Array.from&&v.from||function(w,S){return new v(w,S)},I._Buffer_allocUnsafe=v.allocUnsafe||function(w){return new v(w)}):I._Buffer_from=I._Buffer_allocUnsafe=null}},1173:(ye,M,k)=>{"use strict";ye.exports=u;var I,D=k(9693),P=D.LongBits,v=D.base64,w=D.utf8;function S(R,N,L){this.fn=R,this.len=N,this.next=void 0,this.val=L}function b(){}function p(R){this.head=R.head,this.tail=R.tail,this.len=R.len,this.next=R.states}function u(){this.len=0,this.head=new S(b,0,0),this.tail=this.head,this.states=null}var o=function(){return D.Buffer?function(){return(u.create=function(){return new I})()}:function(){return new u}};function d(R,N,L){N[L]=255&R}function f(R,N){this.len=R,this.next=void 0,this.val=N}function y(R,N,L){for(;R.hi;)N[L++]=127&R.lo|128,R.lo=(R.lo>>>7|R.hi<<25)>>>0,R.hi>>>=7;for(;R.lo>127;)N[L++]=127&R.lo|128,R.lo=R.lo>>>7;N[L++]=R.lo}function x(R,N,L){N[L]=255&R,N[L+1]=R>>>8&255,N[L+2]=R>>>16&255,N[L+3]=R>>>24}u.create=o(),u.alloc=function(R){return new D.Array(R)},D.Array!==Array&&(u.alloc=D.pool(u.alloc,D.Array.prototype.subarray)),u.prototype._push=function(R,N,L){return this.tail=this.tail.next=new S(R,N,L),this.len+=N,this},(f.prototype=Object.create(S.prototype)).fn=function(R,N,L){for(;R>127;)N[L++]=127&R|128,R>>>=7;N[L]=R},u.prototype.uint32=function(R){return this.len+=(this.tail=this.tail.next=new f((R>>>=0)<128?1:R<16384?2:R<2097152?3:R<268435456?4:5,R)).len,this},u.prototype.int32=function(R){return R<0?this._push(y,10,P.fromNumber(R)):this.uint32(R)},u.prototype.sint32=function(R){return this.uint32((R<<1^R>>31)>>>0)},u.prototype.int64=u.prototype.uint64=function(R){var N=P.from(R);return this._push(y,N.length(),N)},u.prototype.sint64=function(R){var N=P.from(R).zzEncode();return this._push(y,N.length(),N)},u.prototype.bool=function(R){return this._push(d,1,R?1:0)},u.prototype.sfixed32=u.prototype.fixed32=function(R){return this._push(x,4,R>>>0)},u.prototype.sfixed64=u.prototype.fixed64=function(R){var N=P.from(R);return this._push(x,4,N.lo)._push(x,4,N.hi)},u.prototype.float=function(R){return this._push(D.float.writeFloatLE,4,R)},u.prototype.double=function(R){return this._push(D.float.writeDoubleLE,8,R)};var E=D.Array.prototype.set?function(R,N,L){N.set(R,L)}:function(R,N,L){for(var F=0;F<R.length;++F)N[L+F]=R[F]};u.prototype.bytes=function(R){var N=R.length>>>0;if(!N)return this._push(d,1,0);if(D.isString(R)){var L=u.alloc(N=v.length(R));v.decode(R,L,0),R=L}return this.uint32(N)._push(E,N,R)},u.prototype.string=function(R){var N=w.length(R);return N?this.uint32(N)._push(w.write,N,R):this._push(d,1,0)},u.prototype.fork=function(){return this.states=new p(this),this.head=this.tail=new S(b,0,0),this.len=0,this},u.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new S(b,0,0),this.len=0),this},u.prototype.ldelim=function(){var R=this.head,N=this.tail,L=this.len;return this.reset().uint32(L),L&&(this.tail.next=R.next,this.tail=N,this.len+=L),this},u.prototype.finish=function(){for(var R=this.head.next,N=this.constructor.alloc(this.len),L=0;R;)R.fn(R.val,N,L),L+=R.len,R=R.next;return N},u._configure=function(R){I=R,u.create=o(),I._configure()}},3155:(ye,M,k)=>{"use strict";ye.exports=P;var I=k(1173);(P.prototype=Object.create(I.prototype)).constructor=P;var D=k(9693);function P(){I.call(this)}function v(w,S,b){w.length<40?D.utf8.write(w,S,b):S.utf8Write?S.utf8Write(w,b):S.write(w,b)}P._configure=function(){P.alloc=D._Buffer_allocUnsafe,P.writeBytesBuffer=D.Buffer&&D.Buffer.prototype instanceof Uint8Array&&"set"===D.Buffer.prototype.set.name?function(w,S,b){S.set(w,b)}:function(w,S,b){if(w.copy)w.copy(S,b,0,w.length);else for(var p=0;p<w.length;)S[b++]=w[p++]}},P.prototype.bytes=function(w){D.isString(w)&&(w=D._Buffer_from(w,"base64"));var S=w.length>>>0;return this.uint32(S),S&&this._push(P.writeBytesBuffer,S,w),this},P.prototype.string=function(w){var S=D.Buffer.byteLength(w);return this.uint32(S),S&&this._push(v,S,w),this},P._configure()},7714:(ye,M,k)=>{"use strict";M.R=void 0;const I=k(6919),D=k(7448);M.R=new class{init(){return _asyncToGenerator(function*(){})()}createSessionHandler(P,v){return _asyncToGenerator(function*(){const w=new I.Session(v);return yield w.loadModel(P),new D.OnnxjsSessionHandler(w)})()}}},4200:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.wasmBackend=M.initializeFlags=void 0;const I=k(2203),D=k(2174),P=k(5381),v=k(8022),w=k(2157),S=k(2306);M.initializeFlags=()=>{if(("number"!=typeof D.env.wasm.initTimeout||D.env.wasm.initTimeout<0)&&(D.env.wasm.initTimeout=0),"boolean"!=typeof D.env.wasm.simd&&(D.env.wasm.simd=!0),"boolean"!=typeof D.env.wasm.proxy&&(D.env.wasm.proxy=!1),"number"!=typeof D.env.wasm.numThreads||!Number.isInteger(D.env.wasm.numThreads)||D.env.wasm.numThreads<=0){const b="undefined"==typeof navigator?P.cpus().length:navigator.hardwareConcurrency;D.env.wasm.numThreads=Math.min(4,Math.ceil((b||1)/2))}},M.wasmBackend=new class{init(){return _asyncToGenerator(function*(){M.initializeFlags(),yield w.initWasm()})()}createSessionHandler(b,p){return _asyncToGenerator(function*(){let u;if("string"==typeof b)if("undefined"==typeof fetch)u=yield v.promisify(I.readFile)(b);else{const d=yield fetch(b),f=yield d.arrayBuffer();u=new Uint8Array(f)}else u=b;const o=new S.OnnxruntimeWebAssemblySessionHandler;return yield o.loadModel(u,p),Promise.resolve(o)})()}}},6018:function(ye,M,k){"use strict";var I=this&&this.__createBinding||(Object.create?function(v,w,S,b){void 0===b&&(b=S),Object.defineProperty(v,b,{enumerable:!0,get:function(){return w[S]}})}:function(v,w,S,b){void 0===b&&(b=S),v[b]=w[S]}),D=this&&this.__exportStar||function(v,w){for(var S in v)"default"===S||Object.prototype.hasOwnProperty.call(w,S)||I(w,v,S)};Object.defineProperty(M,"__esModule",{value:!0}),D(k(2174),M);const P=k(2174);{const v=k(7714).R;P.registerBackend("webgl",v,-1)}{const v=k(4200).wasmBackend;P.registerBackend("wasm",v,0)}},246:(ye,M)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.createAttributeWithCacheKey=void 0;class k{constructor(D){Object.assign(this,D)}get cacheKey(){return this._cacheKey||(this._cacheKey=Object.getOwnPropertyNames(this).sort().map(D=>`${this[D]}`).join(";")),this._cacheKey}}M.createAttributeWithCacheKey=I=>new k(I)},7778:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.Attribute=void 0;const I=k(1446),D=k(9395),P=k(9162),v=k(2517);var w=D.onnxruntime.experimental.fbs;class S{constructor(p){if(this._attributes=new Map,null!=p){for(const u of p)u instanceof I.onnx.AttributeProto?this._attributes.set(u.name,[S.getValue(u),S.getType(u)]):u instanceof w.Attribute&&this._attributes.set(u.name(),[S.getValue(u),S.getType(u)]);if(this._attributes.size<p.length)throw new Error("duplicated attribute names")}}set(p,u,o){this._attributes.set(p,[o,u])}delete(p){this._attributes.delete(p)}getFloat(p,u){return this.get(p,"float",u)}getInt(p,u){return this.get(p,"int",u)}getString(p,u){return this.get(p,"string",u)}getTensor(p,u){return this.get(p,"tensor",u)}getFloats(p,u){return this.get(p,"floats",u)}getInts(p,u){return this.get(p,"ints",u)}getStrings(p,u){return this.get(p,"strings",u)}getTensors(p,u){return this.get(p,"tensors",u)}get(p,u,o){const d=this._attributes.get(p);if(void 0===d){if(void 0!==o)return o;throw new Error(`required attribute not found: ${p}`)}if(d[1]!==u)throw new Error(`type mismatch: expected ${u} but got ${d[1]}`);return d[0]}static getType(p){const u=p instanceof I.onnx.AttributeProto?p.type:p.type();switch(u){case I.onnx.AttributeProto.AttributeType.FLOAT:return"float";case I.onnx.AttributeProto.AttributeType.INT:return"int";case I.onnx.AttributeProto.AttributeType.STRING:return"string";case I.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case I.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case I.onnx.AttributeProto.AttributeType.INTS:return"ints";case I.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case I.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error(`attribute type is not supported yet: ${I.onnx.AttributeProto.AttributeType[u]}`)}}static getValue(p){const u=p instanceof I.onnx.AttributeProto?p.type:p.type();if(u===I.onnx.AttributeProto.AttributeType.GRAPH||u===I.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");const o=this.getValueNoCheck(p);if(u===I.onnx.AttributeProto.AttributeType.INT&&v.LongUtil.isLong(o))return v.LongUtil.longToNumber(o);if(u===I.onnx.AttributeProto.AttributeType.INTS){const d=o,f=new Array(d.length);for(let y=0;y<d.length;y++)f[y]=v.LongUtil.longToNumber(d[y]);return f}if(u===I.onnx.AttributeProto.AttributeType.TENSOR)return p instanceof I.onnx.AttributeProto?P.Tensor.fromProto(o):P.Tensor.fromOrtTensor(o);if(u===I.onnx.AttributeProto.AttributeType.TENSORS){if(p instanceof I.onnx.AttributeProto)return o.map(d=>P.Tensor.fromProto(d));if(p instanceof w.Attribute)return o.map(d=>P.Tensor.fromOrtTensor(d))}return u===I.onnx.AttributeProto.AttributeType.STRING&&p instanceof I.onnx.AttributeProto?v.decodeUtf8String(o):u===I.onnx.AttributeProto.AttributeType.STRINGS&&p instanceof I.onnx.AttributeProto?o.map(v.decodeUtf8String):o}static getValueNoCheck(p){return p instanceof I.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(p):this.getValueNoCheckFromOrtFormat(p)}static getValueNoCheckFromOnnxFormat(p){switch(p.type){case I.onnx.AttributeProto.AttributeType.FLOAT:return p.f;case I.onnx.AttributeProto.AttributeType.INT:return p.i;case I.onnx.AttributeProto.AttributeType.STRING:return p.s;case I.onnx.AttributeProto.AttributeType.TENSOR:return p.t;case I.onnx.AttributeProto.AttributeType.GRAPH:return p.g;case I.onnx.AttributeProto.AttributeType.FLOATS:return p.floats;case I.onnx.AttributeProto.AttributeType.INTS:return p.ints;case I.onnx.AttributeProto.AttributeType.STRINGS:return p.strings;case I.onnx.AttributeProto.AttributeType.TENSORS:return p.tensors;case I.onnx.AttributeProto.AttributeType.GRAPHS:return p.graphs;default:throw new Error(`unsupported attribute type: ${I.onnx.AttributeProto.AttributeType[p.type]}`)}}static getValueNoCheckFromOrtFormat(p){switch(p.type()){case w.AttributeType.FLOAT:return p.f();case w.AttributeType.INT:return p.i();case w.AttributeType.STRING:return p.s();case w.AttributeType.TENSOR:return p.t();case w.AttributeType.GRAPH:return p.g();case w.AttributeType.FLOATS:return p.floatsArray();case w.AttributeType.INTS:{const u=[];for(let o=0;o<p.intsLength();o++)u.push(p.ints(o));return u}case w.AttributeType.STRINGS:{const u=[];for(let o=0;o<p.stringsLength();o++)u.push(p.strings(o));return u}case w.AttributeType.TENSORS:{const u=[];for(let o=0;o<p.tensorsLength();o++)u.push(p.tensors(o));return u}default:throw new Error(`unsupported attribute type: ${w.AttributeType[p.type()]}`)}}}M.Attribute=S},7091:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.resolveBackend=M.backend=void 0;const I=k(5038),D=new Map;function P(w){return v.apply(this,arguments)}function v(){return(v=_asyncToGenerator(function*(w){const S=M.backend;if(void 0!==S[w]&&"initialize"in(b=S[w])&&"function"==typeof b.initialize&&"createSessionHandler"in b&&"function"==typeof b.createSessionHandler&&"dispose"in b&&"function"==typeof b.dispose){const b=S[w];let p=b.initialize();if("object"==typeof p&&"then"in p&&(p=yield p),p)return D.set(w,b),b}var b})).apply(this,arguments)}M.backend={webgl:new I.WebGLBackend},M.resolveBackend=function(){var w=_asyncToGenerator(function*(b){if(!b)return S(["webgl"]);{const p="string"==typeof b?[b]:b;for(const u of p){const o=D.get(u);if(o)return o;const d=yield P(u);if(d)return d}}throw new Error("no available backend to use")});function S(b){return w.apply(this,arguments)}return S}()},5038:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.WebGLBackend=void 0;const I=k(2174),D=k(6231),P=k(6416),v=k(7305);M.WebGLBackend=class{get contextId(){return I.env.webgl.contextId}set contextId(w){I.env.webgl.contextId=w}get matmulMaxBatchSize(){return I.env.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(w){I.env.webgl.matmulMaxBatchSize=w}get textureCacheMode(){return I.env.webgl.textureCacheMode}set textureCacheMode(w){I.env.webgl.textureCacheMode=w}get pack(){return I.env.webgl.pack}set pack(w){I.env.webgl.pack=w}get async(){return I.env.webgl.async}set async(w){I.env.webgl.async=w}initialize(){try{return this.glContext=v.createWebGLContext(this.contextId),"number"!=typeof this.matmulMaxBatchSize&&(this.matmulMaxBatchSize=16),"string"!=typeof this.textureCacheMode&&(this.textureCacheMode="full"),"boolean"!=typeof this.pack&&(this.pack=!1),"boolean"!=typeof this.async&&(this.async=!1),D.Logger.setWithEnv(I.env),D.Logger.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch(w){return D.Logger.warning("WebGLBackend",`Unable to initialize WebGLBackend. ${w}`),!1}}createSessionHandler(w){return new P.WebGLSessionHandler(this,w)}dispose(){this.glContext.dispose()}}},5107:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.CoordsGlslLib=void 0;const I=k(2517),D=k(8520),P=k(5060),v=k(7859),w=k(9390);M.CoordsGlslLib=class S extends D.GlslLib{constructor(p){super(p)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.offsetToCoords()),this.coordsToOffset()),this.toVec()),this.valueFrom()),this.getCommonUtilFuncs()),this.getInputsSamplingSnippets()),this.getOutputSamplingSnippet())}getCustomTypes(){return{}}offsetToCoords(){return{offsetToCoords:new D.GlslLibRoutine("\n      vec2 offsetToCoords(int offset, int width, int height) {\n        int t = offset / width;\n        int s = offset - t*width;\n        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);\n        return coords;\n      }\n      ")}}coordsToOffset(){return{coordsToOffset:new D.GlslLibRoutine("\n      int coordsToOffset(vec2 coords, int width, int height) {\n        float s = coords.s * float(width);\n        float t = coords.t * float(height);\n        int offset = int(t) * width + int(s);\n        return offset;\n      }\n      ")}}getOutputSamplingSnippet(){const p=this.context.outputTextureLayout;return p.isPacked?this.getPackedOutputSamplingSnippet(p):this.getUnpackedOutputSamplingSnippet(p)}getPackedOutputSamplingSnippet(p){const u=p.unpackedShape,o=[p.width,p.height],d={},f="getOutputCoords";switch(u.length){case 0:d[f]=this.getOutputScalarCoords();break;case 1:d[f]=this.getOutputPacked1DCoords(u,o);break;case 2:d[f]=this.getOutputPacked2DCoords(u,o);break;case 3:d[f]=this.getOutputPacked3DCoords(u,o);break;default:d[f]=this.getOutputPackedNDCoords(u,o)}const y=`\n      void setOutput(vec4 val) {\n        ${P.getGlsl(this.context.glContext.version).output} = val;\n      }\n    `;return d.floatTextureSetRGBA=new D.GlslLibRoutine(y),d}getUnpackedOutputSamplingSnippet(p){const u=p.unpackedShape,o=[p.width,p.height],d={},f="getOutputCoords";switch(u.length){case 0:d[f]=this.getOutputScalarCoords();break;case 1:d[f]=this.getOutputUnpacked1DCoords(u,o);break;case 2:d[f]=this.getOutputUnpacked2DCoords(u,o);break;case 3:d[f]=this.getOutputUnpacked3DCoords(u,o);break;case 4:d[f]=this.getOutputUnpacked4DCoords(u,o);break;case 5:d[f]=this.getOutputUnpacked5DCoords(u,o);break;case 6:d[f]=this.getOutputUnpacked6DCoords(u,o);break;default:throw new Error(`Unsupported output dimensionality: ${u.length}`)}const y=`\n        void setOutput(float val) {\n          ${P.getGlsl(this.context.glContext.version).output} = vec4(val, 0, 0, 0);\n        }\n    `;return d.floatTextureSetR=new D.GlslLibRoutine(y),d}getOutputScalarCoords(){return new D.GlslLibRoutine("\n      int getOutputCoords() {\n        return 0;\n      }\n    ")}getOutputPacked1DCoords(p,u){const o=u;let d="";return 1===o[0]?(d=`\n          int getOutputCoords() {\n            return 2 * int(TexCoords.y * ${o[1]}.0);\n          }\n        `,new D.GlslLibRoutine(d)):1===o[1]?(d=`\n          int getOutputCoords() {\n            return 2 * int(TexCoords.x * ${o[0]}.0);\n          }\n        `,new D.GlslLibRoutine(d)):(d=`\n        int getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                 vec2(${o[0]}, ${o[1]}));\n          return 2 * (resTexRC.y * ${o[0]} + resTexRC.x);\n        }\n      `,new D.GlslLibRoutine(d))}getOutputPacked2DCoords(p,u){let o="";if(I.ArrayUtil.arraysEqual(p,u))return o=`\n        ivec2 getOutputCoords() {\n          return 2 * ivec2(TexCoords.xy * vec2(${u[0]}, ${u[1]}));\n        }\n      `,new D.GlslLibRoutine(o);const d=u,f=Math.ceil(p[1]/2);return o=`\n        ivec2 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(${d[0]}, ${d[1]}));\n\n          int index = resTexRC.y * ${d[0]} + resTexRC.x;\n\n          // reverse r and c order for packed texture\n          int r = imod(index, ${f}) * 2;\n          int c = 2 * (index / ${f});\n\n          return ivec2(r, c);\n        }\n      `,new D.GlslLibRoutine(o)}getOutputPacked3DCoords(p,u){const o=[u[0],u[1]],d=Math.ceil(p[2]/2),f=d*Math.ceil(p[1]/2);return new D.GlslLibRoutine(`\n        ivec3 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(${o[0]}, ${o[1]}));\n          int index = resTexRC.y * ${o[0]} + resTexRC.x;\n\n          int b = index / ${f};\n          index -= b * ${f};\n\n          // reverse r and c order for packed texture\n          int r = imod(index, ${d}) * 2;\n          int c = 2 * (index / ${d});\n\n          return ivec3(b, r, c);\n        }\n      `)}getOutputPackedNDCoords(p,u){const o=[u[0],u[1]],d=Math.ceil(p[p.length-1]/2),f=d*Math.ceil(p[p.length-2]/2);let y=f,x="",E="b, r, c";for(let N=2;N<p.length-1;N++)y*=p[p.length-N-1],x=`\n      int b${N} = index / ${y};\n      index -= b${N} * ${y};\n    `+x,E=`b${N}, `+E;return new D.GlslLibRoutine(`\n      ivec${p.length} getOutputCoords() {\n        ivec2 resTexRC = ivec2(TexCoords.xy *\n                              vec2(${o[0]}, ${o[1]}));\n        int index = resTexRC.y * ${o[0]} + resTexRC.x;\n\n        ${x}\n\n        int b = index / ${f};\n        index -= b * ${f};\n\n        // reverse r and c order for packed texture\n        int r = imod(index, ${d}) * 2;\n        int c = 2 * (index / ${d});\n\n        return ivec${p.length}(${E});\n      }\n    `)}getOutputUnpacked1DCoords(p,u){return new D.GlslLibRoutine(`\n        int getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(${u[0]}, ${u[1]}));\n          return resTexRC.y * ${u[0]} + resTexRC.x;\n        }\n      `)}getOutputUnpacked2DCoords(p,u){return new D.GlslLibRoutine(`\n        ivec2 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(${u[0]}, ${u[1]}));\n          int index = resTexRC.y * ${u[0]} + resTexRC.x;\n          int r = index / ${p[1]};\n          int c = index - r * ${p[1]};\n          return ivec2(r, c);\n        }\n      `)}getOutputUnpacked3DCoords(p,u){let o="";const d=p.length;let f=null;d<2&&(f=[]),f=new Array(d-1),f[d-2]=p[d-1];for(let E=d-3;E>=0;--E)f[E]=f[E+1]*p[E+1];const y=["r","c","d"],x=f.map((E,R)=>`int ${y[R]} = index / ${E}; ${R===f.length-1?`int ${y[R+1]} = index - ${y[R]} * ${E}`:`index -= ${y[R]} * ${E}`};`).join("");return o=`\n        ivec3 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(${u[0]}, ${u[1]}));\n          int index = resTexRC.y * ${u[0]} + resTexRC.x;\n          ${x}\n          return ivec3(r, c, d);\n        }\n      `,new D.GlslLibRoutine(o)}getOutputUnpacked4DCoords(p,u){let o="";const d=p.length;let f=null;d<2&&(f=[]),f=new Array(d-1),f[d-2]=p[d-1];for(let E=d-3;E>=0;--E)f[E]=f[E+1]*p[E+1];const y=["r","c","d","d2"],x=f.map((E,R)=>`int ${y[R]} = index / ${E}; ${R===f.length-1?`int ${y[R+1]} = index - ${y[R]} * ${E}`:`index -= ${y[R]} * ${E}`};`).join("");return o=`\n      ivec4 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(${u[0]}, ${u[1]}));\n          int index = resTexRC.y * ${u[0]} + resTexRC.x;\n          ${x}\n          return ivec4(r, c, d, d2);\n        }\n      `,new D.GlslLibRoutine(o)}getOutputUnpacked5DCoords(p,u){let o="";const d=p.length;let f=null;d<2&&(f=[]),f=new Array(d-1),f[d-2]=p[d-1];for(let E=d-3;E>=0;--E)f[E]=f[E+1]*p[E+1];const y=["r","c","d","d2","d3"],x=f.map((E,R)=>`int ${y[R]} = index / ${E}; ${R===f.length-1?`int ${y[R+1]} = index - ${y[R]} * ${E}`:`index -= ${y[R]} * ${E}`};`).join("");return o=`\n      ivec5 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(${u[0]}, ${u[1]}));\n          int index = resTexRC.y * ${u[0]} + resTexRC.x;\n          ${x}\n          return ivec5(r, c, d, d2, d3);\n        }\n      `,new D.GlslLibRoutine(o)}getOutputUnpacked6DCoords(p,u){let o="";const d=p.length;let f=null;d<2&&(f=[]),f=new Array(d-1),f[d-2]=p[d-1];for(let E=d-3;E>=0;--E)f[E]=f[E+1]*p[E+1];const y=["r","c","d","d2","d3","d4"],x=f.map((E,R)=>`int ${y[R]} = index / ${E}; ${R===f.length-1?`int ${y[R+1]} = index - ${y[R]} * ${E}`:`index -= ${y[R]} * ${E}`};`).join("");return o=`\n     ivec6 getOutputCoords() {\n         ivec2 resTexRC = ivec2(TexCoords.xy *\n                               vec2(${u[0]}, ${u[1]}));\n         int index = resTexRC.y * ${u[0]} + resTexRC.x;\n         ${x}\n         return ivec6(r, c, d, d2, d3, d4);\n       }\n     `,new D.GlslLibRoutine(o)}getCommonUtilFuncs(){const p={};let u="uvFromFlat";p[u]=new D.GlslLibRoutine("\n    vec2 uvFromFlat(int texNumR, int texNumC, int index) {\n      int texC = index / texNumR;\n      int texR = index - texC * texNumR;\n      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to\n      //       v.\n      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);\n    }\n    "),u="packedUVfrom1D",p[u]=new D.GlslLibRoutine("\n      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n        int texelIndex = index / 2;\n        int texR = texelIndex / texNumC;\n        int texC = texelIndex - texR * texNumC;\n        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n      }\n      "),u="packedUVfrom2D",p[u]=new D.GlslLibRoutine("\n      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {\n        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n        int texR = texelIndex / texNumC;\n        int texC = texelIndex - texR * texNumC;\n        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n      }\n      "),u="packedUVfrom3D",p[u]=new D.GlslLibRoutine("\n      vec2 packedUVfrom3D(int texNumR, int texNumC,\n          int texelsInBatch, int texelsInLogicalRow, int b,\n          int row, int col) {\n        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n        int texR = index / texNumC;\n        int texC = index - texR * texNumC;\n        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n      }\n      "),u="sampleTexture";const o=P.getGlsl(this.context.glContext.version);return p[u]=new D.GlslLibRoutine(`\n        float sampleTexture(sampler2D textureSampler, vec2 uv) {\n            return ${o.texture2D}(textureSampler, uv).r;\n        }`),p}getInputsSamplingSnippets(){const p={},u=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((o,d)=>{const f=this.context.inputTextureLayouts[d],y=w.generateShaderFuncNameFromInputSamplerName(o);p[y]=f.isPacked?this.getPackedSamplerFromInput(y,o,f):this.getUnpackedSamplerFromInput(y,o,f);const x=w.generateShaderFuncNameFromInputSamplerNameAtOutCoords(o);f.unpackedShape.length<=u.unpackedShape.length&&(p[x]=f.isPacked?this.getPackedSamplerAtOutputCoords(x,f,u,o):this.getUnpackedSamplerAtOutputCoords(x,f,u,o))}),p}getPackedSamplerAtOutputCoords(p,u,o,d){const f=u.unpackedShape,y=o.unpackedShape,E=w.generateShaderFuncNameFromInputSamplerName(d),R=f.length,N=y.length,L=I.BroadcastUtil.getBroadcastDims(f,y),F=w.getCoordsDataType(N),H=N-R;let q;const W=w.getGlChannels();q=0===R?"":N<2&&L.length>=1?"coords = 0;":L.map(Ae=>`coords.${W[Ae+H]} = 0;`).join("\n");let U="";U=N<2&&R>0?"coords":f.map((Ae,Se)=>`coords.${W[Se+H]}`).join(", ");let ne="return outputValue;";const de=1===I.ShapeUtil.size(f),De=1===I.ShapeUtil.size(y);if(1!==R||de||De){if(de&&!De)ne=1===N?"\n          return vec4(outputValue.x, outputValue.x, 0., 0.);\n        ":"\n          return vec4(outputValue.x);\n        ";else if(L.length){const Ae=R-2,Se=R-1;L.indexOf(Ae)>-1&&L.indexOf(Se)>-1?ne="return vec4(outputValue.x);":L.indexOf(Ae)>-1?ne="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":L.indexOf(Se)>-1&&(ne="return vec4(outputValue.xx, outputValue.zz);")}}else ne="\n        return vec4(outputValue.xy, outputValue.xy);\n      ";return new D.GlslLibRoutine(`\n      vec4 ${p}() {\n        ${F} coords = getOutputCoords();\n        \n        int lastDim = coords.${W[N-1]};\n        coords.${W[N-1]} = coords.${W[N-2]};\n        coords.${W[N-2]} = lastDim;\n      \n        ${q}\n        vec4 outputValue = ${E}(${U});\n        ${ne}\n      }\n    `,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(p,u,o,d){const f=[o.width,o.height],y=[u.width,u.height],x=u.unpackedShape.length,E=o.unpackedShape.length,R=u.unpackedShape,N=o.unpackedShape,L=w.generateShaderFuncNameFromInputSamplerName(d);if(x===E&&I.ArrayUtil.arraysEqual(y,f))return new D.GlslLibRoutine(`\n          float ${p}() {\n            return sampleTexture(${d}, TexCoords);\n          }\n        `,["coordinates.sampleTexture"]);const F=w.getCoordsDataType(E),H=I.BroadcastUtil.getBroadcastDims(R,N),q=E-x;let W;const U=w.getGlChannels();W=0===x?"":E<2&&H.length>=1?"coords = 0;":H.map(De=>`coords.${U[De+q]} = 0;`).join("\n");let ne="";return ne=E<2&&x>0?"coords":u.unpackedShape.map((De,ue)=>`coords.${U[ue+q]}`).join(", "),new D.GlslLibRoutine(`\n        float ${p}() {\n          ${F} coords = getOutputCoords();\n          ${W}\n          return ${L}(${ne});\n        }\n      `,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(p,u,o){switch(o.unpackedShape.length){case 0:return this.getPackedSamplerScalar(p,u);case 1:return this.getPackedSampler1D(p,u,o);case 2:return this.getPackedSampler2D(p,u,o);case 3:return this.getPackedSampler3D(p,u,o);default:return this.getPackedSamplerND(p,u,o)}}getUnpackedSamplerFromInput(p,u,o){const d=o.unpackedShape;switch(d.length){case 0:return this.getUnpackedSamplerScalar(p,u,o);case 1:return this.getUnpackedSampler1D(p,u,o);case 2:return this.getUnpackedSampler2D(p,u,o);case 3:return this.getUnpackedSampler3D(p,u,o);case 4:return this.getUnpackedSampler4D(p,u,o);case 5:return this.getUnpackedSampler5D(p,u,o);case 6:return this.getUnpackedSampler6D(p,u,o);default:throw new Error(`Unsupported dimension ${d.length}-D`)}}getPackedSamplerScalar(p,u){const o=`\n          vec4 ${p}() {\n            return ${P.getGlsl(this.context.glContext.version).texture2D}(${u}, halfCR);\n          }\n        `;return new D.GlslLibRoutine(o)}getPackedSampler1D(p,u,o){const d=[o.width,o.height],f=[d[1],d[0]],y=P.getGlsl(this.context.glContext.version);return new D.GlslLibRoutine(`vec4 ${p}(int index) {\n      vec2 uv = packedUVfrom1D(\n      ${f[0]}, ${f[1]}, index);\n      return ${y.texture2D}(${u}, uv);\n    }`,["coordinates.packedUVfrom1D"])}getPackedSampler2D(p,u,o){const d=o.unpackedShape,f=[o.width,o.height],y=P.getGlsl(this.context.glContext.version),x=f[0],E=f[1];if(null!=f&&I.ArrayUtil.arraysEqual(d,f))return new D.GlslLibRoutine(`vec4 ${p}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${E}.0, ${x}.0);\n        return ${y.texture2D}(${u}, uv);\n      }`);const R=f,N=Math.ceil(d[1]/2);return new D.GlslLibRoutine(`vec4 ${p}(int row, int col) {\n      vec2 uv = packedUVfrom2D(${R[1]}, ${R[0]}, ${N}, row, col);\n      return ${y.texture2D}(${u}, uv);\n    }`,["coordinates.packedUVfrom2D"])}getPackedSampler3D(p,u,o){const d=o.unpackedShape,f=[o.width,o.height],y=[f[0],f[1]],x=P.getGlsl(this.context.glContext.version);if(1===d[0]){const F=d.slice(1),H=[1,2],q=w.squeezeInputShape(d,F),W=["b","row","col"],U=JSON.parse(JSON.stringify(o));U.unpackedShape=q;const ne=this.getPackedSamplerFromInput(p,u,U),de=`${ne.routineBody}\n      vec4 ${p}(int b, int row, int col) {\n        return ${p}(${w.getSqueezedParams(W,H)});\n      } `;return new D.GlslLibRoutine(de,ne.dependencies)}const E=y[0],R=y[1],N=Math.ceil(d[2]/2),L=`vec4 ${p}(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ${R}, ${E}, ${N*Math.ceil(d[1]/2)}, ${N}, b, row, col);\n      return ${x.texture2D}(${u}, uv);}`;return new D.GlslLibRoutine(L,["coordinates.packedUVfrom3D"])}getPackedSamplerND(p,u,o){const d=o.unpackedShape,f=d.length,y=[o.width,o.height],x=P.getGlsl(this.context.glContext.version),E=[y[0],y[1]],R=E[1],N=E[0],L=Math.ceil(d[f-1]/2);let F=L*Math.ceil(d[f-2]/2),H="int b, int row, int col",q=`b * ${F} + (row / 2) * ${L} + (col / 2)`;for(let U=2;U<f-1;U++)H=`int b${U}, `+H,F*=d[f-U-1],q=`b${U} * ${F} + `+q;return new D.GlslLibRoutine(`vec4 ${p}(${H}) {\n      int index = ${q};\n      int texR = index / ${N};\n      int texC = index - texR * ${N};\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${N}, ${R});\n      return ${x.texture2D}(${u}, uv);\n    }`)}getUnpackedSamplerScalar(p,u,o){const[d,f]=[o.width,o.height];return 1===d&&1===f?new D.GlslLibRoutine(`\n          float ${p}() {\n            return sampleTexture(${u}, halfCR);\n          }\n        `,["coordinates.sampleTexture"]):new D.GlslLibRoutine(`\n        float ${p}() {\n          int offset_${u} = coordsToOffset(TexCoords, ${d}, ${f});\n          vec2 uv = uvFromFlat(${d}, ${f}, offset_${u});\n          return sampleTexture(${u}, uv);\n        }\n      `,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(p,u,o){const d=o.width,f=o.height;return 1===f&&1===d?new D.GlslLibRoutine(`\n        float ${p}(int index) {\n          return sampleTexture(${u}, halfCR);\n        }\n      `,["coordinates.sampleTexture"]):1===f?new D.GlslLibRoutine(`\n          float ${p}(int index) {\n            vec2 uv = vec2((float(index) + 0.5) / ${d}.0, 0.5);\n            return sampleTexture(${u}, uv);\n          }\n        `,["coordinates.sampleTexture"]):1===d?new D.GlslLibRoutine(`\n          float ${p}(int index) {\n            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${f}.0);\n            return sampleTexture(${u}, uv);\n          }\n        `,["coordinates.sampleTexture"]):new D.GlslLibRoutine(`\n        float ${p}(int index) {\n          vec2 uv = uvFromFlat(${d}, ${f}, index);\n          return sampleTexture(${u}, uv);\n        }\n      `,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(p,u,o){const d=o.unpackedShape,f=[o.height,o.width];if(null!=f&&I.ArrayUtil.arraysEqual(d,f))return new D.GlslLibRoutine(`\n          float ${p}(int row, int col) {\n            vec2 uv = (vec2(row, col) + halfCR) / vec2(${f[1]}.0, ${f[0]}.0);\n            return sampleTexture(${u}, uv);\n          }\n        `,["coordinates.sampleTexture"]);const{newShape:y,keptDims:x}=v.squeezeShape(d);if(y.length<d.length){const F=w.squeezeInputShape(d,y),H=JSON.parse(JSON.stringify(o));H.unpackedShape=F;const q=["col","row"],W=`\n          ${this.getUnpackedSamplerFromInput(p,u,H).routineBody}\n          float ${p}(int row, int col) {\n            return ${p}(${w.getSqueezedParams(q,x)});\n          }\n        `;return new D.GlslLibRoutine(W,["coordinates.sampleTexture"])}const R=f[1],N=f[0];return 1===N?new D.GlslLibRoutine(`\n          float ${p}(int row, int col) {\n            int offset_${u} = coordsToOffset(TexCoords, ${R}, ${N});\n            float index = dot(vec3(row, col, offset_${u}), vec3(${d[1]}, 1, 1));\n            vec2 uv = vec2(0.5, (index + 0.5) / ${R}.0);\n            return sampleTexture(${u}, uv);\n          }\n        `,["coordinates.sampleTexture","coordinates.coordsToOffset"]):1===R?new D.GlslLibRoutine(`\n          float ${p}(int row, int col) {\n            int offset_${u} = coordsToOffset(TexCoords, ${R}, ${N});\n            float index = dot(vec3(row, col, offset_${u}), vec3(${d[1]}, 1, 1));\n            vec2 uv = vec2((index + 0.5) / ${N}.0, 0.5);\n            return sampleTexture(${u}, uv);\n          }\n        `,["coordinates.sampleTexture","coordinates.coordsToOffset"]):new D.GlslLibRoutine(`\n        float ${p}(int row, int col) {\n          int index = col * ${d[1]} + row;\n          vec2 uv = uvFromFlat(${R}, ${N}, index);\n          return sampleTexture(${u}, uv);\n        }\n      `,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(p,u,o){const d=o.unpackedShape,f=d[1]*d[2],y=d[2],{newShape:x,keptDims:E}=v.squeezeShape(d);if(x.length<d.length){const L=w.squeezeInputShape(d,x),F=["batch","col","row"],H=JSON.parse(JSON.stringify(o));H.unpackedShape=L;const q=this.getUnpackedSamplerFromInput(p,u,H),W=E.reverse(),U=`\n          ${q.routineBody}\n          float ${p}(int batch, int row, int col) {\n            return ${p}(${w.getSqueezedParams(F,W)});\n          }\n        `;return new D.GlslLibRoutine(U,q.dependencies)}return new D.GlslLibRoutine(`\n          float ${p}(int depth, int row, int col) {\n            // Explicitly use integer operations as dot() only works on floats.\n            int index = depth * ${f} + col * ${y} + row;\n            vec2 uv = uvFromFlat(${o.width}, ${o.height}, index);\n            return sampleTexture(${u}, uv);\n          }\n      `,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(p,u,o){const d=o.unpackedShape,f=d[3],y=d[2]*f;return new D.GlslLibRoutine(`\n        float ${p}(int row, int col, int depth, int depth2) {\n          int index = row * ${d[1]*y} + col * ${y} +\n              depth2 * ${f} + depth;\n          vec2 uv = uvFromFlat(${o.width}, ${o.height}, index);\n          return sampleTexture(${u}, uv);\n        }\n      `,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(p,u,o){const d=o.unpackedShape,f=d[4],y=d[3]*f,x=d[2]*y,E=d[1]*x,{newShape:R,keptDims:N}=v.squeezeShape(d);if(R.length<d.length){const F=w.squeezeInputShape(d,R),H=["row","col","depth","depth2","depth3"],q=JSON.parse(JSON.stringify(o));q.unpackedShape=F;const W=`\n          ${this.getUnpackedSamplerFromInput(p,u,q).routineBody}\n          float ${p}(int row, int col, int depth, int depth2, int depth3) {\n            return ${p}(${w.getSqueezedParams(H,N)});\n          }\n        `;return new D.GlslLibRoutine(W,["coordinates.sampleTexture","coordinates.uvFromFlat"])}return new D.GlslLibRoutine(`\n        float ${p}(int row, int col, int depth, int depth2, int depth3) {\n          int index = row * ${E} + col * ${x} + depth * ${y} +\n          depth3 * ${f} + depth2;\n          vec2 uv = uvFromFlat(${o.width}, ${o.height}, index);\n          return sampleTexture(${u}, uv);\n        }\n      `,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(p,u,o){const d=o.unpackedShape,f=d[5],y=d[4]*f,x=d[3]*y,E=d[2]*x,R=d[1]*E,{newShape:N,keptDims:L}=v.squeezeShape(d);if(N.length<d.length){const H=w.squeezeInputShape(d,N),q=["row","col","depth","depth2","depth3","depth4"],W=JSON.parse(JSON.stringify(o));W.unpackedShape=H;const U=`\n            ${this.getUnpackedSamplerFromInput(p,u,W).routineBody}\n            float ${p}(int row, int col, int depth,\n              int depth2, int depth3, int depth4) {\n              return ${p}(${w.getSqueezedParams(q,L)});\n            }\n          `;return new D.GlslLibRoutine(U,["coordinates.sampleTexture","coordinates.uvFromFlat"])}return new D.GlslLibRoutine(`\n          float ${p}(int row, int col, int depth,\n            int depth2, int depth3, int depth4) {\n            int index = row * ${R} + col * ${E} + depth * ${x} +\n            depth2 * ${y} + depth3 * ${f} + depth4;\n            vec2 uv = uvFromFlat(${o.width}, ${o.height}, index);\n            return sampleTexture(${u}, uv);\n          }\n        `,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){const p=this.context.outputTextureLayout,u=p.shape.length,o=p.strides,d=p.width,f=p.height,y=[];for(let E=0;E<u-1;++E)y.push(`\n        c[${E}] = offset / ${o[E]};`),y.push(`\n        offset -= c[${E}] * ${o[E]};`);y.push(`\n        c[${u-1}] = offset;`);const x=`\n      void toVec(vec2 texCoords, out int c[${u}]) {\n        int offset = coordsToOffset(texCoords, ${d}, ${f});\n        ${y.join("")}\n      }\n      void toVec(int offset, out int c[${u}]) {\n        ${y.join("")}\n      }\n    `;return{toVec:new D.GlslLibRoutine(x,["coordinates.coordsToOffset"])}}valueFrom(){const p={};return this.context.programInfo.inputNames.forEach((u,o)=>{const d=this.context.inputTextureLayouts[o],f=(d.unpackedShape.length>0?d.unpackedShape:d.shape).length;let y=`_${u}`;p[y]=new D.GlslLibRoutine(this.getValueFromSingle(u,f,d.width,d.height,!1),[`shapeUtils.indicesToOffset${y}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),y+="_T",p[y]=new D.GlslLibRoutine(this.getValueFromSingle(u,f,d.width,d.height,!0),[`shapeUtils.indicesToOffset${y}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])}),p}getValueFromSingle(p,u,o,d,f){let y=`_${p}`;return f&&(y+="_T"),`\n        float ${y}(int m[${u}]) {\n          int offset = indicesToOffset${y}(m);\n          vec2 coords = offsetToCoords(offset, ${o}, ${d});\n          float value = getColorAsFloat(${P.getGlsl(this.context.glContext.version).texture2D}(${p}, coords));\n          return value;\n        }\n        `}getPackedValueFrom(p,u,o,d,f){let y=`_${p}_Pack`;return f&&(y+="_T"),`\n        vec4 ${y}(int m[${u}]) {\n          int offset = indicesToOffset_${p}(m);\n          vec2 coords = offsetToCoords(offset, ${o}, ${d});\n          return ${P.getGlsl(this.context.glContext.version).texture2D}(${p}, coords);\n        }\n        `}}},8520:(ye,M)=>{"use strict";var k;Object.defineProperty(M,"__esModule",{value:!0}),M.TopologicalSortGlslRoutines=M.GlslLibRoutineNode=M.GlslLibRoutine=M.GlslLib=M.GlslContext=M.FunctionType=void 0,(k=M.FunctionType||(M.FunctionType={}))[k.ValueBased=0]="ValueBased",k[k.Positional=1]="Positional",M.GlslContext=class{constructor(I,D,P,v){this.glContext=I,this.programInfo=D,this.inputTextureLayouts=P,this.outputTextureLayout=v}},M.GlslLib=class{constructor(I){this.context=I}},M.GlslLibRoutine=class{constructor(I,D){this.routineBody=I,this.dependencies=D}},M.GlslLibRoutineNode=class{constructor(I,D,P){this.name=I,this.dependencies=P||[],D&&(this.routineBody=D)}addDependency(I){I&&this.dependencies.push(I)}},M.TopologicalSortGlslRoutines=class{static returnOrderedNodes(I){if(!I||0===I.length)return[];if(1===I.length)return I;const D=new Set,P=new Set,v=new Array;return this.createOrderedNodes(I,D,P,v),v}static createOrderedNodes(I,D,P,v){for(let w=0;w<I.length;++w)this.dfsTraverse(I[w],D,P,v)}static dfsTraverse(I,D,P,v){if(!I||P.has(I.name))return;if(D.has(I.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");D.add(I.name);const w=I.dependencies;if(w&&w.length>0)for(let S=0;S<w.length;++S)this.dfsTraverse(w[S],D,P,v);v.push(I),P.add(I.name),D.delete(I.name)}}},7341:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.EncodingGlslLib=void 0;const I=k(8520);class D extends I.GlslLib{constructor(v){super(v)}getFunctions(){return Object.assign(Object.assign({},this.encodeFloat32()),this.decodeFloat32())}getCustomTypes(){return{}}encodeFloat32(){return{encode:new I.GlslLibRoutine("highp vec4 encode(highp float f) {\n        return vec4(f, 0.0, 0.0, 0.0);\n      }\n        ")}}decodeFloat32(){return{decode:new I.GlslLibRoutine("highp float decode(highp vec4 rgba) {\n        return rgba.r;\n      }\n        ")}}encodeUint8(){const v=D.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new I.GlslLibRoutine(`\n      highp vec4 encode(highp float f) {\n        highp float F = abs(f);\n        highp float Sign = step(0.0,-f);\n        highp float Exponent = floor(log2(F));\n        highp float Mantissa = (exp2(- Exponent) * F);\n        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));\n        highp vec4 rgba;\n        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));\n        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);\n        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));\n        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));\n        ${v}\n        rgba = rgba / 255.0; // values need to be normalized to [0,1]\n        return rgba;\n    }\n        `)}}decodeUint8(){const v=D.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new I.GlslLibRoutine(`\n        highp float decode(highp vec4 rgba) {\n          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]\n          ${v}\n          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;\n          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;\n          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);\n          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));\n          return Result;\n      }\n        `)}}static isLittleEndian(){const v=new ArrayBuffer(4),w=new Uint32Array(v),S=new Uint8Array(v);if(w[0]=3735928559,239===S[0])return!0;if(222===S[0])return!1;throw new Error("unknown endianness")}}M.EncodingGlslLib=D},9894:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.FragColorGlslLib=void 0;const I=k(8520),D=k(5060);M.FragColorGlslLib=class P extends I.GlslLib{constructor(w){super(w)}getFunctions(){return Object.assign(Object.assign({},this.setFragColor()),this.getColorAsFloat())}getCustomTypes(){return{}}setFragColor(){const w=D.getGlsl(this.context.glContext.version);return{setFragColor:new I.GlslLibRoutine(`\n        void setFragColor(float value) {\n            ${w.output} = encode(value);\n        }\n        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new I.GlslLibRoutine("\n        float getColorAsFloat(vec4 color) {\n            return decode(color);\n        }\n        ",["encoding.decode"])}}}},2848:(ye,M)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.replaceInlines=void 0;const k=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm;M.replaceInlines=function(I){const D={};let P;for(;null!==(P=k.exec(I));){const v=P[3].split(",").map(w=>{const S=w.trim().split(" ");return S&&2===S.length?{type:S[0],name:S[1]}:null}).filter(w=>null!==w);D[P[2]]={params:v,body:P[4]}}for(const v in D){const w="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;".replace("__FUNC__",v),S=new RegExp(w,"gm");for(;null!==(P=S.exec(I));){const b=P[1],p=P[2],u=P[3].split(","),o=b?`${b} ${p};`:"";let d=D[v].body,f="";D[v].params.forEach((x,E)=>{x&&(f+=`${x.type} ${x.name} = ${u[E]};\n`)}),d=`${f}\n ${d}`,d=d.replace("return",`${p} = `),I=I.replace(P[0],`\n      ${o}\n      {\n        ${d}\n      }\n      `)}}return I.replace(k,"")}},8879:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.GlslPreprocessor=void 0;const I=k(8520),D=k(2848),P=k(5483),v=k(5060);M.GlslPreprocessor=class{constructor(w,S,b,p){this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new I.GlslContext(w,S,b,p),Object.keys(P.glslRegistry).forEach(o=>{const d=new P.glslRegistry[o](this.context);this.libs[o]=d});const u=this.glslLibRoutineDependencyGraph;for(const o in this.libs){const d=this.libs[o].getFunctions();for(const f in d){const y=o+"."+f;let x;u[y]?(x=u[y],x.routineBody=d[f].routineBody):(x=new I.GlslLibRoutineNode(y,d[f].routineBody),u[y]=x);const E=d[f].dependencies;if(E)for(let R=0;R<E.length;++R)if(u[E[R]])x.addDependency(u[E[R]]);else{const N=new I.GlslLibRoutineNode(E[R]);u[E[R]]=N,x.addDependency(N)}}}}preprocess(){const w=this.context.programInfo;let S=w.shaderSource;return this.context.programInfo.hasMain||(S=`${S}\n      ${v.getDefaultFragShaderMain(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),S=D.replaceInlines(S),`${v.getFragShaderPreamble(this.context.glContext.version)}\n    ${this.getUniforms(w.inputNames,w.variables)}\n    ${this.getImports(S)}\n    ${S}`}getImports(w){const S=this.selectGlslLibRoutinesToBeIncluded(w);if(0===S.length)return"";let b="";for(let p=0;p<S.length;++p){if(!S[p].routineBody)throw new Error(`Missing body for the Glsl Library routine: ${S[p].name}`);b+=S[p].routineBody+"\n"}return b}selectGlslLibRoutinesToBeIncluded(w){const S=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach(b=>{const p=b.split(".")[1];-1!==w.indexOf(p)&&S.push(this.glslLibRoutineDependencyGraph[b])}),I.TopologicalSortGlslRoutines.returnOrderedNodes(S)}getUniforms(w,S){const b=[];if(w)for(const p of w)b.push(`uniform sampler2D ${p};`);if(S)for(const p of S)b.push(`uniform ${p.type} ${p.name}${p.arrayLength?`[${p.arrayLength}]`:""};`);return b.join("\n")}}},5483:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.glslRegistry=void 0;const I=k(5107),D=k(7341),P=k(9894),v=k(2655),w=k(3891);M.glslRegistry={encoding:D.EncodingGlslLib,fragcolor:P.FragColorGlslLib,vec:w.VecGlslLib,shapeUtils:v.ShapeUtilsGlslLib,coordinates:I.CoordsGlslLib}},2655:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.ShapeUtilsGlslLib=void 0;const I=k(8520);class D extends I.GlslLib{constructor(v){super(v)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.bcastIndex()),this.bcastMatmulIndex()),this.offsetToIndices()),this.indicesToOffset()),this.incrementIndices())}getCustomTypes(){return{}}bcastIndex(){const v=this.context.outputTextureLayout.shape.length,w={};return this.context.programInfo.inputNames.forEach((S,b)=>{const p=this.context.inputTextureLayouts[b].unpackedShape;if(p.length<=v){const u=p.length,o=v-u,d=`bcastIndices_${S}`;let f="";for(let x=0;x<u;++x)f+=`\n          realIndices[${x}] = int( mod(float(bcastedIndices[${o+x}]), ${p[x]}.0) );\n          `;w[d]=new I.GlslLibRoutine(`\n        void ${d} (int bcastedIndices[${v}], out int realIndices[${u}]) {\n          ${f}\n        }\n        `)}}),w}bcastMatmulIndex(){const v=this.context.outputTextureLayout.shape.length,w={};return this.context.programInfo.inputNames.forEach((S,b)=>{const p=this.context.inputTextureLayouts[b].shape;if(!(p.length<2||p.length>v)){const u=p.length,o=v-u,d=`bcastMatmulIndices_${S}`;let f="";for(let x=0;x<u-2;++x)f+=`\n          realIndices[${x}] = int( mod(float(bcastedIndices[${o+x}]), ${p[x]}.0) );\n          `;w[d]=new I.GlslLibRoutine(`\n        void ${d}(int bcastedIndices[${v}], out int realIndices[${u}]) {\n          ${f}\n          realIndices[${u-1}] = bcastedIndices[${v-1}];\n          realIndices[${u-2}] = bcastedIndices[${v-2}];\n        }\n        `)}}),w}indicesToOffset(){const v={};return this.context.programInfo.inputNames.forEach((w,S)=>{const p=this.context.inputTextureLayouts[S].strides,u=this.context.inputTextureLayouts[S].shape.length;let o=`indicesToOffset_${w}`;v[o]=new I.GlslLibRoutine(D.indexToOffsetSingle(o,u,p)),o=`indicesToOffset_${w}_T`,v[o]=new I.GlslLibRoutine(D.indexToOffsetSingle(o,u,p.slice().reverse()))}),v}static indexToOffsetSingle(v,w,S){let b="";for(let p=w-1;p>=0;--p)b+=`\n        offset += indices[${p}] * ${S[p]};\n        `;return`\n      int ${v}(int indices[${w}]) {\n        int offset = 0;\n        ${b}\n        return offset;\n      }\n      `}offsetToIndices(){const v={};return this.context.programInfo.inputNames.forEach((w,S)=>{const p=this.context.inputTextureLayouts[S].strides,u=this.context.inputTextureLayouts[S].shape.length;let o=`offsetToIndices_${w}`;v[o]=new I.GlslLibRoutine(D.offsetToIndicesSingle(o,u,p)),o=`offsetToIndices_${w}_T`,v[o]=new I.GlslLibRoutine(D.offsetToIndicesSingle(o,u,p.slice().reverse()))}),v}static offsetToIndicesSingle(v,w,S){const b=[];for(let p=0;p<w-1;++p)b.push(`\n      indices[${p}] = offset / ${S[p]};`),b.push(`\n        offset -= indices[${p}] * ${S[p]};`);return b.push(`\n      indices[${w-1}] = offset;`),`\n      void ${v}(int offset, out int indices[${w}]) {\n        ${b.join("")}\n      }\n      `}incrementIndices(){const v={};return this.context.programInfo.inputNames.forEach((w,S)=>{const b=this.context.inputTextureLayouts[S].shape,p=b.length,u=`incrementIndices_${w}`;let o="";for(let f=0;f<p;++f)o+=`\n        shape[${f}] = ${b[f]};`;v[u]=new I.GlslLibRoutine(`\n        void ${u}(int axis, out int indices[${p}]) {\n          int shape[${p}];\n          ${o};\n          for(int i = ${p} -1 ; i >= 0; --i) {\n            if(i > axis) continue;\n            indices[i] += 1;\n            if(indices[i] < shape[i]) {\n              break;\n            }\n            indices[i] = 0;\n          }\n        }\n        `)}),v}}M.ShapeUtilsGlslLib=D},5060:(ye,M)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.getDefaultFragShaderMain=M.getFragShaderPreamble=M.getVertexShaderSource=M.getGlsl=void 0;const k={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},I={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"};function D(P){return 1===P?k:I}M.getGlsl=D,M.getVertexShaderSource=function(P){const v=D(P);return`${v.version}\n      precision highp float;\n      ${v.attribute} vec3 position;\n      ${v.attribute} vec2 textureCoord;\n\n      ${v.varyingVertex} vec2 TexCoords;\n\n      void main()\n      {\n          gl_Position = vec4(position, 1.0);\n          TexCoords = textureCoord;\n      }`},M.getFragShaderPreamble=function(P){const v=D(P);return`${v.version}\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ${v.varyingFrag} vec2 TexCoords;\n    ${v.outputDeclaration}\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    // Custom vector types to handle higher dimenalities.\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    `},M.getDefaultFragShaderMain=function(P,v){return`\n  void main() {\n    int indices[${v}];\n    toVec(TexCoords, indices);\n    vec4 result = vec4(process(indices));\n    ${D(P).output} = result;\n  }\n  `}},3891:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.VecGlslLib=void 0;const I=k(8520);M.VecGlslLib=class D extends I.GlslLib{constructor(v){super(v)}getCustomTypes(){return{}}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign({},this.binaryVecFunctions()),this.copyVec()),this.setVecItem()),this.getVecItem())}binaryVecFunctions(){const v=this.context.outputTextureLayout.shape.length,w={add:"+=",sub:"-=",mul:"*=",div:"/="},S={};for(const b in w){const p=`${b}Vec`;let u="";for(let d=0;d<v;++d)u+=`\n          dest[${d}] ${w[b]} src[${d}];\n          `;S[p]=new I.GlslLibRoutine(`\n        void ${p}(int src[${v}], out int dest[${v}]) {\n          ${u}\n        }\n        `)}return S}copyVec(){const v=this.context.outputTextureLayout.shape.length;let w="";for(let b=0;b<v;++b)w+=`\n        dest[${b}] = src[${b}];\n        `;return{copyVec:new I.GlslLibRoutine(`\n      void copyVec(int src[${v}], out int dest[${v}]) {\n        ${w}\n      }\n      `)}}setVecItem(){const v=this.context.outputTextureLayout.shape.length;let w=`\n        if(index < 0)\n            index =${v} + index;\n        if (index == 0)\n            m[0] = value;\n        `;for(let b=1;b<v-1;++b)w+=`\n        else if (index == ${b})\n            m[${b}] = value;\n            `;return w+=`\n        else\n            m[${v-1}] = value;\n        `,{setVecItem:new I.GlslLibRoutine(`\n      void setVecItem(out int m[${v}], int index, int value) {\n        ${w}\n      }\n        `)}}getVecItem(){const v=this.context.outputTextureLayout.shape.length;let w=`\n        if(index < 0)\n            index = ${v} + index;\n        if (index == 0)\n            return m[0];\n      `;for(let b=1;b<v-1;++b)w+=`\n        else if (index == ${b})\n            return m[${b}];\n      `;return w+=`\n        else\n            return m[${v-1}];\n        `,{getVecItem:new I.GlslLibRoutine(`\n      int getVecItem(int m[${v}], int index) {\n        ${w}\n      }\n    `)}}}},8316:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.WebGLInferenceHandler=void 0;const I=k(6231),D=k(9162),P=k(2517),v=k(2403),w=k(7019),S=k(8710),b=k(5611),p=k(4057),u=k(2039);M.WebGLInferenceHandler=class{constructor(o){this.session=o,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(o,d){return p.calculateTextureWidthAndHeight(this.session.layoutStrategy,o,d)}executeProgram(o,d){if(d.length<o.inputNames.length)throw new Error(`Input size mustn't be less than ${o.inputNames.length}.`);if(o.inputNames.length!==o.inputTypes.length)throw new Error("input names size does not match input types");const f=[];for(let L=0;L<o.inputNames.length;++L)f[L]=this.getOrCreateTextureData(d[L],o.inputTypes[L]);const y=((L,F)=>{const H=F.map(W=>`${W.unpackedShape.join(",")};${W.width}x${W.height}`).join("_");let q=L.name;return L.cacheHint&&(q+="["+L.cacheHint+"]"),q+=":"+H,q})(o,f);let x=this.session.programManager.getArtifact(y);const E=x?x.programInfo:"function"==typeof o.get?o.get():o,R=p.createTextureLayoutFromTextureType(this.session.layoutStrategy,E.output.dims,E.output.textureType),N=this.createTextureData(R,E.output.type);return x||(x=this.session.programManager.build(E,f,N),this.session.programManager.setArtifact(y,x)),this.runProgram(x,f,N),N}run(o,d){return this.executeProgram(o,d).tensor}runProgram(o,d,f){for(let y=0;y<d.length;++y)if(!!d[y].isPacked!=(o.programInfo.inputTypes[y]===u.TextureType.packed))throw new Error(`input[${y}] property packed inconsistent`);if(!!f.isPacked!=(o.programInfo.output.textureType===u.TextureType.packed))throw new Error("output property packed inconsistent");this.session.programManager.run(o,d,f)}getOrCreateTextureData(o,d){let f=this.getTextureData(o.dataId,d===u.TextureType.packed);if(!f&&(f=this.getTextureData(o.dataId,d!==u.TextureType.packed),f))return d===u.TextureType.packed?this.pack(f):this.unpack(f);if(!f){const y=p.createTextureLayoutFromTextureType(this.session.layoutStrategy,o.dims,d);if(d===u.TextureType.packedLastDimension){const R=o.dims;if(4===R.length){const N=[R[0],Math.ceil(R[1]*R[2]*R[3]/4)],L=p.createTextureLayoutFromTextureType(this.session.layoutStrategy,N,d);let F=o.numberData;if(R[1]*R[2]*R[3]%4!=0){const H=R[0],q=R[1]*R[2]*R[3],W=4*Math.ceil(1*q/4);F=new Float32Array(H*W);for(let U=0;U<H;++U){const ne=U*q,de=U*W+U%1*q;F.set(o.numberData.subarray(ne,ne+q),de)}}return this.createTextureData(L,o.type,F,o,1)}}if(d===u.TextureType.packed){const x=p.createTextureLayoutFromShape(this.session.layoutStrategy,o.dims,1,[],{reverseWH:!0}),E=this.createTextureData(x,o.type,o.numberData,o,1);f=this.pack(E)}else f=this.createTextureData(y,o.type,o.numberData,o,1)}return f}createTextureDataFromLayoutBindTensor(o,d,f,y){return this.createTextureData(o,d,f,y,1)}createTextureData(o,d,f,y,x){I.Logger.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(o)}]`);const E=this.session.textureManager.createTextureFromLayout(d,o,f,x);return this.createTextureDataFromTexture(o,d,E,y)}reshapeUnpacked(o,d){const f=this.getOrCreateTextureData(o,u.TextureType.unpacked),y={channels:f.channels,height:f.height,width:f.width,shape:0!==d.length?d:[1],strides:P.ShapeUtil.computeStrides(d),unpackedShape:d};return this.createTextureDataFromTexture(y,o.type,f.texture).tensor}reshapePacked(o,d){const f=this.getOrCreateTextureData(o,u.TextureType.packed);if(w.isReshapeCheap(o.dims,d)){const N={channels:f.channels,height:f.height,width:f.width,shape:0!==d.length?d:[1],strides:P.ShapeUtil.computeStrides(d),unpackedShape:d,isPacked:!0};return this.createTextureDataFromTexture(N,o.type,f.texture).tensor}const y=w.processDims3D(o.dims),x=w.processDims3D(d),E=this.reshapePacked(o,y),R=this.run(w.createPackedReshape3DProgramInfoLoader(this,E,x),[E]);return this.reshapePacked(R,d)}cast(o,d){const f=this.getOrCreateTextureData(o,u.TextureType.unpacked);return this.createTextureDataFromTexture(f,d,f.texture).tensor}createTextureDataFromTexture(o,d,f,y,x){var E=this;const R=Object.assign(Object.assign({},o),{tensor:y||new D.Tensor(o.unpackedShape,d,N=>this.readTexture(R),function(){var N=_asyncToGenerator(function*(L){return E.readTextureAsync(R)});return function(L){return N.apply(this,arguments)}}(),void 0,x),texture:f});return this.setTextureData(R.tensor.dataId,R,o.isPacked),R}getTextureData(o,d=!1){return this.session.isInitializer(o)?this.session.getTextureData(o,d):d?this.packedTextureDataCache.get(o):this.unpackedTextureDataCache.get(o)}setTextureData(o,d,f=!1){this.session.isInitializer(o)?this.session.setTextureData(o,d,f):(f?this.packedTextureDataCache:this.unpackedTextureDataCache).set(o,d)}isTextureLayoutCached(o,d=!1){return!!this.getTextureData(o.dataId,d)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(o=>this.session.textureManager.releaseTexture(o)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(o=>this.session.textureManager.releaseTexture(o)),this.unpackedTextureDataCache=new Map}readTexture(o){return o.isPacked?this.readTexture(this.unpack(o)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(o,o.tensor.type,o.channels):this.session.textureManager.readUint8TextureAsFloat(S.encodeAsUint8(this,o))}readTextureAsync(o){var d=this;return _asyncToGenerator(function*(){return o.isPacked?d.readTextureAsync(d.unpack(o)):d.session.backend.glContext.isFloat32DownloadSupported?d.session.textureManager.readTextureAsync(o,o.tensor.type,o.channels):d.session.textureManager.readUint8TextureAsFloat(S.encodeAsUint8(d,o))})()}pack(o){return this.executeProgram(v.createPackProgramInfoLoader(this,o.tensor),[o.tensor])}unpack(o){return this.executeProgram(b.createUnpackProgramInfoLoader(this,o.tensor),[o.tensor])}}},1640:function(ye,M,k){"use strict";var I=this&&this.__createBinding||(Object.create?function(Xe,We,mt,Zt){void 0===Zt&&(Zt=mt),Object.defineProperty(Xe,Zt,{enumerable:!0,get:function(){return We[mt]}})}:function(Xe,We,mt,Zt){void 0===Zt&&(Zt=mt),Xe[Zt]=We[mt]}),D=this&&this.__setModuleDefault||(Object.create?function(Xe,We){Object.defineProperty(Xe,"default",{enumerable:!0,value:We})}:function(Xe,We){Xe.default=We}),P=this&&this.__importStar||function(Xe){if(Xe&&Xe.__esModule)return Xe;var We={};if(null!=Xe)for(var mt in Xe)"default"!==mt&&Object.prototype.hasOwnProperty.call(Xe,mt)&&I(We,Xe,mt);return D(We,Xe),We};Object.defineProperty(M,"__esModule",{value:!0}),M.WEBGL_OP_RESOLVE_RULES=void 0;const v=k(2898),w=P(k(7839)),S=k(4196),b=k(2069),p=k(8138),u=k(5193),o=k(7992),d=k(1253),f=k(4776),y=k(6572),x=k(3346),E=k(5623),R=k(2870),N=k(2143),L=k(4939),F=k(718),H=k(2268),q=k(8117),W=k(2278),U=k(5524),ne=k(5975),de=k(3933),De=k(6558),ue=k(5723),Ae=k(3738),Se=P(k(4909)),he=k(8428),_e=k(9793);M.WEBGL_OP_RESOLVE_RULES=[["Abs","","6+",Se.abs],["Acos","","7+",Se.acos],["Add","","7+",w.add],["And","","7+",w.and],["Asin","","7+",Se.asin],["Atan","","7+",Se.atan],["AveragePool","","7+",N.averagePool,N.parseAveragePoolAttributes],["BatchNormalization","","7+",v.batchNormalization,v.parseBatchNormalizationAttributes],["Cast","","6+",S.cast,S.parseCastAttributes],["Ceil","","6+",Se.ceil],["Clip","","6-10",Se.clip,Se.parseClipAttributes],["Clip","","11+",Se.clipV11],["Concat","","4+",b.concat,b.parseConcatAttributes],["Conv","","1+",p.conv,p.parseConvAttributes],["Cos","","7+",Se.cos],["Div","","7+",w.div],["Dropout","","7+",Se.identity],["DepthToSpace","","1+",u.depthToSpace,u.parseDepthToSpaceAttributes],["Equal","","7+",w.equal],["Elu","","6+",Se.elu,Se.parseEluAttributes],["Exp","","6+",Se.exp],["Flatten","","1+",o.flatten,o.parseFlattenAttributes],["Floor","","6+",Se.floor],["FusedConv","com.microsoft","1+",p.conv,p.parseConvAttributes],["Gather","","1+",d.gather,d.parseGatherAttributes],["Gemm","","7-10",f.gemm,f.parseGemmAttributesV7],["Gemm","","11+",f.gemm,f.parseGemmAttributesV11],["GlobalAveragePool","","1+",N.globalAveragePool,N.parseGlobalAveragePoolAttributes],["GlobalMaxPool","","1+",N.globalMaxPool],["Greater","","7+",w.greater],["Identity","","1+",Se.identity],["ImageScaler","","1+",y.imageScaler,y.parseImageScalerAttributes],["InstanceNormalization","","6+",x.instanceNormalization,x.parseInstanceNormalizationAttributes],["LeakyRelu","","6+",Se.leakyRelu,Se.parseLeakyReluAttributes],["Less","","7+",w.less],["Log","","6+",Se.log],["MatMul","","1+",E.matMul,E.parseMatMulAttributes],["MaxPool","","1+",N.maxPool,N.parseMaxPoolAttributes],["Mul","","7+",w.mul],["Neg","","6+",Se.neg],["Not","","1+",Se.not],["Or","","7+",w.or],["Pad","","2-10",R.padV2,R.parsePadAttributesV2],["Pad","","11+",R.padV11,R.parsePadAttributesV11],["Pow","","7+",w.pow],["PRelu","","7+",w.pRelu],["ReduceLogSum","","1+",L.reduceLogSum,L.parseReduceAttributes],["ReduceMax","","1+",L.reduceMax,L.parseReduceAttributes],["ReduceMean","","1+",L.reduceMean,L.parseReduceAttributes],["ReduceMin","","1+",L.reduceMin,L.parseReduceAttributes],["ReduceProd","","1+",L.reduceProd,L.parseReduceAttributes],["ReduceSum","","1-12",L.reduceSum,L.parseReduceAttributes],["ReduceSumSquare","","1+",L.reduceLogSumSquare,L.parseReduceAttributes],["Relu","","6+",Se.relu],["Reshape","","5+",F.reshape],["Resize","","10",H.resize,H.parseResizeAttributesV10],["Resize","","11+",H.resize,H.parseResizeAttributesV11],["Shape","","1+",q.shape],["Sigmoid","","6+",Se.sigmoid],["Sin","","7+",Se.sin],["Slice","","10+",W.sliceV10],["Slice","","1-9",W.slice,W.parseSliceAttributes],["Softmax","","1-12",U.softmax,U.parseSoftmaxAttributes],["Softmax","","13+",U.softmaxV13,U.parseSoftmaxAttributesV13],["Split","","2-12",ne.split,ne.parseSplitAttributes],["Sqrt","","6+",Se.sqrt],["Squeeze","","1-12",de.squeeze,de.parseSqueezeAttributes],["Squeeze","","13+",de.squeezeV13],["Sub","","7+",w.sub],["Sum","","6+",De.sum],["Tan","","7+",Se.tan],["Tanh","","6+",Se.tanh],["Tile","","6+",ue.tile],["Transpose","","1+",Ae.transpose,Ae.parseTransposeAttributes],["Upsample","","7-8",_e.upsample,_e.parseUpsampleAttributesV7],["Upsample","","9",_e.upsample,_e.parseUpsampleAttributesV9],["Unsqueeze","","1-12",he.unsqueeze,he.parseUnsqueezeAttributes],["Unsqueeze","","13+",he.unsqueezeV13],["Xor","","7+",w.xor]]},2898:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.parseBatchNormalizationAttributes=M.batchNormalization=void 0;const I=k(246),D=k(5060),P=k(2039),v={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[P.TextureType.unpacked,P.TextureType.unpacked,P.TextureType.unpacked,P.TextureType.unpacked,P.TextureType.unpacked]};M.batchNormalization=(b,p,u)=>(S(p),[b.run(Object.assign(Object.assign({},v),{cacheHint:u.cacheKey,get:()=>w(b,p,u)}),p)]),M.parseBatchNormalizationAttributes=b=>{const p=b.attributes.getFloat("epsilon",1e-5),u=b.attributes.getFloat("momentum",.9),o=b.attributes.getInt("spatial",1);return I.createAttributeWithCacheKey({epsilon:p,momentum:u,spatial:o})};const w=(b,p,u)=>{const o=D.getGlsl(b.session.backend.glContext.version),d=p[0].dims.length,[f,y]=b.calculateTextureWidthAndHeight(p[1].dims,P.TextureType.unpacked),x=`\n  float process(int[${d}] indices) {\n    vec2 position = offsetToCoords(indices[1], ${f}, ${y});\n    float scale = getColorAsFloat(${o.texture2D}(Scale, position));\n    float mean = getColorAsFloat(${o.texture2D}(Mean, position));\n    float variance = getColorAsFloat(${o.texture2D}(Variance, position));\n    float b = getColorAsFloat(${o.texture2D}(B, position));\n\n    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${u.epsilon})) ) + b;\n  }`;return Object.assign(Object.assign({},v),{output:{dims:p[0].dims,type:p[0].type,textureType:P.TextureType.unpacked},shaderSource:x})},S=b=>{if(!b||5!==b.length)throw new Error("BatchNormalization requires 5 inputs.");const p=b[0],u=b[1],o=b[2],d=b[3],f=b[4];if(p.dims.length<3||1!==u.dims.length||1!==o.dims.length||1!==d.dims.length||1!==f.dims.length)throw new Error("invalid input shape.");if(u.dims[0]!==p.dims[1]||o.dims[0]!==p.dims[1]||d.dims[0]!==p.dims[1]||f.dims[0]!==p.dims[1])throw new Error("invalid input shape.");if("float32"!==p.type&&"float64"!==p.type||"float32"!==u.type&&"float64"!==u.type||"float32"!==o.type&&"float64"!==o.type||"float32"!==d.type&&"float64"!==d.type||"float32"!==f.type&&"float64"!==f.type)throw new Error("invalid input tensor types.")}},7839:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.xor=M.sub=M.pRelu=M.pow=M.or=M.mul=M.less=M.greater=M.equal=M.div=M.and=M.add=M.glslPRelu=M.glslPow=M.glslXor=M.glslOr=M.glslAnd=M.glslLess=M.glslGreater=M.glslEqual=M.glslSub=M.glslMul=M.glslDiv=M.glslAdd=void 0;const I=k(2517),D=k(8520),P=k(5060),v=k(2039);function w(){return{body:"\n  float add_(float a, float b) {\n    return a + b;\n  }\n  vec4 add_(vec4 v1, vec4 v2) {\n    return v1 + v2;\n  }\n  ",name:"add_",type:D.FunctionType.ValueBased}}function S(){return{body:"\n  float div_(float a, float b) {\n    return a / b;\n  }\n  vec4 div_(vec4 v1, vec4 v2) {\n    return v1 / v2;\n  }\n  ",name:"div_",type:D.FunctionType.ValueBased}}function b(){return{body:"\n  float mul_(float a, float b) {\n    return a * b;\n  }\n  vec4 mul_(vec4 v1, vec4 v2) {\n    return v1 * v2;\n  }\n  ",name:"mul_",type:D.FunctionType.ValueBased}}function p(){return{body:"\n  float sub_(float a, float b) {\n    return a - b;\n  }\n  vec4 sub_(vec4 v1, vec4 v2) {\n    return v1 - v2;\n  }\n  ",name:"sub_",type:D.FunctionType.ValueBased}}function u(){return{body:"\n  float equal_(float a, float b) {\n    return float(a == b);\n  }\n  vec4 equal_(vec4 v1, vec4 v2) {\n    return vec4(equal(v1, v2));\n  }\n  ",name:"equal_",type:D.FunctionType.ValueBased}}function o(){const F="greater_";return{body:`\n  float ${F}(float a, float b) {\n    return float(a > b);\n  }\n  vec4 ${F}(vec4 v1, vec4 v2) {\n    return vec4( v1.r > v2.r ,\n      v1.g > v2.g,\n      v1.b > v2.b,\n      v1.a > v2.a );\n  }\n  `,name:F,type:D.FunctionType.ValueBased}}function d(){return{body:"\n  float less_(float a, float b) {\n    return float(a < b);\n  }\n  vec4 less_(vec4 v1, vec4 v2) {\n    return vec4( v1.r < v2.r ,\n                v1.g < v2.g,\n                v1.b < v2.b,\n                v1.a < v2.a );\n  }\n  ",name:"less_",type:D.FunctionType.ValueBased}}function f(){return{body:"\n  float and_(float a, float b) {\n    return float( bool(a) && bool(b) );\n  }\n  vec4 and_(vec4 v1, vec4 v2) {\n    bvec4 b1 = bvec4(v1);\n    bvec4 b2 = bvec4(v2);\n    return vec4( b1.r && b2.r ,\n                b1.g && b2.g,\n                b1.b && b2.b,\n                b1.a && b2.a );\n  }\n  ",name:"and_",type:D.FunctionType.ValueBased}}function y(){return{body:"\n  float or_(float a, float b) {\n    return float( bool(a) || bool(b) );\n  }\n  vec4 or_(vec4 v1, vec4 v2) {\n    bvec4 b1 = bvec4(v1);\n    bvec4 b2 = bvec4(v2);\n    return vec4( b1.r || b2.r ,\n                b1.g || b2.g,\n                b1.b || b2.b,\n                b1.a || b2.a );\n  }\n  ",name:"or_",type:D.FunctionType.ValueBased}}function x(){return{body:"\n  float xor_(float a, float b) {\n    return float( bool(a) ^^ bool(b) );\n  }\n  vec4 xor_(vec4 v1, vec4 v2) {\n    bvec4 b1 = bvec4(v1);\n    bvec4 b2 = bvec4(v2);\n    return vec4( b1.r ^^ b2.r ,\n                b1.g ^^ b2.g,\n                b1.b ^^ b2.b,\n                b1.a ^^ b2.a );\n  }\n  ",name:"xor_",type:D.FunctionType.ValueBased}}function E(){return{body:"\n  float pow_(float a, float b) {\n    return pow(a, b);\n  }\n  vec4 pow_(vec4 v1, vec4 v2) {\n    return pow(v1, v2);\n  }\n  ",name:"pow_",type:D.FunctionType.ValueBased}}function R(){return{body:"\n  float prelu_(float a, float b) {\n    return a < 0.0 ? a * b: a;\n  }\n  vec4 prelu_(vec4 v1, vec4 v2) {\n    return vec4(\n      v1.r < 0.0 ? v1.r * v2.r: v1.r,\n      v1.g < 0.0 ? v1.g * v2.g: v1.g,\n      v1.b < 0.0 ? v1.b * v2.b: v1.b,\n      v1.a < 0.0 ? v1.a * v2.a: v1.a\n      );\n  }\n  ",name:"prelu_",type:D.FunctionType.ValueBased}}M.glslAdd=w,M.glslDiv=S,M.glslMul=b,M.glslSub=p,M.glslEqual=u,M.glslGreater=o,M.glslLess=d,M.glslAnd=f,M.glslOr=y,M.glslXor=x,M.glslPow=E,M.glslPRelu=R;const N=(F,H,q,W=H[0].type,U)=>{const ne=F.session.pack?v.TextureType.packed:v.TextureType.unpacked;return{name:q.name,inputNames:["A","B"],inputTypes:[ne,ne],cacheHint:U,get:()=>L(F,H,q,W)}},L=(F,H,q,W=H[0].type)=>{const U=F.session.pack?v.TextureType.packed:v.TextureType.unpacked,ne=!I.ShapeUtil.areEqual(H[0].dims,H[1].dims);let de=H[0].dims;const De=F.session.pack;if(ne){const Se=I.BroadcastUtil.calcShape(H[0].dims,H[1].dims,!1);if(!Se)throw new Error("Can't perform binary op on the given tensors");de=Se;const he=de.length,_e=0!==H[0].dims.length?H[0].dims.length:1,Xe=0!==H[1].dims.length?H[1].dims.length:1,We=0!==H[0].dims.length?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",mt=0!==H[1].dims.length?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",Zt=P.getGlsl(F.session.backend.glContext.version);return{name:q.name,inputNames:["A","B"],inputTypes:[U,U],output:{dims:de,type:W,textureType:U},shaderSource:De?`\n      ${q.body}\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n        vec4 result = ${q.name}(a, b);\n        ${Zt.output} = result;\n      }`:`\n      ${q.body}\n      float process(int indices[${he}]) {\n        int aindices[${_e}];\n        int bindices[${Xe}];\n        ${We}\n        ${mt}\n        return ${q.name}(_A(aindices), _B(bindices));\n      }`,hasMain:De}}const ue=P.getGlsl(F.session.backend.glContext.version);return{name:q.name,inputNames:["A","B"],inputTypes:[U,U],output:{dims:H[0].dims,type:W,textureType:U},shaderSource:`\n    ${q.body}\n    void main() {\n      vec4 v1 = ${ue.texture2D}(A, TexCoords);\n      vec4 v2 = ${ue.texture2D}(B, TexCoords);\n      vec4 result = ${q.name}(v1, v2);\n      ${ue.output} = result;\n    }\n    `,hasMain:!0}};M.add=(F,H)=>[F.run(N(F,H,w()),H)],M.and=(F,H)=>[F.run(N(F,H,f(),"bool"),H)],M.div=(F,H)=>[F.run(N(F,H,S()),H)],M.equal=(F,H)=>[F.run(N(F,H,u(),"bool"),H)],M.greater=(F,H)=>[F.run(N(F,H,o(),"bool"),H)],M.less=(F,H)=>[F.run(N(F,H,d(),"bool"),H)],M.mul=(F,H)=>[F.run(N(F,H,b()),H)],M.or=(F,H)=>[F.run(N(F,H,y(),"bool"),H)],M.pow=(F,H)=>[F.run(N(F,H,E()),H)],M.pRelu=(F,H)=>[F.run(N(F,H,R()),H)],M.sub=(F,H)=>[F.run(N(F,H,p()),H)],M.xor=(F,H)=>[F.run(N(F,H,x(),"bool"),H)]},4196:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.parseCastAttributes=M.cast=void 0;const I=k(2517);M.cast=(P,v,w)=>(D(v),[P.cast(v[0],w)]),M.parseCastAttributes=P=>I.ProtoUtil.tensorDataTypeFromProto(P.attributes.getInt("to"));const D=P=>{if(!P||1!==P.length)throw new Error("Cast requires 1 input.");if("string"===P[0].type)throw new Error("Invalid input type.")}},1163:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.createPackedConcatProgramInfoLoader=void 0;const I=k(5060),D=k(2039),P=k(9390),v=k(2827);M.createPackedConcatProgramInfoLoader=(S,b,p)=>{const u=(o=b.length,d=p.cacheKey,{name:"Concat (packed)",inputNames:Array.from({length:o},(f,y)=>`X${y}`),inputTypes:Array(o).fill(D.TextureType.packed),cacheHint:d});var o,d;return Object.assign(Object.assign({},u),{get:()=>((f,y,x,E)=>{const R=x[0].dims.slice();if(E>=R.length||E<-1*R.length)throw new Error("axis specified for concat doesn't match input dimensionality");E<0&&(E=R.length+E);const N=R.slice(0);for(let We=1;We<x.length;We++){const mt=x[We].dims.slice();for(let Zt=0;Zt<R.length;Zt++)if(Zt===E)N[E]+=mt[Zt];else if(R[Zt]!==mt[Zt])throw new Error("non concat dimensions must match")}const L=N.length,F=v.getChannels("coords",L),H=P.getCoordsDataType(L),q=v.unpackFromChannel(),W=x.map(We=>We.dims),U=P.getGlChannels(L),ne=new Array(W.length-1);ne[0]=W[0][E];for(let We=1;We<ne.length;We++)ne[We]=ne[We-1]+W[We][E];const de=U[E],De=U.slice(-2),ue=U.join();let Ae=`if (${de} < ${ne[0]}) {\n        return getChannel(\n            getX0(${ue}), vec2(${De.join()}));\n        }`;for(let We=1;We<ne.length;We++){const mt=ne[We-1];Ae+=`\n            if (${de} < ${ne[We]}  && ${de} >= ${ne[We-1]}) {\n              return getChannel(\n                getX${We}(${w(U,de,mt)}),\n                vec2(${w(De,de,mt)}));\n            }`}const he=ne[ne.length-1];Ae+=`\n            return getChannel(\n              getX${ne.length}(${w(U,de,he)}),\n              vec2(${w(De,de,he)}));`;const _e=I.getGlsl(f.session.backend.glContext.version),Xe=`\n          ${q}\n          float getValue(${U.map(We=>"int "+We)}) {\n            ${Ae}\n          }\n\n          void main() {\n            ${H} coords = getOutputCoords();\n            int lastDim = coords.${U[L-1]};\n            coords.${U[L-1]} = coords.${U[L-2]};\n            coords.${U[L-2]} = lastDim;\n\n            vec4 result = vec4(getValue(${F}), 0., 0., 0.);\n\n            ${F[L-1]} = ${F[L-1]} + 1;\n            if (${F[L-1]} < ${N[L-1]}) {\n              result.g = getValue(${F});\n            }\n\n            ${F[L-2]} = ${F[L-2]} + 1;\n            if (${F[L-2]} < ${N[L-2]}) {\n              result.a = getValue(${F});\n            }\n\n            ${F[L-1]} = ${F[L-1]} - 1;\n            if (${F[L-2]} < ${N[L-2]} &&\n                ${F[L-1]} < ${N[L-1]}) {\n              result.b = getValue(${F});\n            }\n            ${_e.output} = result;\n          }\n        `;return Object.assign(Object.assign({},y),{output:{dims:N,type:x[0].type,textureType:D.TextureType.packed},shaderSource:Xe,hasMain:!0})})(S,u,b,p.axis)})};const w=(S,b,p)=>{const u=S.indexOf(b);return S.map((o,d)=>d===u?`${o} - ${p}`:o).join()}},2069:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.parseConcatAttributes=M.concat=void 0;const I=k(246),D=k(2039),P=k(1163);M.concat=(o,d,f)=>(u(d),o.session.pack&&d[0].dims.length>1?[o.run(P.createPackedConcatProgramInfoLoader(o,d,f),d)]:[o.run(v(o,d,f),d)]);const v=(o,d,f)=>{const y=(x=d.length,E=f.cacheKey,{name:"Concat",inputNames:Array.from({length:x},(R,N)=>`X${N}`),inputTypes:Array(x).fill(D.TextureType.unpacked),cacheHint:E});var x,E;return Object.assign(Object.assign({},y),{get:()=>((R,N,L,F)=>{const H=L[0].dims.slice();if(F>=H.length||F<-1*H.length)throw new Error("axis specified for concat doesn't match input dimensionality");F<0&&(F=H.length+F);const q=H.slice(0);for(let ue=1;ue<L.length;ue++){const Ae=L[ue].dims.slice();for(let Se=0;Se<H.length;Se++)if(Se===F)q[F]+=Ae[Se];else if(H[Se]!==Ae[Se])throw new Error("non concat dimensions must match")}const W=q.length,U=new Array(L.length);let ne=0;for(let ue=0;ue<U.length;++ue)ne+=L[ue].dims[F],U[ue]=ne;let de="";de=L.length<5?w(U):S(U);const De=`\n        ${b(L.length,W)}\n        ${p(U)}\n        ${de}\n        float process(int indices[${W}]) {\n          int textureIndex = getTextureWhereDataResides (indices[${F}]);\n\n          if(textureIndex != 0) {\n            indices[${F}] = indices[${F}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));\n          }\n\n          return fetchDataFromCorrectTexture(textureIndex, indices);\n        }`;return Object.assign(Object.assign({},N),{output:{dims:q,type:L[0].type,textureType:D.TextureType.unpacked},shaderSource:De})})(0,y,d,f.axis)})},w=o=>`int getTextureWhereDataResides(int index) {\n      ${o.map((d,f)=>`if(index<${d}) {return ${f};}\n`).join("")}\n    }`,S=o=>w(o),b=(o,d)=>{const f=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${d}]) {`];for(let y=0;y<o;++y)f.push(0===y?`\tif (textureIndex == ${y}) { return _X${y}(indices); }`:y===o-1?`\telse { return _X${y}(indices); }`:`\telse if (textureIndex == ${y}) { return _X${y}(indices); }`);return f.push("\t}"),f.join("\n")},p=o=>{const d=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let f=0;f<o.length;++f)d.push(0===f?`\tif (index == ${f}) { return ${o[f]}; }`:f===o.length-1?`\telse { return ${o[f]}; }`:`\telse if (index == ${f}) { return ${o[f]}; }`);return d.push("\t}"),d.join("\n")};M.parseConcatAttributes=o=>I.createAttributeWithCacheKey({axis:o.attributes.getInt("axis")});const u=o=>{if(!o||o.length<1)throw new Error("too few inputs");const d=o[0].type,f=o[0].dims.length;if("string"===d)throw new Error("string tensor is not supported yet");for(const y of o){if(y.type!==d)throw new Error("input tensors should be one type");if(y.dims.length!==f)throw new Error("input tensors should have the same shape")}}},4770:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.createUnpackedGroupedConvProgramInfoLoader=void 0;const I=k(6231),D=k(5060),P=k(2039),v=k(8138),w=k(2823);M.createUnpackedGroupedConvProgramInfoLoader=(S,b,p)=>{const u={name:"GroupedConv",inputNames:(o=b.length>2)?["X","W","Bias"]:["X","W"],inputTypes:o?[P.TextureType.unpacked,P.TextureType.unpacked,P.TextureType.unpacked]:[P.TextureType.unpacked,P.TextureType.unpacked],cacheHint:p.cacheKey};var o;return Object.assign(Object.assign({},u),{get:()=>((f,y,x,E)=>{const R=y.length>2?"value += getBias(output_channel);":"",N=y[0].dims.slice(),L=y[1].dims.slice(),F=L[0]/E.group;I.Logger.verbose("GroupedConv",`autpPad:${E.autoPad}, dilations:${E.dilations}, group:${E.group}, kernelShape:${E.kernelShape}, pads:${E.pads}, strides:${E.strides}`);const H=v.calculateOutputShape(N,L,E.dilations,E.pads,E.strides),q=D.getGlsl(f.session.backend.glContext.version),{activationFunction:W,applyActivation:U}=w.getActicationSnippet(E),ne=`\n  const ivec2 strides = ivec2(${E.strides[0]}, ${E.strides[1]});\n  const ivec2 pads = ivec2(${E.pads[0]}, ${E.pads[1]});\n  ${W}\n  void main() {\n    ivec4 coords = getOutputCoords();\n    int batch = coords.x;\n    int output_channel = coords.y;\n    ivec2 xRCCorner = coords.zw * strides - pads;\n    int group_id = output_channel / ${F};\n\n    float value = 0.0;\n    for (int wInChannel = 0; wInChannel < ${L[1]}; wInChannel++) {\n      int input_channel = group_id * ${L[1]} + wInChannel;\n      for (int wHeight = 0; wHeight < ${L[2]}; wHeight++) {\n        int xHeight = xRCCorner.x + wHeight * ${E.dilations[0]};\n\n        if (xHeight < 0 || xHeight >= ${N[2]}) {\n          continue;\n        }\n\n        for (int wWidth = 0; wWidth < ${L[3]}; wWidth++) {\n          int xWidth = xRCCorner.y + wWidth * ${E.dilations[1]};\n          if (xWidth < 0 || xWidth >= ${N[3]}) {\n            continue;\n          }\n\n          float xVal = getX(batch, input_channel, xWidth, xHeight);\n          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);\n          value += xVal*wVal;\n        }\n      }\n    }\n    ${R}\n    ${U}\n    ${q.output} = vec4(value, .0, .0, .0);\n  }\n`;return Object.assign(Object.assign({},x),{output:{dims:H,type:y[0].type,textureType:P.TextureType.unpacked},shaderSource:ne,hasMain:!0})})(S,b,u,p)})}},1386:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.conv2DPacked=M.conv2DPackedPointwise=void 0;const I=k(8138),D=k(8555),P=k(708);M.conv2DPackedPointwise=(v,w,S)=>{const b=w[0].dims,p=w[1].dims,u=I.calculateOutputShape(b,p,S.dilations,S.pads,S.strides),o=v.reshapePacked(w[0],[b[1],b[2]*b[3]]),d=v.reshapePacked(w[1],[p[0],p[1]]),f=w.length>2?[d,o,w[2]]:[d,o],y=v.run(P.createPackedMatmulProgramInfoLoader(v,f,S),f);return v.reshapePacked(y,u)},M.conv2DPacked=(v,w,S)=>{const p=w[1].dims,u=I.calculateOutputShape(w[0].dims,p,S.dilations,S.pads,S.strides),o=v.run(D.createPackedIm2ColProgramInfoLoader(v,w[0],w[1],u,S),[w[0]]),d=v.reshapePacked(w[1],[p[0],p[1]*p[2]*p[3]]),f=3===w.length?[d,o,w[2]]:[d,o],y=v.run(P.createPackedMatmulProgramInfoLoader(v,f,S),f);return v.reshapePacked(y,u)}},8138:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.parseConvAttributes=M.conv=M.calculateOutputShape=void 0;const I=k(246),D=k(2517),P=k(4770),v=k(1386),w=k(9828),S=k(2823),b=k(3248),p=k(5623);M.calculateOutputShape=(x,E,R,N,L)=>{const F=x[0],H=x.slice(2),q=H.length,W=E[0],U=E.slice(2).map((de,De)=>de+(de-1)*(R[De]-1)),ne=H.map((de,De)=>de+N[De]+N[De+q]).map((de,De)=>Math.floor((de-U[De]+L[De])/L[De]));return[F,W].concat(...ne)},M.conv=(x,E,R)=>(y(E,R),u(x,E,R));const u=(x,E,R)=>{const N=f(R,E),L=x.session.pack,F=1===N.kernelShape[0]&&1===N.kernelShape[1];return N.group>1?[x.run(P.createUnpackedGroupedConvProgramInfoLoader(x,E,N),E)]:F&&L?[o(x,E,N)]:L&&4===E[0].dims.length&&1===E[0].dims[0]&&!F?[v.conv2DPacked(x,E,N)]:[d(x,E,N)]},o=(x,E,R)=>{const N=E[0].dims,L=E[1].dims,F=M.calculateOutputShape(N,L,R.dilations,R.pads,R.strides),H=x.reshapeUnpacked(E[0],[N[1],N[2]*N[3]]),q=x.reshapeUnpacked(E[1],[L[0],L[1]]),W=E.length>2?[q,H,E[2]]:[q,H],U=x.run(p.createMatmulProgramInfoLoader(W,R),W);return x.reshapeUnpacked(U,F)},d=(x,E,R)=>{const F=M.calculateOutputShape(E[0].dims,E[1].dims,R.dilations,R.pads,R.strides),H=x.run(b.createIm2ColProgramInfoLoader(x,E[0],E[1],F,R),[E[0]]),q=3===E.length?[H,E[1],E[2]]:[H,E[1]];return x.run(w.createDotProductProgramInfoLoader(x,E,F,R),q)},f=(x,E)=>{const R=x.kernelShape.slice();if(0===x.kernelShape.length)for(let F=2;F<E[1].dims.length;++F)R.push(E[1].dims[F]);const N=x.pads.slice();D.PoolConvUtil.adjustPadsBasedOnAutoPad(E[0].dims,x.strides,x.dilations,R,N,x.autoPad);const L=Object.assign({},x);return Object.assign(L,{kernelShape:R,pads:N,cacheKey:x.cacheKey}),L};M.parseConvAttributes=x=>{const E=x.attributes,R=S.parseInternalActivationAttributes(E),N=E.getString("auto_pad","NOTSET"),L=E.getInts("dilations",[1,1]),F=E.getInt("group",1),H=E.getInts("kernel_shape",[]),q=E.getInts("pads",[0,0,0,0]),W=E.getInts("strides",[1,1]);return I.createAttributeWithCacheKey(Object.assign({autoPad:N,dilations:L,group:F,kernelShape:H,pads:q,strides:W},R))};const y=(x,E)=>{if(!x||2!==x.length&&3!==x.length)throw new Error("Conv requires 2 or 3 inputs");if(4!==x[0].dims.length||4!==x[1].dims.length)throw new Error("currently only support 2-dimensional conv");if(x[0].dims[1]!==x[1].dims[1]*E.group)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(3===x.length&&(1!==x[2].dims.length||x[1].dims[0]!==x[2].dims[0]))throw new Error("invalid bias");const R=x[0].dims.length-2;if(E.dilations.length!==R)throw new Error(`dilations should be ${R}D`);if(E.strides.length!==R)throw new Error(`strides should be ${R}D`);if(E.pads.length!==2*R)throw new Error(`pads should be ${2*R}D`);if(0!==E.kernelShape.length&&E.kernelShape.length!==x[1].dims.length-2)throw new Error("invalid kernel shape");if("float32"!==x[0].type||"float32"!==x[1].type)throw new Error("Conv input(X,W) should be float tensor");if(3===x.length&&"float32"!==x[2].type)throw new Error("Conv input(bias) should be float tensor")}},5193:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.parseDepthToSpaceAttributes=M.depthToSpace=void 0;const I=k(3738);M.depthToSpace=(P,v,w)=>{D(v);const S=w.blocksize,b=S*S,p="DCR"===w.mode?[0,3,4,1,5,2]:[0,1,4,2,5,3],o=P.reshapeUnpacked(v[0],"DCR"===w.mode?[v[0].dims[0],S,S,v[0].dims[1]/b,v[0].dims[2],v[0].dims[3]]:[v[0].dims[0],v[0].dims[1]/b,S,S,v[0].dims[2],v[0].dims[3]]),d={perm:p,cacheKey:`${p}`},[f]=I.transpose(P,[o],d);return[P.reshapeUnpacked(f,[v[0].dims[0],v[0].dims[1]/b,v[0].dims[2]*S,v[0].dims[3]*S])]},M.parseDepthToSpaceAttributes=P=>{const v=P.attributes.getInt("blocksize");if(v<1)throw new Error(`blocksize must be >= 1, but got : ${v} for DepthToSpace`);const w=P.attributes.getString("mode","DCR");if("DCR"!==w&&"CRD"!==w)throw new Error(`unrecognized mode: ${w} for DepthToSpace`);return{mode:w,blocksize:v}};const D=P=>{if(1!==P.length)throw new Error(`DepthToSpace expect 1 inputs, but got ${P.length}`);if("string"===P[0].type||4!==P[0].dims.length)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}},9828:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.createDotProductProgramInfoLoader=void 0;const I=k(2517),D=k(5060),P=k(2039),v=k(2823),w=k(3248);M.createDotProductProgramInfoLoader=(S,b,p,u)=>{const o={name:"ConvDotProduct",inputNames:(d=b.length>2)?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:d?[P.TextureType.unpacked,P.TextureType.packedLastDimension,P.TextureType.unpacked]:[P.TextureType.unpacked,P.TextureType.packedLastDimension],cacheKey:u.activationCacheKey};var d;return Object.assign(Object.assign({},o),{get:()=>((d,f,y,x,E)=>{const R=y[0].dims,N=y[1].dims,L=[N[0],Math.ceil(R[1]*N[2]*N[3]/4)],F=w.calculateIm2ColDims(R,N,x),[H,q]=d.calculateTextureWidthAndHeight(L,P.TextureType.packedLastDimension),W=I.ShapeUtil.computeStrides(F),[U,ne]=d.calculateTextureWidthAndHeight(F,P.TextureType.packedLastDimension),de=x.length,De=y.length<3?"0.0":"_B(b)",ue=Math.ceil(R[1]*N[2]*N[3]/4),{activationFunction:Ae,applyActivation:Se}=v.getActicationSnippet(E),he=D.getGlsl(d.session.backend.glContext.version),_e=`\n${Ae}\nfloat process(int indices[${de}]) {\n  int b[1];\n  b[0] = indices[1];\n  int im2col[4];\n  im2col[0] = indices[0];\n  im2col[1] = indices[2];\n  im2col[2] = indices[3];\n  int im2colOffset = im2col[0] * ${W[0]} + im2col[1] * ${W[1]} + im2col[2] * ${W[2]};\n  int kernelOffset = indices[1] * ${L[1]};\n  float value = ${De};\n  for (int i = 0; i < ${ue}; ++i) {\n    vec2 im2colCoords = offsetToCoords(im2colOffset, ${U}, ${ne});\n    vec2 kernelCoords = offsetToCoords(kernelOffset, ${H}, ${q});\n    value += dot(${he.texture2D}(Im2Col, im2colCoords), ${he.texture2D}(K, kernelCoords));\n    ++im2colOffset;\n    ++kernelOffset;\n  }\n  ${Se}\n  return value;\n}`;return Object.assign(Object.assign({},f),{output:{dims:x,type:y[0].type,textureType:P.TextureType.unpacked},shaderSource:_e})})(S,o,b,p,u)})}},7992:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.parseFlattenAttributes=M.flatten=void 0;const I=k(2517);M.flatten=(P,v,w)=>{D(v,w);const S=I.ShapeUtil.flattenShape(v[0].dims,w);return[P.reshapeUnpacked(v[0],S)]},M.parseFlattenAttributes=P=>P.attributes.getInt("axis",1);const D=(P,v)=>{if(!P||1!==P.length)throw new Error("Flatten requires 1 input.");const w=P[0].dims.length;if(0===w)throw new Error("scalar tensor is not supported.");if(v<-w||v>w)throw new Error("Invalid axis");if("string"===P[0].type)throw new Error("string tensor is not supported.")}},2823:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.parseInternalActivationAttributes=M.getActicationSnippet=void 0;const I=k(2517),D=k(4909);M.getActicationSnippet=function(P){let v;switch(P.activation){case"Relu":v=D.glslRelu();break;case"Sigmoid":v=D.glslSigmoid();break;case"Clip":v=D.glslClip(P.clipMin,P.clipMax);break;default:return{activationFunction:"",applyActivation:""}}return{activationFunction:v.body,applyActivation:`value = ${v.name}_(value);`}},M.parseInternalActivationAttributes=P=>{const v=P.getString("activation","");if("Clip"===v){const[w,S]=P.getFloats("activation_params",[I.MIN_CLIP,I.MAX_CLIP]);return{activation:v,clipMax:S,clipMin:w,activationCacheKey:`${v}:${w},${S}`}}return{activation:v,activationCacheKey:v}}},1253:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.parseGatherAttributes=M.gather=void 0;const I=k(246),D=k(782),P=k(2517),v=k(2039);M.gather=(p,u,o)=>(b(u,o.axis),[p.run(S(p,u,o),u)]),M.parseGatherAttributes=p=>I.createAttributeWithCacheKey({axis:p.attributes.getInt("axis",0)});const w={name:"Gather",inputNames:["A","B"],inputTypes:[v.TextureType.unpacked,v.TextureType.unpacked]},S=(p,u,o)=>{const d=Object.assign(Object.assign({},w),{cacheHint:o.cacheKey});return Object.assign(Object.assign({},d),{get:()=>((f,y,x,E)=>{const R=x[0].dims.slice(),N=x[1].dims.slice(),L=new Array(R.length+N.length-1);E=P.ShapeUtil.normalizeAxis(E,R.length);const F=[];for(let q=0;q<L.length;q++)q<E?(L[q]=R[q],F.push(`inputIdx[${q}] = outputIdx[${q}];`)):q<E+N.length?(L[q]=N[q-E],F.push(`indexDataIdx[${q-E}] = outputIdx[${q}];`)):(L[q]=R[q-N.length+1],F.push(`inputIdx[${q-N.length+1}] = outputIdx[${q}];`));const H=`\n      float process(int outputIdx[${L.length||1}]) {\n        int inputIdx[${R.length}];\n        int indexDataIdx[${N.length||1}];\n        indexDataIdx[0] = 0;\n        ${F.join("\n        ")}\n        int idx = int(_B(indexDataIdx));\n        inputIdx[${E}] = idx < 0 ? idx + ${R[E]} : idx;\n        return _A(inputIdx);\n      }`;return Object.assign(Object.assign({},y),{output:{dims:L,type:x[0].type,textureType:v.TextureType.unpacked},shaderSource:H})})(0,d,u,o.axis)})},b=(p,u)=>{if(!p||2!==p.length)throw new Error("Gather requires 2 inputs.");const o=p[0].dims.length;if(o<1)throw new Error("Invalid input shape.");if(u<-o||u>o-1)throw new Error("Invalid axis.");if(-1===D.NUMBER_TYPES.indexOf(p[0].type))throw new Error("Invaid input type.");if("int32"!==p[1].type&&"int16"!==p[1].type)throw new Error("Invaid input type.")}},4776:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.parseGemmAttributesV11=M.parseGemmAttributesV7=M.gemm=void 0;const I=k(246),D=k(2517),P=k(2039);M.gemm=(p,u,o)=>(b(u,o),[p.run(w(u,o),u)]);const v=(p,u)=>{const o=0!==p.attributes.getInt("transA",0),d=0!==p.attributes.getInt("transB",0),f=p.attributes.getFloat("alpha",1),y=p.attributes.getFloat("beta",1);return I.createAttributeWithCacheKey({transA:o,transB:d,alpha:f,beta:y,isOptionalC:u})};M.parseGemmAttributesV7=p=>v(p,!1),M.parseGemmAttributesV11=p=>v(p,!0);const w=(p,u)=>{const o={name:"Gemm",inputNames:3===p.length?["A","B","C"]:["A","B"],inputTypes:3===p.length?[P.TextureType.unpacked,P.TextureType.unpacked,P.TextureType.unpacked]:[P.TextureType.unpacked,P.TextureType.unpacked],key:u.cacheKey};return Object.assign(Object.assign({},o),{get:()=>S(o,p,u)})},S=(p,u,o)=>{const d=u[0].dims.slice(),f=u[1].dims.slice(),[y,x]=D.GemmUtil.getShapeOfGemmResult(d,o.transA,f,o.transB,3===u.length?u[2].dims:void 0),E=[y,x];if(!E)throw new Error("Can't use gemm on the given tensors");let R=d[d.length-1],N="";o.transA&&(R=d[0]),o.transA&&o.transB?N="value += _A_T(a) * _B_T(b);":o.transA&&!o.transB?N="value += _A_T(a) * _B(b);":!o.transA&&o.transB?N="value += _A(a) * _B_T(b);":o.transA||o.transB||(N="value += _A(a) * _B(b);");const L=E.length,F=`\n      float process(int indices[${L}]) {\n          int a[${L}];\n          int b[${L}];\n          ${3===u.length?`int c[${u[2].dims.length}];`:""}\n\n          copyVec(indices, a);\n          copyVec(indices, b);\n          ${3===u.length?"bcastIndices_C(indices, c);":""}\n\n          float value = 0.0;\n          for (int k=0; k<${R}; ++k) {\n              a[${L-1}] = k;\n              b[${L-2}] = k;\n              ${N}\n          }\n\n          value = value * alpha;\n          ${3===u.length?"value += beta * _C(c);":""}\n          return value;\n      }`;return Object.assign(Object.assign({},p),{output:{dims:E,type:u[0].type,textureType:P.TextureType.unpacked},variables:[{name:"alpha",type:"float",data:o.alpha},{name:"beta",type:"float",data:o.beta}],shaderSource:F})},b=(p,u)=>{if(!p)throw new Error("Input is missing");if(u.isOptionalC&&(p.length<2||p.length>3))throw new Error("Invaid input shape.");if(!u.isOptionalC&&3!==p.length)throw new Error("Gemm requires 3 inputs");if(3===p.length&&1!==p[2].dims.length&&2!==p[2].dims.length)throw new Error("Invalid input shape of C");if("float32"!==p[0].type&&"float64"!==p[0].type||"float32"!==p[1].type&&"float64"!==p[1].type||3===p.length&&"float32"!==p[2].type&&"float64"!==p[2].type)throw new Error("Invalid input type.");if(p[0].type!==p[1].type||3===p.length&&p[0].type!==p[2].type)throw new Error("Input types are mismatched")}},8555:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.createPackedIm2ColProgramInfoLoader=void 0;const I=k(5060),D=k(2039),P=k(2827);M.createPackedIm2ColProgramInfoLoader=(v,w,S,b,p)=>{const u={name:"Im2Col (packed)",inputNames:["A"],inputTypes:[D.TextureType.packed],cacheHint:p.cacheKey};return Object.assign(Object.assign({},u),{get:()=>((d,f,y,x,E,R)=>{const N=y.dims,L=x.dims,F=E.length,H=[L[1]*L[2]*L[3],E[2]*E[3]],q=L[2]*L[3],W=P.unpackFromChannel(),U=I.getGlsl(d.session.backend.glContext.version);let ne="";for(let De=0;De<=1;De++)for(let ue=0;ue<=1;ue++)ne+=`\n            blockIndex = rc.x + ${ue};\n            pos = rc.y + ${De};\n\n            if(blockIndex < ${H[1]} && pos < ${H[0]}) {\n              offsetY = int(blockIndex / (${E[F-1]})) * ${R.strides[0]} -\n                ${R.pads[0]};\n              d0 = offsetY + ${R.dilations[0]} * (imod(pos, ${q}) / ${L[2]});\n\n              if(d0 < ${N[2]} && d0 >= 0) {\n                offsetX = imod(blockIndex, ${E[F-1]}) * ${R.strides[1]} -\n                  ${R.pads[1]};\n                d1 = offsetX + ${R.dilations[1]} * imod(imod(pos, ${q}), ${L[2]});\n\n                if(d1 < ${N[3]} && d1 >= 0) {\n\n                  ch = int(float(pos)/ ${q}.);\n                    innerDims = vec2(d0, d1);\n                    result[${2*De+ue}] = getChannel(\n                      getA(0, ch, int(innerDims.x),\n                      int(innerDims.y)), innerDims);\n                }\n              }\n            }\n\n          `;const de=`\n      ${W}\n\n      void main() {\n        ivec2 rc = getOutputCoords();\n          vec4 result = vec4(0.0);\n          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n          vec2 innerDims;\n          ${ne}\n          ${U.output} = result;\n      }\n            `;return Object.assign(Object.assign({},f),{output:{dims:H,type:y.type,textureType:D.TextureType.packed},shaderSource:de,hasMain:!0})})(v,u,w,S,b,p)})}},3248:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.calculateIm2ColDims=M.createIm2ColProgramInfoLoader=void 0;const I=k(2039);M.createIm2ColProgramInfoLoader=(D,P,v,w,S)=>{const b={name:"Im2Col",inputNames:["X"],inputTypes:[I.TextureType.unpacked],cacheHint:S.cacheKey};return Object.assign(Object.assign({},b),{get:()=>((u,o,d,f,y,x)=>{const E=d.dims,N=y.length,L=M.calculateIm2ColDims(E,f.dims,y,4),F=`\n        const int XC = ${E[1]};\n        const int XH = ${E[2]};\n        const int XW = ${E[3]};\n        const int KH = ${x.kernelShape[0]};\n        const int KW = ${x.kernelShape[1]};\n        const int dilationH = ${x.dilations[0]};\n        const int dilationW = ${x.dilations[1]};\n        const int strideH = ${x.strides[0]};\n        const int strideW = ${x.strides[1]};\n        const int padH = ${x.pads[0]};\n        const int padW = ${x.pads[1]};\n        const int KHKW = KH*KW;\n        const int XCKHKW = XC * KHKW;\n        const int outputChannels = 4;\n        vec4 process(int indices[${N}]) {\n          int b  = indices[0]; // batch size\n          int oh = indices[1] * strideH - padH; //output height\n          int ow = indices[2] * strideW - padW; //output width\n          int p = indices[3] * outputChannels; //patch\n          vec4 value = vec4(0.0);\n          for(int i=0; i < outputChannels; ++i) {\n            if(p < XCKHKW) {\n              int patchC = p / KHKW;\n              int patchH = (p - patchC*KHKW) / KW;\n              int patchW = (p - patchC*KHKW) - patchH * KW;\n              int xh2 = oh + patchH * dilationH;\n              int xw2 = ow + patchW * dilationW;\n              int x[${E.length}];\n              x[0] = b;\n              x[1] = patchC;\n              x[2] = xh2;\n              x[3] = xw2;\n              if(xh2 >= 0 &&\n                  xh2 < XH &&\n                  xw2 >= 0 &&\n                  xw2 < XW) {\n                value[i] = _X(x);\n              }\n            }\n            ++p;\n          }\n          return value;\n        }\n        `;return Object.assign(Object.assign({},o),{output:{dims:L,type:d.type,textureType:I.TextureType.packedLastDimension},shaderSource:F})})(0,b,P,v,w,S)})},M.calculateIm2ColDims=(D,P,v,w=4)=>[v[0],v[2],v[3],Math.ceil(D[1]*P[2]*P[3]/w)]},6572:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.parseImageScalerAttributes=M.imageScaler=void 0;const I=k(246),D=k(2039);M.imageScaler=(b,p,u)=>(S(p),[b.run(v(b,p,u),p)]),M.parseImageScalerAttributes=b=>{const p=b.attributes.getFloat("scale"),u=b.attributes.getFloats("bias");return I.createAttributeWithCacheKey({scale:p,bias:u})};const P={name:"ImageScaler",inputNames:["X"],inputTypes:[D.TextureType.unpacked]},v=(b,p,u)=>{const o=Object.assign(Object.assign({},P),{cacheHint:u.cacheKey});return Object.assign(Object.assign({},o),{get:()=>((d,f,y,x)=>{const E=y[0].dims.slice(),R=E.length,N=`\n      ${w(x.bias.length)}\n      float process(int indices[${R}]) {\n        return _X(indices) * scale + getBias(bias, indices[1]);\n      }`;return Object.assign(Object.assign({},f),{output:{dims:E,type:y[0].type,textureType:D.TextureType.unpacked},variables:[{name:"bias",type:"float",arrayLength:x.bias.length,data:x.bias},{name:"scale",type:"float",data:x.scale}],shaderSource:N})})(0,o,p,u)})},w=b=>{const p=[`float getBias(float bias[${b}], int channel) {`];for(let u=0;u<b;++u)p.push(0===u?`\tif (channel == ${u}) { return bias[${u}]; }`:u===b-1?`\telse { return bias[${u}]; }`:`\telse if (channel == ${u}) { return bias[${u}]; }`);return p.push("\t}"),p.join("\n")},S=b=>{if(!b||1!==b.length)throw new Error("ImageScaler requires 1 input.");if(4!==b[0].dims.length)throw new Error("Invalid input shape.");if("float32"!==b[0].type&&"float64"!==b[0].type)throw new Error("Invalid input type.")}},3346:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.parseInstanceNormalizationAttributes=M.instanceNormalization=void 0;const I=k(5060),D=k(2039);M.instanceNormalization=(p,u,o)=>{b(u);const d=p.run(v(u[0]),u);return[p.run(S(p,u[0],o,d.dims),[u[0],d,u[1],u[2]])]},M.parseInstanceNormalizationAttributes=p=>p.attributes.getFloat("epsilon",1e-5);const P={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[D.TextureType.unpacked]},v=p=>Object.assign(Object.assign({},P),{get:()=>((u,o)=>{const d=o.dims.slice(),y=d[2]*d[3],x=[d[0],d[1]],E=`\n      vec4 process(int[2] indices) {\n        vec4 v = vec4(0.0);\n        int a[4];\n        a[0] = indices[0];\n        a[1] = indices[1];\n        float temp = 0.0;\n        for(int a2=0; a2<${d[2]}; a2++) {\n          a[2] = a2;\n          for(int a3=0; a3<${d[3]}; a3++) {\n            a[3] = a3;\n            float x = _X(a);\n            temp += x;\n          }\n        }\n        float mean = temp / float(${y});\n        temp = 0.0;\n        for(int a2=0; a2<${d[2]}; a2++) {\n          a[2] = a2;\n          for(int a3=0; a3<${d[3]}; a3++) {\n            a[3] = a3;\n            float x = _X(a);\n            temp += (x - mean) * (x - mean);\n          }\n        }\n        v.r = mean;\n        v.g = temp / float(${y});\n\n        return v;\n      }`;return Object.assign(Object.assign({},u),{output:{dims:x,type:o.type,textureType:D.TextureType.packedLastDimension},shaderSource:E})})(P,p)}),w={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[D.TextureType.unpacked,D.TextureType.packedLastDimension,D.TextureType.unpacked,D.TextureType.unpacked]},S=(p,u,o,d)=>{const f=Object.assign(Object.assign({},w),{cacheHint:`${o}`});return Object.assign(Object.assign({},f),{get:()=>((y,x,E,R,N)=>{const L=I.getGlsl(y.session.backend.glContext.version),[F,H]=y.calculateTextureWidthAndHeight(N,D.TextureType.packedLastDimension),[q,W]=[F/4,H],U=`\n      vec4 get_MeanAndVariance(int[2] mv) {\n        int offset = indicesToOffset_MeanAndVariance(mv);\n        vec2 coords = offsetToCoords(offset, ${q}, ${W});\n        return ${L.texture2D}(MeanAndVariance, coords);\n      }\n\n      float process(int[4] indices) {\n        int mv[2];\n        mv[0] = indices[0];\n        mv[1] = indices[1];\n        vec4 mean_and_variance = get_MeanAndVariance(mv);\n        float mean = mean_and_variance.r;\n        float variance = mean_and_variance.g;\n\n        int sb[1];\n        sb[0] = indices[1];\n        float scale = _Scale(sb);\n        float b = _B(sb);\n\n        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;\n      }`;return Object.assign(Object.assign({},x),{output:{dims:E.dims,type:E.type,textureType:D.TextureType.unpacked},variables:[{name:"epsilon",type:"float",data:R}],shaderSource:U})})(p,f,u,o,d)})},b=p=>{if(!p||3!==p.length)throw new Error("InstanceNormalization requires 3 inputs.");const u=p[0],o=p[1],d=p[2];if(u.dims.length<3||1!==o.dims.length||1!==d.dims.length)throw new Error("Invalid input shape.");if(o.dims[0]!==u.dims[1]||d.dims[0]!==u.dims[1])throw new Error("Input shapes are mismatched.");if("float32"!==u.type&&"float64"!==u.type||"float32"!==o.type&&"float64"!==o.type||"float32"!==d.type&&"float64"!==d.type)throw new Error("Invalid input type.");if(4!==p[0].dims.length)throw new Error("Only support 4-D input shape.")}},708:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.createPackedMatmulProgramInfoLoader=void 0;const I=k(2517),D=k(5060),P=k(2039),v=k(9390),w=k(2823),S=k(5623);M.createPackedMatmulProgramInfoLoader=(b,p,u)=>{const o={name:"MatMul (packed)",inputNames:(d=p.length>2)?["A","B","Bias"]:["A","B"],inputTypes:d?[P.TextureType.packed,P.TextureType.packed,P.TextureType.packed]:[P.TextureType.packed,P.TextureType.packed],cacheHint:u.activationCacheKey};var d;return Object.assign(Object.assign({},o),{get:()=>((y,x,E,R)=>{const N=E.length>2,L=N?"value += getBiasForMatmul();":"",F=E[0].dims,H=E[1].dims,q=I.BroadcastUtil.calcShape(F,H,!0),W=!I.ShapeUtil.areEqual(E[0].dims,E[1].dims);if(!q)throw new Error("Can't use matmul on the given tensors");const ne=Math.ceil(F[F.length-1]/2),de=F.length,De=H.length,ue=D.getGlsl(y.session.backend.glContext.version),Ae=v.getCoordsDataType(q.length),Se=q.length,he=v.getGlChannels(),{activationFunction:_e,applyActivation:Xe}=w.getActicationSnippet(R),We=N?`${S.getBiasForMatmul(Ae,he,E[2].dims,q,!0)}`:"",mt=W?`${function(Kt,rn,On,At){let hn=[],Zr=[];const en=On[0].dims,Yn=On[1].dims,Br=en.length,Kr=Yn.length,An=At.length,Jr=An-Br,_r=An-Kr;hn=en.map((Ei,Qr)=>`coords.${rn[Qr+Jr]}`),hn[Br-1]="i*2",hn.join(", "),Zr=Yn.map((Ei,Qr)=>`coords.${rn[Qr+_r]}`),Zr[Kr-2]="i*2",Zr.join(", ");const ns=I.BroadcastUtil.getBroadcastDims(en,At),Ts=I.BroadcastUtil.getBroadcastDims(Yn,At),wo=ns.map(Ei=>`coords.${rn[Ei+Jr]} = 0;`).join("\n"),zi=Ts.map(Ei=>`coords.${rn[Ei+_r]} = 0;`).join("\n"),js=`int lastDim = coords.${rn[An-1]};\n  coords.${rn[An-1]} = coords.${rn[An-2]};\n  coords.${rn[An-2]} = lastDim;`;return`\nvec4 getAAtOutCoordsMatmul(int i) {\n  ${Kt} coords = getOutputCoords();\n  ${js}\n  ${wo}\n  vec4 outputValue = getA(${hn});\n  return outputValue;\n}\n\nvec4 getBAtOutCoordsMatmul(int i) {\n  ${Kt} coords = getOutputCoords();\n  ${js}\n  ${zi}\n  vec4 outputValue = getB(${Zr});\n  return outputValue;\n}`}(Ae,he,E,q)}`:"",Zt=W?"getAAtOutCoordsMatmul(i)":`getA(${function(Kt,rn){let On="";for(let At=0;At<rn-2;At++)On+=`rc.${Kt[At]}, `;return On+=`rc.${Kt[rn-2]}, i*2`,On}(he,de)})`,Dn=W?"getBAtOutCoordsMatmul(i)":`getB(${function(Kt,rn){let On="";for(let At=0;At<rn-2;At++)On+=`rc.${Kt[At]}, `;return On+=`i*2, rc.${Kt[rn-1]}`,On}(he,De)})`,Lr=`\n            ${mt}\n            ${We}\n            ${_e}\n            void main() {\n              ${W?"":`${Ae} rc =\n          getOutputCoords(); int lastDim = rc.${he[Se-1]}; rc.${he[Se-1]} =\n          rc.${he[Se-2]}; rc.${he[Se-2]} = lastDim;\n      `}\n\n              vec4 value = vec4(0);\n              for (int i = 0; i < ${ne}; i++) {\n                vec4 a = ${Zt};\n                vec4 b = ${Dn};\n\n                value += (a.rrbb * b.rgrg);\n                value += (a.ggaa * b.baba);\n              }\n              ${L}\n              ${Xe}\n              ${ue.output} = value;\n            }`;return Object.assign(Object.assign({},x),{output:{dims:q,type:E[0].type,textureType:P.TextureType.packed},shaderSource:Lr,hasMain:!0})})(b,o,p,u)})}},5623:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.getBiasForMatmul=M.createMatmulProgramInfoLoader=M.parseMatMulAttributes=M.matMul=void 0;const I=k(2517),D=k(2039),P=k(9390),v=k(2823),w=k(708);function S(u,o){const d={name:"MatMul",inputNames:(f=u.length>2)?["A","B","Bias"]:["A","B"],inputTypes:f?[D.TextureType.unpacked,D.TextureType.unpacked,D.TextureType.unpacked]:[D.TextureType.unpacked,D.TextureType.unpacked],cacheHint:o.activationCacheKey};var f;return Object.assign(Object.assign({},d),{get:()=>function(x,E,R){const N=E[0].dims,L=E[1].dims,F=I.BroadcastUtil.calcShape(N,L,!0);if(!F)throw new Error("Can't use matmul on the given tensors");const H=P.getCoordsDataType(F.length),q=P.getGlChannels(),{activationFunction:W,applyActivation:U}=v.getActicationSnippet(R),ne=E.length>2,de=ne?"value += getBiasForMatmul();":"",De=ne?`${p(H,q,E[2].dims,F,!1)}`:"",Ae=N.length,Se=L.length,he=`\n    ${W}\n    ${De}\n    float process(int indices[${F.length}]) {\n        int a[${Ae}];\n        int b[${Se}];\n        bcastMatmulIndices_A(indices, a);\n        bcastMatmulIndices_B(indices, b);\n\n        float value;\n        for (int k=0; k<${N[N.length-1]}; ++k) {\n            a[${Ae-1}] = k;\n            b[${Se-2}] = k;\n            value += _A(a) * _B(b);\n        }\n        ${de}\n        ${U}\n        return value;\n    }`;return Object.assign(Object.assign({},x),{output:{dims:F,type:E[0].type,textureType:D.TextureType.unpacked},shaderSource:he})}(d,u,o)})}M.matMul=(u,o,d)=>(b(o),u.session.pack?[u.run(w.createPackedMatmulProgramInfoLoader(u,o,d),o)]:[u.run(S(o,d),o)]),M.parseMatMulAttributes=u=>v.parseInternalActivationAttributes(u.attributes),M.createMatmulProgramInfoLoader=S;const b=u=>{if(!u||2!==u.length)throw new Error("MatMul requires 2 inputs.");if(u[0].dims[u[0].dims.length-1]!==u[1].dims[u[1].dims.length-2])throw new Error("shared dimension does not match.");if("float32"!==u[0].type&&"float64"!==u[0].type||"float32"!==u[1].type&&"float64"!==u[1].type)throw new Error("inputs should be float type");if(u[0].type!==u[1].type)throw new Error("inputs types should match")};function p(u,o,d,f,y){let x="";const E=d.length,R=f.length,N=R-E;x=R<2&&E>0?"coords":d.map((H,q)=>`coords.${o[q+N]}`).join(", ");const L=I.BroadcastUtil.getBroadcastDims(d,f).map(H=>`coords.${o[H+N]} = 0;`).join("\n");let F="vec4(outputValue.xx, outputValue.yy)";return 1===I.ShapeUtil.size(d)&&(F="vec4(outputValue.x)"),y?`\nvec4 getBiasForMatmul() {\n  ${u} coords = getOutputCoords();\n  ${L}\n  vec4 outputValue = getBias(${x});\n  return ${F};\n}`:`\nfloat getBiasForMatmul() {\n  ${u} coords = getOutputCoords();\n  ${L}\n  return getBias(coords.x);\n}`}M.getBiasForMatmul=p},2403:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.createPackProgramInfoLoader=void 0;const I=k(5060),D=k(2039),P=k(9390),v=k(2827),w={name:"pack",inputNames:["A"],inputTypes:[D.TextureType.unpackedReversed]};M.createPackProgramInfoLoader=(S,b)=>Object.assign(Object.assign({},w),{get:()=>((p,u)=>{const o=I.getGlsl(p.session.backend.glContext.version),d=u.dims,f=d.length,y=u.dims.length,x=P.getCoordsDataType(y),E=v.getChannels("rc",y),R=(L=E,0===(N=y)||1===N?"":`\n    int r = ${L[N-2]};\n    int c = ${L[N-1]};\n    int rp1 = ${L[N-2]} + 1;\n    int cp1 = ${L[N-1]} + 1;\n    bool rEdge = rp1 >= ${d[d.length-1]};\n    bool cEdge = cp1 >= ${d[d.length-2]};\n    `);var N,L;let q;q=0===f?[1,1]:1===f?[d[0],1]:[d[y-1],d[y-2]];const W=function(de,De,ue){if(0===de)return"false";if(1===de)return`rc > ${De[0]}`;let Ae="";for(let Se=de-2;Se<de;Se++)Ae+=`${ue[Se]} >= ${De[Se-de+2]}`,Se<de-1&&(Ae+="||");return Ae}(y,q,E),U=function(de,De){const ue=de.length;if(0===ue)return"getA(), 0, 0, 0";if(1===ue)return`getA(rc),\n            rc + 1 >= ${de[0]} ? 0. : getA(rc + 1),\n            0, 0`;let Ae="";if(ue>2)for(let Se=0;Se<ue-2;++Se)Ae+=`${De[Se]},`;return`getA(${Ae}r, c),\n          rEdge ? 0. : getA(${Ae}rp1, c),\n          cEdge ? 0. : getA(${Ae}r, cp1),\n          rEdge || cEdge ? 0. : getA(${Ae}rp1, cp1)`}(d,E),ne=`\n        void main() {\n          ${x} rc = getOutputCoords();\n\n          if(${W}) {\n            ${o.output} = vec4(0);\n          } else {\n            ${R}\n\n            ${o.output} = vec4(${U});\n          }\n        }\n      `;return Object.assign(Object.assign({},w),{hasMain:!0,output:{dims:u.dims,type:u.type,textureType:D.TextureType.packed},shaderSource:ne})})(S,b)})},2827:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.unpackFromChannel=M.getChannels=M.getVecChannels=void 0;const I=k(9390);function D(P,v){return I.getGlChannels(v).map(w=>`${P}.${w}`)}M.getVecChannels=D,M.getChannels=function(P,v){return 1===v?[P]:D(P,v)},M.unpackFromChannel=function(){return"\n    float getChannel(vec4 frag, int dim) {\n      int modCoord = imod(dim, 2);\n      return modCoord == 0 ? frag.r : frag.g;\n    }\n\n    float getChannel(vec4 frag, vec2 innerDims) {\n      vec2 modCoord = mod(innerDims, 2.);\n      return modCoord.x == 0. ?\n        (modCoord.y == 0. ? frag.r : frag.g) :\n        (modCoord.y == 0. ? frag.b : frag.a);\n    }\n  "}},2870:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.parsePadAttributesV11=M.padV11=M.parsePadAttributesV2=M.padV2=void 0;const I=k(246),D=k(2517),P=k(5060),v=k(2039),w={name:"Pad",inputNames:["A"],inputTypes:[v.TextureType.unpacked]};M.padV2=(x,E,R)=>(p(E),[x.run(Object.assign(Object.assign({},w),{cacheHint:R.cacheKey,get:()=>b(x,E[0],R)}),E)]),M.parsePadAttributesV2=x=>{const E=x.attributes.getString("mode","constant"),R=x.attributes.getFloat("value",0),N=x.attributes.getInts("pads");return I.createAttributeWithCacheKey({mode:E,value:R,pads:N})},M.padV11=(x,E,R)=>{u(E);const N=S(x,E,R);return M.padV2(x,[E[0]],N)},M.parsePadAttributesV11=x=>x.attributes.getString("mode","constant");const S=(x,E,R)=>{if(!x.session.isInitializer(E[1].dataId)||E.length>=3&&!x.session.isInitializer(E[2].dataId))throw new Error("dynamic pad attributes are not allowed");const N=Array.from(E[1].integerData);return I.createAttributeWithCacheKey({mode:R,pads:N,value:E.length>=3?E[2].floatData[0]:0})},b=(x,E,R)=>{const N=D.ShapeUtil.padShape(E.dims.slice(),R.pads),L=N.length,F=`\n      ${o(x,E,R)}\n      float process(int[${L}] indices) {\n          return padA(indices);\n      }`;return{name:"Pad",inputNames:["A"],inputTypes:[v.TextureType.unpacked],output:{dims:N,type:E.type,textureType:v.TextureType.unpacked},shaderSource:F}},p=x=>{if(!x||1!==x.length)throw new Error("Pad requires 1 input");if("float32"!==x[0].type&&"float64"!==x[0].type)throw new Error("Invalid input type.")},u=x=>{if(!x||2!==x.length&&3!==x.length)throw new Error("Pad requires 2 or 3 inputs");if("int32"!==x[1].type)throw new Error("Invalid input type.");if(x.length>=3&&"string"===x[2].type)throw new Error("Invalid input type.")},o=(x,E,R)=>{const N=P.getGlsl(x.session.backend.glContext.version),[L,F]=x.calculateTextureWidthAndHeight(E.dims,v.TextureType.unpacked),H=D.ShapeUtil.computeStrides(E.dims);switch(R.mode){case"constant":return d(N,E.dims,H,L,F,R.pads,R.value);case"reflect":return f(N,E.dims,H,L,F,R.pads);case"edge":return y(N,E.dims,H,L,F,R.pads);default:throw new Error("Invalid mode")}},d=(x,E,R,N,L,F,H)=>{const q=E.length;let W="";for(let U=q-1;U>=0;--U)W+=`\n        k = m[${U}] - ${F[U]};\n        if (k < 0)  return constant;\n        if (k >= ${E[U]}) return constant;\n        offset += k * ${R[U]};\n        `;return`\n      float padA(int m[${q}]) {\n        const float constant = float(${H});\n        int offset = 0;\n        int k = 0;\n        ${W}\n        vec2 coords = offsetToCoords(offset, ${N}, ${L});\n        float value = getColorAsFloat(${x.texture2D}(A, coords));\n        return value;\n      }\n      `},f=(x,E,R,N,L,F)=>{const H=E.length;let q="";for(let W=H-1;W>=0;--W)q+=`\n        k = m[${W}] - ${F[W]};\n        if (k < 0) { k = -k; }\n        {\n          const int _2n_1 = ${2*(E[W]-1)};\n          k = int( mod( float(k), float(_2n_1) ) ) ;\n          if(k >= ${E[W]}) { k = _2n_1 - k; }\n        }\n        offset += k * ${R[W]};\n        `;return`\n      float padA(int m[${H}]) {\n        int offset = 0;\n        int k = 0;\n        ${q}\n        vec2 coords = offsetToCoords(offset, ${N}, ${L});\n        float value = getColorAsFloat(${x.texture2D}(A, coords));\n        return value;\n      }\n      `},y=(x,E,R,N,L,F)=>{const H=E.length;let q="";for(let W=H-1;W>=0;--W)q+=`\n        k = m[${W}] - ${F[W]};\n        if (k < 0)  k = 0;\n        if (k >= ${E[W]}) k = ${E[W]-1};\n        offset += k * ${R[W]};\n      `;return`\n      float padA(int m[${H}]) {\n        int offset = 0;\n        int k = 0;\n        ${q}\n        vec2 coords = offsetToCoords(offset, ${N}, ${L});\n        float value = getColorAsFloat(${x.texture2D}(A, coords));\n        return value;\n      }\n      `}},2143:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.globalMaxPool=M.parseMaxPoolAttributes=M.maxPool=M.parseGlobalAveragePoolAttributes=M.globalAveragePool=M.parseAveragePoolAttributes=M.averagePool=void 0;const I=k(246),D=k(2517),P=k(2039);M.averagePool=(y,x,E)=>{u(x);const R={name:"AveragePool",inputNames:["X"],inputTypes:[P.TextureType.unpacked],cacheHint:E.cacheKey};return[y.run(Object.assign(Object.assign({},R),{get:()=>v(x,R,!1,E)}),x)]},M.parseAveragePoolAttributes=y=>{const x=y.attributes.getString("auto_pad","NOTSET"),E=y.attributes.getInt("ceil_mode",0),R=0!==y.attributes.getInt("count_include_pad",0),N=y.attributes.getInts("kernel_shape"),L=y.attributes.getInts("strides",[]),F=y.attributes.getInts("pads",[]);if(0!==E)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return I.createAttributeWithCacheKey({autoPad:x,ceilMode:E,countIncludePad:R,kernelShape:N,strides:L,pads:F})};const v=(y,x,E,R)=>{const[N,L]=S(y,R,E),F=D.ShapeUtil.size(N.kernelShape);let H="";H+=N.countIncludePad?`value /= float(${F});`:`value /= float(${F} - pad);`;const q=`\n        ${o(y[0].dims,N,"value += _X(x);",H,"0.0")}\n      `;return Object.assign(Object.assign({},x),{output:{dims:L,type:y[0].type,textureType:P.TextureType.unpacked},shaderSource:q})};M.globalAveragePool=(y,x,E)=>{u(x);const R={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[P.TextureType.unpacked],cacheHint:`${E.countIncludePad}`};return[y.run(Object.assign(Object.assign({},R),{get:()=>v(x,R,!0,E)}),x)]},M.parseGlobalAveragePoolAttributes=y=>{const x=0!==y.attributes.getInt("count_include_pad",0);return I.createAttributeWithCacheKey({autoPad:"",ceilMode:0,countIncludePad:x,kernelShape:[],strides:[],pads:[]})},M.maxPool=(y,x,E)=>{u(x);const R={name:"MaxPool",inputNames:["X"],inputTypes:[P.TextureType.unpacked],cacheHint:E.cacheKey};return[y.run(Object.assign(Object.assign({},R),{get:()=>w(x,R,!1,E)}),x)]},M.parseMaxPoolAttributes=y=>{const x=y.attributes.getString("auto_pad","NOTSET"),E=y.attributes.getInt("ceil_mode",0),R=y.attributes.getInts("kernel_shape"),N=y.attributes.getInts("strides",[]),L=y.attributes.getInts("pads",[]),F=y.attributes.getInt("storage_order",0),H=y.attributes.getInts("dilations",[]);if(0!==F)throw new Error("column major storage order is not yet supported for MaxPool");if(0!==E)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return I.createAttributeWithCacheKey({autoPad:x,ceilMode:E,countIncludePad:!1,kernelShape:R,strides:N,pads:L,storageOrder:F,dilations:H})};const w=(y,x,E,R)=>{const[N,L]=S(y,R,E),F=`\n      ${o(y[0].dims,N,"\n      value = max(_X(x), value);\n    ","","-1e5")}\n    `;return Object.assign(Object.assign({},x),{output:{dims:L,type:y[0].type,textureType:P.TextureType.unpacked},shaderSource:F})},S=(y,x,E)=>{const R=y[0].dims.slice(),N=Object.hasOwnProperty.call(x,"dilations"),L=x.kernelShape.slice(),F=x.strides.slice(),H=N?x.dilations.slice():[],q=x.pads.slice();D.PoolConvUtil.adjustPoolAttributes(E,R,L,F,H,q);const W=D.PoolConvUtil.computePoolOutputShape(E,R,F,H,L,q,x.autoPad),U=Object.assign({},x);return Object.assign(U,N?{kernelShape:L,strides:F,pads:q,dilations:H,cacheKey:x.cacheKey}:{kernelShape:L,strides:F,pads:q,cacheKey:x.cacheKey}),[U,W]},b={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},p={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[P.TextureType.unpacked]};M.globalMaxPool=(y,x)=>(u(x),[y.run(Object.assign(Object.assign({},p),{get:()=>w(x,p,!0,b)}),x)]);const u=y=>{if(!y||1!==y.length)throw new Error("Pool ops requires 1 input.");if("float32"!==y[0].type&&"float64"!==y[0].type)throw new Error("Invalid input type.")},o=(y,x,E,R,N)=>{const L=y.length;if(x.kernelShape.length<=2){const F=x.kernelShape[x.kernelShape.length-1],H=x.strides[x.strides.length-1],q=x.pads[x.pads.length/2-1],U=y[L-1];let ne="",de="",De="";if(ne=q+x.pads[x.pads.length-1]!==0?`\n          for (int i = 0; i < ${F}; i++) {\n            x[${L} - 1] = indices[${L} - 1] * ${H} - ${q} + i;\n            if (x[${L} - 1] < 0 || x[${L} - 1] >= ${U}) {\n              pad++;\n              continue;\n            }\n            ${E}\n          }`:`\n          for (int i = 0; i < ${F}; i++) {\n            x[${L} - 1] = indices[${L} - 1] * ${H} - ${q} + i;\n            ${E}\n          }`,2===x.kernelShape.length){const ue=x.kernelShape[x.kernelShape.length-2],Ae=x.strides[x.strides.length-2],Se=x.pads[x.pads.length/2-2],_e=y[L-2];de=Se+x.pads[x.pads.length-2]!==0?`\n            for (int j = 0; j < ${ue}; j++) {\n              x[${L} - 2] = indices[${L} - 2] * ${Ae} - ${Se} + j;\n              if (x[${L} - 2] < 0 || x[${L} - 2] >= ${_e}) {\n                pad+= ${F};\n                continue;\n              }\n          `:`\n            for (int j = 0; j < ${ue}; j++) {\n              x[${L} - 2] = indices[${L} - 2] * ${Ae} - ${Se} + j;\n            `,De="\n          }\n        "}return`\n        float process(int indices[${L}]) {\n          int x[${L}];\n          copyVec(indices, x);\n\n          float value = ${N};\n          int pad = 0;\n          ${de}\n          ${ne}\n          ${De}\n          ${R}\n          return value;\n        }\n      `}{const F=D.ShapeUtil.size(x.kernelShape),H=D.ShapeUtil.computeStrides(x.kernelShape),q=H.length,W=x.pads.length,U=f(q),ne=d(y,"inputDims"),de=d(x.pads,"pads"),De=d(H,"kernelStrides"),ue=d(x.strides,"strides");let Ae="";return Ae=x.pads.reduce((Se,he)=>Se+he)?`\n            if (x[j] >= inputDims[j] || x[j] < 0) {\n              pad++;\n              isPad = true;\n              break;\n            }\n          }\n          if (!isPad) {\n            ${E}\n          }`:`\n          }\n          ${E}\n        `,`\n        ${U}\n        float process(int indices[${L}]) {\n          int x[${L}];\n          copyVec(indices, x);\n          int offset[${q}];\n          int pads[${W}];\n          int inputDims[${L}];\n          int kernelStrides[${q}];\n          int strides[${q}];\n          ${de}\n          ${ne}\n          ${ue}\n          ${De}\n\n          float value = ${N};\n          int pad = 0;\n          bool isPad = false;\n          for (int i = 0; i < ${F}; i++) {\n            offsetToIndices(i, kernelStrides, offset);\n            isPad = false;\n            for (int j = ${L} - ${q}; j < ${L}; j++) {\n              x[j] = indices[j] * strides[j - ${L} + ${q}]\n                + offset[j - ${L} + ${q}] - pads[j - 2];\n              ${Ae}\n          }\n          ${R}\n\n          return value;\n        }\n      `}},d=(y,x)=>{let E="";for(let R=0;R<y.length;R++)E+=`\n      ${x}[${R}] = ${y[R]};\n    `;return E},f=y=>`\n  void offsetToIndices(int offset, int[${y}] strides, out int[${y}] indices) {\n    if (${y} == 0) {\n      return;\n    }\n    for (int i = 0; i < ${y} - 1; ++i) {\n      indices[i] = offset / strides[i];\n      offset -= indices[i] * strides[i];\n    }\n    indices[${y} - 1] = offset;\n  }`},4939:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.reduceLogSumSquare=M.reduceLogSum=M.reduceProd=M.reduceMin=M.reduceMax=M.reduceMean=M.reduceSum=M.parseReduceAttributes=void 0;const I=k(246),D=k(782),P=k(2517),v=k(2039),w=(p,u,o,d,f)=>{b(u);const y={name:d,inputNames:["A"],inputTypes:[v.TextureType.unpacked]};return[p.run(Object.assign(Object.assign({},y),{cacheHint:o.cacheKey,get:()=>S(p,u,o,d,f,y)}),u)]};M.parseReduceAttributes=p=>{const u=p.attributes.getInts("axes",[]),o=1===p.attributes.getInt("keepdims",1);return I.createAttributeWithCacheKey({axes:u,keepDims:o})};const S=(p,u,o,d,f,y)=>{const x=[],E=u[0].dims.length||1,R=[],N=P.ShapeUtil.normalizeAxes(o.axes,u[0].dims.length),L=f(u,N);let F=L[1];for(let q=0;q<u[0].dims.length;q++)N.indexOf(q)>=0||0===N.length?(o.keepDims&&x.push(1),F=`\n          for(int j${q} = 0; j${q} < ${u[0].dims[q]}; j${q}++) {\n            inputIdx[${q}] = j${q};\n            ${F}\n          }`):(R.push(`inputIdx[${q}] = outputIdx[${x.length}];`),x.push(u[0].dims[q]));const H=`\n      float process(int outputIdx[${x.length||1}]) {\n        float value;                 // final result\n        int inputIdx[${E}];      // addressing input data\n        ${R.join("\n")}\n        ${L[0]}       // init ops for reduce max/min\n        ${F}\n        ${L[2]}       // final computation for reduce mean\n        return value;\n      }`;return Object.assign(Object.assign({},y),{output:{dims:x,type:u[0].type,textureType:v.TextureType.unpacked},shaderSource:H})},b=p=>{if(!p||1!==p.length)throw new Error("Reduce op requires 1 input.");if(-1===D.NUMBER_TYPES.indexOf(p[0].type))throw new Error("Invalid input type.")};M.reduceSum=(p,u,o)=>w(p,u,o,"ReduceSum",()=>["value = 0.0;","value += _A(inputIdx);",""]),M.reduceMean=(p,u,o)=>w(p,u,o,"ReduceMean",(d,f)=>{let y=1;for(let x=0;x<d[0].dims.length;x++)(f.indexOf(x)>=0||0===f.length)&&(y*=d[0].dims[x]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${y}.;`]}),M.reduceMax=(p,u,o)=>w(p,u,o,"ReduceMax",(d,f)=>{const y=[];for(let x=0;x<d[0].dims.length;x++)(f.indexOf(x)>=0||0===f.length)&&y.push(`inputIdx[${x}] = 0;`);return[`${y.join("\n")}\nvalue = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]}),M.reduceMin=(p,u,o)=>w(p,u,o,"ReduceMin",(d,f)=>{const y=[];for(let x=0;x<d[0].dims.length;x++)(f.indexOf(x)>=0||0===f.length)&&y.push(`inputIdx[${x}] = 0;`);return[`${y.join("\n")}\nvalue = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]}),M.reduceProd=(p,u,o)=>w(p,u,o,"ReduceProd",()=>["value = 1.0;","value *= _A(inputIdx);",""]),M.reduceLogSum=(p,u,o)=>w(p,u,o,"ReduceLogSum",()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"]),M.reduceLogSumSquare=(p,u,o)=>w(p,u,o,"ReduceLogSumSquare",()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""])},7019:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.isReshapeCheap=M.processDims3D=M.createPackedReshape3DProgramInfoLoader=void 0;const I=k(2517),D=k(5060),P=k(2039),v=k(2827);M.createPackedReshape3DProgramInfoLoader=(w,S,b)=>{const p={name:"Reshape (packed)",inputTypes:[P.TextureType.packed],inputNames:["A"],cacheHint:`${b}`};return Object.assign(Object.assign({},p),{get:()=>((u,o,d,f)=>{const y=o.dims,x=f;let E="";for(let L=0;L<4;L++){let F="";switch(L){case 0:F="outputCoords = rc;";break;case 1:F="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:F="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:F="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}E+=`\n        ${F}\n        ${L>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}\n          int flattenedIndex = getFlattenedIndex(outputCoords);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);\n          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[${L}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);\n\n        ${L>0?"}":""}\n      `}const R=D.getGlsl(u.session.backend.glContext.version),N=`\n      ${function(L){const F=I.ShapeUtil.computeStrides(L),H=["b","r","c"];return`\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ${F.map((q,W)=>`int ${H[W]} = index / ${q}; ${W===F.length-1?`int ${H[W+1]} = index - ${H[W]} * ${q}`:`index -= ${H[W]} * ${q}`};`).join("")}\n      return ivec3(b, r, c);\n    }\n  `}(y)}\n      ${function(L){const F=I.ShapeUtil.computeStrides(L);return`\n  int getFlattenedIndex(ivec3 coords) {\n    // reverse y, z order\n    return coords.x * ${F[0]} + coords.z * ${F[1]} + coords.y;\n  }\n`}(x)}\n      ${v.unpackFromChannel()}\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.0);\n\n        ivec3 outputCoords;\n        int rows = ${x[2]};\n        int cols = ${x[1]};\n\n        ${E}\n        ${R.output} = result;\n      }\n    `;return Object.assign(Object.assign({},d),{output:{dims:x,type:o.type,textureType:P.TextureType.packed},shaderSource:N,hasMain:!0})})(w,S,p,b)})},M.processDims3D=function(w){if(0===w.length)return[1,1,1];let S=1;for(let b=0;b<w.length-2;++b)S*=w[b];return[S,w.length>1?w[w.length-2]:1,w[w.length-1]]},M.isReshapeCheap=function(w,S){let b=!1;return b=0===w.length||0===S.length||(w.length<2||S.length<2?w[w.length-1]===S[S.length-1]:w[w.length-1]===S[S.length-1]&&w[w.length-2]===S[S.length-2]),b}},718:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.reshape=void 0;const I=k(2517);M.reshape=(D,P)=>{const v=I.ShapeUtil.calculateReshapedDims(P[0].dims,P[1].integerData);return D.session.pack?[D.reshapePacked(P[0],v)]:[D.reshapeUnpacked(P[0],v)]}},2268:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.parseResizeAttributesV11=M.parseResizeAttributesV10=M.resize=void 0;const I=k(5060),D=k(2039),P=k(9390),v=k(2827),w=k(9793),S={name:"Resize",inputNames:["A"],inputTypes:[D.TextureType.packed]};M.resize=(d,f,y)=>(w.validateInputs(f,y),[d.run(Object.assign(Object.assign({},S),{cacheHint:y.cacheKey,get:()=>b(d,f,y)}),f)]),M.parseResizeAttributesV10=d=>w.parseUpsampleAttributes(d,10),M.parseResizeAttributesV11=d=>w.parseUpsampleAttributes(d,11);const b=(d,f,y)=>{const x=I.getGlsl(d.session.backend.glContext.version),[E,R]=p(f,y);if(E.every(Ae=>1===Ae)&&"tf_crop_and_resize"!==y.coordinateTransformMode)return Object.assign(Object.assign({},S),{output:{dims:R,type:f[0].type,textureType:D.TextureType.packed},hasMain:!0,shaderSource:`void main() {\n                    vec4 v = ${x.texture2D}(X, TexCoords);\n                    ${x.output} = v;\n                }`});const N=R.length;if(N<2)throw new Error(`output dimension should be at least 2, but got ${N}`);const L=R[N-2],F=R[N-1],H=f[0].dims;if(N!==H.length)throw new Error(`output dimension should match input ${H.length}, but got ${N}`);const q=H[N-2],W=H[N-1],U=E[N-2],ne=E[N-1];let de="";if("linear"!==y.mode)throw new Error(`resize (packed) does not support mode: '${y.mode}'`);switch(y.coordinateTransformMode){case"asymmetric":de="\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        return vec4(coords) / scaleWHWH;\n                    }\n                ";break;case"half_pixel":de="\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;\n                    }\n                ";break;case"align_corners":de=`\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        vec4 resized = vec4(${F}.0 - 1.0, ${L}.0 - 1.0, ${F}.0 - 1.0,\n                            ${L}.0 - 1.0);\n                        vec4 original = vec4(${W}.0 - 1.0, ${q}.0 - 1.0, ${W}.0 - 1.0,\n                            ${q}.0 - 1.0);\n                        vec4 new_scale = original / resized;\n                        return vec4(coords) * new_scale;\n                    }\n                `;break;default:throw new Error(`resize (packed) does not support coordinateTransformMode:                                 '${y.coordinateTransformMode}'`)}const De=P.getCoordsDataType(N),ue=`\n            const vec2 inputWH = vec2(${q}.0, ${W}.0);\n            const vec4 scaleWHWH = vec4(${U}.0, ${ne}.0, ${U}.0, ${ne}.0);\n            ${v.unpackFromChannel()}\n            ${de}\n            float getAValue(int x10, int r, int c, int d) {\n                return getChannel(getA(x10, r, c, d), vec2(c, d));\n            }\n            void main() {\n                ${De} rc = getOutputCoords();\n\n                int batch = rc[0];\n                int depth = rc[1];\n\n                // retrieve the 4 coordinates that is used in the 4 packed output values.\n                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);\n\n                // calculate the source index in fraction\n                vec4 sourceFrac = getSourceFracIndex(coords);\n\n                // get the lower and upper bound of the 4 values that will be packed into one texel.\n                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));\n                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));\n                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));\n                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));\n\n                bool hasNextRow = rc.w < ${L-1};\n                bool hasNextCol = rc.z < ${F-1};\n\n                // pack x00, x01, x10, x11's top-left corner into one vec4 structure\n                vec4 topLeft = vec4(\n                    getAValue(batch, depth, x00.x, x00.y),\n                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);\n\n                // pack x00, x01, x10, x11's top-right corner into one vec4 structure\n                vec4 topRight = vec4(\n                    getAValue(batch, depth, x00.x, x00.w),\n                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);\n\n                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure\n                vec4 bottomLeft = vec4(\n                    getAValue(batch, depth, x00.z, x00.y),\n                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);\n\n                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure\n                vec4 bottomRight = vec4(\n                    getAValue(batch, depth, x00.z, x00.w),\n                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);\n\n                // calculate the interpolation fraction on u and v direction\n                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);\n                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));\n\n                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);\n                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);\n                vec4 newValue = mix(top, bottom, clampFrac.xxzz);\n\n                ${x.output} = vec4(newValue);\n            }\n        `;return Object.assign(Object.assign({},S),{output:{dims:R,type:f[0].type,textureType:D.TextureType.packed},hasMain:!0,shaderSource:ue})},p=(d,f)=>{const y=d[0].dims;let x,E=f.scales;if(0===E.length){const N=d[f.scalesInputIdx];if(N&&0!==N.size){if(d[f.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");E=u(N,f.mode,f.isResize)}else{const L=d[f.sizesInputIdx];if(!L||0===L.size)throw new Error("Either scales or sizes MUST be provided as input.");x=Array.from(L.integerData),E=o(x,y,f.mode,f.isResize)}}else if(d[f.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");const R=x||y.map((N,L)=>Math.floor(N*E[L]));return[E,R]},u=(d,f,y)=>{const x=Array.from(d.floatData);return w.scalesValidation(x,f,y),x},o=(d,f,y,x)=>{const E=f.length,R=new Array(E);for(let N=0,L=E;N<L;N++)if(0===f[N]){if(0!==d[N])throw new Error("Input dim is zero but required output dim is non-zero.");R[N]=1}else R[N]=d[N]/f[N];return w.scalesValidation(R,y,x),R}},8117:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.shape=void 0;const I=k(9162);M.shape=(P,v)=>(D(v),[new I.Tensor([v[0].dims.length],"int32",void 0,void 0,new Int32Array(v[0].dims))]);const D=P=>{if(!P||1!==P.length)throw new Error("Shape requires 1 input.")}},2278:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.sliceV10=M.parseSliceAttributes=M.slice=void 0;const I=k(246),D=k(782),P=k(2517),v=k(2039),w={name:"Slice",inputNames:["A"],inputTypes:[v.TextureType.unpacked]};M.slice=(o,d,f)=>(b(d),[o.run(Object.assign(Object.assign({},w),{cacheHint:f.cacheKey,get:()=>S(o,d[0],f)}),d)]),M.parseSliceAttributes=o=>{const d=o.attributes.getInts("starts"),f=o.attributes.getInts("ends"),y=o.attributes.getInts("axes",[]);return I.createAttributeWithCacheKey({starts:d,ends:f,axes:y})};const S=(o,d,f)=>{const y=0===f.axes.length?d.dims.slice(0).map((H,q)=>q):f.axes,x=P.ShapeUtil.normalizeAxes(y,d.dims.length),E=f.starts.map((H,q)=>H>d.dims[x[q]]-1?d.dims[x[q]]:P.ShapeUtil.normalizeAxis(H,d.dims[x[q]])),R=f.ends.map((H,q)=>H>d.dims[x[q]]-1?d.dims[x[q]]:P.ShapeUtil.normalizeAxis(H,d.dims[x[q]])),N=d.dims.slice(),L=[];for(let H=0;H<x.length;H++)N[x[H]]=R[H]-E[H],E[H]>0&&L.push(`outputIdx[${x[H]}] += ${E[H]};`);const F=`\n      float process(int outputIdx[${N.length}]) {\n        ${L.join("\n      ")}\n        return _A(outputIdx);\n      }`;return Object.assign(Object.assign({},w),{output:{dims:N,type:d.type,textureType:v.TextureType.unpacked},shaderSource:F})},b=o=>{if(!o||1!==o.length)throw new Error("Slice requires 1 input.");if(-1===D.NUMBER_TYPES.indexOf(o[0].type))throw new Error("Invalid input type.")};M.sliceV10=(o,d)=>{u(d);const f=p(o,d);return[o.run(Object.assign(Object.assign({},w),{cacheHint:f.cacheKey,get:()=>S(o,d[0],f)}),[d[0]])]};const p=(o,d)=>{if(!o.session.isInitializer(d[1].dataId)||!o.session.isInitializer(d[2].dataId)||d.length>=4&&!o.session.isInitializer(d[3].dataId)||d.length>=5&&!o.session.isInitializer(d[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(d.length>=5&&d[4].integerData.some(E=>1!==E))throw new Error("currently non-1 steps is not supported for Slice");const f=Array.from(d[1].integerData),y=Array.from(d[2].integerData),x=d.length>=4?Array.from(d[3].integerData):[];return{starts:f,ends:y,axes:x,cacheKey:`${x};${f};${y}`}},u=o=>{if(!o||o.length<3||o.length>5)throw new Error("Invalid input number.");if("int32"!==o[1].type||1!==o[1].dims.length)throw new Error("Invalid input type.");if("int32"!==o[2].type||1!==o[2].dims.length)throw new Error("Invalid input type.");if(o.length>=4&&("int32"!==o[3].type||1!==o[3].dims.length))throw new Error("Invalid input type.");if(o.length>=5&&("int32"!==o[4].type||1!==o[4].dims.length))throw new Error("Invalid input type.")}},5524:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.softmaxV13=M.parseSoftmaxAttributesV13=M.parseSoftmaxAttributes=M.softmax=void 0;const I=k(246),D=k(2517),P=k(5060),v=k(2039),w=k(3738),S={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[v.TextureType.unpacked]},b={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[v.TextureType.unpacked,v.TextureType.unpacked]},p={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[v.TextureType.unpacked,v.TextureType.unpacked,v.TextureType.unpacked]};M.softmax=(x,E,R)=>{y(E);const N=E[0].dims.slice(),L=D.ShapeUtil.normalizeAxis(R.axis,N.length),F=D.ShapeUtil.sizeToDimension(N,L),H=D.ShapeUtil.sizeFromDimension(N,L);return u(x,E,R,F,H)},M.parseSoftmaxAttributes=x=>I.createAttributeWithCacheKey({axis:x.attributes.getInt("axis",1)}),M.parseSoftmaxAttributesV13=x=>I.createAttributeWithCacheKey({axis:x.attributes.getInt("axis",-1)}),M.softmaxV13=(x,E,R)=>{y(E);const N=E[0].dims.slice(),L=D.ShapeUtil.normalizeAxis(R.axis,N.length),F=N.length,H=L!==F-1,q=[];let W,U=[],ne=[];H&&(U=Array.from({length:F}).map((Ae,Se)=>Se),U[L]=F-1,U[F-1]=L,U.map(Ae=>q.push(N[Ae])),W=I.createAttributeWithCacheKey({perm:U}),ne=w.transpose(x,E,W));const de=D.ShapeUtil.sizeToDimension(H?q:N,F-1),De=D.ShapeUtil.sizeFromDimension(H?q:N,F-1),ue=u(x,H?ne:E,R,de,De);return H?w.transpose(x,ue,W):ue};const u=(x,E,R,N,L)=>{const F=o(x,E[0],N,L,[N]),H=x.run(Object.assign(Object.assign({},S),{cacheHint:R.cacheKey,get:()=>F}),E),q=d(x,E[0],N,L,F.output.dims,[N]),W=x.run(Object.assign(Object.assign({},b),{cacheHint:R.cacheKey,get:()=>q}),[E[0],H]),U=f(x,E[0],N,L,F.output.dims,q.output.dims);return[x.run(Object.assign(Object.assign({},p),{cacheHint:R.cacheKey,get:()=>U}),[E[0],H,W])]},o=(x,E,R,N,L)=>{const[F,H]=x.calculateTextureWidthAndHeight(E.dims,v.TextureType.unpacked),q=L.length;if(R<1||N<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==L.length)throw new Error("Dimensionality of the output should be 1");if(L[0]!==R)throw new Error("Shape of the output should be equal to logical row count");const W=P.getGlsl(x.session.backend.glContext.version),U=`\n      float process(int[${q}] indices) {\n        int logical_row_start_offset = indices[0] * ${N};\n\n        float max = getColorAsFloat(${W.texture2D}(A, offsetToCoords(logical_row_start_offset, ${F},\n        ${H} )));\n        for(int i=1; i<${N}; ++i)\n        {\n          float current = getColorAsFloat(${W.texture2D}(A, offsetToCoords(logical_row_start_offset + i,\n            ${F}, ${H})));\n          if(current > max)\n          max = current;\n        }\n\n        return max;\n      }`;return Object.assign(Object.assign({},S),{output:{dims:L,type:E.type,textureType:v.TextureType.unpacked},shaderSource:U})},d=(x,E,R,N,L,F)=>{const[H,q]=x.calculateTextureWidthAndHeight(E.dims,v.TextureType.unpacked),W=F.length;if(R<1||N<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==F.length)throw new Error("Dimensionality of the output should be 1");if(F[0]!==R)throw new Error("Shape of the output should be equal to logical row count");if(1!==L.length)throw new Error("Dimensionality of the intermediate results should be 1");if(L[0]!==R)throw new Error("Shape of the intermediate results should be equal to logical row count");const U=`\n      float process(int[${W}] indices) {\n        int logical_row_start_offset = indices[0] * ${N};\n\n        float norm_factor = 0.0;\n        float max = _Max(indices);\n        for(int i=0; i<${N}; ++i)\n        {\n          norm_factor += exp(getColorAsFloat(${P.getGlsl(x.session.backend.glContext.version).texture2D}(A, offsetToCoords(logical_row_start_offset + i,\n            ${H}, ${q}))) - max);\n        }\n\n        return norm_factor;\n      }`;return Object.assign(Object.assign({},b),{output:{dims:F,type:E.type,textureType:v.TextureType.unpacked},shaderSource:U})},f=(x,E,R,N,L,F)=>{const[H,q]=x.calculateTextureWidthAndHeight(E.dims,v.TextureType.unpacked),W=E.dims.length;if(R<1||N<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==L.length||1!==F.length)throw new Error("Dimensionality of the intermediate results should be 1");if(L[0]!==R||F[0]!==R)throw new Error("Shape of the intermediate results should be equal to logical row count");const U=`\n      float process(int[${W}] indices) {\n\n      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)\n      int offset = coordsToOffset(TexCoords, ${H}, ${q});\n\n      //determine the logical row for this index\n      int logical_row_index[1];\n      logical_row_index[0] = offset / ${N};\n\n      float norm_factor = _Norm(logical_row_index);\n\n      // avoid possible division by 0\n      // if norm_facor is 0, all elements are zero\n      // if so, return 0\n      if(norm_factor == 0.0)\n        return 0.0;\n\n      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;\n    }`;return Object.assign(Object.assign({},p),{output:{dims:E.dims,type:E.type,textureType:v.TextureType.unpacked},shaderSource:U})},y=x=>{if(!x||1!==x.length)throw new Error("Softmax requires 1 input.");if("float32"!==x[0].type&&"float64"!==x[0].type)throw new Error("Invalid input type")}},5975:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.parseSplitAttributes=M.split=void 0;const I=k(246),D=k(2517),P=k(2039),v={name:"Split",inputNames:["A"],inputTypes:[P.TextureType.unpacked]};M.split=(p,u,o)=>{b(u);const d=D.ShapeUtil.normalizeAxis(o.axis,u[0].dims.length),f=w(p,u,d,o),y=[];for(let x=0;x<f;++x)y.push(p.run(Object.assign(Object.assign({},v),{cacheHint:`${o.cacheKey};${x}`,get:()=>S(p,u[0],o,d,x)}),u));return y},M.parseSplitAttributes=p=>{const u=p.attributes.getInt("axis",0),o=p.attributes.getInts("split",[]);return I.createAttributeWithCacheKey({axis:u,split:o,numOutputs:p.outputs.length})};const w=(p,u,o,d)=>{const[,f]=D.SplitUtil.splitShape(u[0].dims,o,d.split,d.numOutputs);return f.length},S=(p,u,o,d,f)=>{const[y,x]=D.SplitUtil.splitShape(u.dims,d,o.split,o.numOutputs),R=y[f],N=`\n      float process(int indices[${R.length}]) {\n        indices[${d}] += ${x[f]};\n        return _A(indices);\n      }\n    `;return Object.assign(Object.assign({},v),{cacheHint:`${o.cacheKey}:${f}`,output:{dims:R,type:u.type,textureType:P.TextureType.unpacked},shaderSource:N})},b=p=>{if(!p||1!==p.length)throw new Error("Split requires one input.");if("int8"!==p[0].type&&"uint8"!==p[0].type&&"int16"!==p[0].type&&"uint16"!==p[0].type&&"int32"!==p[0].type&&"uint32"!==p[0].type&&"float32"!==p[0].type&&"float64"!==p[0].type&&"bool"!==p[0].type)throw new Error("Invalid input type.")}},3933:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.parseSqueezeAttributes=M.squeezeV13=M.squeeze=void 0;const I=k(2517);M.squeeze=(v,w,S)=>{D(w);const b=I.ShapeUtil.squeezeShape(w[0].dims,S);return[v.reshapeUnpacked(w[0],b)]},M.squeezeV13=(v,w)=>(P(w),M.squeeze(v,[w[0]],Array.from(w[1].integerData))),M.parseSqueezeAttributes=v=>v.attributes.getInts("axes");const D=v=>{if(!v||1!==v.length)throw new Error("Squeeze requires 1 input.");if("string"===v[0].type)throw new Error("invalid input tensor types.")},P=v=>{if(!v||2!==v.length)throw new Error("Squeeze requires 2 inputs.");if("int32"!==v[1].type)throw new Error("Invalid input type.")}},6558:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.sum=void 0;const I=k(5060),D=k(2039);M.sum=(w,S)=>{v(S);const b={name:"Sum",inputNames:S.map((p,u)=>`X${u}`),inputTypes:new Array(S.length).fill(D.TextureType.unpacked)};return[w.run(Object.assign(Object.assign({},b),{get:()=>P(w,S,b)}),S)]};const P=(w,S,b)=>{const p=I.getGlsl(w.session.backend.glContext.version),u=S[0].dims.slice(),o=`\n      void main() {\n        vec4 result = ${S.map((d,f)=>`${p.texture2D}(X${f},TexCoords)`).join(" + ")};\n        ${p.output} = result;\n      }\n    `;return Object.assign(Object.assign({},b),{output:{dims:u,type:S[0].type,textureType:D.TextureType.unpacked},hasMain:!0,shaderSource:o})},v=w=>{if(!w||0===w.length)throw new Error("Sum requires inputs.");const S=w[0].dims.length;for(let b=1;b<w.length;b++){if(S!==w[b].dims.length)throw new Error("Input shapes are mismatched.");for(let p=0;p<S;p++)if(w[0].dims[p]!==w[b].dims[p])throw new Error("Input shapes are not matched.")}if("float32"!==w[0].type&&"float64"!==w[0].type)throw new Error("Invalid input type.");for(let b=1;b<w.length;b++)if(w[0].type!==w[b].type)throw new Error("Input types are not matched.")}},5723:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.tile=void 0;const I=k(782),D=k(2039);M.tile=(w,S)=>{v(S);const b={name:"Tile",inputNames:["A"],inputTypes:[D.TextureType.unpacked]};return[w.run(Object.assign(Object.assign({},b),{get:()=>P(w,S,b)}),S)]};const P=(w,S,b)=>{const p=S[0].dims.slice(),u=new Array(p.length),o=[];for(let y=0;y<p.length;y++)u[y]=p[y]*S[1].numberData[y],o.push(`inputIdx[${y}] = int(mod(float(outputIdx[${y}]), ${p[y]}.));`);const d=u.length,f=`\n      float process(int outputIdx[${d}]) {\n        int inputIdx[${d}];\n        ${o.join("\n")}\n        return _A(inputIdx);\n      }\n    `;return Object.assign(Object.assign({},b),{output:{dims:u,type:S[0].type,textureType:D.TextureType.unpacked},shaderSource:f})},v=w=>{if(!w||2!==w.length)throw new Error("Tile requires 2 input.");if(1!==w[1].dims.length)throw new Error("The second input shape must 1 dimension.");if(w[1].dims[0]!==w[0].dims.length)throw new Error("Invalid input shape.");if(-1===I.NUMBER_TYPES.indexOf(w[0].type))throw new Error("Invalid input type.");if("int32"!==w[1].type&&"int16"!==w[1].type)throw new Error("Invalid repeat type.")}},3738:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.parseTransposeAttributes=M.transpose=void 0;const I=k(246),D=k(2517),P=k(2039),v={name:"Transpose",inputNames:["A"],inputTypes:[P.TextureType.unpacked]};M.transpose=(o,d,f)=>(u(d),[o.run(Object.assign(Object.assign({},v),{cacheHint:f.cacheKey,get:()=>w(o,d[0],f.perm)}),d)]),M.parseTransposeAttributes=o=>I.createAttributeWithCacheKey({perm:o.attributes.getInts("perm",[])});const w=(o,d,f)=>{const y=d.dims;f=S(y,f);const x=b(y,f),E=y.length,R=`\n      ${p("perm",f,E)}\n      float process(int indices[${E}]) {\n        int a[${E}];\n        perm(a, indices);\n        return _A(a);\n      }`;return Object.assign(Object.assign({},v),{output:{dims:x,type:d.type,textureType:P.TextureType.unpacked},shaderSource:R})},S=(o,d)=>(d&&d.length!==o.length&&(d=[...o.keys()].reverse()),d),b=(o,d)=>(d=S(o,d),D.ShapeUtil.sortBasedOnPerm(o,d)),p=(o,d,f)=>{const y=[];y.push(`void ${o}(out int a[${f}], int src[${f}]) {`);for(let x=0;x<f;++x)y.push(`\ta[${d[x]}]=src[${x}];`);return y.push("\t}"),y.join("\n")},u=o=>{if(!o||1!==o.length)throw new Error("Transpose requires 1 input.");if("float32"!==o[0].type&&"float64"!==o[0].type)throw new Error("input should be float tensor")}},8710:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.encodeAsUint8=void 0;const I=k(5060),D=k(2039);M.encodeAsUint8=(P,v)=>{const w=v.shape,S=I.getGlsl(P.session.backend.glContext.version);return P.executeProgram({name:"Uint8Encode",inputTypes:[D.TextureType.unpacked],inputNames:["X"],output:{dims:w,type:v.tensor.type,textureType:D.TextureType.downloadUint8AsFloat},shaderSource:`\n    const float FLOAT_MAX = 1.70141184e38;\n    const float FLOAT_MIN = 1.17549435e-38;\n\n    bool isNaN(float val) {\n      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;\n    }\n\n    highp vec4 encodeAsUint8(highp float v) {\n      if (isNaN(v)) {\n        return vec4(255, 255, 255, 255);\n      }\n\n      highp float av = abs(v);\n\n      if(av < FLOAT_MIN) {\n        return vec4(0.0, 0.0, 0.0, 0.0);\n      } else if(v > FLOAT_MAX) {\n        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n      } else if(v < -FLOAT_MAX) {\n        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n      }\n\n      highp vec4 c = vec4(0,0,0,0);\n\n      highp float e = floor(log2(av));\n      highp float m = exp2(fract(log2(av))) - 1.0;\n\n      c[2] = floor(128.0 * m);\n      m -= c[2] / 128.0;\n      c[1] = floor(32768.0 * m);\n      m -= c[1] / 32768.0;\n      c[0] = floor(8388608.0 * m);\n\n      highp float ebias = e + 127.0;\n      c[3] = floor(ebias / 2.0);\n      ebias -= c[3] * 2.0;\n      c[2] += floor(ebias) * 128.0;\n\n      c[3] += 128.0 * step(0.0, -v);\n\n      return c / 255.0;\n    }\n\n    void main() {\n      float value = ${S.texture2D}(X,TexCoords).r;\n      ${S.output} = encodeAsUint8(value);\n    }`,hasMain:!0},[v.tensor])}},4909:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.tanh=M.tan=M.sqrt=M.sin=M.sigmoid=M.relu=M.not=M.neg=M.log=M.parseLeakyReluAttributes=M.leakyRelu=M.identity=M.floor=M.exp=M.parseEluAttributes=M.elu=M.cos=M.ceil=M.clipV11=M.parseClipAttributes=M.clip=M.atan=M.asin=M.acos=M.abs=M.glslTanh=M.glslTan=M.glslSqrt=M.glslSigmoid=M.glslRelu=M.glslSin=M.glslNot=M.glslNeg=M.glslLog=M.glslLeakyRelu=M.glslIdentity=M.glslClip=M.glslFloor=M.glslExp=M.glslElu=M.glslCos=M.glslCeil=M.glslAtan=M.glslAsin=M.glslAcos=M.glslAbs=void 0;const I=k(246),D=k(2517),P=k(8520),v=k(5060),w=k(2039);function S(){return ue("abs")}function b(){return ue("acos")}function p(){return ue("asin")}function u(){return ue("atan")}function o(){return ue("ceil")}function d(){return ue("cos")}function f(he){return{body:`\n  const float alpha = float(${he});\n\n  float elu_(float a) {\n    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;\n  }\n  vec4 elu_(vec4 v) {\n    return vec4(elu_(v.x), elu_(v.y), elu_(v.z), elu_(v.w));\n  }\n  `,name:"elu",type:P.FunctionType.ValueBased}}function y(){return ue("exp")}function x(){return ue("floor")}function E(he,_e){return{body:`\n  const float min = float(${he});\n  const float max = float(${_e});\n\n  float clip_(float a) {\n    return clamp(a, min, max);\n  }\n  vec4 clip_(vec4 v) {\n    return clamp(v, min, max);\n  }\n  `,name:"clip",type:P.FunctionType.ValueBased}}function R(){const he="indentity";return{body:`\n  float ${he}_(float a) {\n    return a;\n  }\n  vec4 ${he}_(vec4 v) {\n    return v;\n  }\n  `,name:he,type:P.FunctionType.ValueBased}}function N(he){const _e="leakyRelu";return{body:`\n  const float alpha = float(${he});\n\n  float ${_e}_(float a) {\n    return a < 0.0 ? a * alpha : a;\n  }\n  vec4 ${_e}_(vec4 v) {\n    return vec4(${_e}_(v.x), ${_e}_(v.y), ${_e}_(v.z), ${_e}_(v.w));\n  }\n  `,name:_e,type:P.FunctionType.ValueBased}}function L(){return ue("log")}function F(){return{body:"\n  float neg_(float a) {\n    return -a;\n  }\n  vec4 neg_(vec4 v) {\n    return -v;\n  }\n  ",name:"neg",type:P.FunctionType.ValueBased}}function H(){return{body:"\n  float not_(float a) {\n    return float( ! bool(a) );\n  }\n  bool not_(bool a) {\n    return !a;\n  }\n  vec4 not_(vec4 v) {\n    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));\n  }\n  bvec4 not_(bvec4 v) {\n    return bvec4(!v.x, !v.y, !v.z, !v.w);\n  }\n  ",name:"not",type:P.FunctionType.ValueBased}}function q(){return ue("sin")}function W(){return{body:"\n  float relu_(float a) {\n    return max( a, 0.0 );\n  }\n  vec4 relu_(vec4 v) {\n    return max( v, 0.0 );\n  }\n  ",name:"relu",type:P.FunctionType.ValueBased}}function U(){return{body:"\n  float sigmoid_(float a) {\n    return 1.0 / (1.0 + exp(-a));\n  }\n  vec4 sigmoid_(vec4 v) {\n    return 1.0 / (1.0 + exp(-v));\n  }\n  ",name:"sigmoid",type:P.FunctionType.ValueBased}}function ne(){return ue("sqrt")}function de(){return ue("tan")}function De(){return{body:"\n  float tanh_(float a) {\n    a = clamp(a, -10., 10.);\n    a = exp(2.*a);\n    return (a - 1.) / (a + 1.);\n  }\n  vec4 tanh_(vec4 v) {\n    v = clamp(v, -10., 10.);\n    v = exp(2.*v);\n    return (v - 1.) / (v + 1.);\n  }\n  ",name:"tanh",type:P.FunctionType.ValueBased}}function ue(he){return{body:`\n  float ${he}_(float a) {\n    return ${he}(a);\n  }\n  vec4 ${he}_(vec4 v) {\n    return ${he}(v);\n  }\n  `,name:he,type:P.FunctionType.ValueBased}}M.glslAbs=S,M.glslAcos=b,M.glslAsin=p,M.glslAtan=u,M.glslCeil=o,M.glslCos=d,M.glslElu=f,M.glslExp=y,M.glslFloor=x,M.glslClip=E,M.glslIdentity=R,M.glslLeakyRelu=N,M.glslLog=L,M.glslNeg=F,M.glslNot=H,M.glslSin=q,M.glslRelu=W,M.glslSigmoid=U,M.glslSqrt=ne,M.glslTan=de,M.glslTanh=De;const Ae=(he,_e,Xe,We)=>{const Zt={name:Xe.name,inputTypes:[he.session.pack?w.TextureType.packed:w.TextureType.unpacked],inputNames:["A"],cacheHint:We};return Object.assign(Object.assign({},Zt),{get:()=>((Dn,Lr,Kt,rn)=>{const On=Dn.session.pack?w.TextureType.packed:w.TextureType.unpacked,At=v.getGlsl(Dn.session.backend.glContext.version);return Object.assign(Object.assign({},Lr),{output:{dims:Kt.dims,type:Kt.type,textureType:On},shaderSource:`\n     ${rn.body}\n     void main() {\n       vec4 v = ${At.texture2D}(A, TexCoords);\n       v = ${rn.name}_(v);\n       ${At.output} = v;\n     }\n     `,hasMain:!0})})(he,Zt,_e,Xe)})};M.abs=(he,_e)=>[he.run(Ae(he,_e[0],S()),_e)],M.acos=(he,_e)=>[he.run(Ae(he,_e[0],b()),_e)],M.asin=(he,_e)=>[he.run(Ae(he,_e[0],p()),_e)],M.atan=(he,_e)=>[he.run(Ae(he,_e[0],u()),_e)],M.clip=(he,_e,Xe)=>[he.run(Ae(he,_e[0],E(Xe.min,Xe.max),Xe.cacheKey),_e)],M.parseClipAttributes=he=>I.createAttributeWithCacheKey({min:he.attributes.getFloat("min",D.MIN_CLIP),max:he.attributes.getFloat("max",D.MAX_CLIP)}),M.clipV11=(he,_e)=>{const Xe=Se(he,_e);return M.clip(he,[_e[0]],Xe)};const Se=(he,_e)=>{if(_e.length>=3&&(!he.session.isInitializer(_e[1].dataId)||!he.session.isInitializer(_e[2].dataId)))throw new Error("dynamic clip attributes are not allowed");return I.createAttributeWithCacheKey({min:_e.length>=3?_e[1].numberData[0]:D.MIN_CLIP,max:_e.length>=3?_e[2].numberData[0]:D.MAX_CLIP})};M.ceil=(he,_e)=>[he.run(Ae(he,_e[0],o()),_e)],M.cos=(he,_e)=>[he.run(Ae(he,_e[0],d()),_e)],M.elu=(he,_e,Xe)=>[he.run(Ae(he,_e[0],f(Xe.alpha),Xe.cacheKey),_e)],M.parseEluAttributes=he=>I.createAttributeWithCacheKey({alpha:he.attributes.getFloat("alpha",1)}),M.exp=(he,_e)=>[he.run(Ae(he,_e[0],y()),_e)],M.floor=(he,_e)=>[he.run(Ae(he,_e[0],x()),_e)],M.identity=(he,_e)=>[he.run(Ae(he,_e[0],R()),_e)],M.leakyRelu=(he,_e,Xe)=>[he.run(Ae(he,_e[0],N(Xe.alpha),Xe.cacheKey),_e)],M.parseLeakyReluAttributes=he=>I.createAttributeWithCacheKey({alpha:he.attributes.getFloat("alpha",.01)}),M.log=(he,_e)=>[he.run(Ae(he,_e[0],L()),_e)],M.neg=(he,_e)=>[he.run(Ae(he,_e[0],F()),_e)],M.not=(he,_e)=>[he.run(Ae(he,_e[0],H()),_e)],M.relu=(he,_e)=>[he.run(Ae(he,_e[0],W()),_e)],M.sigmoid=(he,_e)=>[he.run(Ae(he,_e[0],U()),_e)],M.sin=(he,_e)=>[he.run(Ae(he,_e[0],q()),_e)],M.sqrt=(he,_e)=>[he.run(Ae(he,_e[0],ne()),_e)],M.tan=(he,_e)=>[he.run(Ae(he,_e[0],de()),_e)],M.tanh=(he,_e)=>[he.run(Ae(he,_e[0],De()),_e)]},5611:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.createUnpackProgramInfoLoader=M.createUnpackProgramInfo=void 0;const I=k(5060),D=k(2039),P=k(9390),v=k(2827),w={name:"unpack",inputNames:["A"],inputTypes:[D.TextureType.packed]};M.createUnpackProgramInfo=(S,b)=>{const p=b.dims.length,u=v.getChannels("rc",p),o=u.slice(-2),d=P.getCoordsDataType(p),f=v.unpackFromChannel(),y=0===b.dims.length?"":function(R,N){if(1===R)return"rc";let L="";for(let F=0;F<R;F++)L+=N[F],F<R-1&&(L+=",");return L}(p,u),x=p<=1?"rc":`vec2(${o.join(",")})`,E=`\n    ${f}\n    void main() {\n      ${d} rc = getOutputCoords();\n\n       // Sample the texture with the coords to get the rgba channel value.\n       vec4 packedInput = getA(${y});\n\n       ${I.getGlsl(S.session.backend.glContext.version).output} = vec4(getChannel(packedInput, ${x}), 0, 0, 0);\n     }\n   `;return Object.assign(Object.assign({},w),{hasMain:!0,output:{dims:b.dims,type:b.type,textureType:D.TextureType.unpacked},shaderSource:E})},M.createUnpackProgramInfoLoader=(S,b)=>Object.assign(Object.assign({},w),{get:()=>M.createUnpackProgramInfo(S,b)})},8428:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.parseUnsqueezeAttributes=M.unsqueezeV13=M.unsqueeze=void 0;const I=k(2517);M.unsqueeze=(v,w,S)=>{D(w);const b=I.ShapeUtil.unsqueezeShape(w[0].dims,S);return[v.reshapeUnpacked(w[0],b)]},M.unsqueezeV13=(v,w)=>(P(w),M.unsqueeze(v,[w[0]],Array.from(w[1].integerData))),M.parseUnsqueezeAttributes=v=>v.attributes.getInts("axes");const D=v=>{if(!v||1!==v.length)throw new Error("Unsqueeze requires 1 input.");if("string"===v[0].type)throw new Error("invalid input tensor types.")},P=v=>{if(!v||2!==v.length)throw new Error("Unsqueeze requires 2 inputs.");if("int32"!==v[1].type)throw new Error("Invalid input type.")}},9793:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.scalesValidation=M.validateInputs=M.parseUpsampleAttributes=M.parseUpsampleAttributesV9=M.parseUpsampleAttributesV7=M.upsample=void 0;const I=k(246),D=k(5060),P=k(2039),v={name:"Upsample",inputNames:["X"],inputTypes:[P.TextureType.unpacked]};M.upsample=(S,b,p)=>(M.validateInputs(b,p),[S.run(Object.assign(Object.assign({},v),{cacheHint:p.cacheKey,get:()=>w(S,b,p)}),b)]),M.parseUpsampleAttributesV7=S=>M.parseUpsampleAttributes(S,7),M.parseUpsampleAttributesV9=S=>M.parseUpsampleAttributes(S,9),M.parseUpsampleAttributes=(S,b)=>{const p=b>=10,u=S.attributes.getString("mode","nearest");if("nearest"!==u&&"linear"!==u&&(b<11||"cubic"!==u))throw new Error(`unrecognized mode: ${u}`);let o=[];b<9&&(o=S.attributes.getFloats("scales"),M.scalesValidation(o,u,p));const d=S.attributes.getFloat("extrapolation_value",0),f=b>10?S.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(-1===["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(f))throw new Error(`coordinate_transform_mode '${f}' is not supported`);const y="tf_crop_and_resize"===f,x=y,E="nearest"===u&&b>=11?S.attributes.getString("nearest_mode","round_prefer_floor"):"";if(-1===["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(E))throw new Error(`nearest_mode '${E}' is not supported`);const R=S.attributes.getFloat("cubic_coeff_a",-.75),N=0!==S.attributes.getInt("exclude_outside",0);if(N&&"cubic"!==u)throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");let F=0,H=0,q=0;return b>10?(F=1,H=2,q=3):9===b&&(H=1),I.createAttributeWithCacheKey({opset:b,isResize:p,mode:u,scales:o,extrapolationValue:d,coordinateTransformMode:f,useExtrapolation:x,needRoiInput:y,nearestMode:E,cubicCoefficientA:R,excludeOutside:N,useNearest2xOptimization:b<11||"nearest"===u&&"asymmetric"===f&&"floor"===E,roiInputIdx:F,scalesInputIdx:H,sizesInputIdx:q})};const w=(S,b,p)=>{const u=D.getGlsl(S.session.backend.glContext.version),[o,d]=S.calculateTextureWidthAndHeight(b[0].dims,P.TextureType.unpacked),f=b[0].dims.map((q,W)=>Math.floor(q*p.scales[W])),[y,x]=S.calculateTextureWidthAndHeight(f,P.TextureType.unpacked),E=f.length,R=new Array(E),N=new Array(E);let L=`\n      int output_pitches[${E}];\n      int input_pitches[${E}];\n      `;for(let q=E-1;q>=0;q--)R[q]=q===E-1?1:R[q+1]*f[q+1],N[q]=q===E-1?1:N[q+1]*b[0].dims[q+1],L+=`\n        output_pitches[${q}] = ${R[q]};\n        input_pitches[${q}] = ${N[q]};\n        `;const F=`\n      float getInputFloat(int index) {\n        vec2 coords = offsetToCoords(index, ${o}, ${d});\n        float value = getColorAsFloat(${u.texture2D}(X, coords));\n        return value;\n      }\n      `,H="nearest"===p.mode?`\n    ${F}\n    float process(int indices[${E}]) {\n      int input_index = 0;\n      int output_index = coordsToOffset(TexCoords, ${y}, ${x});\n\n      ${L}\n\n      int d, m;\n      for (int dim = 0; dim < ${E}; ++dim) {\n        d = output_index / output_pitches[dim];\n        m = output_index - d * output_pitches[dim];\n        output_index = m;\n\n        if (scales[dim] != 1 && d > 0) {\n          int d2 = d / scales[dim];\n          m = d - d2 * scales[dim];\n          d = d2;\n        }\n        input_index += input_pitches[dim] * d;\n      }\n\n      return getInputFloat(input_index);\n    }`:4===E?`\n    ${F}\n    float process(int indices[4]) {\n      int input_index = 0;\n      int output_index = coordsToOffset(TexCoords, ${y}, ${x});\n\n      ${L}\n\n      int m;\n      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;\n      index_of_dim0 = output_index / output_pitches[0];\n      m = output_index - index_of_dim0 * output_pitches[0];\n      index_of_dim1 = m / output_pitches[1];\n      m = m - index_of_dim1 * output_pitches[1];\n      index_of_dim2 = m / output_pitches[2];\n      m = m - index_of_dim2 * output_pitches[2];\n      index_of_dim3 = m;\n\n      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;\n      index_of_input_dim2 = index_of_dim2 / scales[2];\n      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];\n      index_of_input_dim3 = index_of_dim3 / scales[3];\n      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];\n\n      input_index = index_of_dim0 * input_pitches[0] +\n            index_of_dim1 * input_pitches[1] +\n            index_of_input_dim2 * input_pitches[2] +\n            index_of_input_dim3;\n\n      float x00 = getInputFloat(input_index);\n      float x10, x01, x11;\n\n      bool end_of_dim2 = false;\n      if (index_of_input_dim2 == (${b[0].dims[2]} - 1)) {\n        // It's the end in dimension 2\n        x01 = x00;\n        end_of_dim2 = true;\n      } else {\n        x01 = getInputFloat(input_index + input_pitches[2]);\n      }\n\n      if (index_of_input_dim3 == (input_pitches[2] - 1)) {\n        // It's the end in dimension 3\n        x10 = x00;\n        x11 = x01;\n      }\n      else {\n        x10 = getInputFloat(input_index + 1);\n        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);\n      }\n\n      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);\n      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);\n      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);\n    }`:`\n    ${F}\n    float process(int indices[2]) {\n      int input_index = 0;\n      int output_index = coordsToOffset(TexCoords, ${y}, ${x});\n\n      ${L}\n\n      int m;\n      int index_of_dim0, index_of_dim1;\n      index_of_dim0 = output_index / output_pitches[0];\n      m = output_index - index_of_dim0 * output_pitches[0];\n      index_of_dim1 = m;\n\n      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;\n      index_of_input_dim0 = index_of_dim0 / scales[0];\n      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];\n      index_of_input_dim1 = index_of_dim1 / scales[1];\n      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];\n\n      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;\n\n      float x00 = getInputFloat(input_index);\n      float x10, x01, x11;\n\n      bool end_of_dim0 = false;\n      if (index_of_input_dim0 == (${b[0].dims[0]} - 1)) {\n        // It's the end in dimension 0\n        x01 = x00;\n        end_of_dim0 = true;\n      } else {\n        x01 = getInputFloat(input_index + input_pitches[0]);\n      }\n\n      if (index_of_input_dim1 == (input_pitches[0] - 1)) {\n        // It's the end in dimension 1\n        x10 = x00;\n        x11 = x01;\n      }\n      else {\n        x10 = getInputFloat(input_index + 1);\n        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);\n      }\n\n      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);\n      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);\n      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);\n    }`;return Object.assign(Object.assign({},v),{output:{dims:f,type:b[0].type,textureType:P.TextureType.unpacked},shaderSource:H,variables:[{name:"scales",type:"int",arrayLength:p.scales.length,data:p.scales.map(q=>Math.ceil(q))}]})};M.validateInputs=(S,b)=>{if(!S||b.opset<9&&1!==S.length||b.opset>=9&&b.opset<11&&2!==S.length||b.opset>=11&&3!==S.length&&4!==S.length)throw new Error("invalid inputs.");if(b.scales.length>0&&S[0].dims.length!==b.scales.length)throw new Error("Invalid input shape.");if("string"===S[0].type)throw new Error("Invalid input tensor types.")},M.scalesValidation=(S,b,p)=>{if(p){for(const u of S)if(u<=0)throw new Error("Scale value should be greater than 0.")}else for(const u of S)if(u<1)throw new Error("Scale value should be greater than or equal to 1.");if(!("linear"!==b&&"cubic"!==b||2===S.length||4===S.length&&1===S[0]&&1===S[1]))throw new Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${p?"Resize":"Upsample"} opeartor.`)}},1958:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.ProgramManager=void 0;const I=k(2174),D=k(6231),P=k(8879),v=k(5060);M.ProgramManager=class{constructor(w,S,b){this.profiler=w,this.glContext=S,this.textureLayoutStrategy=b,this.repo=new Map,this.attributesBound=!1}getArtifact(w){return this.repo.get(w)}setArtifact(w,S){this.repo.set(w,S)}run(w,S,b){var p;this.profiler.event("op",`ProgramManager.run ${null!==(p=w.programInfo.name)&&void 0!==p?p:"unknown kernel"}`,()=>{var u;this.glContext.gl.useProgram(w.program);try{this.bindOutput(b),this.attributesBound||this.bindAttributes(w.attribLocations),this.bindUniforms(w.uniformLocations,null!==(u=w.programInfo.variables)&&void 0!==u?u:[],S)}catch(f){throw D.Logger.error("ProgramManager",w.programInfo.shaderSource),f}this.profiler.event("backend","GlContext.draw()",()=>{this.glContext.draw()})},this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach(w=>this.glContext.deleteProgram(w.program))}build(w,S,b){return this.profiler.event("backend","ProgramManager.build",()=>{const p=new P.GlslPreprocessor(this.glContext,w,S,b),u=p.preprocess(),o=this.compile(u);return{programInfo:w,program:o,uniformLocations:this.getUniformLocations(o,p.context.programInfo.inputNames,p.context.programInfo.variables),attribLocations:this.getAttribLocations(o)}})}compile(w){if(!this.vertexShader){D.Logger.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");const p=v.getVertexShaderSource(this.glContext.version);this.vertexShader=this.glContext.compileShader(p,this.glContext.gl.VERTEX_SHADER)}I.env.debug&&D.Logger.verbose("ProrgramManager",`FragShader:\n${w}\n`);const S=this.glContext.compileShader(w,this.glContext.gl.FRAGMENT_SHADER),b=this.glContext.createProgram(this.vertexShader,S);return this.glContext.deleteShader(S),b}bindOutput(w){const S=w.width,b=w.height;D.Logger.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${S}/${b}, shape=${w.shape}, type=${w.tensor.type}`),this.glContext.attachFramebuffer(w.texture,S,b)}bindAttributes(w){this.glContext.setVertexAttributes(w.position,w.textureCoord),this.attributesBound=!0}bindUniforms(w,S,b){var p;const u=this.glContext.gl;let o=0;for(const{name:d,type:f,location:y,arrayLength:x}of w){const E=null===(p=S.find(R=>R.name===d))||void 0===p?void 0:p.data;if("sampler2D"!==f&&!E)throw new Error(`variable '${d}' does not have data defined in program info`);switch(f){case"sampler2D":this.bindTexture(b[o],y,o),o++;break;case"float":x?u.uniform1fv(y,E):u.uniform1f(y,E);break;case"int":x?u.uniform1iv(y,E):u.uniform1i(y,E);break;default:throw new Error(`Uniform not implemented: ${f}`)}}}bindTexture(w,S,b){this.glContext.bindTextureToUniform(w.texture,b,S)}getAttribLocations(w){return{position:this.getAttribLocation(w,"position"),textureCoord:this.getAttribLocation(w,"textureCoord")}}getUniformLocations(w,S,b){const p=[];if(S)for(const u of S)p.push({name:u,type:"sampler2D",location:this.getUniformLocation(w,u)});if(b)for(const u of b)p.push(Object.assign(Object.assign({},u),{location:this.getUniformLocation(w,u.name)}));return p}getUniformLocation(w,S){const b=this.glContext.gl.getUniformLocation(w,S);if(null===b)throw new Error(`Uniform ${S} not found.`);return b}getAttribLocation(w,S){return this.glContext.gl.getAttribLocation(w,S)}}},6416:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.WebGLSessionHandler=void 0;const I=k(6231),D=k(1047),P=k(8316),v=k(1640),w=k(1958),S=k(7859),b=k(5702);M.WebGLSessionHandler=class{constructor(p,u){this.backend=p,this.context=u,this.layoutStrategy=new S.PreferLogicalStrategy(p.glContext.maxTextureSize),this.programManager=new w.ProgramManager(this.context.profiler,p.glContext,this.layoutStrategy),this.textureManager=new b.TextureManager(p.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:"full"===p.textureCacheMode}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=p.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new P.WebGLInferenceHandler(this)}onGraphInitialized(p){const u=p.getValues().filter(o=>-1===o.from&&o.tensor).map(o=>o.tensor.dataId);this.initializers=new Set(u)}isInitializer(p){return!!this.initializers&&this.initializers.has(p)}addInitializer(p){this.initializers.add(p)}getTextureData(p,u){return u?this.packedTextureDataCache.get(p):this.unpackedTextureDataCache.get(p)}setTextureData(p,u,o=!1){I.Logger.verbose("WebGLSessionHandler","Storing Texture data in cache"),o?this.packedTextureDataCache.set(p,u):this.unpackedTextureDataCache.set(p,u)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(p=>this.textureManager.releaseTexture(p,!0)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(p=>this.textureManager.releaseTexture(p,!0)),this.unpackedTextureDataCache=new Map}resolve(p,u,o){const d=D.resolveOperator(p,u,v.WEBGL_OP_RESOLVE_RULES);return{impl:d.opImpl,context:d.opInit?d.opInit(p,o):p}}}},7769:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.Uint8DataEncoder=M.RGBAFloatDataEncoder=M.RedFloat32DataEncoder=void 0;const I=k(6231);M.RedFloat32DataEncoder=class{constructor(D,P=1){if(1===P)this.internalFormat=D.R32F,this.format=D.RED,this.textureType=D.FLOAT,this.channelSize=P;else{if(4!==P)throw new Error(`Invalid number of channels: ${P}`);this.internalFormat=D.RGBA32F,this.format=D.RGBA,this.textureType=D.FLOAT,this.channelSize=P}}encode(D,P){let v,w;return D.constructor!==Float32Array&&(I.Logger.warning("Encoder","data was not of type Float32; creating new Float32Array"),w=new Float32Array(D)),P*this.channelSize>D.length?(I.Logger.warning("Encoder","Source data too small. Allocating larger array"),w=D,v=this.allocate(P*this.channelSize),w.forEach((S,b)=>v[b]=S)):(w=D,v=w),v}allocate(D){return new Float32Array(4*D)}decode(D,P){return 1===this.channelSize?D.filter((v,w)=>w%4==0).subarray(0,P):D.subarray(0,P)}},M.RGBAFloatDataEncoder=class{constructor(D,P=1,v){if(1!==P&&4!==P)throw new Error(`Invalid number of channels: ${P}`);this.internalFormat=D.RGBA,this.format=D.RGBA,this.channelSize=P,this.textureType=v||D.FLOAT}encode(D,P){let v=D;return 1===this.channelSize&&(I.Logger.verbose("Encoder","Exploding into a larger array"),v=this.allocate(P),D.forEach((w,S)=>v[4*S]=w)),v}allocate(D){return new Float32Array(4*D)}decode(D,P){return 1===this.channelSize?D.filter((v,w)=>w%4==0).subarray(0,P):D.subarray(0,P)}},M.Uint8DataEncoder=class{constructor(D,P=1){if(this.channelSize=4,1===P)this.internalFormat=D.ALPHA,this.format=D.ALPHA,this.textureType=D.UNSIGNED_BYTE,this.channelSize=P;else{if(4!==P)throw new Error(`Invalid number of channels: ${P}`);this.internalFormat=D.RGBA,this.format=D.RGBA,this.textureType=D.UNSIGNED_BYTE,this.channelSize=P}}encode(D,P){return new Uint8Array(D.buffer,D.byteOffset,D.byteLength)}allocate(D){return new Uint8Array(D*this.channelSize)}decode(D,P){if(D instanceof Uint8Array)return D.subarray(0,P);throw new Error(`Invalid array type: ${D.constructor}`)}}},7859:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.getBatchDim=M.sizeToSquarishShape=M.getRowsCols=M.sizeFromShape=M.isInt=M.parseAxisParam=M.squeezeShape=M.PreferLogicalStrategy=M.AlwaysKeepOriginalSizeStrategy=void 0;const I=k(6231),D=k(2517);function P(p,u){const o=[],d=[],f=null!=u&&Array.isArray(u)&&0===u.length,y=null==u||f?null:v(u,p).sort();let x=0;for(let E=0;E<p.length;++E){if(null!=y){if(y[x]===E&&1!==p[E])throw new Error(`Can't squeeze axis ${E} since its dim '${p[E]}' is not 1`);(null==y[x]||y[x]>E)&&1===p[E]&&(o.push(p[E]),d.push(E)),y[x]<=E&&x++}1!==p[E]&&(o.push(p[E]),d.push(E))}return{newShape:o,keptDims:d}}function v(p,u){const o=u.length;return p=null==p?u.map((d,f)=>f):[].concat(p),D.assert(p.every(d=>d>=-o&&d<o),()=>`All values in axis param must be in range [-${o}, ${o}) but got axis ${p}`),D.assert(p.every(w),()=>`All values in axis param must be integers but got axis ${p}`),p.map(d=>d<0?o+d:d)}function w(p){return p%1==0}function S(p){if(0===p.length)return 1;let u=p[0];for(let o=1;o<p.length;o++)u*=p[o];return u}function b(p){const u=Math.ceil(Math.sqrt(p));return[u,Math.ceil(p/u)]}M.AlwaysKeepOriginalSizeStrategy=class{constructor(p){this.maxTextureSize=p}computeTextureWH(p,u){if(0===p.length)return[1,1];const o=this.maxTextureSize;if(u&&void 0!==u.breakAxis){const y=u.breakAxis>=p.length?1:p.slice(u.breakAxis).reduce((E,R)=>E*R),x=u.breakAxis<=0?1:p.slice(0,u.breakAxis).reduce((E,R)=>E*R);if(!(y>o||x>o))return[y,x];I.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${p}, breakAxis:${u.breakAxis}`)}const d=p.reduce((y,x)=>y*x);let f=Math.floor(Math.sqrt(d));for(;f<o&&f<d&&d%f!=0;f++);if(f>=o||d%f!=0)throw new Error(`The given dimensions are outside this GPU's boundaries: ${p}`);return[f,d/f]}},M.PreferLogicalStrategy=class{constructor(p){this.maxTextureSize=p}computeTextureWH(p,u){const o=this.computeTexture(p,u);return u&&u.isPacked&&(o[0]/=2,o[1]/=2),u&&u.reverseWH?[o[1],o[0]]:o}computeTexture(p,u){const o=u&&u.isPacked;if(0===p.length)return o?[2,2]:[1,1];let d=this.maxTextureSize;if(u&&void 0!==u.breakAxis){const x=u.breakAxis>=p.length?1:p.slice(u.breakAxis).reduce((R,N)=>R*N),E=u.breakAxis<=0?1:p.slice(0,u.breakAxis).reduce((R,N)=>R*N);if(!(x>d||E>d))return[x,E];I.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${p}, breakAxis:${u.breakAxis}`)}let f=p.slice(0);o&&(d*=2,f=f.map((x,E)=>E>=f.length-2?f[E]%2==0?f[E]:f[E]+1:f[E]),1===f.length&&(f=[2,f[0]])),2!==f.length&&(f=P(f).newShape);const y=S(f);return f.length<=1&&y<=d?[1,y]:2===f.length&&f[0]<=d&&f[1]<=d?f:3===f.length&&f[0]*f[1]<=d&&f[2]<=d?[f[0]*f[1],f[2]]:3===f.length&&f[0]<=d&&f[1]*f[2]<=d?[f[0],f[1]*f[2]]:4===f.length&&f[0]*f[1]*f[2]<=d&&f[3]<=d?[f[0]*f[1]*f[2],f[3]]:4===f.length&&f[0]<=d&&f[1]*f[2]*f[3]<=d?[f[0],f[1]*f[2]*f[3]]:o?b(y/4).map(x=>2*x):b(y)}},M.squeezeShape=P,M.parseAxisParam=v,M.isInt=w,M.sizeFromShape=S,M.getRowsCols=function(p){if(0===p.length)throw Error("Cannot get rows and columns of an empty shape array.");return[p.length>1?p[p.length-2]:1,p[p.length-1]]},M.sizeToSquarishShape=b,M.getBatchDim=function(p,u=2){return S(p.slice(0,p.length-u))}},4057:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.createTextureLayoutFromShape=M.calculateTextureWidthAndHeight=M.createTextureLayoutFromTextureType=void 0;const I=k(2517),D=k(2039);M.createTextureLayoutFromTextureType=(P,v,w)=>{const S=w===D.TextureType.unpacked||w===D.TextureType.unpackedReversed?1:4,b=w===D.TextureType.packed,p=w===D.TextureType.unpackedReversed||w===D.TextureType.packed,u=w===D.TextureType.packedLastDimension?v.length-1:void 0,o=w===D.TextureType.packedLastDimension?v.map((d,f)=>f===v.length-1?4*d:d):void 0;return M.createTextureLayoutFromShape(P,v,S,o,{isPacked:b,reverseWH:p,breakAxis:u})},M.calculateTextureWidthAndHeight=(P,v,w)=>{const S=M.createTextureLayoutFromTextureType(P,v,w);return[S.width,S.height]},M.createTextureLayoutFromShape=(P,v,w=1,S,b)=>{const p=!(!b||!b.isPacked),[u,o]=P.computeTextureWH(p&&S||v,b),d=v.length;let f=v.slice(0);if(0===d&&(f=[1]),1===w)S=v;else if(p){if(4!==w)throw new Error("a packed texture must be 4-channel");S=v,d>0&&(f[d-1]=Math.ceil(f[d-1]/2)),d>1&&(f[d-2]=Math.ceil(f[d-2]/2))}else if(!S)throw new Error("Unpacked shape is needed when using channels > 1");return{width:u,height:o,channels:w,isPacked:p,shape:f,strides:I.ShapeUtil.computeStrides(f),unpackedShape:S,reversedWH:b&&b.reverseWH}}},5702:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.TextureManager=void 0;const I=k(6231);M.TextureManager=class{constructor(D,P,v,w){this.glContext=D,this.layoutStrategy=P,this.profiler=v,this.config=w,this.pendingRead=new Map,w.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(D,P,v,w){const S=this.toEncoderType(D),b=this.glContext.getEncoder(S,P.channels||1,w);if(P.isPacked&&1===w)throw new Error("not implemented");const p=P.width,u=P.height;let o,d;if(this.config.reuseTextures){o=`${p}x${u}_${b.format}_${b.internalFormat}_${b.textureType}`,d=this.inUseTextures.get(o),d||(d=[],this.inUseTextures.set(o,d));const y=this.idleTextures.get(o);if(y&&y.length>0){const x=y.pop();return d.push(x),1===w&&this.glContext.updateTexture(x,p,u,b,this.toTextureData(D,v)),x}}I.Logger.verbose("TextureManager",`Creating new texture of size ${P.width}x${P.height}`);const f=this.glContext.allocateTexture(p,u,b,this.toTextureData(D,v));return this.config.reuseTextures&&(d.push(f),this.textureLookup.set(f,o)),f}readTexture(D,P,v){return v||(v=1),this.profiler.event("backend","TextureManager.readTexture",()=>{const w=D.shape.reduce((b,p)=>b*p)*v,S=this.glContext.readTexture(D.texture,D.width,D.height,w,this.toEncoderType(P),v);return this.toTensorData(P,S)})}readTextureAsync(D,P,v){var w=this;return _asyncToGenerator(function*(){const S=D.tensor.dataId;if(v||(v=1),w.pendingRead.has(S)){const b=w.pendingRead.get(S);return new Promise(p=>null==b?void 0:b.push(p))}return w.profiler.event("backend","TextureManager.readTextureAsync",_asyncToGenerator(function*(){w.pendingRead.set(S,[]);const b=D.shape.reduce((d,f)=>d*f)*v;yield w.glContext.createAndWaitForFence();const p=w.glContext.readTexture(D.texture,D.width,D.height,b,w.toEncoderType(P),v),u=w.toTensorData(P,p),o=w.pendingRead.get(S);return w.pendingRead.delete(S),null==o||o.forEach(d=>d(u)),u}))})()}readUint8TextureAsFloat(D){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",()=>{const P=D.shape.reduce((w,S)=>w*S),v=this.glContext.readTexture(D.texture,D.width,D.height,4*P,"byte",4);return new Float32Array(v.buffer,v.byteOffset,P)})}releaseTexture(D,P){let v;if(this.config.reuseTextures&&(v=this.textureLookup.get(D.texture),v)){P&&this.textureLookup.delete(v);const w=this.inUseTextures.get(v);if(w){const S=w.indexOf(D.texture);if(-1!==S){w.splice(S,1);let b=this.idleTextures.get(v);b||(b=[],this.idleTextures.set(v,b)),b.push(D.texture)}}}v&&!P||(I.Logger.verbose("TextureManager",`Deleting texture of size ${D.width}x${D.height}`),this.glContext.deleteTexture(D.texture))}toTensorData(D,P){switch(D){case"int16":return P instanceof Int16Array?P:Int16Array.from(P);case"int32":return P instanceof Int32Array?P:Int32Array.from(P);case"int8":return P instanceof Int8Array?P:Int8Array.from(P);case"uint16":return P instanceof Uint16Array?P:Uint16Array.from(P);case"uint32":return P instanceof Uint32Array?P:Uint32Array.from(P);case"uint8":case"bool":return P instanceof Uint8Array?P:Uint8Array.from(P);case"float32":return P instanceof Float32Array?P:Float32Array.from(P);case"float64":return P instanceof Float64Array?P:Float64Array.from(P);default:throw new Error(`TensorData type ${D} is not supported`)}}toTextureData(D,P){if(P)return P instanceof Float32Array?P:new Float32Array(P)}toEncoderType(D){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}},2039:(ye,M)=>{"use strict";var k;Object.defineProperty(M,"__esModule",{value:!0}),M.TextureType=void 0,(k=M.TextureType||(M.TextureType={}))[k.unpacked=0]="unpacked",k[k.unpackedReversed=1]="unpackedReversed",k[k.packed=2]="packed",k[k.downloadUint8AsFloat=3]="downloadUint8AsFloat",k[k.packedLastDimension=4]="packedLastDimension"},9390:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.getGlChannels=M.getCoordsDataType=M.getSqueezedParams=M.squeezeInputShape=M.generateShaderFuncNameFromInputSamplerNameAtOutCoords=M.generateShaderFuncNameFromInputSamplerName=M.repeatedTry=M.getPackedShape=void 0;const I=k(2517);M.getPackedShape=function(D){const P=D.length;return D.slice(0,P-1).concat(D[P-1]/4)},M.repeatedTry=function(){var D=_asyncToGenerator(function*(P,v=(S=>0),w){return new Promise((S,b)=>{let p=0;const u=()=>{if(P())return void S();p++;const o=v(p);null!=w&&p>=w?b():setTimeout(u,o)};u()})});return function(P){return D.apply(this,arguments)}}(),M.generateShaderFuncNameFromInputSamplerName=function(D){return I.assert(void 0!==D&&0!==D.length,()=>"empty string found for sampler name"),"get"+D.charAt(0).toUpperCase()+D.slice(1)},M.generateShaderFuncNameFromInputSamplerNameAtOutCoords=function(D){return I.assert(void 0!==D&&0!==D.length,()=>"empty string found for sampler name"),"get"+D.charAt(0).toUpperCase()+D.slice(1)+"AtOutCoords"},M.squeezeInputShape=function(D,P){let v=JSON.parse(JSON.stringify(D));return v=P,v},M.getSqueezedParams=function(D,P){return P.map(v=>D[v]).join(", ")},M.getCoordsDataType=function(D){if(D<=1)return"int";if(2===D)return"ivec2";if(3===D)return"ivec3";if(4===D)return"ivec4";if(5===D)return"ivec5";if(6===D)return"ivec6";throw Error(`GPU for rank ${D} is not yet supported`)},M.getGlChannels=function(D=6){return["x","y","z","w","u","v"].slice(0,D)}},7305:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.createNewWebGLContext=M.createWebGLContext=void 0;const I=k(6231),D=k(1713),P={};function v(w){const S=function(){const u=document.createElement("canvas");return u.width=1,u.height=1,u}();let b;const p={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1};if((!w||"webgl2"===w)&&(b=S.getContext("webgl2",p),b))try{return new D.WebGLContext(b,2)}catch(u){I.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl2'. Error: ${u}`)}if((!w||"webgl"===w)&&(b=S.getContext("webgl",p)||S.getContext("experimental-webgl",p),b))try{return new D.WebGLContext(b,1)}catch(u){I.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ${u}`)}throw new Error("WebGL is not supported")}M.createWebGLContext=function w(S){let b;S&&"webgl2"!==S||!("webgl2"in P)?S&&"webgl"!==S||!("webgl"in P)||(b=P.webgl):b=P.webgl2,b=b||v(S);const p=b.gl;return P[S=S||1===b.version?"webgl":"webgl2"]=b,p.isContextLost()?(delete P[S],w(S)):(p.disable(p.DEPTH_TEST),p.disable(p.STENCIL_TEST),p.disable(p.BLEND),p.disable(p.DITHER),p.disable(p.POLYGON_OFFSET_FILL),p.disable(p.SAMPLE_COVERAGE),p.enable(p.SCISSOR_TEST),p.enable(p.CULL_FACE),p.cullFace(p.BACK),b)},M.createNewWebGLContext=v},1713:function(ye,M,k){"use strict";var I=this&&this.__createBinding||(Object.create?function(p,u,o,d){void 0===d&&(d=o),Object.defineProperty(p,d,{enumerable:!0,get:function(){return u[o]}})}:function(p,u,o,d){void 0===d&&(d=o),p[d]=u[o]}),D=this&&this.__setModuleDefault||(Object.create?function(p,u){Object.defineProperty(p,"default",{enumerable:!0,value:u})}:function(p,u){p.default=u}),P=this&&this.__importStar||function(p){if(p&&p.__esModule)return p;var u={};if(null!=p)for(var o in p)"default"!==o&&Object.prototype.hasOwnProperty.call(p,o)&&I(u,p,o);return D(u,p),u};Object.defineProperty(M,"__esModule",{value:!0}),M.WebGLContext=M.linearSearchLastTrue=void 0;const v=k(2174),w=P(k(7769)),S=k(9390);function b(p){let u=0;for(;u<p.length&&p[u]();++u);return u-1}M.linearSearchLastTrue=b,M.WebGLContext=class{constructor(p,u){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=p,this.version=u,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(p,u,o,d){const f=this.gl,y=f.createTexture();f.bindTexture(f.TEXTURE_2D,y),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE);const x=d?o.encode(d,p*u):null;return f.texImage2D(f.TEXTURE_2D,0,o.internalFormat,p,u,0,o.format,o.textureType,x),this.checkError(),y}updateTexture(p,u,o,d,f){const y=this.gl;y.bindTexture(y.TEXTURE_2D,p);const x=d.encode(f,u*o);y.texSubImage2D(y.TEXTURE_2D,0,0,0,u,o,d.format,d.textureType,x),this.checkError()}attachFramebuffer(p,u,o){const d=this.gl;d.bindTexture(d.TEXTURE_2D,p),d.bindFramebuffer(d.FRAMEBUFFER,this.framebuffer),d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,p,0),this.checkError(),d.viewport(0,0,u,o),d.scissor(0,0,u,o)}readTexture(p,u,o,d,f,y){const x=this.gl;y||(y=1),this.frameBufferBound||this.attachFramebuffer(p,u,o);const E=this.getEncoder(f,y),R=E.allocate(u*o);return x.bindTexture(x.TEXTURE_2D,p),x.framebufferTexture2D(x.FRAMEBUFFER,x.COLOR_ATTACHMENT0,x.TEXTURE_2D,p,0),x.readPixels(0,0,u,o,x.RGBA,E.textureType,R),this.checkError(),E.decode(R,d)}isFramebufferReady(){return!0}getActiveTexture(){const p=this.gl;return"TEXTURE"+(p.getParameter(this.gl.ACTIVE_TEXTURE)-p.TEXTURE0)}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(p,u){const o=this.gl;o.vertexAttribPointer(p,3,o.FLOAT,!1,20,0),o.enableVertexAttribArray(p),-1!==u&&(o.vertexAttribPointer(u,2,o.FLOAT,!1,20,12),o.enableVertexAttribArray(u)),this.checkError()}createProgram(p,u){const o=this.gl,d=o.createProgram();return o.attachShader(d,p),o.attachShader(d,u),o.linkProgram(d),d}compileShader(p,u){const o=this.gl,d=o.createShader(u);if(!d)throw new Error(`createShader() returned null with type ${u}`);if(o.shaderSource(d,p),o.compileShader(d),!1===o.getShaderParameter(d,o.COMPILE_STATUS))throw new Error(`Failed to compile shader: ${o.getShaderInfoLog(d)}\nShader source:\n${p}`);return d}deleteShader(p){this.gl.deleteShader(p)}bindTextureToUniform(p,u,o){const d=this.gl;d.activeTexture(d.TEXTURE0+u),this.checkError(),d.bindTexture(d.TEXTURE_2D,p),this.checkError(),d.uniform1i(o,u),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(v.env.debug){const p=this.gl,u=p.getError();let o="";switch(u){case p.NO_ERROR:return;case p.INVALID_ENUM:o="INVALID_ENUM";break;case p.INVALID_VALUE:o="INVALID_VALUE";break;case p.INVALID_OPERATION:o="INVALID_OPERATION";break;case p.INVALID_FRAMEBUFFER_OPERATION:o="INVALID_FRAMEBUFFER_OPERATION";break;case p.OUT_OF_MEMORY:o="OUT_OF_MEMORY";break;case p.CONTEXT_LOST_WEBGL:o="CONTEXT_LOST_WEBGL";break;default:o=`Unknown WebGL Error: ${u.toString(16)}`}throw new Error(o)}}deleteTexture(p){this.gl.deleteTexture(p)}deleteProgram(p){this.gl.deleteProgram(p)}getEncoder(p,u,o=0){if(2===this.version)return new w.RedFloat32DataEncoder(this.gl,u);switch(p){case"float":return 1===o||this.isRenderFloat32Supported?new w.RGBAFloatDataEncoder(this.gl,u):new w.RGBAFloatDataEncoder(this.gl,u,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new w.Uint8DataEncoder(this.gl,u);default:throw new Error(`Invalid dataType: ${p}`)}}clearActiveTextures(){const p=this.gl;for(let u=0;u<this.maxTextureImageUnits;++u)p.activeTexture(p.TEXTURE0+u),p.bindTexture(p.TEXTURE_2D,null)}dispose(){if(this.disposed)return;const p=this.gl;p.bindFramebuffer(p.FRAMEBUFFER,null),p.deleteFramebuffer(this.framebuffer),p.bindBuffer(p.ARRAY_BUFFER,null),p.deleteBuffer(this.vertexbuffer),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,null),p.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){const p=this.gl,u=p.createBuffer();if(!u)throw new Error("createBuffer() returned null");const o=this.createDefaultGeometry();return p.bindBuffer(p.ARRAY_BUFFER,u),p.bufferData(p.ARRAY_BUFFER,o,p.STATIC_DRAW),this.checkError(),u}createFramebuffer(){const p=this.gl.createFramebuffer();if(!p)throw new Error("createFramebuffer returned null");return p}queryVitalParameters(){const p=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),1===this.version&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=p.getParameter(p.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=p.getParameter(p.MAX_TEXTURE_IMAGE_UNITS)}getExtensions(){2===this.version?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){const p=this.gl,u=p.createTexture();p.bindTexture(p.TEXTURE_2D,u),p.texImage2D(p.TEXTURE_2D,0,2===this.version?p.RGBA32F:p.RGBA,1,1,0,p.RGBA,p.FLOAT,null);const d=p.createFramebuffer();p.bindFramebuffer(p.FRAMEBUFFER,d),p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,u,0);const f=p.checkFramebufferStatus(p.FRAMEBUFFER)===p.FRAMEBUFFER_COMPLETE;return p.bindTexture(p.TEXTURE_2D,null),p.bindFramebuffer(p.FRAMEBUFFER,null),p.deleteTexture(u),p.deleteFramebuffer(d),f}checkRenderFloat32(){if(2===this.version){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(2===this.version){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){const p=this.gl;let u,o,d,f,y;try{return u=p.createTexture(),o=p.createFramebuffer(),p.bindTexture(p.TEXTURE_2D,u),p.texImage2D(p.TEXTURE_2D,0,2===this.version?p.RGBA32F:p.RGBA,1,1,0,p.RGBA,p.FLOAT,null),p.bindFramebuffer(p.FRAMEBUFFER,o),p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,u,0),p.enable(p.BLEND),d=p.createShader(p.VERTEX_SHADER),!!d&&(p.shaderSource(d,"void main(){}"),p.compileShader(d),f=p.createShader(p.FRAGMENT_SHADER),!!f&&(p.shaderSource(f,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),p.compileShader(f),y=p.createProgram(),!!y&&(p.attachShader(y,d),p.attachShader(y,f),p.linkProgram(y),p.useProgram(y),p.drawArrays(p.POINTS,0,1),p.getError()===p.NO_ERROR)))}finally{p.disable(p.BLEND),y&&p.deleteProgram(y),d&&p.deleteShader(d),f&&p.deleteShader(f),o&&(p.bindFramebuffer(p.FRAMEBUFFER,null),p.deleteFramebuffer(o)),u&&(p.bindTexture(p.TEXTURE_2D,null),p.deleteTexture(u))}}beginTimer(){if(2===this.version&&this.disjointTimerQueryWebgl2Extension){const p=this.gl,u=this.disjointTimerQueryWebgl2Extension,o=p.createQuery();return p.beginQuery(u.TIME_ELAPSED_EXT,o),o}throw new Error("WebGL1 profiling currently not supported.")}endTimer(){if(2!==this.version||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");this.gl.endQuery(this.disjointTimerQueryWebgl2Extension.TIME_ELAPSED_EXT)}isTimerResultAvailable(p){let u=!1,o=!1;if(2!==this.version||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const d=this.gl,f=this.disjointTimerQueryWebgl2Extension;u=d.getQueryParameter(p,d.QUERY_RESULT_AVAILABLE),o=d.getParameter(f.GPU_DISJOINT_EXT)}return u&&!o}getTimerResult(p){let u=0;if(2!==this.version)throw new Error("WebGL1 profiling currently not supported");{const o=this.gl;u=o.getQueryParameter(p,o.QUERY_RESULT),o.deleteQuery(p)}return u/1e6}waitForQueryAndGetTime(p){var u=this;return _asyncToGenerator(function*(){return yield S.repeatedTry(()=>u.isTimerResultAvailable(p)),u.getTimerResult(p)})()}createAndWaitForFence(){var p=this;return _asyncToGenerator(function*(){const u=p.createFence(p.gl);return p.pollFence(u)})()}createFence(p){let u;const o=p,d=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);return p.flush(),u=null===d?()=>!0:()=>{const f=o.clientWaitSync(d,0,0);return f===o.ALREADY_SIGNALED||f===o.CONDITION_SATISFIED},{query:d,isFencePassed:u}}pollFence(p){var u=this;return _asyncToGenerator(function*(){return new Promise(o=>{u.addItemToPoll(()=>p.isFencePassed(),()=>o())})})()}pollItems(){const p=b(this.itemsToPoll.map(u=>u.isDoneFn));for(let u=0;u<=p;++u){const{resolveFn:o}=this.itemsToPoll[u];o()}this.itemsToPoll=this.itemsToPoll.slice(p+1)}addItemToPoll(p,u){var o=this;return _asyncToGenerator(function*(){o.itemsToPoll.push({isDoneFn:p,resolveFn:u}),o.itemsToPoll.length>1||(yield S.repeatedTry(()=>(o.pollItems(),0===o.itemsToPoll.length)))})()}}},1036:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.ExecutionPlan=void 0;const I=k(6231);class D{constructor(v,w){this.op=v,this.node=w}}M.ExecutionPlan=class{constructor(P,v,w){this.graph=P,this.profiler=w,this.initialize(v)}initialize(P){this.profiler.event("session","ExecutionPlan.initialize",()=>{const v=this.graph.getNodes();if(v.length!==P.length)throw new Error("The size of nodes and OPs do not match.");this._ops=P.map((w,S)=>new D(w,v[S])),this.reset(),this._starter=[],this._ops.forEach((w,S)=>{let b=!0;for(const p of w.node.inputs)if(!this._values[p]&&-1===this.graph.getInputIndices().indexOf(p)){b=!1;break}b&&this._starter.push(S)})})}reset(){this._values=this.graph.getValues().map(P=>P.tensor)}execute(P,v){var w=this;return _asyncToGenerator(function*(){return w.profiler.event("session","ExecutionPlan.execute",_asyncToGenerator(function*(){w.reset();const S=P.createInferenceHandler(),b=w.graph.getInputIndices();if(v.length!==b.length)throw new Error(`number of input tensors don't match the number of inputs to the model: actual: ${v.length} expected: ${b.length}`);v.forEach((y,x)=>{w._values[b[x]]=y});const p=w._starter.slice(0),u=w.graph.getValues(),o=w.graph.getNodes();let d=0;for(;d<p.length;){const y=p[d++],x=w._ops[y],E=x.node.inputs.map(F=>w._values[F]);if(-1!==E.indexOf(void 0))throw new Error(`unresolved input detected: op: ${x.node}`);const R=E;I.Logger.verbose("ExecPlan",`Runing op:${x.node.name} (${R.map((F,H)=>`'${x.node.inputs[H]}': ${F.type}[${F.dims.join(",")}]`).join(", ")})`);const N=yield w.profiler.event("node",x.node.name,_asyncToGenerator(function*(){return x.op.impl(S,R,x.op.context)}));if(N.length!==x.node.outputs.length)throw new Error("the size of output does not match model definition.");N.forEach((F,H)=>{const q=x.node.outputs[H];if(w._values[q])throw new Error(`output [${q}] already has value: op:${x.node.name}`);w._values[q]=F});const L=new Set;N.forEach((F,H)=>{const q=x.node.outputs[H];for(const W of u[q].to){const U=o[W];let ne=!0;for(const de of U.inputs)if(!w._values[de]){ne=!1;break}ne&&L.add(W)}}),p.push(...L)}const f=[];for(let y=0;y<w.graph.getOutputIndices().length;y++){const x=w.graph.getOutputIndices()[y],E=w._values[x];if(void 0===E)throw new Error(`required output [${x}] does not have value`);0===x&&(yield E.getData()),f.push(E)}return I.Logger.verbose("ExecPlan","disposing of inferenceHandler"),S.dispose(),f}))})()}}},7070:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.Graph=void 0;const I=k(1446),D=k(7778),P=k(9395),v=k(9162),w=k(2517);var S=P.onnxruntime.experimental.fbs;M.Graph={from:(o,d)=>new u(o,d)};class b{constructor(d){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,d&&(this.type=w.ProtoUtil.tensorValueTypeFromProto(d.type.tensorType))}get from(){return this._from}get to(){return this._to}}class p{constructor(d,f){d instanceof I.onnx.NodeProto?(this.name=d.name,this.opType=d.opType,this.attributes=new D.Attribute(d.attribute)):d instanceof S.Node&&(this.name=null!=f?f:d.name(),this.opType=d.opType(),this.attributes=new D.Attribute(w.ProtoUtil.tensorAttributesFromORTFormat(d))),this.inputs=[],this.outputs=[],this.executeNode=!0}}class u{constructor(d,f){if(!d)throw new TypeError("graph is empty");this.buildGraph(d),this.transformGraph(f),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(d){if(d instanceof I.onnx.GraphProto)this.buildGraphFromOnnxFormat(d);else{if(!(d instanceof S.Graph))throw new TypeError("Graph type is not supported.");this.buildGraphFromOrtFormat(d)}}buildGraphFromOnnxFormat(d){const f=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const y=new Map;if(!d.input)throw new Error("missing information in graph: input");const x=[];for(const E of d.input){if(f.has(E.name))throw new Error(`duplicated input name: ${E.name}`);const R=this._allData.push(new b(E))-1;f.set(E.name,R),x.push(E.name)}if(!d.initializer)throw new Error("missing information in graph: initializer");for(const E of d.initializer){let R=f.get(E.name);if(void 0===R){const N=new b;N.type={shape:{dims:w.ProtoUtil.tensorDimsFromProto(E.dims)},tensorType:w.ProtoUtil.tensorDataTypeFromProto(E.dataType)},R=this._allData.push(N)-1,f.set(E.name,R)}this._allData[R]._from=-1,this._allData[R].tensor=v.Tensor.fromProto(E)}for(let E=0;E<this._allData.length;E++)this._allData[E].tensor||(this._allInputIndices.push(E),this._allInputNames.push(x[E]));if(!d.output)throw new Error("missing information in graph: output");for(const E of d.output){if(f.has(E.name))throw new Error(`duplicated output name: ${E.name}`);const R=this._allData.push(new b(E))-1;f.set(E.name,R),this._allOutputIndices.push(R),this._allOutputNames.push(E.name)}if(!d.node)throw new Error("missing information in graph: node");for(const E of d.node){if(!E.name)for(let N=0;;N++){const L=`unnamed_${E.opType}_${N}`;if(!y.has(L)){E.name=L;break}}if(y.has(E.name))throw new Error(`duplicated node name: ${E.name}`);const R=this._nodes.push(new p(E))-1;y.set(E.name,R)}for(let E=0;E<this._nodes.length;E++){const R=this._nodes[E],N=d.node[E];if(!N.output)throw new Error(`missing output for node: ${N.name}`);for(const L of N.output){let F=f.get(L);if(void 0===F&&(F=this._allData.push(new b)-1,f.set(L,F)),R.outputs.push(F),void 0!==this._allData[F]._from)throw new Error(`multiple nodes output to one data value: ${F}`);if(this._allData[F]._from=E,"Constant"===N.opType){if(!N.attribute||1!==N.attribute.length||!N.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!N.output||1!==N.output.length)throw new Error("missing output or incorrect number of outputs for this Constant operator");R.outputs.pop(),R.executeNode=!1,this._allData[F]._from=-1,this._allData[F].tensor=v.Tensor.fromProto(N.attribute[0].t)}}}for(let E=0;E<this._nodes.length;E++){const R=this._nodes[E],N=d.node[E];if(!N.input)throw new Error(`missing input for node: ${N.name}`);for(const L of N.input){const F=f.get(L);if(void 0===F)throw new Error(`unrecognized input '${L}' for node: ${N.name}`);R.inputs.push(F),this._allData[F]._to.push(E)}}return!0}buildGraphFromOrtFormat(d){var f,y,x;const E=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const R=new Map,N=[];for(let L=0;L<d.inputsLength();L++){const F=d.inputs(L);if(E.has(F))throw new Error(`duplicated input name: ${F}`);for(let H=0;H<d.nodeArgsLength();H++)if((null===(f=d.nodeArgs(H))||void 0===f?void 0:f.name())===F){const q=new b;if((null===(x=null===(y=d.nodeArgs(H))||void 0===y?void 0:y.type())||void 0===x?void 0:x.valueType())!==S.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");const W=d.nodeArgs(H).type().value(new S.TensorTypeAndShape),U=w.ProtoUtil.tensorDataTypeFromProto(W.elemType()),ne=W.shape(),de=[];for(let ue=0;ue<ne.dimLength();ue++)de.push(w.LongUtil.longToNumber(ne.dim(ue).value().dimValue()));q.type={shape:{dims:de},tensorType:U};const De=this._allData.push(q)-1;E.set(F,De),N.push(F)}}for(let L=0;L<d.initializersLength();L++){const F=d.initializers(L);let H=E.get(F.name());if(void 0===H){const q=new b,W=w.ProtoUtil.tensorDimsFromORTFormat(F),U=w.ProtoUtil.tensorDataTypeFromProto(F.dataType());q.type={shape:{dims:W},tensorType:U},H=this._allData.push(q)-1,E.set(F.name(),H)}this._allData[H]._from=-1,this._allData[H].tensor=v.Tensor.fromOrtTensor(F)}for(let L=0;L<this._allData.length;L++)this._allData[L].tensor||(this._allInputIndices.push(L),this._allInputNames.push(N[L]));for(let L=0;L<d.outputsLength();L++){const F=d.outputs(L);if(E.has(F))throw new Error(`duplicated output name: ${F}`);const H=this._allData.push(new b)-1;E.set(F,H),this._allOutputIndices.push(H),this._allOutputNames.push(F)}if(!d.nodes)throw new Error("missing information in graph: node");for(let L=0;L<d.nodesLength();L++){const F=d.nodes(L);let H=F.name();if(!H)for(let W=0;H=`unnamed_${F.opType()}_${W}`,R.has(H);W++);if(R.has(H))throw new Error(`duplicated node name: ${H}`);const q=this._nodes.push(new p(F,H))-1;R.set(H,q)}for(let L=0;L<this._nodes.length;L++){const F=this._nodes[L],H=d.nodes(L);if(null==H)throw new Error(`No node exists at index ${L}`);if(0===(null==H?void 0:H.outputsLength()))throw new Error(`missing output for node: ${H.name}`);for(let q=0;q<(null==H?void 0:H.outputsLength());q++){const W=null==H?void 0:H.outputs(q);let U=E.get(W);if(void 0===U&&(U=this._allData.push(new b)-1,E.set(W,U)),F.outputs.push(U),void 0!==this._allData[U]._from)throw new Error(`multiple nodes output to one data value: ${U}`);if(this._allData[U]._from=L,"Constant"===H.opType()){if(1!==H.attributesLength()||!H.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(1!==H.outputsLength())throw new Error("missing output or incorrect number of outputs for this Constant operator");F.outputs.pop(),F.executeNode=!1,this._allData[U]._from=-1,this._allData[U].tensor=v.Tensor.fromOrtTensor(H.attributes(0).t())}}}for(let L=0;L<this._nodes.length;L++){const F=this._nodes[L],H=d.nodes(L);if(0===H.inputsLength())throw new Error(`missing input for node: ${H.name}`);for(let q=0;q<H.inputsLength();q++){const W=H.inputs(q),U=E.get(W);if(void 0===U)throw new Error(`unrecognized input '${W}' for node: ${H.name()}`);F.inputs.push(U),this._allData[U]._to.push(L)}}}checkIsAcyclic(){const d=new Set;this._allInputIndices.forEach(x=>{this._allData[x]._to.forEach(E=>{d.add(E)})});const f=Array.from(d),y=new Array(this._nodes.length).fill("white");for(;f.length>0;){const x=f.pop();"gray"===y[x]?y[x]="black":(f.push(x),y[x]="gray",this._nodes[x].outputs.forEach(E=>{const R=this._allData[E];if(void 0!==R.tensor)throw new Error("node outputs should not be initialized");if(R._from!==x)throw new Error("from property of the Value object doesn't match index of Node being processed");R._to.forEach(N=>{if("gray"===y[N])throw new Error("model graph is cyclic");"white"===y[N]&&f.push(N)})}))}}transformGraph(d){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),d&&d.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let d=0;for(let f=0;f<this._nodes.length;f++)this._nodes[f].executeNode?d>0&&(this._nodes[f].inputs.forEach(y=>{const x=this._allData[y]._to.indexOf(f+d);-1!==x&&(this._allData[y]._to[x]=f)}),this._nodes[f].outputs.forEach(y=>{this._allData[y]._from&&this._allData[y]._from===f+d&&(this._allData[y]._from=f)})):(d++,this._nodes[f].outputs.forEach(y=>{this._allData[y]._from=-2}),this._nodes.splice(f,1),f--);d=0;for(let f=0;f<this._allData.length;f++)if(-2!==this._allData[f].from||-1!==this._allOutputIndices.indexOf(f+d)){if(d>0){let y=-1;void 0!==this._allData[f].from&&-1!==this._allData[f].from?(y=this._nodes[this._allData[f].from].outputs.indexOf(f+d),-1!==y&&(this._nodes[this._allData[f].from].outputs[y]=f)):(y=this._allInputIndices.indexOf(f+d),-1!==y&&(this._allInputIndices[y]=f)),this._allData[f].to.forEach(x=>{y=this._nodes[x].inputs.indexOf(f+d),-1!==y&&(this._nodes[x].inputs[y]=f)}),0===this._allData[f].to.length&&(y=this._allOutputIndices.indexOf(f+d),-1!==y&&(this._allOutputIndices[y]=f))}}else d++,this._allData.splice(f,1),f--}deleteNode(d){const f=this._nodes[d];if(f.outputs.length>1)for(let L=1;L<f.outputs.length;L++)if(this._allData[f.outputs[L]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ");f.executeNode=!1;const y=f.inputs[0],x=f.outputs[0],E=this._allData[x].to,R=this._allData[y].to.indexOf(d);if(-1===R)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[y].to.splice(R,1),this._allData[x]._to=[];const N=this._allOutputIndices.indexOf(x);if(-1!==N&&(this._allOutputIndices[N]=y),E&&E.length>0)for(const L of E){const F=this._nodes[L].inputs.indexOf(x);if(-1===F)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[L].inputs[F]=y,this._allData[y].to.push(L)}}removeAllDropoutNodes(){let d=0;for(const f of this._nodes){if("Dropout"===f.opType){if(1!==f.inputs.length)throw new Error("Dropout nodes should only contain one input. ");if(1!==f.outputs.length&&2!==f.outputs.length)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(2===f.outputs.length&&0!==this._allData[f.outputs[1]]._to.length)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(d)}d++}}removeAllIdentityNodes(){let d=0;for(const f of this._nodes)"Identity"===f.opType&&this.deleteNode(d),d++}isActivation(d){switch(d.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(const d of this._nodes)if("Conv"===d.opType){const f=this._allData[d.outputs[0]]._to;if(1===f.length&&this.isActivation(this._nodes[f[0]])){const y=this._nodes[f[0]];if("Clip"===y.opType)if(1===y.inputs.length)try{d.attributes.set("activation_params","floats",[y.attributes.getFloat("min"),y.attributes.getFloat("max")])}catch(x){d.attributes.set("activation_params","floats",[w.MIN_CLIP,w.MAX_CLIP])}else{if(!(y.inputs.length>=3&&void 0!==this._allData[y.inputs[1]].tensor&&void 0!==this._allData[y.inputs[2]].tensor))continue;d.attributes.set("activation_params","floats",[this._allData[y.inputs[1]].tensor.floatData[0],this._allData[y.inputs[2]].tensor.floatData[0]])}d.attributes.set("activation","string",y.opType),this.deleteNode(f[0])}}}}},6231:(ye,M)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.now=M.Profiler=M.Logger=void 0;const k={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},I={none:new class{log(p,u,o){}},console:new class{log(p,u,o){console.log(`${this.color(p)} ${o?"\x1b[35m"+o+"\x1b[0m ":""}${u}`)}color(p){switch(p){case"verbose":return"\x1b[34;40mv\x1b[0m";case"info":return"\x1b[32mi\x1b[0m";case"warning":return"\x1b[30;43mw\x1b[0m";case"error":return"\x1b[31;40me\x1b[0m";case"fatal":return"\x1b[101mf\x1b[0m";default:throw new Error(`unsupported severity: ${p}`)}}}},D={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1};let P={"":D};function v(p,u,o,d){if(void 0===u)return{verbose:v.verbose.bind(null,f=p),info:v.info.bind(null,f),warning:v.warning.bind(null,f),error:v.error.bind(null,f),fatal:v.fatal.bind(null,f)};if(void 0===o)w(p,u);else if("number"==typeof o&&void 0===d)w(p,u);else if("string"==typeof o&&void 0===d)w(p,o,0,u);else{if("string"!=typeof o||"number"!=typeof d)throw new TypeError("input is valid");w(p,o,0,u)}var f}function w(p,u,o,d){const f=P[d||""]||P[""];k[p]<k[f.minimalSeverity]||(f.logDateTime&&(u=`${(new Date).toISOString()}|${u}`),I[f.provider].log(p,u,d))}(function(p){function u(d){P={},o("",d||{})}function o(d,f){if("*"===d)u(f);else{const y=P[d]||D;P[d]={provider:f.provider||y.provider,minimalSeverity:f.minimalSeverity||y.minimalSeverity,logDateTime:void 0===f.logDateTime?y.logDateTime:f.logDateTime,logSourceLocation:void 0===f.logSourceLocation?y.logSourceLocation:f.logSourceLocation}}}p.verbose=function(d,f){p("verbose",d,f)},p.info=function(d,f){p("info",d,f)},p.warning=function(d,f){p("warning",d,f)},p.error=function(d,f){p("error",d,f)},p.fatal=function(d,f){p("fatal",d,f)},p.reset=u,p.set=o,p.setWithEnv=function(d){const f={};d.logLevel&&(f.minimalSeverity=d.logLevel),o("",f)}})(v||(v={})),M.Logger=v;class S{constructor(u,o,d,f,y,x){this.category=u,this.name=o,this.startTime=d,this.endCallback=f,this.timer=y,this.ctx=x}end(){return this.endCallback(this)}checkTimer(){var u=this;return _asyncToGenerator(function*(){if(void 0===u.ctx||void 0===u.timer)throw new Error("No webgl timer found");return u.ctx.endTimer(),u.ctx.waitForQueryAndGetTime(u.timer)})()}}class b{constructor(u,o,d,f){this.category=u,this.name=o,this.startTime=d,this.endTime=f}}M.Profiler=class{constructor(p,u,o){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=void 0===p?1e4:p,this._flushBatchSize=void 0===u?10:u,this._flushIntervalInMilliseconds=void 0===o?5e3:o}static create(p){return void 0===p?new this:new this(p.maxNumberEvents,p.flushBatchSize,p.flushIntervalInMilliseconds)}start(){this._started=!0,this._timingEvents=[],this._flushTime=M.now(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(p,u,o,d){const f=this._started?this.begin(p,u,d):void 0;let y=!1;const x=o();if(x&&"function"==typeof x.then)return y=!0,new Promise((E,R)=>{x.then(function(){var N=_asyncToGenerator(function*(L){f&&(yield f.end()),E(L)});return function(L){return N.apply(this,arguments)}}(),function(){var N=_asyncToGenerator(function*(L){f&&(yield f.end()),R(L)});return function(L){return N.apply(this,arguments)}}())});if(!y&&f){const E=f.end();if(E&&"function"==typeof E.then)return new Promise((R,N)=>{E.then(()=>{R(x)},L=>{N(L)})})}return x}begin(p,u,o){var d=this;if(!this._started)throw new Error("profiler is not started yet");if(void 0===o){const f=M.now();return this.flush(f),new S(p,u,f,y=>this.endSync(y))}{const f=o.beginTimer();return new S(p,u,0,function(){var y=_asyncToGenerator(function*(x){return d.end(x)});return function(x){return y.apply(this,arguments)}}(),f,o)}}end(p){var u=this;return _asyncToGenerator(function*(){const o=yield p.checkTimer();u._timingEvents.length<u._maxNumberEvents&&(u._timingEvents.push(new b(p.category,p.name,p.startTime,o)),u.flush(o))})()}endSync(p){const u=M.now();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new b(p.category,p.name,p.startTime,u)),this.flush(u))}logOneEvent(p){M.Logger.verbose(`Profiler.${p.category}`,`${(p.endTime-p.startTime).toFixed(2)}ms on event '${p.name}' at ${p.endTime.toFixed(2)}`)}flush(p){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||p-this._flushTime>=this._flushIntervalInMilliseconds){for(const u=this._flushPointer;this._flushPointer<u+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=M.now()}}get started(){return this._started}},M.now="undefined"!=typeof performance&&performance.now?()=>performance.now():Date.now},2644:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.Model=void 0;const I=k(4819),D=k(1446),P=k(7070),v=k(9395),w=k(2517);var S=v.onnxruntime.experimental.fbs;M.Model=class{constructor(){}load(b,p,u){if(!u)try{return void this.loadFromOnnxFormat(b,p)}catch(o){if(void 0!==u)throw o}this.loadFromOrtFormat(b,p)}loadFromOnnxFormat(b,p){const u=D.onnx.ModelProto.decode(b);if(w.LongUtil.longToNumber(u.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=u.opsetImport.map(o=>({domain:o.domain,version:w.LongUtil.longToNumber(o.version)})),this._graph=P.Graph.from(u.graph,p)}loadFromOrtFormat(b,p){const u=new I.flatbuffers.ByteBuffer(b),o=S.InferenceSession.getRootAsInferenceSession(u).model();if(w.LongUtil.longToNumber(o.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let d=0;d<o.opsetImportLength();d++){const f=o.opsetImport(d);this._opsets.push({domain:null==f?void 0:f.domain(),version:w.LongUtil.longToNumber(f.version())})}this._graph=P.Graph.from(o.graph(),p)}get graph(){return this._graph}get opsets(){return this._opsets}}},782:(ye,M)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.FLOAT_TYPES=M.INT_TYPES=M.NUMBER_TYPES=void 0,M.NUMBER_TYPES=["float32","float64","int32","int16","int8","uint16","uint32","uint8"],M.INT_TYPES=["int32","int16","int8","uint16","uint32","uint8"],M.FLOAT_TYPES=["float32","float64"]},1047:(ye,M)=>{"use strict";function k(I,D){if(D.endsWith("+")){const P=Number.parseInt(D.substring(0,D.length-1),10);return!isNaN(P)&&P<=I}if(2===D.split("-").length){const P=D.split("-"),v=Number.parseInt(P[0],10),w=Number.parseInt(P[1],10);return!isNaN(v)&&!isNaN(w)&&v<=I&&I<=w}return Number.parseInt(D,10)===I}Object.defineProperty(M,"__esModule",{value:!0}),M.resolveOperator=void 0,M.resolveOperator=function(I,D,P){for(const v of P){const S=v[1],b=v[2],p=v[3],u=v[4];if(I.opType===v[0])for(const o of D)if((o.domain===S||"ai.onnx"===o.domain&&""===S)&&k(o.version,b))return{opImpl:p,opInit:u}}throw new TypeError(`cannot resolve operator '${I.opType}' with opsets: ${D.map(v=>`${v.domain||"ai.onnx"} v${v.version}`).join(", ")}`)}},9395:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.onnxruntime=void 0;const I=k(4819);var D,P,v,w;(function(v){let w;var S;(S=w=v.AttributeType||(v.AttributeType={}))[S.UNDEFINED=0]="UNDEFINED",S[S.FLOAT=1]="FLOAT",S[S.INT=2]="INT",S[S.STRING=3]="STRING",S[S.TENSOR=4]="TENSOR",S[S.GRAPH=5]="GRAPH",S[S.FLOATS=6]="FLOATS",S[S.INTS=7]="INTS",S[S.STRINGS=8]="STRINGS",S[S.TENSORS=9]="TENSORS",S[S.GRAPHS=10]="GRAPHS",S[S.SPARSE_TENSOR=11]="SPARSE_TENSOR",S[S.SPARSE_TENSORS=12]="SPARSE_TENSORS"})((P=(D=M.onnxruntime||(M.onnxruntime={})).experimental||(D.experimental={})).fbs||(P.fbs={})),function(S){let b;var p;(p=b=S.DimensionValueType||(S.DimensionValueType={}))[p.UNKNOWN=0]="UNKNOWN",p[p.VALUE=1]="VALUE",p[p.PARAM=2]="PARAM"}((w=(v=M.onnxruntime||(M.onnxruntime={})).experimental||(v.experimental={})).fbs||(w.fbs={})),function(v){!function(w){!function(S){let b;var p;(p=b=S.TensorDataType||(S.TensorDataType={}))[p.UNDEFINED=0]="UNDEFINED",p[p.FLOAT=1]="FLOAT",p[p.UINT8=2]="UINT8",p[p.INT8=3]="INT8",p[p.UINT16=4]="UINT16",p[p.INT16=5]="INT16",p[p.INT32=6]="INT32",p[p.INT64=7]="INT64",p[p.STRING=8]="STRING",p[p.BOOL=9]="BOOL",p[p.FLOAT16=10]="FLOAT16",p[p.DOUBLE=11]="DOUBLE",p[p.UINT32=12]="UINT32",p[p.UINT64=13]="UINT64",p[p.COMPLEX64=14]="COMPLEX64",p[p.COMPLEX128=15]="COMPLEX128",p[p.BFLOAT16=16]="BFLOAT16"}(w.fbs||(w.fbs={}))}(v.experimental||(v.experimental={}))}(M.onnxruntime||(M.onnxruntime={})),function(v){!function(w){!function(S){let b;var p;(p=b=S.NodeType||(S.NodeType={}))[p.Primitive=0]="Primitive",p[p.Fused=1]="Fused"}(w.fbs||(w.fbs={}))}(v.experimental||(v.experimental={}))}(M.onnxruntime||(M.onnxruntime={})),function(v){!function(w){!function(S){let b;var p;(p=b=S.TypeInfoValue||(S.TypeInfoValue={}))[p.NONE=0]="NONE",p[p.tensor_type=1]="tensor_type",p[p.sequence_type=2]="sequence_type",p[p.map_type=3]="map_type"}(w.fbs||(w.fbs={}))}(v.experimental||(v.experimental={}))}(M.onnxruntime||(M.onnxruntime={})),function(v){!function(w){!function(S){class b{constructor(){this.bb=null,this.bb_pos=0}__init(u,o){return this.bb_pos=u,this.bb=o,this}static getRootAsShape(u,o){return(o||new b).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsShape(u,o){return u.setPosition(u.position()+I.flatbuffers.SIZE_PREFIX_LENGTH),(o||new b).__init(u.readInt32(u.position())+u.position(),u)}dim(u,o){let d=this.bb.__offset(this.bb_pos,4);return d?(o||new v.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+d)+4*u),this.bb):null}dimLength(){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.__vector_len(this.bb_pos+u):0}static startShape(u){u.startObject(1)}static addDim(u,o){u.addFieldOffset(0,o,0)}static createDimVector(u,o){u.startVector(4,o.length,4);for(let d=o.length-1;d>=0;d--)u.addOffset(o[d]);return u.endVector()}static startDimVector(u,o){u.startVector(4,o,4)}static endShape(u){return u.endObject()}static createShape(u,o){return b.startShape(u),b.addDim(u,o),b.endShape(u)}}S.Shape=b}(w.fbs||(w.fbs={}))}(v.experimental||(v.experimental={}))}(M.onnxruntime||(M.onnxruntime={})),function(v){!function(w){!function(S){class b{constructor(){this.bb=null,this.bb_pos=0}__init(u,o){return this.bb_pos=u,this.bb=o,this}static getRootAsDimension(u,o){return(o||new b).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsDimension(u,o){return u.setPosition(u.position()+I.flatbuffers.SIZE_PREFIX_LENGTH),(o||new b).__init(u.readInt32(u.position())+u.position(),u)}value(u){let o=this.bb.__offset(this.bb_pos,4);return o?(u||new v.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}denotation(u){let o=this.bb.__offset(this.bb_pos,6);return o?this.bb.__string(this.bb_pos+o,u):null}static startDimension(u){u.startObject(2)}static addValue(u,o){u.addFieldOffset(0,o,0)}static addDenotation(u,o){u.addFieldOffset(1,o,0)}static endDimension(u){return u.endObject()}static createDimension(u,o,d){return b.startDimension(u),b.addValue(u,o),b.addDenotation(u,d),b.endDimension(u)}}S.Dimension=b}(w.fbs||(w.fbs={}))}(v.experimental||(v.experimental={}))}(M.onnxruntime||(M.onnxruntime={})),function(v){!function(w){!function(S){class b{constructor(){this.bb=null,this.bb_pos=0}__init(u,o){return this.bb_pos=u,this.bb=o,this}static getRootAsDimensionValue(u,o){return(o||new b).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsDimensionValue(u,o){return u.setPosition(u.position()+I.flatbuffers.SIZE_PREFIX_LENGTH),(o||new b).__init(u.readInt32(u.position())+u.position(),u)}dimType(){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.readInt8(this.bb_pos+u):v.experimental.fbs.DimensionValueType.UNKNOWN}dimValue(){let u=this.bb.__offset(this.bb_pos,6);return u?this.bb.readInt64(this.bb_pos+u):this.bb.createLong(0,0)}dimParam(u){let o=this.bb.__offset(this.bb_pos,8);return o?this.bb.__string(this.bb_pos+o,u):null}static startDimensionValue(u){u.startObject(3)}static addDimType(u,o){u.addFieldInt8(0,o,v.experimental.fbs.DimensionValueType.UNKNOWN)}static addDimValue(u,o){u.addFieldInt64(1,o,u.createLong(0,0))}static addDimParam(u,o){u.addFieldOffset(2,o,0)}static endDimensionValue(u){return u.endObject()}static createDimensionValue(u,o,d,f){return b.startDimensionValue(u),b.addDimType(u,o),b.addDimValue(u,d),b.addDimParam(u,f),b.endDimensionValue(u)}}S.DimensionValue=b}(w.fbs||(w.fbs={}))}(v.experimental||(v.experimental={}))}(M.onnxruntime||(M.onnxruntime={})),function(v){!function(w){!function(S){class b{constructor(){this.bb=null,this.bb_pos=0}__init(u,o){return this.bb_pos=u,this.bb=o,this}static getRootAsTensorTypeAndShape(u,o){return(o||new b).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsTensorTypeAndShape(u,o){return u.setPosition(u.position()+I.flatbuffers.SIZE_PREFIX_LENGTH),(o||new b).__init(u.readInt32(u.position())+u.position(),u)}elemType(){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.readInt32(this.bb_pos+u):v.experimental.fbs.TensorDataType.UNDEFINED}shape(u){let o=this.bb.__offset(this.bb_pos,6);return o?(u||new v.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}static startTensorTypeAndShape(u){u.startObject(2)}static addElemType(u,o){u.addFieldInt32(0,o,v.experimental.fbs.TensorDataType.UNDEFINED)}static addShape(u,o){u.addFieldOffset(1,o,0)}static endTensorTypeAndShape(u){return u.endObject()}static createTensorTypeAndShape(u,o,d){return b.startTensorTypeAndShape(u),b.addElemType(u,o),b.addShape(u,d),b.endTensorTypeAndShape(u)}}S.TensorTypeAndShape=b}(w.fbs||(w.fbs={}))}(v.experimental||(v.experimental={}))}(M.onnxruntime||(M.onnxruntime={})),function(v){!function(w){!function(S){class b{constructor(){this.bb=null,this.bb_pos=0}__init(u,o){return this.bb_pos=u,this.bb=o,this}static getRootAsMapType(u,o){return(o||new b).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsMapType(u,o){return u.setPosition(u.position()+I.flatbuffers.SIZE_PREFIX_LENGTH),(o||new b).__init(u.readInt32(u.position())+u.position(),u)}keyType(){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.readInt32(this.bb_pos+u):v.experimental.fbs.TensorDataType.UNDEFINED}valueType(u){let o=this.bb.__offset(this.bb_pos,6);return o?(u||new v.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}static startMapType(u){u.startObject(2)}static addKeyType(u,o){u.addFieldInt32(0,o,v.experimental.fbs.TensorDataType.UNDEFINED)}static addValueType(u,o){u.addFieldOffset(1,o,0)}static endMapType(u){return u.endObject()}static createMapType(u,o,d){return b.startMapType(u),b.addKeyType(u,o),b.addValueType(u,d),b.endMapType(u)}}S.MapType=b}(w.fbs||(w.fbs={}))}(v.experimental||(v.experimental={}))}(M.onnxruntime||(M.onnxruntime={})),function(v){!function(w){!function(S){class b{constructor(){this.bb=null,this.bb_pos=0}__init(u,o){return this.bb_pos=u,this.bb=o,this}static getRootAsSequenceType(u,o){return(o||new b).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsSequenceType(u,o){return u.setPosition(u.position()+I.flatbuffers.SIZE_PREFIX_LENGTH),(o||new b).__init(u.readInt32(u.position())+u.position(),u)}elemType(u){let o=this.bb.__offset(this.bb_pos,4);return o?(u||new v.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}static startSequenceType(u){u.startObject(1)}static addElemType(u,o){u.addFieldOffset(0,o,0)}static endSequenceType(u){return u.endObject()}static createSequenceType(u,o){return b.startSequenceType(u),b.addElemType(u,o),b.endSequenceType(u)}}S.SequenceType=b}(w.fbs||(w.fbs={}))}(v.experimental||(v.experimental={}))}(M.onnxruntime||(M.onnxruntime={})),function(v){!function(w){(w.fbs||(w.fbs={})).EdgeEnd=class{constructor(){this.bb=null,this.bb_pos=0}__init(S,b){return this.bb_pos=S,this.bb=b,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd(S,b,p,u){return S.prep(4,12),S.writeInt32(u),S.writeInt32(p),S.writeInt32(b),S.offset()}}}(v.experimental||(v.experimental={}))}(M.onnxruntime||(M.onnxruntime={})),function(v){!function(w){!function(S){class b{constructor(){this.bb=null,this.bb_pos=0}__init(u,o){return this.bb_pos=u,this.bb=o,this}static getRootAsNodeEdge(u,o){return(o||new b).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsNodeEdge(u,o){return u.setPosition(u.position()+I.flatbuffers.SIZE_PREFIX_LENGTH),(o||new b).__init(u.readInt32(u.position())+u.position(),u)}nodeIndex(){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.readUint32(this.bb_pos+u):0}inputEdges(u,o){let d=this.bb.__offset(this.bb_pos,6);return d?(o||new v.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+d)+12*u,this.bb):null}inputEdgesLength(){let u=this.bb.__offset(this.bb_pos,6);return u?this.bb.__vector_len(this.bb_pos+u):0}outputEdges(u,o){let d=this.bb.__offset(this.bb_pos,8);return d?(o||new v.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+d)+12*u,this.bb):null}outputEdgesLength(){let u=this.bb.__offset(this.bb_pos,8);return u?this.bb.__vector_len(this.bb_pos+u):0}static startNodeEdge(u){u.startObject(3)}static addNodeIndex(u,o){u.addFieldInt32(0,o,0)}static addInputEdges(u,o){u.addFieldOffset(1,o,0)}static startInputEdgesVector(u,o){u.startVector(12,o,4)}static addOutputEdges(u,o){u.addFieldOffset(2,o,0)}static startOutputEdgesVector(u,o){u.startVector(12,o,4)}static endNodeEdge(u){return u.endObject()}static createNodeEdge(u,o,d,f){return b.startNodeEdge(u),b.addNodeIndex(u,o),b.addInputEdges(u,d),b.addOutputEdges(u,f),b.endNodeEdge(u)}}S.NodeEdge=b}(w.fbs||(w.fbs={}))}(v.experimental||(v.experimental={}))}(M.onnxruntime||(M.onnxruntime={})),function(v){!function(w){!function(S){class b{constructor(){this.bb=null,this.bb_pos=0}__init(u,o){return this.bb_pos=u,this.bb=o,this}static getRootAsNode(u,o){return(o||new b).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsNode(u,o){return u.setPosition(u.position()+I.flatbuffers.SIZE_PREFIX_LENGTH),(o||new b).__init(u.readInt32(u.position())+u.position(),u)}name(u){let o=this.bb.__offset(this.bb_pos,4);return o?this.bb.__string(this.bb_pos+o,u):null}docString(u){let o=this.bb.__offset(this.bb_pos,6);return o?this.bb.__string(this.bb_pos+o,u):null}domain(u){let o=this.bb.__offset(this.bb_pos,8);return o?this.bb.__string(this.bb_pos+o,u):null}sinceVersion(){let u=this.bb.__offset(this.bb_pos,10);return u?this.bb.readInt32(this.bb_pos+u):0}index(){let u=this.bb.__offset(this.bb_pos,12);return u?this.bb.readUint32(this.bb_pos+u):0}opType(u){let o=this.bb.__offset(this.bb_pos,14);return o?this.bb.__string(this.bb_pos+o,u):null}type(){let u=this.bb.__offset(this.bb_pos,16);return u?this.bb.readInt32(this.bb_pos+u):v.experimental.fbs.NodeType.Primitive}executionProviderType(u){let o=this.bb.__offset(this.bb_pos,18);return o?this.bb.__string(this.bb_pos+o,u):null}inputs(u,o){let d=this.bb.__offset(this.bb_pos,20);return d?this.bb.__string(this.bb.__vector(this.bb_pos+d)+4*u,o):null}inputsLength(){let u=this.bb.__offset(this.bb_pos,20);return u?this.bb.__vector_len(this.bb_pos+u):0}outputs(u,o){let d=this.bb.__offset(this.bb_pos,22);return d?this.bb.__string(this.bb.__vector(this.bb_pos+d)+4*u,o):null}outputsLength(){let u=this.bb.__offset(this.bb_pos,22);return u?this.bb.__vector_len(this.bb_pos+u):0}attributes(u,o){let d=this.bb.__offset(this.bb_pos,24);return d?(o||new v.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+d)+4*u),this.bb):null}attributesLength(){let u=this.bb.__offset(this.bb_pos,24);return u?this.bb.__vector_len(this.bb_pos+u):0}inputArgCounts(u){let o=this.bb.__offset(this.bb_pos,26);return o?this.bb.readInt32(this.bb.__vector(this.bb_pos+o)+4*u):0}inputArgCountsLength(){let u=this.bb.__offset(this.bb_pos,26);return u?this.bb.__vector_len(this.bb_pos+u):0}inputArgCountsArray(){let u=this.bb.__offset(this.bb_pos,26);return u?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+u),this.bb.__vector_len(this.bb_pos+u)):null}implicitInputs(u,o){let d=this.bb.__offset(this.bb_pos,28);return d?this.bb.__string(this.bb.__vector(this.bb_pos+d)+4*u,o):null}implicitInputsLength(){let u=this.bb.__offset(this.bb_pos,28);return u?this.bb.__vector_len(this.bb_pos+u):0}static startNode(u){u.startObject(13)}static addName(u,o){u.addFieldOffset(0,o,0)}static addDocString(u,o){u.addFieldOffset(1,o,0)}static addDomain(u,o){u.addFieldOffset(2,o,0)}static addSinceVersion(u,o){u.addFieldInt32(3,o,0)}static addIndex(u,o){u.addFieldInt32(4,o,0)}static addOpType(u,o){u.addFieldOffset(5,o,0)}static addType(u,o){u.addFieldInt32(6,o,v.experimental.fbs.NodeType.Primitive)}static addExecutionProviderType(u,o){u.addFieldOffset(7,o,0)}static addInputs(u,o){u.addFieldOffset(8,o,0)}static createInputsVector(u,o){u.startVector(4,o.length,4);for(let d=o.length-1;d>=0;d--)u.addOffset(o[d]);return u.endVector()}static startInputsVector(u,o){u.startVector(4,o,4)}static addOutputs(u,o){u.addFieldOffset(9,o,0)}static createOutputsVector(u,o){u.startVector(4,o.length,4);for(let d=o.length-1;d>=0;d--)u.addOffset(o[d]);return u.endVector()}static startOutputsVector(u,o){u.startVector(4,o,4)}static addAttributes(u,o){u.addFieldOffset(10,o,0)}static createAttributesVector(u,o){u.startVector(4,o.length,4);for(let d=o.length-1;d>=0;d--)u.addOffset(o[d]);return u.endVector()}static startAttributesVector(u,o){u.startVector(4,o,4)}static addInputArgCounts(u,o){u.addFieldOffset(11,o,0)}static createInputArgCountsVector(u,o){u.startVector(4,o.length,4);for(let d=o.length-1;d>=0;d--)u.addInt32(o[d]);return u.endVector()}static startInputArgCountsVector(u,o){u.startVector(4,o,4)}static addImplicitInputs(u,o){u.addFieldOffset(12,o,0)}static createImplicitInputsVector(u,o){u.startVector(4,o.length,4);for(let d=o.length-1;d>=0;d--)u.addOffset(o[d]);return u.endVector()}static startImplicitInputsVector(u,o){u.startVector(4,o,4)}static endNode(u){return u.endObject()}static createNode(u,o,d,f,y,x,E,R,N,L,F,H,q,W){return b.startNode(u),b.addName(u,o),b.addDocString(u,d),b.addDomain(u,f),b.addSinceVersion(u,y),b.addIndex(u,x),b.addOpType(u,E),b.addType(u,R),b.addExecutionProviderType(u,N),b.addInputs(u,L),b.addOutputs(u,F),b.addAttributes(u,H),b.addInputArgCounts(u,q),b.addImplicitInputs(u,W),b.endNode(u)}}S.Node=b}(w.fbs||(w.fbs={}))}(v.experimental||(v.experimental={}))}(M.onnxruntime||(M.onnxruntime={})),function(v){!function(w){!function(S){class b{constructor(){this.bb=null,this.bb_pos=0}__init(u,o){return this.bb_pos=u,this.bb=o,this}static getRootAsValueInfo(u,o){return(o||new b).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsValueInfo(u,o){return u.setPosition(u.position()+I.flatbuffers.SIZE_PREFIX_LENGTH),(o||new b).__init(u.readInt32(u.position())+u.position(),u)}name(u){let o=this.bb.__offset(this.bb_pos,4);return o?this.bb.__string(this.bb_pos+o,u):null}docString(u){let o=this.bb.__offset(this.bb_pos,6);return o?this.bb.__string(this.bb_pos+o,u):null}type(u){let o=this.bb.__offset(this.bb_pos,8);return o?(u||new v.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}static startValueInfo(u){u.startObject(3)}static addName(u,o){u.addFieldOffset(0,o,0)}static addDocString(u,o){u.addFieldOffset(1,o,0)}static addType(u,o){u.addFieldOffset(2,o,0)}static endValueInfo(u){return u.endObject()}static createValueInfo(u,o,d,f){return b.startValueInfo(u),b.addName(u,o),b.addDocString(u,d),b.addType(u,f),b.endValueInfo(u)}}S.ValueInfo=b}(w.fbs||(w.fbs={}))}(v.experimental||(v.experimental={}))}(M.onnxruntime||(M.onnxruntime={})),function(v){!function(w){!function(S){class b{constructor(){this.bb=null,this.bb_pos=0}__init(u,o){return this.bb_pos=u,this.bb=o,this}static getRootAsTypeInfo(u,o){return(o||new b).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsTypeInfo(u,o){return u.setPosition(u.position()+I.flatbuffers.SIZE_PREFIX_LENGTH),(o||new b).__init(u.readInt32(u.position())+u.position(),u)}denotation(u){let o=this.bb.__offset(this.bb_pos,4);return o?this.bb.__string(this.bb_pos+o,u):null}valueType(){let u=this.bb.__offset(this.bb_pos,6);return u?this.bb.readUint8(this.bb_pos+u):v.experimental.fbs.TypeInfoValue.NONE}value(u){let o=this.bb.__offset(this.bb_pos,8);return o?this.bb.__union(u,this.bb_pos+o):null}static startTypeInfo(u){u.startObject(3)}static addDenotation(u,o){u.addFieldOffset(0,o,0)}static addValueType(u,o){u.addFieldInt8(1,o,v.experimental.fbs.TypeInfoValue.NONE)}static addValue(u,o){u.addFieldOffset(2,o,0)}static endTypeInfo(u){return u.endObject()}static createTypeInfo(u,o,d,f){return b.startTypeInfo(u),b.addDenotation(u,o),b.addValueType(u,d),b.addValue(u,f),b.endTypeInfo(u)}}S.TypeInfo=b}(w.fbs||(w.fbs={}))}(v.experimental||(v.experimental={}))}(M.onnxruntime||(M.onnxruntime={})),function(v){!function(w){!function(S){class b{constructor(){this.bb=null,this.bb_pos=0}__init(u,o){return this.bb_pos=u,this.bb=o,this}static getRootAsOperatorSetId(u,o){return(o||new b).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsOperatorSetId(u,o){return u.setPosition(u.position()+I.flatbuffers.SIZE_PREFIX_LENGTH),(o||new b).__init(u.readInt32(u.position())+u.position(),u)}domain(u){let o=this.bb.__offset(this.bb_pos,4);return o?this.bb.__string(this.bb_pos+o,u):null}version(){let u=this.bb.__offset(this.bb_pos,6);return u?this.bb.readInt64(this.bb_pos+u):this.bb.createLong(0,0)}static startOperatorSetId(u){u.startObject(2)}static addDomain(u,o){u.addFieldOffset(0,o,0)}static addVersion(u,o){u.addFieldInt64(1,o,u.createLong(0,0))}static endOperatorSetId(u){return u.endObject()}static createOperatorSetId(u,o,d){return b.startOperatorSetId(u),b.addDomain(u,o),b.addVersion(u,d),b.endOperatorSetId(u)}}S.OperatorSetId=b}(w.fbs||(w.fbs={}))}(v.experimental||(v.experimental={}))}(M.onnxruntime||(M.onnxruntime={})),function(v){!function(w){!function(S){class b{constructor(){this.bb=null,this.bb_pos=0}__init(u,o){return this.bb_pos=u,this.bb=o,this}static getRootAsTensor(u,o){return(o||new b).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsTensor(u,o){return u.setPosition(u.position()+I.flatbuffers.SIZE_PREFIX_LENGTH),(o||new b).__init(u.readInt32(u.position())+u.position(),u)}name(u){let o=this.bb.__offset(this.bb_pos,4);return o?this.bb.__string(this.bb_pos+o,u):null}docString(u){let o=this.bb.__offset(this.bb_pos,6);return o?this.bb.__string(this.bb_pos+o,u):null}dims(u){let o=this.bb.__offset(this.bb_pos,8);return o?this.bb.readInt64(this.bb.__vector(this.bb_pos+o)+8*u):this.bb.createLong(0,0)}dimsLength(){let u=this.bb.__offset(this.bb_pos,8);return u?this.bb.__vector_len(this.bb_pos+u):0}dataType(){let u=this.bb.__offset(this.bb_pos,10);return u?this.bb.readInt32(this.bb_pos+u):v.experimental.fbs.TensorDataType.UNDEFINED}rawData(u){let o=this.bb.__offset(this.bb_pos,12);return o?this.bb.readUint8(this.bb.__vector(this.bb_pos+o)+u):0}rawDataLength(){let u=this.bb.__offset(this.bb_pos,12);return u?this.bb.__vector_len(this.bb_pos+u):0}rawDataArray(){let u=this.bb.__offset(this.bb_pos,12);return u?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+u),this.bb.__vector_len(this.bb_pos+u)):null}stringData(u,o){let d=this.bb.__offset(this.bb_pos,14);return d?this.bb.__string(this.bb.__vector(this.bb_pos+d)+4*u,o):null}stringDataLength(){let u=this.bb.__offset(this.bb_pos,14);return u?this.bb.__vector_len(this.bb_pos+u):0}static startTensor(u){u.startObject(6)}static addName(u,o){u.addFieldOffset(0,o,0)}static addDocString(u,o){u.addFieldOffset(1,o,0)}static addDims(u,o){u.addFieldOffset(2,o,0)}static createDimsVector(u,o){u.startVector(8,o.length,8);for(let d=o.length-1;d>=0;d--)u.addInt64(o[d]);return u.endVector()}static startDimsVector(u,o){u.startVector(8,o,8)}static addDataType(u,o){u.addFieldInt32(3,o,v.experimental.fbs.TensorDataType.UNDEFINED)}static addRawData(u,o){u.addFieldOffset(4,o,0)}static createRawDataVector(u,o){u.startVector(1,o.length,1);for(let d=o.length-1;d>=0;d--)u.addInt8(o[d]);return u.endVector()}static startRawDataVector(u,o){u.startVector(1,o,1)}static addStringData(u,o){u.addFieldOffset(5,o,0)}static createStringDataVector(u,o){u.startVector(4,o.length,4);for(let d=o.length-1;d>=0;d--)u.addOffset(o[d]);return u.endVector()}static startStringDataVector(u,o){u.startVector(4,o,4)}static endTensor(u){return u.endObject()}static createTensor(u,o,d,f,y,x,E){return b.startTensor(u),b.addName(u,o),b.addDocString(u,d),b.addDims(u,f),b.addDataType(u,y),b.addRawData(u,x),b.addStringData(u,E),b.endTensor(u)}}S.Tensor=b}(w.fbs||(w.fbs={}))}(v.experimental||(v.experimental={}))}(M.onnxruntime||(M.onnxruntime={})),function(v){!function(w){!function(S){class b{constructor(){this.bb=null,this.bb_pos=0}__init(u,o){return this.bb_pos=u,this.bb=o,this}static getRootAsSparseTensor(u,o){return(o||new b).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsSparseTensor(u,o){return u.setPosition(u.position()+I.flatbuffers.SIZE_PREFIX_LENGTH),(o||new b).__init(u.readInt32(u.position())+u.position(),u)}values(u){let o=this.bb.__offset(this.bb_pos,4);return o?(u||new v.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}indices(u){let o=this.bb.__offset(this.bb_pos,6);return o?(u||new v.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}dims(u){let o=this.bb.__offset(this.bb_pos,8);return o?this.bb.readInt64(this.bb.__vector(this.bb_pos+o)+8*u):this.bb.createLong(0,0)}dimsLength(){let u=this.bb.__offset(this.bb_pos,8);return u?this.bb.__vector_len(this.bb_pos+u):0}static startSparseTensor(u){u.startObject(3)}static addValues(u,o){u.addFieldOffset(0,o,0)}static addIndices(u,o){u.addFieldOffset(1,o,0)}static addDims(u,o){u.addFieldOffset(2,o,0)}static createDimsVector(u,o){u.startVector(8,o.length,8);for(let d=o.length-1;d>=0;d--)u.addInt64(o[d]);return u.endVector()}static startDimsVector(u,o){u.startVector(8,o,8)}static endSparseTensor(u){return u.endObject()}static createSparseTensor(u,o,d,f){return b.startSparseTensor(u),b.addValues(u,o),b.addIndices(u,d),b.addDims(u,f),b.endSparseTensor(u)}}S.SparseTensor=b}(w.fbs||(w.fbs={}))}(v.experimental||(v.experimental={}))}(M.onnxruntime||(M.onnxruntime={})),function(v){!function(w){!function(S){class b{constructor(){this.bb=null,this.bb_pos=0}__init(u,o){return this.bb_pos=u,this.bb=o,this}static getRootAsAttribute(u,o){return(o||new b).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsAttribute(u,o){return u.setPosition(u.position()+I.flatbuffers.SIZE_PREFIX_LENGTH),(o||new b).__init(u.readInt32(u.position())+u.position(),u)}name(u){let o=this.bb.__offset(this.bb_pos,4);return o?this.bb.__string(this.bb_pos+o,u):null}docString(u){let o=this.bb.__offset(this.bb_pos,6);return o?this.bb.__string(this.bb_pos+o,u):null}type(){let u=this.bb.__offset(this.bb_pos,8);return u?this.bb.readInt32(this.bb_pos+u):v.experimental.fbs.AttributeType.UNDEFINED}f(){let u=this.bb.__offset(this.bb_pos,10);return u?this.bb.readFloat32(this.bb_pos+u):0}i(){let u=this.bb.__offset(this.bb_pos,12);return u?this.bb.readInt64(this.bb_pos+u):this.bb.createLong(0,0)}s(u){let o=this.bb.__offset(this.bb_pos,14);return o?this.bb.__string(this.bb_pos+o,u):null}t(u){let o=this.bb.__offset(this.bb_pos,16);return o?(u||new v.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}g(u){let o=this.bb.__offset(this.bb_pos,18);return o?(u||new v.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}floats(u){let o=this.bb.__offset(this.bb_pos,20);return o?this.bb.readFloat32(this.bb.__vector(this.bb_pos+o)+4*u):0}floatsLength(){let u=this.bb.__offset(this.bb_pos,20);return u?this.bb.__vector_len(this.bb_pos+u):0}floatsArray(){let u=this.bb.__offset(this.bb_pos,20);return u?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+u),this.bb.__vector_len(this.bb_pos+u)):null}ints(u){let o=this.bb.__offset(this.bb_pos,22);return o?this.bb.readInt64(this.bb.__vector(this.bb_pos+o)+8*u):this.bb.createLong(0,0)}intsLength(){let u=this.bb.__offset(this.bb_pos,22);return u?this.bb.__vector_len(this.bb_pos+u):0}strings(u,o){let d=this.bb.__offset(this.bb_pos,24);return d?this.bb.__string(this.bb.__vector(this.bb_pos+d)+4*u,o):null}stringsLength(){let u=this.bb.__offset(this.bb_pos,24);return u?this.bb.__vector_len(this.bb_pos+u):0}tensors(u,o){let d=this.bb.__offset(this.bb_pos,26);return d?(o||new v.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+d)+4*u),this.bb):null}tensorsLength(){let u=this.bb.__offset(this.bb_pos,26);return u?this.bb.__vector_len(this.bb_pos+u):0}graphs(u,o){let d=this.bb.__offset(this.bb_pos,28);return d?(o||new v.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+d)+4*u),this.bb):null}graphsLength(){let u=this.bb.__offset(this.bb_pos,28);return u?this.bb.__vector_len(this.bb_pos+u):0}static startAttribute(u){u.startObject(13)}static addName(u,o){u.addFieldOffset(0,o,0)}static addDocString(u,o){u.addFieldOffset(1,o,0)}static addType(u,o){u.addFieldInt32(2,o,v.experimental.fbs.AttributeType.UNDEFINED)}static addF(u,o){u.addFieldFloat32(3,o,0)}static addI(u,o){u.addFieldInt64(4,o,u.createLong(0,0))}static addS(u,o){u.addFieldOffset(5,o,0)}static addT(u,o){u.addFieldOffset(6,o,0)}static addG(u,o){u.addFieldOffset(7,o,0)}static addFloats(u,o){u.addFieldOffset(8,o,0)}static createFloatsVector(u,o){u.startVector(4,o.length,4);for(let d=o.length-1;d>=0;d--)u.addFloat32(o[d]);return u.endVector()}static startFloatsVector(u,o){u.startVector(4,o,4)}static addInts(u,o){u.addFieldOffset(9,o,0)}static createIntsVector(u,o){u.startVector(8,o.length,8);for(let d=o.length-1;d>=0;d--)u.addInt64(o[d]);return u.endVector()}static startIntsVector(u,o){u.startVector(8,o,8)}static addStrings(u,o){u.addFieldOffset(10,o,0)}static createStringsVector(u,o){u.startVector(4,o.length,4);for(let d=o.length-1;d>=0;d--)u.addOffset(o[d]);return u.endVector()}static startStringsVector(u,o){u.startVector(4,o,4)}static addTensors(u,o){u.addFieldOffset(11,o,0)}static createTensorsVector(u,o){u.startVector(4,o.length,4);for(let d=o.length-1;d>=0;d--)u.addOffset(o[d]);return u.endVector()}static startTensorsVector(u,o){u.startVector(4,o,4)}static addGraphs(u,o){u.addFieldOffset(12,o,0)}static createGraphsVector(u,o){u.startVector(4,o.length,4);for(let d=o.length-1;d>=0;d--)u.addOffset(o[d]);return u.endVector()}static startGraphsVector(u,o){u.startVector(4,o,4)}static endAttribute(u){return u.endObject()}static createAttribute(u,o,d,f,y,x,E,R,N,L,F,H,q,W){return b.startAttribute(u),b.addName(u,o),b.addDocString(u,d),b.addType(u,f),b.addF(u,y),b.addI(u,x),b.addS(u,E),b.addT(u,R),b.addG(u,N),b.addFloats(u,L),b.addInts(u,F),b.addStrings(u,H),b.addTensors(u,q),b.addGraphs(u,W),b.endAttribute(u)}}S.Attribute=b}(w.fbs||(w.fbs={}))}(v.experimental||(v.experimental={}))}(M.onnxruntime||(M.onnxruntime={})),function(v){!function(w){!function(S){class b{constructor(){this.bb=null,this.bb_pos=0}__init(u,o){return this.bb_pos=u,this.bb=o,this}static getRootAsGraph(u,o){return(o||new b).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsGraph(u,o){return u.setPosition(u.position()+I.flatbuffers.SIZE_PREFIX_LENGTH),(o||new b).__init(u.readInt32(u.position())+u.position(),u)}initializers(u,o){let d=this.bb.__offset(this.bb_pos,4);return d?(o||new v.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+d)+4*u),this.bb):null}initializersLength(){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.__vector_len(this.bb_pos+u):0}nodeArgs(u,o){let d=this.bb.__offset(this.bb_pos,6);return d?(o||new v.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+d)+4*u),this.bb):null}nodeArgsLength(){let u=this.bb.__offset(this.bb_pos,6);return u?this.bb.__vector_len(this.bb_pos+u):0}nodes(u,o){let d=this.bb.__offset(this.bb_pos,8);return d?(o||new v.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+d)+4*u),this.bb):null}nodesLength(){let u=this.bb.__offset(this.bb_pos,8);return u?this.bb.__vector_len(this.bb_pos+u):0}maxNodeIndex(){let u=this.bb.__offset(this.bb_pos,10);return u?this.bb.readUint32(this.bb_pos+u):0}nodeEdges(u,o){let d=this.bb.__offset(this.bb_pos,12);return d?(o||new v.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+d)+4*u),this.bb):null}nodeEdgesLength(){let u=this.bb.__offset(this.bb_pos,12);return u?this.bb.__vector_len(this.bb_pos+u):0}inputs(u,o){let d=this.bb.__offset(this.bb_pos,14);return d?this.bb.__string(this.bb.__vector(this.bb_pos+d)+4*u,o):null}inputsLength(){let u=this.bb.__offset(this.bb_pos,14);return u?this.bb.__vector_len(this.bb_pos+u):0}outputs(u,o){let d=this.bb.__offset(this.bb_pos,16);return d?this.bb.__string(this.bb.__vector(this.bb_pos+d)+4*u,o):null}outputsLength(){let u=this.bb.__offset(this.bb_pos,16);return u?this.bb.__vector_len(this.bb_pos+u):0}sparseInitializers(u,o){let d=this.bb.__offset(this.bb_pos,18);return d?(o||new v.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+d)+4*u),this.bb):null}sparseInitializersLength(){let u=this.bb.__offset(this.bb_pos,18);return u?this.bb.__vector_len(this.bb_pos+u):0}static startGraph(u){u.startObject(8)}static addInitializers(u,o){u.addFieldOffset(0,o,0)}static createInitializersVector(u,o){u.startVector(4,o.length,4);for(let d=o.length-1;d>=0;d--)u.addOffset(o[d]);return u.endVector()}static startInitializersVector(u,o){u.startVector(4,o,4)}static addNodeArgs(u,o){u.addFieldOffset(1,o,0)}static createNodeArgsVector(u,o){u.startVector(4,o.length,4);for(let d=o.length-1;d>=0;d--)u.addOffset(o[d]);return u.endVector()}static startNodeArgsVector(u,o){u.startVector(4,o,4)}static addNodes(u,o){u.addFieldOffset(2,o,0)}static createNodesVector(u,o){u.startVector(4,o.length,4);for(let d=o.length-1;d>=0;d--)u.addOffset(o[d]);return u.endVector()}static startNodesVector(u,o){u.startVector(4,o,4)}static addMaxNodeIndex(u,o){u.addFieldInt32(3,o,0)}static addNodeEdges(u,o){u.addFieldOffset(4,o,0)}static createNodeEdgesVector(u,o){u.startVector(4,o.length,4);for(let d=o.length-1;d>=0;d--)u.addOffset(o[d]);return u.endVector()}static startNodeEdgesVector(u,o){u.startVector(4,o,4)}static addInputs(u,o){u.addFieldOffset(5,o,0)}static createInputsVector(u,o){u.startVector(4,o.length,4);for(let d=o.length-1;d>=0;d--)u.addOffset(o[d]);return u.endVector()}static startInputsVector(u,o){u.startVector(4,o,4)}static addOutputs(u,o){u.addFieldOffset(6,o,0)}static createOutputsVector(u,o){u.startVector(4,o.length,4);for(let d=o.length-1;d>=0;d--)u.addOffset(o[d]);return u.endVector()}static startOutputsVector(u,o){u.startVector(4,o,4)}static addSparseInitializers(u,o){u.addFieldOffset(7,o,0)}static createSparseInitializersVector(u,o){u.startVector(4,o.length,4);for(let d=o.length-1;d>=0;d--)u.addOffset(o[d]);return u.endVector()}static startSparseInitializersVector(u,o){u.startVector(4,o,4)}static endGraph(u){return u.endObject()}static createGraph(u,o,d,f,y,x,E,R,N){return b.startGraph(u),b.addInitializers(u,o),b.addNodeArgs(u,d),b.addNodes(u,f),b.addMaxNodeIndex(u,y),b.addNodeEdges(u,x),b.addInputs(u,E),b.addOutputs(u,R),b.addSparseInitializers(u,N),b.endGraph(u)}}S.Graph=b}(w.fbs||(w.fbs={}))}(v.experimental||(v.experimental={}))}(M.onnxruntime||(M.onnxruntime={})),function(v){!function(w){!function(S){class b{constructor(){this.bb=null,this.bb_pos=0}__init(u,o){return this.bb_pos=u,this.bb=o,this}static getRootAsModel(u,o){return(o||new b).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsModel(u,o){return u.setPosition(u.position()+I.flatbuffers.SIZE_PREFIX_LENGTH),(o||new b).__init(u.readInt32(u.position())+u.position(),u)}irVersion(){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.readInt64(this.bb_pos+u):this.bb.createLong(0,0)}opsetImport(u,o){let d=this.bb.__offset(this.bb_pos,6);return d?(o||new v.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+d)+4*u),this.bb):null}opsetImportLength(){let u=this.bb.__offset(this.bb_pos,6);return u?this.bb.__vector_len(this.bb_pos+u):0}producerName(u){let o=this.bb.__offset(this.bb_pos,8);return o?this.bb.__string(this.bb_pos+o,u):null}producerVersion(u){let o=this.bb.__offset(this.bb_pos,10);return o?this.bb.__string(this.bb_pos+o,u):null}domain(u){let o=this.bb.__offset(this.bb_pos,12);return o?this.bb.__string(this.bb_pos+o,u):null}modelVersion(){let u=this.bb.__offset(this.bb_pos,14);return u?this.bb.readInt64(this.bb_pos+u):this.bb.createLong(0,0)}docString(u){let o=this.bb.__offset(this.bb_pos,16);return o?this.bb.__string(this.bb_pos+o,u):null}graph(u){let o=this.bb.__offset(this.bb_pos,18);return o?(u||new v.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}graphDocString(u){let o=this.bb.__offset(this.bb_pos,20);return o?this.bb.__string(this.bb_pos+o,u):null}static startModel(u){u.startObject(9)}static addIrVersion(u,o){u.addFieldInt64(0,o,u.createLong(0,0))}static addOpsetImport(u,o){u.addFieldOffset(1,o,0)}static createOpsetImportVector(u,o){u.startVector(4,o.length,4);for(let d=o.length-1;d>=0;d--)u.addOffset(o[d]);return u.endVector()}static startOpsetImportVector(u,o){u.startVector(4,o,4)}static addProducerName(u,o){u.addFieldOffset(2,o,0)}static addProducerVersion(u,o){u.addFieldOffset(3,o,0)}static addDomain(u,o){u.addFieldOffset(4,o,0)}static addModelVersion(u,o){u.addFieldInt64(5,o,u.createLong(0,0))}static addDocString(u,o){u.addFieldOffset(6,o,0)}static addGraph(u,o){u.addFieldOffset(7,o,0)}static addGraphDocString(u,o){u.addFieldOffset(8,o,0)}static endModel(u){return u.endObject()}static createModel(u,o,d,f,y,x,E,R,N,L){return b.startModel(u),b.addIrVersion(u,o),b.addOpsetImport(u,d),b.addProducerName(u,f),b.addProducerVersion(u,y),b.addDomain(u,x),b.addModelVersion(u,E),b.addDocString(u,R),b.addGraph(u,N),b.addGraphDocString(u,L),b.endModel(u)}}S.Model=b}(w.fbs||(w.fbs={}))}(v.experimental||(v.experimental={}))}(M.onnxruntime||(M.onnxruntime={})),function(v){!function(w){!function(S){class b{constructor(){this.bb=null,this.bb_pos=0}__init(u,o){return this.bb_pos=u,this.bb=o,this}static getRootAsKernelCreateInfos(u,o){return(o||new b).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsKernelCreateInfos(u,o){return u.setPosition(u.position()+I.flatbuffers.SIZE_PREFIX_LENGTH),(o||new b).__init(u.readInt32(u.position())+u.position(),u)}nodeIndices(u){let o=this.bb.__offset(this.bb_pos,4);return o?this.bb.readUint32(this.bb.__vector(this.bb_pos+o)+4*u):0}nodeIndicesLength(){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.__vector_len(this.bb_pos+u):0}nodeIndicesArray(){let u=this.bb.__offset(this.bb_pos,4);return u?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+u),this.bb.__vector_len(this.bb_pos+u)):null}kernelDefHashes(u){let o=this.bb.__offset(this.bb_pos,6);return o?this.bb.readUint64(this.bb.__vector(this.bb_pos+o)+8*u):this.bb.createLong(0,0)}kernelDefHashesLength(){let u=this.bb.__offset(this.bb_pos,6);return u?this.bb.__vector_len(this.bb_pos+u):0}static startKernelCreateInfos(u){u.startObject(2)}static addNodeIndices(u,o){u.addFieldOffset(0,o,0)}static createNodeIndicesVector(u,o){u.startVector(4,o.length,4);for(let d=o.length-1;d>=0;d--)u.addInt32(o[d]);return u.endVector()}static startNodeIndicesVector(u,o){u.startVector(4,o,4)}static addKernelDefHashes(u,o){u.addFieldOffset(1,o,0)}static createKernelDefHashesVector(u,o){u.startVector(8,o.length,8);for(let d=o.length-1;d>=0;d--)u.addInt64(o[d]);return u.endVector()}static startKernelDefHashesVector(u,o){u.startVector(8,o,8)}static endKernelCreateInfos(u){return u.endObject()}static createKernelCreateInfos(u,o,d){return b.startKernelCreateInfos(u),b.addNodeIndices(u,o),b.addKernelDefHashes(u,d),b.endKernelCreateInfos(u)}}S.KernelCreateInfos=b}(w.fbs||(w.fbs={}))}(v.experimental||(v.experimental={}))}(M.onnxruntime||(M.onnxruntime={})),function(v){!function(w){!function(S){class b{constructor(){this.bb=null,this.bb_pos=0}__init(u,o){return this.bb_pos=u,this.bb=o,this}static getRootAsSubGraphSessionState(u,o){return(o||new b).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsSubGraphSessionState(u,o){return u.setPosition(u.position()+I.flatbuffers.SIZE_PREFIX_LENGTH),(o||new b).__init(u.readInt32(u.position())+u.position(),u)}graphId(u){let o=this.bb.__offset(this.bb_pos,4);return o?this.bb.__string(this.bb_pos+o,u):null}sessionState(u){let o=this.bb.__offset(this.bb_pos,6);return o?(u||new v.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}static startSubGraphSessionState(u){u.startObject(2)}static addGraphId(u,o){u.addFieldOffset(0,o,0)}static addSessionState(u,o){u.addFieldOffset(1,o,0)}static endSubGraphSessionState(u){let o=u.endObject();return u.requiredField(o,4),o}static createSubGraphSessionState(u,o,d){return b.startSubGraphSessionState(u),b.addGraphId(u,o),b.addSessionState(u,d),b.endSubGraphSessionState(u)}}S.SubGraphSessionState=b}(w.fbs||(w.fbs={}))}(v.experimental||(v.experimental={}))}(M.onnxruntime||(M.onnxruntime={})),function(v){!function(w){!function(S){class b{constructor(){this.bb=null,this.bb_pos=0}__init(u,o){return this.bb_pos=u,this.bb=o,this}static getRootAsSessionState(u,o){return(o||new b).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsSessionState(u,o){return u.setPosition(u.position()+I.flatbuffers.SIZE_PREFIX_LENGTH),(o||new b).__init(u.readInt32(u.position())+u.position(),u)}kernels(u){let o=this.bb.__offset(this.bb_pos,4);return o?(u||new v.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}subGraphSessionStates(u,o){let d=this.bb.__offset(this.bb_pos,6);return d?(o||new v.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+d)+4*u),this.bb):null}subGraphSessionStatesLength(){let u=this.bb.__offset(this.bb_pos,6);return u?this.bb.__vector_len(this.bb_pos+u):0}static startSessionState(u){u.startObject(2)}static addKernels(u,o){u.addFieldOffset(0,o,0)}static addSubGraphSessionStates(u,o){u.addFieldOffset(1,o,0)}static createSubGraphSessionStatesVector(u,o){u.startVector(4,o.length,4);for(let d=o.length-1;d>=0;d--)u.addOffset(o[d]);return u.endVector()}static startSubGraphSessionStatesVector(u,o){u.startVector(4,o,4)}static endSessionState(u){return u.endObject()}static createSessionState(u,o,d){return b.startSessionState(u),b.addKernels(u,o),b.addSubGraphSessionStates(u,d),b.endSessionState(u)}}S.SessionState=b}(w.fbs||(w.fbs={}))}(v.experimental||(v.experimental={}))}(M.onnxruntime||(M.onnxruntime={})),function(v){!function(w){!function(S){class b{constructor(){this.bb=null,this.bb_pos=0}__init(u,o){return this.bb_pos=u,this.bb=o,this}static getRootAsInferenceSession(u,o){return(o||new b).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsInferenceSession(u,o){return u.setPosition(u.position()+I.flatbuffers.SIZE_PREFIX_LENGTH),(o||new b).__init(u.readInt32(u.position())+u.position(),u)}static bufferHasIdentifier(u){return u.__has_identifier("ORTM")}ortVersion(u){let o=this.bb.__offset(this.bb_pos,4);return o?this.bb.__string(this.bb_pos+o,u):null}model(u){let o=this.bb.__offset(this.bb_pos,6);return o?(u||new v.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}sessionState(u){let o=this.bb.__offset(this.bb_pos,8);return o?(u||new v.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}static startInferenceSession(u){u.startObject(3)}static addOrtVersion(u,o){u.addFieldOffset(0,o,0)}static addModel(u,o){u.addFieldOffset(1,o,0)}static addSessionState(u,o){u.addFieldOffset(2,o,0)}static endInferenceSession(u){return u.endObject()}static finishInferenceSessionBuffer(u,o){u.finish(o,"ORTM")}static finishSizePrefixedInferenceSessionBuffer(u,o){u.finish(o,"ORTM",!0)}static createInferenceSession(u,o,d,f){return b.startInferenceSession(u),b.addOrtVersion(u,o),b.addModel(u,d),b.addSessionState(u,f),b.endInferenceSession(u)}}S.InferenceSession=b}(w.fbs||(w.fbs={}))}(v.experimental||(v.experimental={}))}(M.onnxruntime||(M.onnxruntime={}))},7448:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.OnnxjsSessionHandler=void 0;const I=k(2174),D=k(9162);M.OnnxjsSessionHandler=class{constructor(P){this.session=P,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}dispose(){return _asyncToGenerator(function*(){})()}run(P,v,w){var S=this;return _asyncToGenerator(function*(){const b=new Map;for(const o in P)if(Object.hasOwnProperty.call(P,o)){const d=P[o];b.set(o,new D.Tensor(d.dims,d.type,void 0,void 0,d.data))}const p=yield S.session.run(b),u={};return p.forEach((o,d)=>{u[d]=new I.Tensor(o.type,o.data,o.dims)}),u})()}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}},6919:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.Session=void 0;const I=k(7067),D=k(1296),P=k(7091),v=k(1036),w=k(6231),S=k(2644);M.Session=class{constructor(b={}){this._initialized=!1,this.backendHint=b.backendHint,this.profiler=w.Profiler.create(b.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}loadModel(b,p,u){var o=this;return _asyncToGenerator(function*(){yield o.profiler.event("session","Session.loadModel",_asyncToGenerator(function*(){const d=yield P.resolveBackend(o.backendHint);if(o.sessionHandler=d.createSessionHandler(o.context),o._model=new S.Model,"string"==typeof b){const f=b.endsWith(".ort");if("undefined"==typeof fetch){const y=yield D.promisify(I.readFile)(b);o.initialize(y,f)}else{const y=yield fetch(b),x=yield y.arrayBuffer();o.initialize(new Uint8Array(x),f)}}else if(ArrayBuffer.isView(b))o.initialize(b);else{const f=new Uint8Array(b,p||0,u||b.byteLength);o.initialize(f)}}))})()}initialize(b,p){if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",()=>{this._model.load(b,this.sessionHandler.transformGraph?this.sessionHandler:void 0,p),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new v.ExecutionPlan(this._model.graph,this._ops,this.profiler)}),this._initialized=!0}run(b){var p=this;return _asyncToGenerator(function*(){if(!p._initialized)throw new Error("session not initialized yet");return p.profiler.event("session","Session.run",_asyncToGenerator(function*(){const u=p.normalizeAndValidateInputs(b),o=yield p._executionPlan.execute(p.sessionHandler,u);return p.createOutput(o)}))})()}normalizeAndValidateInputs(b){const p=this._model.graph.getInputNames();if(Array.isArray(b)){if(b.length!==p.length)throw new Error(`incorrect input array length: expected ${p.length} but got ${b.length}`)}else{if(b.size!==p.length)throw new Error(`incorrect input map size: expected ${p.length} but got ${b.size}`);const u=new Array(b.size);let o=0;for(let d=0;d<p.length;++d){const f=b.get(p[d]);if(!f)throw new Error(`missing input tensor for: '${name}'`);u[o++]=f}b=u}if(this.context.graphInputTypes&&0!==this.context.graphInputTypes.length&&this.context.graphInputDims&&0!==this.context.graphInputDims.length)this.validateInputTensorDims(this.context.graphInputDims,b,!1);else{const u=this._model.graph.getInputIndices(),o=this._model.graph.getValues(),d=new Array(u.length);for(let f=0;f<u.length;++f){const y=o[u[f]];d[f]=y.type.shape.dims,this.context.graphInputTypes.push(y.type.tensorType),this.context.graphInputDims.push(b[f].dims)}this.validateInputTensorDims(d,b,!0)}return this.validateInputTensorTypes(this.context.graphInputTypes,b),b}validateInputTensorTypes(b,p){for(let u=0;u<p.length;u++){const o=b[u],d=p[u].type;if(o!==d)throw new Error(`input tensor[${u}] check failed: expected type '${o}' but got ${d}`)}}validateInputTensorDims(b,p,u){for(let o=0;o<p.length;o++){const d=b[o],f=p[o].dims;if(!this.compareTensorDims(d,f,u))throw new Error(`input tensor[${o}] check failed: expected shape '[${d.join(",")}]' but got [${f.join(",")}]`)}}compareTensorDims(b,p,u){if(b.length!==p.length)return!1;for(let o=0;o<b.length;++o)if(b[o]!==p[o]&&(!u||0!==b[o]))return!1;return!0}createOutput(b){const p=this._model.graph.getOutputNames();if(b.length!==p.length)throw new Error("expected number of outputs do not match number of generated outputs");const u=new Map;for(let o=0;o<p.length;++o)u.set(p[o],b[o]);return u}initializeOps(b){const p=b.getNodes();this._ops=new Array(p.length);for(let u=0;u<p.length;u++)this._ops[u]=this.sessionHandler.resolve(p[u],this._model.opsets,b)}}},9162:function(ye,M,k){"use strict";var I=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(M,"__esModule",{value:!0}),M.Tensor=void 0;const D=k(3442),P=I(k(3720)),v=k(1446),w=k(9395),S=k(2517);var b=w.onnxruntime.experimental.fbs;class p{constructor(x,E,R,N,L,F=D.Guid.create()){this.dims=x,this.type=E,this.dataProvider=R,this.asyncDataProvider=N,this.cache=L,this.dataId=F,this.size=S.ShapeUtil.validateDimsAndCalcSize(x);const H=this.size,q=void 0===R&&void 0===N&&void 0===L;if(void 0!==L&&L.length!==H)throw new RangeError("Input dims doesn't match data length.");if("string"===E){if(!(void 0===L||Array.isArray(L)&&L.every(W=>"string"==typeof W)))throw new TypeError("cache should be a string array");q&&(this.cache=new Array(H))}else{if(void 0!==L){const W=o(E);if(!(L instanceof W))throw new TypeError(`cache should be type ${W.name}`)}if(q){const W=new ArrayBuffer(H*function(U){switch(U){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error(`cannot calculate sizeof() on type ${U}`)}}(E));this.cache=(U=W,new(o(E))(U))}}var U}get data(){if(void 0===this.cache){const x=this.dataProvider(this.dataId);if(x.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=x}return this.cache}get stringData(){if("string"!==this.type)throw new TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}}get numberData(){if("string"!==this.type)return this.data;throw new TypeError("type cannot be non-number (string)")}get(x){return this.data[S.ShapeUtil.indicesToOffset(x,this.strides)]}set(x,E){this.data[S.ShapeUtil.indicesToOffset(x,this.strides)]=E}getData(){var x=this;return _asyncToGenerator(function*(){return void 0===x.cache&&(x.cache=yield x.asyncDataProvider(x.dataId)),x.cache})()}get strides(){return this._strides||(this._strides=S.ShapeUtil.computeStrides(this.dims)),this._strides}static fromProto(x){if(!x)throw new Error("cannot construct Value from an empty tensor");const E=S.ProtoUtil.tensorDataTypeFromProto(x.dataType),R=S.ProtoUtil.tensorDimsFromProto(x.dims),N=new p(R,E);if("string"===E)x.stringData.forEach((L,F)=>{N.data[F]=S.decodeUtf8String(L)});else if(x.rawData&&"number"==typeof x.rawData.byteLength&&x.rawData.byteLength>0){const L=N.data,F=new DataView(x.rawData.buffer,x.rawData.byteOffset,x.rawData.byteLength),H=u(x.dataType),q=x.rawData.byteLength/H;if(x.rawData.byteLength%H!=0)throw new Error("invalid buffer length");if(L.length!==q)throw new Error("buffer length mismatch");for(let W=0;W<q;W++){const U=f(F,x.dataType,W*H);L[W]=U}}else{let L;switch(x.dataType){case v.onnx.TensorProto.DataType.FLOAT:L=x.floatData;break;case v.onnx.TensorProto.DataType.INT32:case v.onnx.TensorProto.DataType.INT16:case v.onnx.TensorProto.DataType.UINT16:case v.onnx.TensorProto.DataType.INT8:case v.onnx.TensorProto.DataType.UINT8:case v.onnx.TensorProto.DataType.BOOL:L=x.int32Data;break;case v.onnx.TensorProto.DataType.INT64:L=x.int64Data;break;case v.onnx.TensorProto.DataType.DOUBLE:L=x.doubleData;break;case v.onnx.TensorProto.DataType.UINT32:case v.onnx.TensorProto.DataType.UINT64:L=x.uint64Data;break;default:throw new Error("unspecific error")}if(null==L)throw new Error("failed to populate data from a tensorproto value");const F=N.data;if(F.length!==L.length)throw new Error("array length mismatch");for(let H=0;H<L.length;H++){const q=L[H];F[H]=P.default.isLong(q)?d(q,x.dataType):q}}return N}static fromData(x,E,R){return new p(E,R,void 0,void 0,x)}static fromOrtTensor(x){if(!x)throw new Error("cannot construct Value from an empty tensor");const E=S.ProtoUtil.tensorDimsFromORTFormat(x),R=S.ProtoUtil.tensorDataTypeFromProto(x.dataType()),N=new p(E,R);if("string"===R)for(let L=0;L<x.stringDataLength();L++)N.data[L]=x.stringData(L);else if(x.rawDataArray()&&"number"==typeof x.rawDataLength()&&x.rawDataLength()>0){const L=N.data,F=new DataView(x.rawDataArray().buffer,x.rawDataArray().byteOffset,x.rawDataLength()),H=u(x.dataType()),q=x.rawDataLength()/H;if(x.rawDataLength()%H!=0)throw new Error("invalid buffer length");if(L.length!==q)throw new Error("buffer length mismatch");for(let W=0;W<q;W++){const U=f(F,x.dataType(),W*H);L[W]=U}}return N}}function u(y){switch(y){case v.onnx.TensorProto.DataType.UINT8:case v.onnx.TensorProto.DataType.INT8:case v.onnx.TensorProto.DataType.BOOL:return 1;case v.onnx.TensorProto.DataType.UINT16:case v.onnx.TensorProto.DataType.INT16:return 2;case v.onnx.TensorProto.DataType.FLOAT:case v.onnx.TensorProto.DataType.INT32:case v.onnx.TensorProto.DataType.UINT32:return 4;case v.onnx.TensorProto.DataType.INT64:case v.onnx.TensorProto.DataType.DOUBLE:case v.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error(`cannot calculate sizeof() on type ${v.onnx.TensorProto.DataType[y]}`)}}function o(y){switch(y){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function d(y,x){if(x===v.onnx.TensorProto.DataType.INT64||x===b.TensorDataType.INT64){if(y.greaterThanOrEqual(2147483648)||y.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else{if(x!==v.onnx.TensorProto.DataType.UINT32&&x!==b.TensorDataType.UINT32&&x!==v.onnx.TensorProto.DataType.UINT64&&x!==b.TensorDataType.UINT64)throw new TypeError(`not a LONG type: ${v.onnx.TensorProto.DataType[x]}`);if(y.greaterThanOrEqual(4294967296)||y.lessThan(0))throw new TypeError("uint64 is not supported")}return y.toNumber()}function f(y,x,E){switch(x){case v.onnx.TensorProto.DataType.BOOL:case v.onnx.TensorProto.DataType.UINT8:return y.getUint8(E);case v.onnx.TensorProto.DataType.INT8:return y.getInt8(E);case v.onnx.TensorProto.DataType.UINT16:return y.getUint16(E,!0);case v.onnx.TensorProto.DataType.INT16:return y.getInt16(E,!0);case v.onnx.TensorProto.DataType.FLOAT:return y.getFloat32(E,!0);case v.onnx.TensorProto.DataType.INT32:return y.getInt32(E,!0);case v.onnx.TensorProto.DataType.UINT32:return y.getUint32(E,!0);case v.onnx.TensorProto.DataType.INT64:return d(P.default.fromBits(y.getUint32(E,!0),y.getUint32(E+4,!0),!1),x);case v.onnx.TensorProto.DataType.DOUBLE:return y.getFloat64(E,!0);case v.onnx.TensorProto.DataType.UINT64:return d(P.default.fromBits(y.getUint32(E,!0),y.getUint32(E+4,!0),!0),x);default:throw new Error(`cannot read from DataView for type ${v.onnx.TensorProto.DataType[x]}`)}}M.Tensor=p},2517:function(ye,M,k){"use strict";var I=this&&this.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(M,"__esModule",{value:!0}),M.decodeUtf8String=M.MAX_CLIP=M.MIN_CLIP=M.PoolConvUtil=M.ReduceUtil=M.SplitUtil=M.MathUtil=M.ShapeUtil=M.LongUtil=M.ProtoUtil=M.GemmUtil=M.arrayCopyHelper=M.BroadcastUtil=M.MatMulUtil=M.ArrayUtil=M.assert=M.checkInputsShape=void 0;const D=k(4819),P=I(k(3720)),v=k(1446),w=k(9162);M.checkInputsShape=function(x,...E){if(!x||x.length!==E.length)return!1;for(let R=0;R<x.length;R++)if(!x[R].dims||x[R].dims.length!==E[R])return!1;return!0},M.assert=function(x,E){if(!x)throw new Error("string"==typeof E?E:E())},M.ArrayUtil=class{static arraysEqual(x,E){if(x.length!==E.length)return!1;for(let R=0;R<x.length;R++)if(x[R]!==E[R])return!1;return!0}};class S{static preprocessInputShapes(E,R){return[1===E.length?[1,E[0]]:E,1===R.length?[R[0],1]:R]}static postprocessOutputShape(E,R,N){1===R&&E.splice(E.length-2,1),1===N&&E.pop()}static calcMatMulShape(E,R){return E[1]!==R[0]?void 0:[E[0],R[1]]}}M.MatMulUtil=S;class b{static calcShape(E,R,N=!1){const L=E.length,F=R.length;if(0===L)return R;if(0===F)return E;const H=Math.max(E.length,R.length),q=new Array(H);if(N){if(L<2||F<2)return;const W=S.calcMatMulShape([E[L-2],E[L-1]],[R[F-2],R[F-1]]);if(void 0===W)return;[q[H-2],q[H-1]]=W}for(let W=N?3:1;W<=H;W++){const U=L-W<0?1:E[L-W],ne=F-W<0?1:R[F-W];if(U!==ne&&U>1&&ne>1)return;q[H-W]=Math.max(U,ne)}return q}static index(E,R){const N=new Array(R.length);return b.fillIndex(E,R,N),N}static fillIndex(E,R,N){const L=E.length-R.length;for(let F=0;F<R.length;F++)N[F]=E[L+F]%R[F]}static calc(E,R,N,L,F){const H=b.calcShape(E.dims,R.dims);if(H){if(L&&!o.areEqual(H,E.dims))return;const q=o.size(H),W=L?E:new w.Tensor(H,F||E.type);if(0===H.length)W.set([],N(E.get([]),R.get([])));else{const U=new Array(H.length),ne=new Array(E.dims.length),de=new Array(R.dims.length);let De,ue=0,Ae=0,Se=!1,he=!1;0===E.dims.length&&(ue=E.get([]),Se=!0),0===R.dims.length&&(Ae=R.get([]),he=!0);for(let _e=0;_e<q;_e++){De=_e;for(let Xe=H.length-1;Xe>=0;Xe--)U[Xe]=De%H[Xe],De=Math.floor(De/H[Xe]);Se||(b.fillIndex(U,E.dims,ne),ue=E.get(ne)),he||(b.fillIndex(U,R.dims,de),Ae=R.get(de)),W.set(U,N(ue,Ae))}}return W}}static isValidBroadcast(E,R){const N=E.length,L=R.length;if(N>L)return!1;for(let F=1;F<=N;F++)if(1!==E[N-F]&&E[N-F]!==R[L-F])return!1;return!0}static getBroadcastDims(E,R){const N=E.length,L=[];for(let F=0;F<N;F++){const H=N-1-F,q=E[H]||1;(R[R.length-1-F]||1)>1&&1===q&&L.unshift(H)}return L}}M.BroadcastUtil=b,M.arrayCopyHelper=function(x,E,R,N,L){if(N<0||N>=E.length)throw new Error("sourceIndex out of bounds");if(R<0||R>=x.length)throw new Error("targetIndex out of bounds");if(N+L>E.length)throw new Error("source indices to be copied are outside bounds");if(R+L>x.length)throw new Error("target array is too small to hold result");for(let F=0;F<L;F++)x[R+F]=E[N+F]},M.GemmUtil=class{static getShapeOfGemmResult(x,E,R,N,L){if(2!==x.length||2!==R.length)throw new Error("shape need to be of size 2");let F,H,q;E?(F=x[1],H=x[0]):(F=x[0],H=x[1]);let W=-1;if(N?(q=R[0],W=1):(q=R[1],W=0),R[W]!==H)throw new Error("dimension mismatch");if(F<=0||q<=0||H<=0)throw new Error("invalid shape specified");if(L&&!b.isValidBroadcast(L,[F,q]))throw new Error("gemm: invalid bias shape for broadcast");return[F,q,H]}};class p{static tensorDataTypeFromProto(E){switch(E){case v.onnx.TensorProto.DataType.INT8:return"int8";case v.onnx.TensorProto.DataType.UINT8:return"uint8";case v.onnx.TensorProto.DataType.BOOL:return"bool";case v.onnx.TensorProto.DataType.INT16:return"int16";case v.onnx.TensorProto.DataType.UINT16:return"uint16";case v.onnx.TensorProto.DataType.INT32:return"int32";case v.onnx.TensorProto.DataType.UINT32:return"uint32";case v.onnx.TensorProto.DataType.FLOAT:return"float32";case v.onnx.TensorProto.DataType.DOUBLE:return"float64";case v.onnx.TensorProto.DataType.STRING:return"string";case v.onnx.TensorProto.DataType.INT64:return"int32";case v.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error(`unsupported data type: ${v.onnx.TensorProto.DataType[E]}`)}}static tensorDataTypeStringToEnum(E){switch(E){case"int8":return v.onnx.TensorProto.DataType.INT8;case"uint8":return v.onnx.TensorProto.DataType.UINT8;case"bool":return v.onnx.TensorProto.DataType.BOOL;case"int16":return v.onnx.TensorProto.DataType.INT16;case"uint16":return v.onnx.TensorProto.DataType.UINT16;case"int32":return v.onnx.TensorProto.DataType.INT32;case"uint32":return v.onnx.TensorProto.DataType.UINT32;case"float32":return v.onnx.TensorProto.DataType.FLOAT;case"float64":return v.onnx.TensorProto.DataType.DOUBLE;case"string":return v.onnx.TensorProto.DataType.STRING;case"int64":return v.onnx.TensorProto.DataType.INT64;case"uint64":return v.onnx.TensorProto.DataType.UINT64;default:throw new Error(`unsupported data type: ${E}`)}}static tensorDimsFromProto(E){return E.map(R=>P.default.isLong(R)?R.toNumber():R)}static tensorValueTypeFromProto(E){return{tensorType:p.tensorDataTypeFromProto(E.elemType),shape:{dims:p.tensorDimsFromProto(E.shape.dim.map(R=>R.dimValue))}}}static tensorDimsFromORTFormat(E){const R=[];for(let N=0;N<E.dimsLength();N++)R.push(u.longToNumber(E.dims(N)));return R}static tensorAttributesFromORTFormat(E){const R=[];for(let N=0;N<E.attributesLength();N++)R.push(E.attributes(N));return R}}M.ProtoUtil=p;class u{static longToNumber(E,R){return P.default.isLong(E)?E.toNumber():E instanceof D.flatbuffers.Long?P.default.fromValue({low:E.low,high:E.high,unsigned:null!=R&&R}).toNumber():E}static isLong(E){return P.default.isLong(E)||E instanceof D.flatbuffers.Long}}M.LongUtil=u;class o{static size(E){return o.getSizeFromDimensionRange(E,0,E.length)}static sizeFromDimension(E,R){if(R<0||R>E.length)throw new Error(`invalid dimension of ${R} for sizeFromDimension as Tensor has ${E.length} dimensions.`);return o.getSizeFromDimensionRange(E,R,E.length)}static sizeToDimension(E,R){if(R<0||R>E.length)throw new Error(`invalid dimension of ${R} for sizeToDimension as Tensor has ${E.length} dimensions.`);return o.getSizeFromDimensionRange(E,0,R)}static getSizeFromDimensionRange(E,R,N){let L=1;for(let F=R;F<N;F++){if(E[F]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");L*=E[F]}return L}static computeStrides(E){const R=E.length;if(0===R)return[];if(1===R)return[1];const N=new Array(R);N[R-1]=1,N[R-2]=E[R-1];for(let L=R-3;L>=0;--L)N[L]=N[L+1]*E[L+1];return N}static transpose(E){return E.slice().reverse()}static indicesToOffset(E,R,N){void 0===N&&(N=E.length);let L=0;for(let F=0;F<N;++F)L+=R[F]*E[F];return L}static offsetToIndices(E,R){const N=R.length;if(0===N)return[];if(1===N)return[E*R[0]];const L=new Array(R.length);for(let F=0;F<L.length-1;++F)L[F]=Math.floor(E/R[F]),E-=L[F]*R[F];return L[L.length-1]=E,L}static normalizeAxis(E,R){if(E<-R&&E>=R)throw new Error("unsupported axis for this operation.");return E<0?E+R:E}static normalizeAxes(E,R){return E.map(N=>this.normalizeAxis(N,R))}static incrementIndex(E,R,N){if(0===R.length||0===E.length)throw new Error("Index incrementing unsupported for scalar Tensor");if(void 0===N)N=R.length;else if(N<=0||N>R.length)throw new Error("Incorrect axis to increment on");for(let L=N-1;L>=0&&(E[L]++,!(E[L]<R[L]));--L)E[L]=0}static calculateReshapedDims(E,R){if(0===R.length){if(0===E.length||1===o.size(E))return[];throw new Error("cannot reshape to a scalar Tensor")}const N=R.length,L=new Array(N);let F=-1,H=1;for(let W=0;W<N;W++){if(R[W]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(-1===R[W]){if(-1!==F)throw new Error("at most one dimension in shape hints can be -1");F=W}else{if(0===R[W]){if(W>=E.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");L[W]=E[W]}else L[W]=R[W];H*=L[W]}}const q=o.size(E);if(-1!==F){if(q%H!=0)throw new Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${E}] Output shape: [${R}]`);L[F]=q/H}else if(H!==q)throw new Error("reshapedDims and originalDims don't have matching sizes");return L}static sortBasedOnPerm(E,R){return R?R.map(N=>E[N]):E.slice().reverse()}static padShape(E,R){const N=E.length;return E.map((L,F)=>L+R[F]+R[F+N])}static areEqual(E,R){return E.length===R.length&&E.every((N,L)=>N===R[L])}static validateDimsAndCalcSize(E){if(E.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");let R=1;for(const N of E){if(!Number.isInteger(N))throw new TypeError(`Invalid shape: ${N} is not an integer`);if(N<0||N>2147483647)throw new TypeError(`Invalid shape: length ${N} is not allowed`);R*=N}return R}static flattenShape(E,R){R<0&&(R+=E.length);const N=E.reduce((F,H)=>F*H,1),L=E.slice(R).reduce((F,H)=>F*H,1);return[N/L,L]}static squeezeShape(E,R){const N=new Array;R=o.normalizeAxes(R,E.length);for(let L=0;L<E.length;L++){const F=R.indexOf(L)>=0;if(F&&1!==E[L])throw new Error("squeeze an axis of size different than 1");(0===R.length&&E[L]>1||R.length>0&&!F)&&N.push(E[L])}return N}static unsqueezeShape(E,R){const N=new Array(E.length+R.length);N.fill(0);for(let F=0;F<R.length;F++){const H=o.normalizeAxis(R[F],E.length);if(H>=N.length)throw new Error("'axes' has an out of range axis");if(0!==N[H])throw new Error("'axes' has a duplicate axis");N[H]=1}let L=0;for(let F=0;F<N.length;F++)0===N[F]&&(N[F]=E[L++]);if(L!==E.length)throw new Error("the unsqueezed dimension could not be established");return N}}M.ShapeUtil=o,M.MathUtil=class{static sqr(x,E,R,N,L){if(N<0||N>=E.length)throw new Error("sourceIndex out of bounds");if(R<0||R>=x.length)throw new Error("targetIndex out of bounds");if(N+L>E.length)throw new Error("source indices to be copied are outside bounds");if(R+L>x.length)throw new Error("target array is too small to hold result");for(let F=0;F<L;F++)x[R+F]+=Math.pow(E[N+F],2)}static axpy(x,E,R,N,L,F){if(N<0||N>=E.length)throw new Error("sourceIndex out of bounds");if(R<0||R>=x.length)throw new Error("targetIndex out of bounds");if(N+L>E.length)throw new Error("source indices to be copied are outside bounds");if(R+L>x.length)throw new Error("target array is too small to hold result");for(let H=0;H<L;H++)x[R+H]+=F*E[N+H]}static powx(x,E,R,N,L,F){if(N<0||N>=E.length)throw new Error("sourceIndex out of bounds");if(R<0||R>=x.length)throw new Error("targetIndex out of bounds");if(N+L>E.length)throw new Error("source indices to be copied are outside bounds");if(R+L>x.length)throw new Error("target array is too small to hold result");for(let H=0;H<L;H++)x[R+H]=Math.pow(E[N+H],F)}static mul(x,E,R,N,L){if(N<0||N>=E.length)throw new Error("sourceIndex out of bounds");if(R<0||R>=x.length)throw new Error("targetIndex out of bounds");if(N+L>E.length)throw new Error("source indices to be copied are outside bounds");if(R+L>x.length)throw new Error("target array is too small to hold result");for(let F=0;F<L;F++)x[R+F]=E[N+F]*x[R+F]}};class d{static splitShape(E,R,N,L){if(0===N.length){if(!L)throw new Error("need to know number of outputs when the 'split' attribute is not specified");d.determineSplit(E[R],L,N)}const F=[],H=[0];for(let q=0;q<N.length;++q){0!==q&&H.push(H[q-1]+N[q-1]);const W=E.slice();W[R]=N[q],F.push(W)}return[F,H]}static determineSplit(E,R,N){if(E%R!=0)throw new Error("cannot split tensor to equal sized parts");for(let L=0;L<R;++L)N.push(E/R)}}M.SplitUtil=d;class f{static calcReduce(E,R,N,L,F){const H=E.dims.slice(0);0===R.length&&H.forEach((ue,Ae)=>R.push(Ae));const q=f.calcReduceShape(H,R,!0),W=o.size(q),U=new w.Tensor(q,E.type),ne=o.computeStrides(q),de=o.computeStrides(H),De=new Array(H.length);for(let ue=0;ue<W;ue++){const Ae=o.offsetToIndices(ue,ne);b.fillIndex(Ae,H,De),U.set(Ae,f.calcReduceByAxis(E.numberData,R,H,0,o.indicesToOffset(De,de),L,F))}return N?U:new w.Tensor(f.calcReduceShape(H,R,N),U.type,void 0,void 0,U.data,U.dataId)}static calcReduceByAxis(E,R,N,L,F,H,q){let W=0;if(L>=R.length)return H(E[F]);const U=R[L],ne=U>=N.length?1:o.size(N.slice(U+1));for(let de=0;de<N[U];de++)W=0===de?f.calcReduceByAxis(E,R,N,L+1,F,H,q):q(W,f.calcReduceByAxis(E,R,N,L+1,F,H,q)),F+=ne;return W}static calcReduceShape(E,R,N){const L=E.slice();for(let F=0;F<R.length;F++)L[R[F]]=N?1:0;return L.filter(F=>0!==F)}}M.ReduceUtil=f;class y{static adjustPoolAttributes(E,R,N,L,F,H){if(!E&&N.length!==R.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(E)for(let q=0;q<R.length-2;q++)q>=N.length?N.push(R[q+2]):N[q]=R[q+2];for(let q=0;q<N.length;q++)if(q<L.length){if(L[q]<0)throw new Error("strides should be greater than or equal to 1")}else L.push(1);for(let q=0;q<N.length;q++)if(q<F.length){if(F[q]<0)throw new Error("dilations should be greater than or equal to 1")}else F.push(1);for(let q=0;q<2*N.length;q++)if(q<H.length){if(H[q]<0)throw new Error("pad should be greater than or equal to 1")}else H.push(0);for(let q=0;q<N.length;q++){if(N[q]<=0)throw new Error("kernel shapes need to be greater than 0");if(H[q]>=N[q]||H[q+N.length]>=N[q])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(E,R,N,L,F,H){if(H){if(F.length!==2*(E.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(R.length!==E.length-2)throw new Error("length of strides should be the length of data dimensions");if(L.length!==E.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let q=0;q<E.length-2;q++)y.adjustPadAndReturnShape(E[q+2],R[q],N[q],L[q],F,q,q+E.length-2,H)}}static computePoolOutputShape(E,R,N,L,F,H,q){if(R.length<=0)throw new Error("input shape must be of size greater than 0");const W=[R[0],R[1]];return y.computeShapeHelper(E,R,W,N,L,F,H,q),W}static computeConvOutputShape(E,R,N,L,F,H,q){if(E.length<=0||R.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");const W=[E[0],R[0]];return y.computeShapeHelper(!1,E,W,N,L,F,H,q),W}static computeShapeHelper(E,R,N,L,F,H,q,W){if(E)for(let U=0;U<R.length-2;U++)N.push(1);else for(let U=0;U<R.length-2;U++)N.push(y.adjustPadAndReturnShape(R[U+2],L[U],F[U],H[U],q,U,U+R.length-2,W))}static adjustPadAndReturnShape(E,R,N,L,F,H,q,W){const U=N*(L-1)+1;if(!W||"NOTSET"===W)return Math.floor((E+F[H]+F[q]-U)/R+1);switch(W){case"VALID":return F[H]=0,F[q]=0,Math.floor((E-U)/R+1);case"SAME_LOWER":case"SAME_UPPER":if(1!==N)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{const ne=((E+R-1)/R-1)*R+L-E;return F[H]=Math.floor("SAME_LOWER"===W?(ne+1)/2:ne/2),F[q]=ne-F[H],Math.floor((E+ne-L)/R+1)}default:throw new Error("Unsupported AutoPad type")}}}M.PoolConvUtil=y,M.MIN_CLIP=-34028234663852886e22,M.MAX_CLIP=34028234663852886e22,M.decodeUtf8String=function(x){return(new TextDecoder).decode(x)}},7967:(ye,M)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.iterateExtraOptions=void 0,M.iterateExtraOptions=(k,I,D,P)=>{if("object"==typeof k&&null!==k){if(D.has(k))throw new Error("Circular reference in options");D.add(k)}Object.entries(k).forEach(([v,w])=>{const S=I?I+v:v;if("object"==typeof w)M.iterateExtraOptions(w,S+".",D,P);else if("string"==typeof w||"number"==typeof w)P(S,w.toString());else{if("boolean"!=typeof w)throw new Error("Can't handle extra config type: "+typeof w);P(S,w?"1":"0")}})}},2157:function(ye,M,k){"use strict";var I,D=this&&this.__createBinding||(Object.create?function(W,U,ne,de){void 0===de&&(de=ne),Object.defineProperty(W,de,{enumerable:!0,get:function(){return U[ne]}})}:function(W,U,ne,de){void 0===de&&(de=ne),W[de]=U[ne]}),P=this&&this.__setModuleDefault||(Object.create?function(W,U){Object.defineProperty(W,"default",{enumerable:!0,value:U})}:function(W,U){W.default=U}),v=this&&this.__importStar||function(W){if(W&&W.__esModule)return W;var U={};if(null!=W)for(var ne in W)"default"!==ne&&Object.prototype.hasOwnProperty.call(W,ne)&&D(U,W,ne);return P(U,W),U};Object.defineProperty(M,"__esModule",{value:!0}),M.endProfiling=M.run=M.releaseSession=M.createSession=M.initOrt=M.initWasm=void 0;const w=k(2174),S=v(k(349)),b=k(6361),p=()=>!!w.env.wasm.proxy&&"undefined"!=typeof document;let u,o,d,f=!1,y=!1,x=!1;const E=[],R=[],N=[],L=[],F=()=>{if(f||!y||x||!u)throw new Error("worker not ready")},H=W=>{switch(W.data.type){case"init-wasm":f=!1,W.data.err?(x=!0,o[1](W.data.err)):(y=!0,o[0]());break;case"init-ort":W.data.err?d[1](W.data.err):d[0]();break;case"create":W.data.err?E.shift()[1](W.data.err):E.shift()[0](W.data.out);break;case"release":W.data.err?R.shift()[1](W.data.err):R.shift()[0]();break;case"run":W.data.err?N.shift()[1](W.data.err):N.shift()[0](W.data.out);break;case"end-profiling":W.data.err?L.shift()[1](W.data.err):L.shift()[0]()}},q="undefined"!=typeof document?null===(I=null==document?void 0:document.currentScript)||void 0===I?void 0:I.src:void 0;M.initWasm=_asyncToGenerator(function*(){if(p()){if(y)return;if(f)throw new Error("multiple calls to 'initWasm()' detected.");if(x)throw new Error("previous call to 'initWasm()' failed.");return f=!0,void 0===w.env.wasm.wasmPaths&&q&&0!==q.indexOf("blob:")&&(w.env.wasm.wasmPaths=q.substr(0,q.lastIndexOf("/")+1)),new Promise((W,U)=>{null==u||u.terminate(),u=k(9710).Z(),u.onmessage=H,o=[W,U],u.postMessage({type:"init-wasm",in:w.env.wasm})})}return b.initializeWebAssembly(w.env.wasm)}),M.initOrt=function(){var W=_asyncToGenerator(function*(U,ne){if(p())return F(),new Promise((de,De)=>{d=[de,De],u.postMessage({type:"init-ort",in:{numThreads:U,loggingLevel:ne}})});S.initOrt(U,ne)});return function(U,ne){return W.apply(this,arguments)}}(),M.createSession=function(){var W=_asyncToGenerator(function*(U,ne){return p()?(F(),new Promise((de,De)=>{E.push([de,De]),u.postMessage({type:"create",in:{model:U,options:ne}},[U.buffer])})):S.createSession(U,ne)});return function(U,ne){return W.apply(this,arguments)}}(),M.releaseSession=function(){var W=_asyncToGenerator(function*(U){if(p())return F(),new Promise((ne,de)=>{R.push([ne,de]),u.postMessage({type:"release",in:U})});S.releaseSession(U)});return function(U){return W.apply(this,arguments)}}(),M.run=function(){var W=_asyncToGenerator(function*(U,ne,de,De,ue){return p()?(F(),new Promise((Ae,Se)=>{N.push([Ae,Se]),u.postMessage({type:"run",in:{sessionId:U,inputIndices:ne,inputs:de,outputIndices:De,options:ue}},S.extractTransferableBuffers(de))})):S.run(U,ne,de,De,ue)});return function(U,ne,de,De,ue){return W.apply(this,arguments)}}(),M.endProfiling=function(){var W=_asyncToGenerator(function*(U){if(p())return F(),new Promise((ne,de)=>{L.push([ne,de]),u.postMessage({type:"end-profiling",in:U})});S.endProfiling(U)});return function(U){return W.apply(this,arguments)}}()},586:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.setRunOptions=void 0;const I=k(7967),D=k(4983),P=k(6361);M.setRunOptions=v=>{const w=P.getInstance();let S=0;const b=[],p=v||{};try{if(void 0===(null==v?void 0:v.logSeverityLevel))p.logSeverityLevel=2;else if("number"!=typeof v.logSeverityLevel||!Number.isInteger(v.logSeverityLevel)||v.logSeverityLevel<0||v.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${v.logSeverityLevel}`);if(void 0===(null==v?void 0:v.logVerbosityLevel))p.logVerbosityLevel=0;else if("number"!=typeof v.logVerbosityLevel||!Number.isInteger(v.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${v.logVerbosityLevel}`);void 0===(null==v?void 0:v.terminate)&&(p.terminate=!1);let u=0;if(void 0!==(null==v?void 0:v.tag)&&(u=D.allocWasmString(v.tag,b)),S=w._OrtCreateRunOptions(p.logSeverityLevel,p.logVerbosityLevel,!!p.terminate,u),0===S)throw new Error("Can't create run options");return void 0!==(null==v?void 0:v.extra)&&I.iterateExtraOptions(v.extra,"",new WeakSet,(o,d)=>{const f=D.allocWasmString(o,b),y=D.allocWasmString(d,b);if(0!==w._OrtAddRunConfigEntry(S,f,y))throw new Error(`Can't set a run config entry: ${o} - ${d}`)}),[S,b]}catch(u){throw 0!==S&&w._OrtReleaseRunOptions(S),b.forEach(w._free),u}}},2306:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.OnnxruntimeWebAssemblySessionHandler=void 0;const I=k(2174),D=k(2157);let P;M.OnnxruntimeWebAssemblySessionHandler=class{loadModel(v,w){var S=this;return _asyncToGenerator(function*(){P||(yield D.initOrt(I.env.wasm.numThreads,(b=>{switch(b){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${b}`)}})(I.env.logLevel)),P=!0),[S.sessionId,S.inputNames,S.outputNames]=yield D.createSession(v,w)})()}dispose(){var v=this;return _asyncToGenerator(function*(){return D.releaseSession(v.sessionId)})()}run(v,w,S){var b=this;return _asyncToGenerator(function*(){const p=[],u=[];Object.entries(v).forEach(y=>{const x=y[0],E=y[1],R=b.inputNames.indexOf(x);if(-1===R)throw new Error(`invalid input '${x}'`);p.push(E),u.push(R)});const o=[];Object.entries(w).forEach(y=>{const x=y[0],E=b.outputNames.indexOf(x);if(-1===E)throw new Error(`invalid output '${x}'`);o.push(E)});const d=yield D.run(b.sessionId,u,p.map(y=>[y.type,y.dims,y.data]),o,S),f={};for(let y=0;y<d.length;y++)f[b.outputNames[o[y]]]=new I.Tensor(d[y][0],d[y][2],d[y][1]);return f})()}startProfiling(){}endProfiling(){D.endProfiling(this.sessionId)}}},4919:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.setSessionOptions=void 0;const I=k(7967),D=k(4983),P=k(6361);M.setSessionOptions=v=>{const w=P.getInstance();let S=0;const b=[],p=v||{};(u=>{u.extra||(u.extra={}),u.extra.session||(u.extra.session={});const o=u.extra.session;o.use_ort_model_bytes_directly||(o.use_ort_model_bytes_directly="1")})(p);try{void 0===(null==v?void 0:v.graphOptimizationLevel)&&(p.graphOptimizationLevel="all");const u=(f=>{switch(f){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${f}`)}})(p.graphOptimizationLevel);void 0===(null==v?void 0:v.enableCpuMemArena)&&(p.enableCpuMemArena=!0),void 0===(null==v?void 0:v.enableMemPattern)&&(p.enableMemPattern=!0),void 0===(null==v?void 0:v.executionMode)&&(p.executionMode="sequential");const o=(f=>{switch(f){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${f}`)}})(p.executionMode);let d=0;if(void 0!==(null==v?void 0:v.logId)&&(d=D.allocWasmString(v.logId,b)),void 0===(null==v?void 0:v.logSeverityLevel))p.logSeverityLevel=2;else if("number"!=typeof v.logSeverityLevel||!Number.isInteger(v.logSeverityLevel)||v.logSeverityLevel<0||v.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${v.logSeverityLevel}`);if(void 0===(null==v?void 0:v.logVerbosityLevel))p.logVerbosityLevel=0;else if("number"!=typeof v.logVerbosityLevel||!Number.isInteger(v.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${v.logVerbosityLevel}`);if(void 0===(null==v?void 0:v.enableProfiling)&&(p.enableProfiling=!1),S=w._OrtCreateSessionOptions(u,!!p.enableCpuMemArena,!!p.enableMemPattern,o,!!p.enableProfiling,0,d,p.logSeverityLevel,p.logVerbosityLevel),0===S)throw new Error("Can't create session options");return void 0!==(null==v?void 0:v.extra)&&I.iterateExtraOptions(v.extra,"",new WeakSet,(f,y)=>{const x=D.allocWasmString(f,b),E=D.allocWasmString(y,b);if(0!==w._OrtAddSessionConfigEntry(S,x,E))throw new Error(`Can't set a session config entry: ${f} - ${y}`)}),[S,b]}catch(u){throw 0!==S&&w._OrtReleaseSessionOptions(S),b.forEach(w._free),u}}},4983:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.allocWasmString=void 0;const I=k(6361);M.allocWasmString=(D,P)=>{const v=I.getInstance(),w=v.lengthBytesUTF8(D)+1,S=v._malloc(w);return v.stringToUTF8(D,S,w),P.push(S),S}},349:(ye,M,k)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.extractTransferableBuffers=M.endProfiling=M.run=M.releaseSession=M.createSession=M.initOrt=void 0;const I=k(586),D=k(4919),P=k(4983),v=k(6361);M.initOrt=(u,o)=>{const d=v.getInstance()._OrtInit(u,o);if(0!==d)throw new Error(`Can't initialize onnxruntime. error code = ${d}`)};const w=new Map;M.createSession=(u,o)=>{const d=v.getInstance(),f=d._malloc(u.byteLength);let y=0,x=0,E=[];try{if([x,E]=D.setSessionOptions(o),d.HEAPU8.set(u,f),y=d._OrtCreateSession(f,u.byteLength,x),0===y)throw new Error("Can't create a session")}finally{d._free(f),d._OrtReleaseSessionOptions(x),E.forEach(d._free)}const R=d._OrtGetInputCount(y),N=d._OrtGetOutputCount(y),L=[],F=[],H=[],q=[];for(let W=0;W<R;W++){const U=d._OrtGetInputName(y,W);if(0===U)throw new Error("Can't get an input name");F.push(U),L.push(d.UTF8ToString(U))}for(let W=0;W<N;W++){const U=d._OrtGetOutputName(y,W);if(0===U)throw new Error("Can't get an output name");q.push(U),H.push(d.UTF8ToString(U))}return w.set(y,[y,F,q]),[y,L,H]},M.releaseSession=u=>{const o=v.getInstance(),d=w.get(u);if(!d)throw new Error("invalid session id");const f=d[0],x=d[2];d[1].forEach(o._OrtFree),x.forEach(o._OrtFree),o._OrtReleaseSession(f),w.delete(u)};const S=u=>{switch(u){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${u}`)}},b=u=>{switch(u){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${u}`)}},p=u=>{switch(u){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${u}`)}};M.run=(u,o,d,f,y)=>{const x=v.getInstance(),E=w.get(u);if(!E)throw new Error("invalid session id");const R=E[0],N=E[1],L=E[2],F=o.length,H=f.length;let q=0,W=[];const U=[],ne=[];try{[q,W]=I.setRunOptions(y);for(let he=0;he<F;he++){const _e=d[he][0],Xe=d[he][1],We=d[he][2];let mt,Zt;if(Array.isArray(We)){Zt=4*We.length,mt=x._malloc(Zt),ne.push(mt);let Kt=mt/4;for(let rn=0;rn<We.length;rn++){if("string"!=typeof We[rn])throw new TypeError(`tensor data at index ${rn} is not a string`);x.HEAPU32[Kt++]=P.allocWasmString(We[rn],ne)}}else Zt=We.byteLength,mt=x._malloc(Zt),ne.push(mt),x.HEAPU8.set(new Uint8Array(We.buffer,We.byteOffset,Zt),mt);const Dn=x.stackSave(),Lr=x.stackAlloc(4*Xe.length);try{let Kt=Lr/4;Xe.forEach(On=>x.HEAP32[Kt++]=On);const rn=x._OrtCreateTensor(S(_e),mt,Zt,Lr,Xe.length);if(0===rn)throw new Error("Can't create a tensor");U.push(rn)}finally{x.stackRestore(Dn)}}const de=x.stackSave(),De=x.stackAlloc(4*F),ue=x.stackAlloc(4*F),Ae=x.stackAlloc(4*H),Se=x.stackAlloc(4*H);try{let he=De/4,_e=ue/4,Xe=Ae/4,We=Se/4;for(let Dn=0;Dn<F;Dn++)x.HEAPU32[he++]=U[Dn],x.HEAPU32[_e++]=N[o[Dn]];for(let Dn=0;Dn<H;Dn++)x.HEAPU32[Xe++]=0,x.HEAPU32[We++]=L[f[Dn]];let mt=x._OrtRun(R,ue,De,F,Se,H,Ae,q);const Zt=[];if(0===mt)for(let Dn=0;Dn<H;Dn++){const Lr=x.HEAPU32[Ae/4+Dn],Kt=x.stackSave(),rn=x.stackAlloc(16);let On,At=0;try{if(mt=x._OrtGetTensorData(Lr,rn,rn+4,rn+8,rn+12),0!==mt)throw new Error(`Can't get a tensor data. error code = ${mt}`);let hn=rn/4;const Zr=x.HEAPU32[hn++];At=x.HEAPU32[hn++];const en=x.HEAPU32[hn++],Yn=x.HEAPU32[hn++],Br=[];for(let An=0;An<Yn;An++)Br.push(x.HEAPU32[en/4+An]);x._OrtFree(en);const Kr=0===Br.length?1:Br.reduce((An,Jr)=>An*Jr);if(On=b(Zr),"string"===On){const An=[];let Jr=At/4;for(let _r=0;_r<Kr;_r++){const ns=x.HEAPU32[Jr++];An.push(x.UTF8ToString(ns,_r===Kr-1?void 0:x.HEAPU32[Jr]-ns))}Zt.push([On,Br,An])}else{const An=new(p(On))(Kr);new Uint8Array(An.buffer,An.byteOffset,An.byteLength).set(x.HEAPU8.subarray(At,At+An.byteLength)),Zt.push([On,Br,An])}}finally{x.stackRestore(Kt),"string"===On&&At&&x._free(At),x._OrtReleaseTensor(Lr)}}if(0===mt)return Zt;throw new Error(`failed to call OrtRun(). error code = ${mt}.`)}finally{x.stackRestore(de)}}finally{U.forEach(x._OrtReleaseTensor),ne.forEach(x._free),x._OrtReleaseRunOptions(q),W.forEach(x._free)}},M.endProfiling=u=>{const o=v.getInstance(),d=w.get(u);if(!d)throw new Error("invalid session id");const y=o._OrtEndProfiling(d[0]);if(0===y)throw new Error("Can't get an profile file name");o._OrtFree(y)},M.extractTransferableBuffers=u=>{const o=[];for(const d of u){const f=d[2];!Array.isArray(f)&&f.buffer&&o.push(f.buffer)}return o}},6361:function(ye,M,k){"use strict";var I=this&&this.__createBinding||(Object.create?function(y,x,E,R){void 0===R&&(R=E),Object.defineProperty(y,R,{enumerable:!0,get:function(){return x[E]}})}:function(y,x,E,R){void 0===R&&(R=E),y[R]=x[E]}),D=this&&this.__setModuleDefault||(Object.create?function(y,x){Object.defineProperty(y,"default",{enumerable:!0,value:x})}:function(y,x){y.default=x}),P=this&&this.__importStar||function(y){if(y&&y.__esModule)return y;var x={};if(null!=y)for(var E in y)"default"!==E&&Object.prototype.hasOwnProperty.call(y,E)&&I(x,y,E);return D(x,y),x},v=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(M,"__esModule",{value:!0}),M.dispose=M.getInstance=M.initializeWebAssembly=void 0;const w=P(k(6449)),S=v(k(932)),b=k(3474);let p,u=!1,o=!1,d=!1;const f=(y,x)=>x?y?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":y?"ort-wasm-simd.wasm":"ort-wasm.wasm";M.initializeWebAssembly=function(){var y=_asyncToGenerator(function*(x){if(u)return Promise.resolve();if(o)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(d)throw new Error("previous call to 'initializeWebAssembly()' failed.");o=!0;const E=x.initTimeout,N=x.simd,L=x.numThreads>1&&(()=>{try{return"undefined"!=typeof SharedArrayBuffer&&("undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch(De){return!1}})(),F=N&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch(De){return!1}})(),H="string"==typeof x.wasmPaths?x.wasmPaths:void 0,q=f(!1,L),W=f(F,L),U="object"==typeof x.wasmPaths?x.wasmPaths[W]:void 0;let ne=!1;const de=[];if(E>0&&de.push(new Promise(De=>{setTimeout(()=>{ne=!0,De()},E)})),de.push(new Promise((De,ue)=>{const Ae=L?b:S.default,Se={locateFile:(he,_e)=>{if(L&&he.endsWith(".worker.js")&&"undefined"!=typeof Blob)return URL.createObjectURL(new Blob([k(5118)],{type:"text/javascript"}));if(he===q){const Xe=null!=H?H:_e;return null!=U?U:Xe+W}return _e+he}};if(L)if("undefined"==typeof Blob)Se.mainScriptUrlOrBlob=w.join("/","ort-wasm-threaded.js");else{const he=`var ortWasmThreaded=(function(){var _scriptDir;return ${Ae.toString()}})();`;Se.mainScriptUrlOrBlob=new Blob([he],{type:"text/javascript"})}Ae(Se).then(he=>{o=!1,u=!0,p=he,De()},he=>{o=!1,d=!0,ue(he)})})),yield Promise.race(de),ne)throw new Error(`WebAssembly backend initializing failed due to timeout: ${E}ms`)});return function(x){return y.apply(this,arguments)}}(),M.getInstance=()=>{if(u&&p)return p;throw new Error("WebAssembly is not initialized yet.")},M.dispose=()=>{var y;!u||o||d||(o=!0,null===(y=p.PThread)||void 0===y||y.terminateAllThreads(),p=void 0,o=!1,u=!1,d=!0)}},9710:(ye,M,k)=>{"use strict";k.d(M,{Z:()=>P});var I=k(477),D=k.n(I);function P(){return D()('/*!\n* ONNX Runtime Web v1.12.1\n* Copyright (c) Microsoft Corporation. All rights reserved.\n* Licensed under the MIT License.\n*/\n(()=>{var e={474:(e,t,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(e){function t(){return C.buffer!=U&&$(C.buffer),W}function r(){return C.buffer!=U&&$(C.buffer),L}function a(){return C.buffer!=U&&$(C.buffer),H}function o(){return C.buffer!=U&&$(C.buffer),Y}var i;e=e||{},i||(i=void 0!==e?e:{});var s,u,c=Object.assign;i.ready=new Promise((function(e,t){s=e,u=t}));var l,f,p,d,m,g,h=c({},i),y="./this.program",b=(e,t)=>{throw t},v="object"==typeof window,_="function"==typeof importScripts,w="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,O=i.ENVIRONMENT_IS_PTHREAD||!1,A="";function S(e){return i.locateFile?i.locateFile(e,A):A+e}if(w){let t;A=_?n(908).dirname(A)+"/":"//",g=()=>{m||(d=n(384),m=n(908))},l=function(e,t){return g(),e=m.normalize(e),d.readFileSync(e,t?null:"utf8")},p=e=>((e=l(e,!0)).buffer||(e=new Uint8Array(e)),e),f=(e,t,n)=>{g(),e=m.normalize(e),d.readFile(e,(function(e,r){e?n(e):t(r.buffer)}))},1<process.argv.length&&(y=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof xt))throw e})),process.on("unhandledRejection",(function(e){throw e})),b=(e,t)=>{if(te())throw process.exitCode=e,t;t instanceof xt||x("exiting due to exception: "+t),process.exit(e)},i.inspect=function(){return"[Emscripten Module object]"};try{t=n(925)}catch(e){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),e}n.g.Worker=t.Worker}else(v||_)&&(_?A=self.location.href:"undefined"!=typeof document&&document.currentScript&&(A=document.currentScript.src),_scriptDir&&(A=_scriptDir),A=0!==A.indexOf("blob:")?A.substr(0,A.replace(/[?#].*/,"").lastIndexOf("/")+1):"",w||(l=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},_&&(p=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),f=(e,t,n)=>{var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)}));w&&"undefined"==typeof performance&&(n.g.performance=n(953).performance);var E=console.log.bind(console),T=console.warn.bind(console);w&&(g(),E=e=>d.writeSync(1,e+"\\n"),T=e=>d.writeSync(2,e+"\\n"));var M,D,R=i.print||E,x=i.printErr||T;c(i,h),h=null,i.thisProgram&&(y=i.thisProgram),i.quit&&(b=i.quit),i.wasmBinary&&(D=i.wasmBinary);var k=i.noExitRuntime||!1;"object"!=typeof WebAssembly&&se("no native wasm support detected");var C,F,P=!1;function I(e){var t=new TextDecoder(e);this.decode=e=>(e.buffer instanceof SharedArrayBuffer&&(e=new Uint8Array(e)),t.decode.call(t,e))}var U,W,L,H,Y,j="undefined"!=typeof TextDecoder?new I("utf8"):void 0;function B(e,t,n){var r=t+n;for(n=t;e[n]&&!(n>=r);)++n;if(16<n-t&&e.subarray&&j)return j.decode(e.subarray(t,n));for(r="";t<n;){var a=e[t++];if(128&a){var o=63&e[t++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|o);else{var i=63&e[t++];65536>(a=224==(240&a)?(15&a)<<12|o<<6|i:(7&a)<<18|o<<12|i<<6|63&e[t++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function N(e,t){return e?B(r(),e,t):""}function G(e,t,n,r){if(!(0<r))return 0;var a=n;r=n+r-1;for(var o=0;o<e.length;++o){var i=e.charCodeAt(o);if(55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++o)),127>=i){if(n>=r)break;t[n++]=i}else{if(2047>=i){if(n+1>=r)break;t[n++]=192|i>>6}else{if(65535>=i){if(n+2>=r)break;t[n++]=224|i>>12}else{if(n+3>=r)break;t[n++]=240|i>>18,t[n++]=128|i>>12&63}t[n++]=128|i>>6&63}t[n++]=128|63&i}}return t[n]=0,n-a}function z(e,t,n){return G(e,r(),t,n)}function V(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);55296<=r&&57343>=r&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++n)),127>=r?++t:t=2047>=r?t+2:65535>=r?t+3:t+4}return t}function q(e){var n=V(e)+1,r=dt(n);return r&&G(e,t(),r,n),r}function $(e){U=e,i.HEAP8=W=new Int8Array(e),i.HEAP16=new Int16Array(e),i.HEAP32=H=new Int32Array(e),i.HEAPU8=L=new Uint8Array(e),i.HEAPU16=new Uint16Array(e),i.HEAPU32=new Uint32Array(e),i.HEAPF32=new Float32Array(e),i.HEAPF64=Y=new Float64Array(e)}"undefined"!=typeof TextDecoder&&new I("utf-16le"),O&&(U=i.buffer);var X=i.INITIAL_MEMORY||16777216;if(O)C=i.wasmMemory,U=i.buffer;else if(i.wasmMemory)C=i.wasmMemory;else if(!((C=new WebAssembly.Memory({initial:X/65536,maximum:32768,shared:!0})).buffer instanceof SharedArrayBuffer))throw x("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),w&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");C&&(U=C.buffer),X=U.byteLength,$(U);var Q,J=[],Z=[],K=[],ee=[];function te(){return k||!1}function ne(){var e=i.preRun.shift();J.unshift(e)}var re,ae=0,oe=null,ie=null;function se(e){throw O?postMessage({cmd:"onAbort",arg:e}):i.onAbort&&i.onAbort(e),x(e="Aborted("+e+")"),P=!0,e=new WebAssembly.RuntimeError(e+". Build with -s ASSERTIONS=1 for more info."),u(e),e}function ue(){return re.startsWith("data:application/octet-stream;base64,")}function ce(){var e=re;try{if(e==re&&D)return new Uint8Array(D);if(p)return p(e);throw"both async and sync fetching of the wasm failed"}catch(e){se(e)}}i.preloadedImages={},i.preloadedAudios={},re="ort-wasm-threaded.wasm",ue()||(re=S(re));var le={};function fe(e){for(;0<e.length;){var t=e.shift();if("function"==typeof t)t(i);else{var n=t.Tb;"number"==typeof n?void 0===t.Sa?be(n)():be(n)(t.Sa):n(void 0===t.Sa?null:t.Sa)}}}function pe(e){var t=Et();return e=e(),Tt(t),e}function de(e){var t=me.Oa[e];t&&(a()[e>>2]=0,me.jb(t.worker))}var me={Pa:[],Va:[],fb:[],Wb:function(){},ub:function(){me.receiveObjectTransfer=me.zb,me.threadInit=me.lb,me.setExitStatus=me.Bb},Oa:{},Bb:function(){},kb:function(){for(var e in me.Oa){var t=me.Oa[e];t&&t.worker&&me.jb(t.worker)}for(e=0;e<me.Pa.length;++e)me.Pa[e].terminate();me.Pa=[]},jb:function(e){me.Ab((function(){delete me.Oa[e.Qa.eb],me.Pa.push(e),me.Va.splice(me.Va.indexOf(e),1),wt(e.Qa.eb),e.Qa=void 0}))},Ab:function(e){a()[Rt>>2]=0;try{e()}finally{a()[Rt>>2]=1}},zb:function(){},lb:function(){for(var e in me.fb)me.fb[e]()},wb:function(e,t){e.onmessage=n=>{var r=(n=n.data).cmd;if(e.Qa&&(me.pb=e.Qa.eb),n.targetThread&&n.targetThread!=pt()){var o=me.Oa[n.bc];o?o.worker.postMessage(n,n.transferList):x(\'Internal error! Worker sent a message "\'+r+\'" to target pthread \'+n.targetThread+", but that thread no longer exists!")}else"processQueuedMainThreadWork"===r?ht():"spawnThread"===r?_e(n):"cleanupThread"===r?de(n.thread):"killThread"===r?(n=n.thread,a()[n>>2]=0,r=me.Oa[n],delete me.Oa[n],r.worker.terminate(),wt(n),me.Va.splice(me.Va.indexOf(r.worker),1),r.worker.Qa=void 0):"cancelThread"===r?me.Oa[n.thread].worker.postMessage({cmd:"cancel"}):"loaded"===r?(e.loaded=!0,t&&t(e),e.Ua&&(e.Ua(),delete e.Ua)):"print"===r?R("Thread "+n.threadId+": "+n.text):"printErr"===r?x("Thread "+n.threadId+": "+n.text):"alert"===r?alert("Thread "+n.threadId+": "+n.text):"setimmediate"===n.target?e.postMessage(n):"onAbort"===r?i.onAbort&&i.onAbort(n.arg):x("worker sent an unknown command "+r);me.pb=void 0},e.onerror=e=>{throw x("worker sent an error! "+e.filename+":"+e.lineno+": "+e.message),e},w&&(e.on("message",(function(t){e.onmessage({data:t})})),e.on("error",(function(t){e.onerror(t)})),e.on("detachedExit",(function(){}))),e.postMessage({cmd:"load",urlOrBlob:i.mainScriptUrlOrBlob||_scriptDir,wasmMemory:C,wasmModule:F})},mb:function(){var e=S("ort-wasm-threaded.worker.js");me.Pa.push(new Worker(e))},rb:function(){return 0==me.Pa.length&&(me.mb(),me.wb(me.Pa[0])),me.Pa.pop()}};function ge(e){if(O)return je(1,0,e);try{Ct(e)}catch(e){e instanceof xt||"unwind"==e||b(1,e)}}i.establishStackSpace=function(){var e=pt(),t=a()[e+44>>2];e=a()[e+48>>2],St(t,t-e),Tt(t)};var he,ye=[];function be(e){var t=ye[e];return t||(e>=ye.length&&(ye.length=e+1),ye[e]=t=Q.get(e)),t}function ve(e){this.Ta=e-16,this.Gb=function(e){a()[this.Ta+4>>2]=e},this.Db=function(e){a()[this.Ta+8>>2]=e},this.Eb=function(){a()[this.Ta>>2]=0},this.Cb=function(){t()[this.Ta+12>>0]=0},this.Fb=function(){t()[this.Ta+13>>0]=0},this.sb=function(e,t){this.Gb(e),this.Db(t),this.Eb(),this.Cb(),this.Fb()}}function _e(e){var t=me.rb();if(!t)return 6;me.Va.push(t);var n=me.Oa[e.cb]={worker:t,eb:e.cb};t.Qa=n;var r={cmd:"run",start_routine:e.Hb,arg:e.Sa,threadInfoStruct:e.cb};return t.Ua=()=>{r.time=performance.now(),t.postMessage(r,e.Mb)},t.loaded&&(t.Ua(),delete t.Ua),0}i.invokeEntryPoint=function(e,t){return be(e)(t)},he=w?()=>{var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:O?()=>performance.now()-i.__performance_now_clock_drift:()=>performance.now();var we={},Oe=[null,[],[]];function Ae(e,t){var n=Oe[e];0===t||10===t?((1===e?R:x)(B(n,0)),n.length=0):n.push(t)}var Se={};function Ee(e,t,n){return O?je(2,1,e,t,n):0}function Te(e,t){if(O)return je(3,1,e,t)}function Me(e,t,n,r){if(O)return je(4,1,e,t,n,r)}function De(e,t){if(O)return je(5,1,e,t)}function Re(e,t,n){if(O)return je(6,1,e,t,n)}function xe(e,t,n){return O?je(7,1,e,t,n):0}function ke(e,t){if(O)return je(8,1,e,t)}function Ce(e,t){return O?je(9,1,e,t):(e=N(e),Se.Qb(e,t))}function Fe(e,t,n,a,o,i){if(O)t=je(10,1,e,t,n,a,o,i);else if(i<<=12,0!=(16&a)&&0!=e%65536)t=-28;else if(0!=(32&a)){var s=65536*Math.ceil(t/65536);(e=At(65536,s))?r().fill(0,e,e+s):e=0,e?(we[e]={yb:e,vb:t,nb:!0,fd:o,Zb:n,flags:a,offset:i},t=e):t=-48}else t=-52;return t}function Pe(e,t){if(O)e=je(11,1,e,t);else{var n=we[e];0!==t&&n?(t===n.vb&&(we[e]=null,n.nb&&mt(n.yb)),e=0):e=-28}return e}function Ie(e,t,n){if(O)return je(12,1,e,t,n)}function Ue(e,t,n){return O?je(13,1,e,t,n):(e=N(e),Se.Rb(e,t,n))}function We(e){if(O)return je(14,1,e)}function Le(e,t){if(O)return je(15,1,e,t)}function He(e){if(O)return je(16,1,e)}function Ye(e,t,n){function r(e){return(e=e.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?e[1]:"GMT"}if(O)return je(17,1,e,t,n);var o=(new Date).getFullYear(),i=new Date(o,0,1),s=new Date(o,6,1);o=i.getTimezoneOffset();var u=s.getTimezoneOffset(),c=Math.max(o,u);a()[e>>2]=60*c,a()[t>>2]=Number(o!=u),e=r(i),t=r(s),e=q(e),t=q(t),u<o?(a()[n>>2]=e,a()[n+4>>2]=t):(a()[n>>2]=t,a()[n+4>>2]=e)}function je(e,t){var n=arguments.length-2,r=arguments;return pe((function(){for(var a=Mt(8*n),i=a>>3,s=0;s<n;s++){var u=r[2+s];o()[i+s]=u}return vt(e,n,a,t)}))}var Be=[],Ne=[0,"undefined"!=typeof document?document:0,"undefined"!=typeof window?window:0];function Ge(e){return e=2<e?N(e):e,Ne[e]||("undefined"!=typeof document?document.querySelector(e):void 0)}function ze(e,t,n){var r=Ge(e);return r?(r.Za&&(a()[r.Za>>2]=t,a()[r.Za+4>>2]=n),!r.ib&&r.Ob?r.Za?(function(e,t,n,r){pe((function(){var o=Mt(12),i=0;if(t){i=V(t)+1;var s=dt(i);z(t,s,i),i=s}a()[o>>2]=i,a()[o+4>>2]=n,a()[o+8>>2]=r,_t(e,657457152,0,i,o)}))}(r=a()[r.Za+8>>2],e=e?N(e):"",t,n),1):-4:(r.ib&&(r=r.ib),e=!1,r.Ya&&r.Ya.Xa&&(e=0===(e=r.Ya.Xa.getParameter(2978))[0]&&0===e[1]&&e[2]===r.width&&e[3]===r.height),r.width=t,r.height=n,e&&r.Ya.Xa.viewport(0,0,t,n),0)):-4}function Ve(e,t,n){return O?je(18,1,e,t,n):ze(e,t,n)}var qe,$e=["default","low-power","high-performance"],Xe={};function Qe(){if(!qe){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:y||"./this.program"};for(e in Xe)void 0===Xe[e]?delete t[e]:t[e]=Xe[e];var n=[];for(e in t)n.push(e+"="+t[e]);qe=n}return qe}function Je(e,n){if(O)return je(19,1,e,n);var r=0;return Qe().forEach((function(o,i){var s=n+r;for(i=a()[e+4*i>>2]=s,s=0;s<o.length;++s)t()[i++>>0]=o.charCodeAt(s);t()[i>>0]=0,r+=o.length+1})),0}function Ze(e,t){if(O)return je(20,1,e,t);var n=Qe();a()[e>>2]=n.length;var r=0;return n.forEach((function(e){r+=e.length+1})),a()[t>>2]=r,0}function Ke(e){return O?je(21,1,e):0}function et(e,t,n,r){return O?je(22,1,e,t,n,r):(e=Se.Ub(e),t=Se.Sb(e,t,n),a()[r>>2]=t,0)}function tt(e,t,n,r,a){if(O)return je(23,1,e,t,n,r,a)}function nt(e,t,n,o){if(O)return je(24,1,e,t,n,o);for(var i=0,s=0;s<n;s++){var u=a()[t>>2],c=a()[t+4>>2];t+=8;for(var l=0;l<c;l++)Ae(e,r()[u+l]);i+=c}return a()[o>>2]=i,0}function rt(e){return 0==e%4&&(0!=e%100||0==e%400)}function at(e,t){for(var n=0,r=0;r<=t;n+=e[r++]);return n}var ot=[31,29,31,30,31,30,31,31,30,31,30,31],it=[31,28,31,30,31,30,31,31,30,31,30,31];function st(e,t){for(e=new Date(e.getTime());0<t;){var n=e.getMonth(),r=(rt(e.getFullYear())?ot:it)[n];if(!(t>r-e.getDate())){e.setDate(e.getDate()+t);break}t-=r-e.getDate()+1,e.setDate(1),11>n?e.setMonth(n+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1))}return e}function ut(e,n,r,o){function i(e,t,n){for(e="number"==typeof e?e.toString():e||"";e.length<t;)e=n[0]+e;return e}function s(e,t){return i(e,t,"0")}function u(e,t){function n(e){return 0>e?-1:0<e?1:0}var r;return 0===(r=n(e.getFullYear()-t.getFullYear()))&&0===(r=n(e.getMonth()-t.getMonth()))&&(r=n(e.getDate()-t.getDate())),r}function c(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function l(e){e=st(new Date(e.Na+1900,0,1),e.bb);var t=new Date(e.getFullYear()+1,0,4),n=c(new Date(e.getFullYear(),0,4));return t=c(t),0>=u(n,e)?0>=u(t,e)?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}var f=a()[o+40>>2];for(var p in o={Kb:a()[o>>2],Jb:a()[o+4>>2],$a:a()[o+8>>2],Wa:a()[o+12>>2],Ra:a()[o+16>>2],Na:a()[o+20>>2],ab:a()[o+24>>2],bb:a()[o+28>>2],cc:a()[o+32>>2],Ib:a()[o+36>>2],Lb:f?N(f):""},r=N(r),f={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(p,"g"),f[p]);var d="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),m="January February March April May June July August September October November December".split(" ");for(p in f={"%a":function(e){return d[e.ab].substring(0,3)},"%A":function(e){return d[e.ab]},"%b":function(e){return m[e.Ra].substring(0,3)},"%B":function(e){return m[e.Ra]},"%C":function(e){return s((e.Na+1900)/100|0,2)},"%d":function(e){return s(e.Wa,2)},"%e":function(e){return i(e.Wa,2," ")},"%g":function(e){return l(e).toString().substring(2)},"%G":function(e){return l(e)},"%H":function(e){return s(e.$a,2)},"%I":function(e){return 0==(e=e.$a)?e=12:12<e&&(e-=12),s(e,2)},"%j":function(e){return s(e.Wa+at(rt(e.Na+1900)?ot:it,e.Ra-1),3)},"%m":function(e){return s(e.Ra+1,2)},"%M":function(e){return s(e.Jb,2)},"%n":function(){return"\\n"},"%p":function(e){return 0<=e.$a&&12>e.$a?"AM":"PM"},"%S":function(e){return s(e.Kb,2)},"%t":function(){return"\\t"},"%u":function(e){return e.ab||7},"%U":function(e){var t=new Date(e.Na+1900,0,1),n=0===t.getDay()?t:st(t,7-t.getDay());return 0>u(n,e=new Date(e.Na+1900,e.Ra,e.Wa))?s(Math.ceil((31-n.getDate()+(at(rt(e.getFullYear())?ot:it,e.getMonth()-1)-31)+e.getDate())/7),2):0===u(n,t)?"01":"00"},"%V":function(e){var t=new Date(e.Na+1901,0,4),n=c(new Date(e.Na+1900,0,4));t=c(t);var r=st(new Date(e.Na+1900,0,1),e.bb);return 0>u(r,n)?"53":0>=u(t,r)?"01":s(Math.ceil((n.getFullYear()<e.Na+1900?e.bb+32-n.getDate():e.bb+1-n.getDate())/7),2)},"%w":function(e){return e.ab},"%W":function(e){var t=new Date(e.Na,0,1),n=1===t.getDay()?t:st(t,0===t.getDay()?1:7-t.getDay()+1);return 0>u(n,e=new Date(e.Na+1900,e.Ra,e.Wa))?s(Math.ceil((31-n.getDate()+(at(rt(e.getFullYear())?ot:it,e.getMonth()-1)-31)+e.getDate())/7),2):0===u(n,t)?"01":"00"},"%y":function(e){return(e.Na+1900).toString().substring(2)},"%Y":function(e){return e.Na+1900},"%z":function(e){var t=0<=(e=e.Ib);return e=Math.abs(e)/60,(t?"+":"-")+String("0000"+(e/60*100+e%60)).slice(-4)},"%Z":function(e){return e.Lb},"%%":function(){return"%"}})r.includes(p)&&(r=r.replace(new RegExp(p,"g"),f[p](o)));return p=function(e){var t=Array(V(e)+1);return G(e,t,0,t.length),t}(r),p.length>n?0:(function(e,n){t().set(e,n)}(p,e),p.length-1)}var ct=[null,ge,Ee,Te,Me,De,Re,xe,ke,Ce,Fe,Pe,Ie,Ue,We,Le,He,Ye,Ve,Je,Ze,Ke,et,tt,nt],lt={b:function(e){return dt(e+16)+16},c:function(e,t,n){throw new ve(e).sb(t,n),e},M:function(e){yt(e,!_,1,!v),me.lb()},n:function(e){O?postMessage({cmd:"cleanupThread",thread:e}):de(e)},p:function(e,t,n,r){if("undefined"==typeof SharedArrayBuffer)return x("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var a=[];return O&&0===a.length?bt(687865856,e,t,n,r):(e={Hb:n,cb:e,Sa:r,Mb:a},O?(e.Nb="spawnThread",postMessage(e,a),0):_e(e))},i:Ee,U:Te,R:Me,y:De,A:Re,t:xe,S:ke,H:Ce,G:Fe,F:Pe,o:Ie,z:Ue,w:We,T:Le,x:He,j:function(){se("To use dlopen, you need to use Emscripten\'s linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},_:function(){se("To use dlopen, you need to use Emscripten\'s linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},E:function(){return 2097152},Z:function(e,t,n){var r=performance.now();for(n=r+n,Atomics.exchange(a(),Dt>>2,e);;){if((r=performance.now())>n)return Atomics.exchange(a(),Dt>>2,0),-73;if(0==(r=Atomics.exchange(a(),Dt>>2,0)))break;if(ht(),Atomics.load(a(),e>>2)!=t)return-6;Atomics.exchange(a(),Dt>>2,e)}return 0},N:function(e,t){if(e==t)postMessage({cmd:"processQueuedMainThreadWork"});else if(O)postMessage({targetThread:e,cmd:"processThreadQueue"});else{if(!(e=(e=me.Oa[e])&&e.worker))return;e.postMessage({cmd:"processThreadQueue"})}return 1},V:function(e,t){e=new Date(1e3*a()[e>>2]),a()[t>>2]=e.getUTCSeconds(),a()[t+4>>2]=e.getUTCMinutes(),a()[t+8>>2]=e.getUTCHours(),a()[t+12>>2]=e.getUTCDate(),a()[t+16>>2]=e.getUTCMonth(),a()[t+20>>2]=e.getUTCFullYear()-1900,a()[t+24>>2]=e.getUTCDay(),e=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,a()[t+28>>2]=e},W:function(e,t){e=new Date(1e3*a()[e>>2]),a()[t>>2]=e.getSeconds(),a()[t+4>>2]=e.getMinutes(),a()[t+8>>2]=e.getHours(),a()[t+12>>2]=e.getDate(),a()[t+16>>2]=e.getMonth(),a()[t+20>>2]=e.getFullYear()-1900,a()[t+24>>2]=e.getDay();var n=new Date(e.getFullYear(),0,1),r=(e.getTime()-n.getTime())/864e5|0;a()[t+28>>2]=r,a()[t+36>>2]=-60*e.getTimezoneOffset(),r=new Date(e.getFullYear(),6,1).getTimezoneOffset(),e=0|(r!=(n=n.getTimezoneOffset())&&e.getTimezoneOffset()==Math.min(n,r)),a()[t+32>>2]=e},X:function(e){var t=new Date(a()[e+20>>2]+1900,a()[e+16>>2],a()[e+12>>2],a()[e+8>>2],a()[e+4>>2],a()[e>>2],0),n=a()[e+32>>2],r=t.getTimezoneOffset(),o=new Date(t.getFullYear(),0,1),i=new Date(t.getFullYear(),6,1).getTimezoneOffset(),s=o.getTimezoneOffset(),u=Math.min(s,i);return 0>n?a()[e+32>>2]=Number(i!=s&&u==r):0<n!=(u==r)&&(i=Math.max(s,i),t.setTime(t.getTime()+6e4*((0<n?u:i)-r))),a()[e+24>>2]=t.getDay(),n=(t.getTime()-o.getTime())/864e5|0,a()[e+28>>2]=n,a()[e>>2]=t.getSeconds(),a()[e+4>>2]=t.getMinutes(),a()[e+8>>2]=t.getHours(),a()[e+12>>2]=t.getDate(),a()[e+16>>2]=t.getMonth(),t.getTime()/1e3|0},Y:function e(t,n,r){e.ob||(e.ob=!0,Ye(t,n,r))},d:function(){se("")},q:function(e,t){if(0===e)e=Date.now();else{if(1!==e&&4!==e)return a()[ft()>>2]=28,-1;e=he()}return a()[t>>2]=e/1e3|0,a()[t+4>>2]=e%1e3*1e6|0,0},B:function(e,t){return e-t},m:function(){w||_||(M||(M={}),M["Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread"]||(M["Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread"]=1,x("Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread")))},v:function(){return 2147483648},f:he,Q:function(e,t,n){r().copyWithin(e,t,t+n)},g:function(){return w?n(993).cpus().length:navigator.hardwareConcurrency},I:function(e,t,n){Be.length=t,n>>=3;for(var r=0;r<t;r++)Be[r]=o()[n+r];return(0>e?le[-e-1]:ct[e]).apply(null,Be)},u:function(e){var t=r().length;if((e>>>=0)<=t||2147483648<e)return!1;for(var n=1;4>=n;n*=2){var a=t*(1+.2/n);a=Math.min(a,e+100663296),0<(a=Math.max(e,a))%65536&&(a+=65536-a%65536);e:{try{C.grow(Math.min(2147483648,a)-U.byteLength+65535>>>16),$(C.buffer);var o=1;break e}catch(e){}o=void 0}if(o)return!0}return!1},K:function(e,t,n){return Ge(e)?ze(e,t,n):Ve(e,t,n)},C:function(){throw"unwind"},L:function(e,t){t>>=2;var n=a()[t+6];return t={alpha:!!a()[t],depth:!!a()[t+1],stencil:!!a()[t+2],antialias:!!a()[t+3],premultipliedAlpha:!!a()[t+4],preserveDrawingBuffer:!!a()[t+5],powerPreference:$e[n],failIfMajorPerformanceCaveat:!!a()[t+7],xb:a()[t+8],Xb:a()[t+9],gb:a()[t+10],qb:a()[t+11],$b:a()[t+12],ac:a()[t+13]},!(e=Ge(e))||t.qb?0:function(e,t){e.hb||(e.hb=e.getContext,e.getContext=function(t,n){return"webgl"==t==(n=e.hb(t,n))instanceof WebGLRenderingContext?n:null});var n=e.getContext("webgl",t);return n?function(e,t){var n=dt(8);a()[n+4>>2]=pt();var r={Vb:n,attributes:t,version:t.xb,Xa:e};return e.canvas&&(e.canvas.Ya=r),(void 0===t.gb||t.gb)&&function(e){if(e||(e=void 0),!e.tb){e.tb=!0;var t=e.Xa;!function(e){var t=e.getExtension("ANGLE_instanced_arrays");t&&(e.vertexAttribDivisor=function(e,n){t.vertexAttribDivisorANGLE(e,n)},e.drawArraysInstanced=function(e,n,r,a){t.drawArraysInstancedANGLE(e,n,r,a)},e.drawElementsInstanced=function(e,n,r,a,o){t.drawElementsInstancedANGLE(e,n,r,a,o)})}(t),function(e){var t=e.getExtension("OES_vertex_array_object");t&&(e.createVertexArray=function(){return t.createVertexArrayOES()},e.deleteVertexArray=function(e){t.deleteVertexArrayOES(e)},e.bindVertexArray=function(e){t.bindVertexArrayOES(e)},e.isVertexArray=function(e){return t.isVertexArrayOES(e)})}(t),function(e){var t=e.getExtension("WEBGL_draw_buffers");t&&(e.drawBuffers=function(e,n){t.drawBuffersWEBGL(e,n)})}(t),t.Pb=t.getExtension("EXT_disjoint_timer_query"),t.Yb=t.getExtension("WEBGL_multi_draw"),(t.getSupportedExtensions()||[]).forEach((function(e){e.includes("lose_context")||e.includes("debug")||t.getExtension(e)}))}}(r),n}(n,t):0}(e,t)},O:Je,P:Ze,D:function(e){Ct(e)},h:Ke,l:et,s:tt,k:nt,J:function(e){var t=Date.now();return a()[e>>2]=t/1e3|0,a()[e+4>>2]=t%1e3*1e3|0,0},a:C||i.wasmMemory,r:ut,e:function(e,t,n,r){return ut(e,t,n,r)}};!function(){function e(e,t){i.asm=e.exports,me.fb.push(i.asm.xa),Q=i.asm.Ba,Z.unshift(i.asm.$),F=t,O||(ae--,i.monitorRunDependencies&&i.monitorRunDependencies(ae),0==ae&&(null!==oe&&(clearInterval(oe),oe=null),ie&&(e=ie,ie=null,e())))}function t(t){e(t.instance,t.module)}function n(e){return function(){if(!D&&(v||_)){if("function"==typeof fetch&&!re.startsWith("file://"))return fetch(re,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at \'"+re+"\'";return e.arrayBuffer()})).catch((function(){return ce()}));if(f)return new Promise((function(e,t){f(re,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return ce()}))}().then((function(e){return WebAssembly.instantiate(e,r)})).then((function(e){return e})).then(e,(function(e){x("failed to asynchronously prepare wasm: "+e),se(e)}))}var r={a:lt};if(O||(ae++,i.monitorRunDependencies&&i.monitorRunDependencies(ae)),i.instantiateWasm)try{return i.instantiateWasm(r,e)}catch(e){return x("Module.instantiateWasm callback failed with error: "+e),!1}(D||"function"!=typeof WebAssembly.instantiateStreaming||ue()||re.startsWith("file://")||"function"!=typeof fetch?n(t):fetch(re,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,r).then(t,(function(e){return x("wasm streaming compile failed: "+e),x("falling back to ArrayBuffer instantiation"),n(t)}))}))).catch(u)}(),i.___wasm_call_ctors=function(){return(i.___wasm_call_ctors=i.asm.$).apply(null,arguments)},i._OrtInit=function(){return(i._OrtInit=i.asm.aa).apply(null,arguments)},i._OrtCreateSessionOptions=function(){return(i._OrtCreateSessionOptions=i.asm.ba).apply(null,arguments)},i._OrtAddSessionConfigEntry=function(){return(i._OrtAddSessionConfigEntry=i.asm.ca).apply(null,arguments)},i._OrtReleaseSessionOptions=function(){return(i._OrtReleaseSessionOptions=i.asm.da).apply(null,arguments)},i._OrtCreateSession=function(){return(i._OrtCreateSession=i.asm.ea).apply(null,arguments)},i._OrtReleaseSession=function(){return(i._OrtReleaseSession=i.asm.fa).apply(null,arguments)},i._OrtGetInputCount=function(){return(i._OrtGetInputCount=i.asm.ga).apply(null,arguments)},i._OrtGetOutputCount=function(){return(i._OrtGetOutputCount=i.asm.ha).apply(null,arguments)},i._OrtGetInputName=function(){return(i._OrtGetInputName=i.asm.ia).apply(null,arguments)},i._OrtGetOutputName=function(){return(i._OrtGetOutputName=i.asm.ja).apply(null,arguments)},i._OrtFree=function(){return(i._OrtFree=i.asm.ka).apply(null,arguments)},i._OrtCreateTensor=function(){return(i._OrtCreateTensor=i.asm.la).apply(null,arguments)},i._OrtGetTensorData=function(){return(i._OrtGetTensorData=i.asm.ma).apply(null,arguments)},i._OrtReleaseTensor=function(){return(i._OrtReleaseTensor=i.asm.na).apply(null,arguments)},i._OrtCreateRunOptions=function(){return(i._OrtCreateRunOptions=i.asm.oa).apply(null,arguments)},i._OrtAddRunConfigEntry=function(){return(i._OrtAddRunConfigEntry=i.asm.pa).apply(null,arguments)},i._OrtReleaseRunOptions=function(){return(i._OrtReleaseRunOptions=i.asm.qa).apply(null,arguments)},i._OrtRun=function(){return(i._OrtRun=i.asm.ra).apply(null,arguments)},i._OrtEndProfiling=function(){return(i._OrtEndProfiling=i.asm.sa).apply(null,arguments)};var ft=i.___errno_location=function(){return(ft=i.___errno_location=i.asm.ta).apply(null,arguments)},pt=i._pthread_self=function(){return(pt=i._pthread_self=i.asm.ua).apply(null,arguments)},dt=i._malloc=function(){return(dt=i._malloc=i.asm.va).apply(null,arguments)},mt=i._free=function(){return(mt=i._free=i.asm.wa).apply(null,arguments)};i._emscripten_tls_init=function(){return(i._emscripten_tls_init=i.asm.xa).apply(null,arguments)};var gt=i.___funcs_on_exit=function(){return(gt=i.___funcs_on_exit=i.asm.ya).apply(null,arguments)},ht=i._emscripten_main_thread_process_queued_calls=function(){return(ht=i._emscripten_main_thread_process_queued_calls=i.asm.za).apply(null,arguments)},yt=i.__emscripten_thread_init=function(){return(yt=i.__emscripten_thread_init=i.asm.Aa).apply(null,arguments)};i._emscripten_current_thread_process_queued_calls=function(){return(i._emscripten_current_thread_process_queued_calls=i.asm.Ca).apply(null,arguments)};var bt=i._emscripten_sync_run_in_main_thread_4=function(){return(bt=i._emscripten_sync_run_in_main_thread_4=i.asm.Da).apply(null,arguments)},vt=i._emscripten_run_in_main_runtime_thread_js=function(){return(vt=i._emscripten_run_in_main_runtime_thread_js=i.asm.Ea).apply(null,arguments)},_t=i._emscripten_dispatch_to_thread_=function(){return(_t=i._emscripten_dispatch_to_thread_=i.asm.Fa).apply(null,arguments)},wt=i.__emscripten_thread_free_data=function(){return(wt=i.__emscripten_thread_free_data=i.asm.Ga).apply(null,arguments)};i.__emscripten_thread_exit=function(){return(i.__emscripten_thread_exit=i.asm.Ha).apply(null,arguments)};var Ot,At=i._memalign=function(){return(At=i._memalign=i.asm.Ia).apply(null,arguments)},St=i._emscripten_stack_set_limits=function(){return(St=i._emscripten_stack_set_limits=i.asm.Ja).apply(null,arguments)},Et=i.stackSave=function(){return(Et=i.stackSave=i.asm.Ka).apply(null,arguments)},Tt=i.stackRestore=function(){return(Tt=i.stackRestore=i.asm.La).apply(null,arguments)},Mt=i.stackAlloc=function(){return(Mt=i.stackAlloc=i.asm.Ma).apply(null,arguments)},Dt=i.__emscripten_main_thread_futex=724520,Rt=i.__emscripten_allow_main_runtime_queued_calls=719156;function xt(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function kt(){function e(){if(!Ot&&(Ot=!0,i.calledRun=!0,!P)&&(O||fe(Z),s(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),!O)){if(i.postRun)for("function"==typeof i.postRun&&(i.postRun=[i.postRun]);i.postRun.length;){var e=i.postRun.shift();ee.unshift(e)}fe(ee)}}if(!(0<ae))if(O)s(i),O||fe(Z),postMessage({cmd:"loaded"});else{if(i.preRun)for("function"==typeof i.preRun&&(i.preRun=[i.preRun]);i.preRun.length;)ne();fe(J),0<ae||(i.setStatus?(i.setStatus("Running..."),setTimeout((function(){setTimeout((function(){i.setStatus("")}),1),e()}),1)):e())}}function Ct(e){if(O)throw ge(e),"unwind";te()||O||(gt(),fe(K),Oe[1].length&&Ae(1,10),Oe[2].length&&Ae(2,10),me.kb()),te()||(me.kb(),i.onExit&&i.onExit(e),P=!0),b(e,new xt(e))}if(i.UTF8ToString=N,i.stringToUTF8=z,i.lengthBytesUTF8=V,i.keepRuntimeAlive=te,i.PThread=me,i.stackSave=Et,i.stackRestore=Tt,i.stackAlloc=Mt,i.PThread=me,i.wasmMemory=C,i.ExitStatus=xt,ie=function e(){Ot||kt(),Ot||(ie=e)},i.run=kt,i.preInit)for("function"==typeof i.preInit&&(i.preInit=[i.preInit]);0<i.preInit.length;)i.preInit.pop()();return O&&(k=!1,me.ub()),kt(),e.ready});e.exports=r},118:e=>{"use strict";e.exports=\'"use strict";var e={};if("object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node){var t=require("worker_threads"),r=t.parentPort;r.on("message",(function(e){onmessage({data:e})}));var a=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:t.Worker,importScripts:function(e){(0,eval)(a.readFileSync(e,"utf8"))},postMessage:function(e){r.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=function(){var e=Array.prototype.slice.call(arguments).join(" ");console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.threadInfoStruct,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInit();try{var a=e.invokeEntryPoint(t.data.start_routine,t.data.arg);e.keepRuntimeAlive()?e.PThread.setExitStatus(a):e.__emscripten_thread_exit(a)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processThreadQueue"===t.data.cmd?e._pthread_self()&&e._emscripten_current_thread_process_queued_calls():(s("worker.js received unknown command "+t.data.cmd),s(t.data)))}catch(e){throw s("worker.js onmessage() captured an uncaught exception: "+e),e&&e.stack&&s(e.stack),e}};\\n\'},932:(e,t,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(e){var t;e=e||{},t||(t=void 0!==e?e:{});var r,a,o=Object.assign;t.ready=new Promise((function(e,t){r=e,a=t}));var i,s,u,c,l,f,p=o({},t),d="./this.program",m="object"==typeof window,g="function"==typeof importScripts,h="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,y="";h?(y=g?n(908).dirname(y)+"/":"//",f=()=>{l||(c=n(384),l=n(908))},i=function(e,t){return f(),e=l.normalize(e),c.readFileSync(e,t?null:"utf8")},u=e=>((e=i(e,!0)).buffer||(e=new Uint8Array(e)),e),s=(e,t,n)=>{f(),e=l.normalize(e),c.readFile(e,(function(e,r){e?n(e):t(r.buffer)}))},1<process.argv.length&&(d=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(e){throw e})),process.on("unhandledRejection",(function(e){throw e})),t.inspect=function(){return"[Emscripten Module object]"}):(m||g)&&(g?y=self.location.href:"undefined"!=typeof document&&document.currentScript&&(y=document.currentScript.src),_scriptDir&&(y=_scriptDir),y=0!==y.indexOf("blob:")?y.substr(0,y.replace(/[?#].*/,"").lastIndexOf("/")+1):"",i=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},g&&(u=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),s=(e,t,n)=>{var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)});var b,v=t.print||console.log.bind(console),_=t.printErr||console.warn.bind(console);o(t,p),p=null,t.thisProgram&&(d=t.thisProgram),t.wasmBinary&&(b=t.wasmBinary),t.noExitRuntime,"object"!=typeof WebAssembly&&N("no native wasm support detected");var w,O,A,S,E,T=!1,M="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function D(e,t,n){var r=t+n;for(n=t;e[n]&&!(n>=r);)++n;if(16<n-t&&e.subarray&&M)return M.decode(e.subarray(t,n));for(r="";t<n;){var a=e[t++];if(128&a){var o=63&e[t++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|o);else{var i=63&e[t++];65536>(a=224==(240&a)?(15&a)<<12|o<<6|i:(7&a)<<18|o<<12|i<<6|63&e[t++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function R(e,t){return e?D(S,e,t):""}function x(e,t,n,r){if(!(0<r))return 0;var a=n;r=n+r-1;for(var o=0;o<e.length;++o){var i=e.charCodeAt(o);if(55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++o)),127>=i){if(n>=r)break;t[n++]=i}else{if(2047>=i){if(n+1>=r)break;t[n++]=192|i>>6}else{if(65535>=i){if(n+2>=r)break;t[n++]=224|i>>12}else{if(n+3>=r)break;t[n++]=240|i>>18,t[n++]=128|i>>12&63}t[n++]=128|i>>6&63}t[n++]=128|63&i}}return t[n]=0,n-a}function k(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);55296<=r&&57343>=r&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++n)),127>=r?++t:t=2047>=r?t+2:65535>=r?t+3:t+4}return t}function C(e){var t=k(e)+1,n=de(t);return n&&x(e,A,n,t),n}function F(){var e=w.buffer;O=e,t.HEAP8=A=new Int8Array(e),t.HEAP16=new Int16Array(e),t.HEAP32=E=new Int32Array(e),t.HEAPU8=S=new Uint8Array(e),t.HEAPU16=new Uint16Array(e),t.HEAPU32=new Uint32Array(e),t.HEAPF32=new Float32Array(e),t.HEAPF64=new Float64Array(e)}var P,I=[],U=[],W=[];function L(){var e=t.preRun.shift();I.unshift(e)}var H,Y=0,j=null,B=null;function N(e){throw t.onAbort&&t.onAbort(e),_(e="Aborted("+e+")"),T=!0,e=new WebAssembly.RuntimeError(e+". Build with -s ASSERTIONS=1 for more info."),a(e),e}function G(){return H.startsWith("data:application/octet-stream;base64,")}if(t.preloadedImages={},t.preloadedAudios={},H="ort-wasm.wasm",!G()){var z=H;H=t.locateFile?t.locateFile(z,y):y+z}function V(){var e=H;try{if(e==H&&b)return new Uint8Array(b);if(u)return u(e);throw"both async and sync fetching of the wasm failed"}catch(e){N(e)}}function q(e){for(;0<e.length;){var n=e.shift();if("function"==typeof n)n(t);else{var r=n.Na;"number"==typeof r?void 0===n.va?X(r)():X(r)(n.va):r(void 0===n.va?null:n.va)}}}var $=[];function X(e){var t=$[e];return t||(e>=$.length&&($.length=e+1),$[e]=t=P.get(e)),t}function Q(e){this.qa=e-16,this.Fa=function(e){E[this.qa+4>>2]=e},this.Ca=function(e){E[this.qa+8>>2]=e},this.Da=function(){E[this.qa>>2]=0},this.Ba=function(){A[this.qa+12>>0]=0},this.Ea=function(){A[this.qa+13>>0]=0},this.ya=function(e,t){this.Fa(e),this.Ca(t),this.Da(),this.Ba(),this.Ea()}}var J,Z,K={},ee=[null,[],[]],te={},ne={};function re(){if(!Z){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:d||"./this.program"};for(e in ne)void 0===ne[e]?delete t[e]:t[e]=ne[e];var n=[];for(e in t)n.push(e+"="+t[e]);Z=n}return Z}function ae(e){return 0==e%4&&(0!=e%100||0==e%400)}function oe(e,t){for(var n=0,r=0;r<=t;n+=e[r++]);return n}var ie=[31,29,31,30,31,30,31,31,30,31,30,31],se=[31,28,31,30,31,30,31,31,30,31,30,31];function ue(e,t){for(e=new Date(e.getTime());0<t;){var n=e.getMonth(),r=(ae(e.getFullYear())?ie:se)[n];if(!(t>r-e.getDate())){e.setDate(e.getDate()+t);break}t-=r-e.getDate()+1,e.setDate(1),11>n?e.setMonth(n+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1))}return e}function ce(e,t,n,r){function a(e,t,n){for(e="number"==typeof e?e.toString():e||"";e.length<t;)e=n[0]+e;return e}function o(e,t){return a(e,t,"0")}function i(e,t){function n(e){return 0>e?-1:0<e?1:0}var r;return 0===(r=n(e.getFullYear()-t.getFullYear()))&&0===(r=n(e.getMonth()-t.getMonth()))&&(r=n(e.getDate()-t.getDate())),r}function s(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function u(e){e=ue(new Date(e.oa+1900,0,1),e.ua);var t=new Date(e.getFullYear()+1,0,4),n=s(new Date(e.getFullYear(),0,4));return t=s(t),0>=i(n,e)?0>=i(t,e)?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}var c=E[r+40>>2];for(var l in r={Ia:E[r>>2],Ha:E[r+4>>2],sa:E[r+8>>2],ra:E[r+12>>2],pa:E[r+16>>2],oa:E[r+20>>2],ta:E[r+24>>2],ua:E[r+28>>2],Qa:E[r+32>>2],Ga:E[r+36>>2],Ja:c?R(c):""},n=R(n),c={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(l,"g"),c[l]);var f="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),p="January February March April May June July August September October November December".split(" ");for(l in c={"%a":function(e){return f[e.ta].substring(0,3)},"%A":function(e){return f[e.ta]},"%b":function(e){return p[e.pa].substring(0,3)},"%B":function(e){return p[e.pa]},"%C":function(e){return o((e.oa+1900)/100|0,2)},"%d":function(e){return o(e.ra,2)},"%e":function(e){return a(e.ra,2," ")},"%g":function(e){return u(e).toString().substring(2)},"%G":function(e){return u(e)},"%H":function(e){return o(e.sa,2)},"%I":function(e){return 0==(e=e.sa)?e=12:12<e&&(e-=12),o(e,2)},"%j":function(e){return o(e.ra+oe(ae(e.oa+1900)?ie:se,e.pa-1),3)},"%m":function(e){return o(e.pa+1,2)},"%M":function(e){return o(e.Ha,2)},"%n":function(){return"\\n"},"%p":function(e){return 0<=e.sa&&12>e.sa?"AM":"PM"},"%S":function(e){return o(e.Ia,2)},"%t":function(){return"\\t"},"%u":function(e){return e.ta||7},"%U":function(e){var t=new Date(e.oa+1900,0,1),n=0===t.getDay()?t:ue(t,7-t.getDay());return 0>i(n,e=new Date(e.oa+1900,e.pa,e.ra))?o(Math.ceil((31-n.getDate()+(oe(ae(e.getFullYear())?ie:se,e.getMonth()-1)-31)+e.getDate())/7),2):0===i(n,t)?"01":"00"},"%V":function(e){var t=new Date(e.oa+1901,0,4),n=s(new Date(e.oa+1900,0,4));t=s(t);var r=ue(new Date(e.oa+1900,0,1),e.ua);return 0>i(r,n)?"53":0>=i(t,r)?"01":o(Math.ceil((n.getFullYear()<e.oa+1900?e.ua+32-n.getDate():e.ua+1-n.getDate())/7),2)},"%w":function(e){return e.ta},"%W":function(e){var t=new Date(e.oa,0,1),n=1===t.getDay()?t:ue(t,0===t.getDay()?1:7-t.getDay()+1);return 0>i(n,e=new Date(e.oa+1900,e.pa,e.ra))?o(Math.ceil((31-n.getDate()+(oe(ae(e.getFullYear())?ie:se,e.getMonth()-1)-31)+e.getDate())/7),2):0===i(n,t)?"01":"00"},"%y":function(e){return(e.oa+1900).toString().substring(2)},"%Y":function(e){return e.oa+1900},"%z":function(e){var t=0<=(e=e.Ga);return e=Math.abs(e)/60,(t?"+":"-")+String("0000"+(e/60*100+e%60)).slice(-4)},"%Z":function(e){return e.Ja},"%%":function(){return"%"}})n.includes(l)&&(n=n.replace(new RegExp(l,"g"),c[l](r)));return l=function(e){var t=Array(k(e)+1);return x(e,t,0,t.length),t}(n),l.length>t?0:(A.set(l,e),l.length-1)}var le={a:function(e){return de(e+16)+16},b:function(e,t,n){throw new Q(e).ya(t,n),e},g:function(){return 0},I:function(){},F:function(){},v:function(){},y:function(){},r:function(){return 0},G:function(){},B:function(e,t){return e=R(e),te.Ka(e,t)},A:function(e,t,n,r,a,o){if(o<<=12,0!=(16&r)&&0!=e%65536)t=-28;else if(0!=(32&r)){e=65536*Math.ceil(t/65536);var i=ge(65536,e);i?(S.fill(0,i,i+e),e=i):e=0,e?(K[e]={Aa:e,za:t,wa:!0,fd:a,Pa:n,flags:r,offset:o},t=e):t=-48}else t=-52;return t},z:function(e,t){var n=K[e];return 0!==t&&n?(t===n.za&&(K[e]=null,n.wa&&me(n.Aa)),e=0):e=-28,e},k:function(){},x:function(e,t,n){return e=R(e),te.La(e,t,n)},t:function(){},H:function(){},u:function(){},h:function(){N("To use dlopen, you need to use Emscripten\'s linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},n:function(){N("To use dlopen, you need to use Emscripten\'s linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},J:function(e,t){e=new Date(1e3*E[e>>2]),E[t>>2]=e.getUTCSeconds(),E[t+4>>2]=e.getUTCMinutes(),E[t+8>>2]=e.getUTCHours(),E[t+12>>2]=e.getUTCDate(),E[t+16>>2]=e.getUTCMonth(),E[t+20>>2]=e.getUTCFullYear()-1900,E[t+24>>2]=e.getUTCDay(),E[t+28>>2]=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},K:function(e,t){e=new Date(1e3*E[e>>2]),E[t>>2]=e.getSeconds(),E[t+4>>2]=e.getMinutes(),E[t+8>>2]=e.getHours(),E[t+12>>2]=e.getDate(),E[t+16>>2]=e.getMonth(),E[t+20>>2]=e.getFullYear()-1900,E[t+24>>2]=e.getDay();var n=new Date(e.getFullYear(),0,1);E[t+28>>2]=(e.getTime()-n.getTime())/864e5|0,E[t+36>>2]=-60*e.getTimezoneOffset();var r=new Date(e.getFullYear(),6,1).getTimezoneOffset();n=n.getTimezoneOffset(),E[t+32>>2]=0|(r!=n&&e.getTimezoneOffset()==Math.min(n,r))},L:function(e){var t=new Date(E[e+20>>2]+1900,E[e+16>>2],E[e+12>>2],E[e+8>>2],E[e+4>>2],E[e>>2],0),n=E[e+32>>2],r=t.getTimezoneOffset(),a=new Date(t.getFullYear(),0,1),o=new Date(t.getFullYear(),6,1).getTimezoneOffset(),i=a.getTimezoneOffset(),s=Math.min(i,o);return 0>n?E[e+32>>2]=Number(o!=i&&s==r):0<n!=(s==r)&&(o=Math.max(i,o),t.setTime(t.getTime()+6e4*((0<n?s:o)-r))),E[e+24>>2]=t.getDay(),E[e+28>>2]=(t.getTime()-a.getTime())/864e5|0,E[e>>2]=t.getSeconds(),E[e+4>>2]=t.getMinutes(),E[e+8>>2]=t.getHours(),E[e+12>>2]=t.getDate(),E[e+16>>2]=t.getMonth(),t.getTime()/1e3|0},M:function e(t,n,r){e.xa||(e.xa=!0,function(e,t,n){function r(e){return(e=e.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?e[1]:"GMT"}var a=(new Date).getFullYear(),o=new Date(a,0,1),i=new Date(a,6,1);a=o.getTimezoneOffset();var s=i.getTimezoneOffset();E[e>>2]=60*Math.max(a,s),E[t>>2]=Number(a!=s),e=r(o),t=r(i),e=C(e),t=C(t),s<a?(E[n>>2]=e,E[n+4>>2]=t):(E[n>>2]=t,E[n+4>>2]=e)}(t,n,r))},d:function(){N("")},m:function(e,t){if(0===e)e=Date.now();else{if(1!==e&&4!==e)return E[pe()>>2]=28,-1;e=J()}return E[t>>2]=e/1e3|0,E[t+4>>2]=e%1e3*1e6|0,0},p:function(e,t){return e-t},s:function(){return 2147483648},l:J=h?()=>{var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:()=>performance.now(),E:function(e,t,n){S.copyWithin(e,t,t+n)},f:function(e){var t=S.length;if(2147483648<(e>>>=0))return!1;for(var n=1;4>=n;n*=2){var r=t*(1+.2/n);r=Math.min(r,e+100663296),0<(r=Math.max(e,r))%65536&&(r+=65536-r%65536);e:{try{w.grow(Math.min(2147483648,r)-O.byteLength+65535>>>16),F();var a=1;break e}catch(e){}a=void 0}if(a)return!0}return!1},C:function(e,t){var n=0;return re().forEach((function(r,a){var o=t+n;for(a=E[e+4*a>>2]=o,o=0;o<r.length;++o)A[a++>>0]=r.charCodeAt(o);A[a>>0]=0,n+=r.length+1})),0},D:function(e,t){var n=re();E[e>>2]=n.length;var r=0;return n.forEach((function(e){r+=e.length+1})),E[t>>2]=r,0},e:function(){return 0},j:function(e,t,n,r){return e=te.Oa(e),t=te.Ma(e,t,n),E[r>>2]=t,0},q:function(){},i:function(e,t,n,r){for(var a=0,o=0;o<n;o++){var i=E[t>>2],s=E[t+4>>2];t+=8;for(var u=0;u<s;u++){var c=S[i+u],l=ee[e];0===c||10===c?((1===e?v:_)(D(l,0)),l.length=0):l.push(c)}a+=s}return E[r>>2]=a,0},w:function(e){var t=Date.now();return E[e>>2]=t/1e3|0,E[e+4>>2]=t%1e3*1e3|0,0},o:ce,c:function(e,t,n,r){return ce(e,t,n,r)}};!function(){function e(e){t.asm=e.exports,w=t.asm.N,F(),P=t.asm.ja,U.unshift(t.asm.O),Y--,t.monitorRunDependencies&&t.monitorRunDependencies(Y),0==Y&&(null!==j&&(clearInterval(j),j=null),B&&(e=B,B=null,e()))}function n(t){e(t.instance)}function r(e){return function(){if(!b&&(m||g)){if("function"==typeof fetch&&!H.startsWith("file://"))return fetch(H,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at \'"+H+"\'";return e.arrayBuffer()})).catch((function(){return V()}));if(s)return new Promise((function(e,t){s(H,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return V()}))}().then((function(e){return WebAssembly.instantiate(e,o)})).then((function(e){return e})).then(e,(function(e){_("failed to asynchronously prepare wasm: "+e),N(e)}))}var o={a:le};if(Y++,t.monitorRunDependencies&&t.monitorRunDependencies(Y),t.instantiateWasm)try{return t.instantiateWasm(o,e)}catch(e){return _("Module.instantiateWasm callback failed with error: "+e),!1}(b||"function"!=typeof WebAssembly.instantiateStreaming||G()||H.startsWith("file://")||"function"!=typeof fetch?r(n):fetch(H,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,o).then(n,(function(e){return _("wasm streaming compile failed: "+e),_("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(a)}(),t.___wasm_call_ctors=function(){return(t.___wasm_call_ctors=t.asm.O).apply(null,arguments)},t._OrtInit=function(){return(t._OrtInit=t.asm.P).apply(null,arguments)},t._OrtCreateSessionOptions=function(){return(t._OrtCreateSessionOptions=t.asm.Q).apply(null,arguments)},t._OrtAddSessionConfigEntry=function(){return(t._OrtAddSessionConfigEntry=t.asm.R).apply(null,arguments)},t._OrtReleaseSessionOptions=function(){return(t._OrtReleaseSessionOptions=t.asm.S).apply(null,arguments)},t._OrtCreateSession=function(){return(t._OrtCreateSession=t.asm.T).apply(null,arguments)},t._OrtReleaseSession=function(){return(t._OrtReleaseSession=t.asm.U).apply(null,arguments)},t._OrtGetInputCount=function(){return(t._OrtGetInputCount=t.asm.V).apply(null,arguments)},t._OrtGetOutputCount=function(){return(t._OrtGetOutputCount=t.asm.W).apply(null,arguments)},t._OrtGetInputName=function(){return(t._OrtGetInputName=t.asm.X).apply(null,arguments)},t._OrtGetOutputName=function(){return(t._OrtGetOutputName=t.asm.Y).apply(null,arguments)},t._OrtFree=function(){return(t._OrtFree=t.asm.Z).apply(null,arguments)},t._OrtCreateTensor=function(){return(t._OrtCreateTensor=t.asm._).apply(null,arguments)},t._OrtGetTensorData=function(){return(t._OrtGetTensorData=t.asm.$).apply(null,arguments)},t._OrtReleaseTensor=function(){return(t._OrtReleaseTensor=t.asm.aa).apply(null,arguments)},t._OrtCreateRunOptions=function(){return(t._OrtCreateRunOptions=t.asm.ba).apply(null,arguments)},t._OrtAddRunConfigEntry=function(){return(t._OrtAddRunConfigEntry=t.asm.ca).apply(null,arguments)},t._OrtReleaseRunOptions=function(){return(t._OrtReleaseRunOptions=t.asm.da).apply(null,arguments)},t._OrtRun=function(){return(t._OrtRun=t.asm.ea).apply(null,arguments)},t._OrtEndProfiling=function(){return(t._OrtEndProfiling=t.asm.fa).apply(null,arguments)};var fe,pe=t.___errno_location=function(){return(pe=t.___errno_location=t.asm.ga).apply(null,arguments)},de=t._malloc=function(){return(de=t._malloc=t.asm.ha).apply(null,arguments)},me=t._free=function(){return(me=t._free=t.asm.ia).apply(null,arguments)},ge=t._memalign=function(){return(ge=t._memalign=t.asm.ka).apply(null,arguments)},he=t.stackSave=function(){return(he=t.stackSave=t.asm.la).apply(null,arguments)},ye=t.stackRestore=function(){return(ye=t.stackRestore=t.asm.ma).apply(null,arguments)},be=t.stackAlloc=function(){return(be=t.stackAlloc=t.asm.na).apply(null,arguments)};function ve(){function e(){if(!fe&&(fe=!0,t.calledRun=!0,!T)){if(q(U),r(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;){var e=t.postRun.shift();W.unshift(e)}q(W)}}if(!(0<Y)){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)L();q(I),0<Y||(t.setStatus?(t.setStatus("Running..."),setTimeout((function(){setTimeout((function(){t.setStatus("")}),1),e()}),1)):e())}}if(t.UTF8ToString=R,t.stringToUTF8=function(e,t,n){return x(e,S,t,n)},t.lengthBytesUTF8=k,t.stackSave=he,t.stackRestore=ye,t.stackAlloc=be,B=function e(){fe||ve(),fe||(B=e)},t.run=ve,t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);0<t.preInit.length;)t.preInit.pop()();return ve(),e.ready});e.exports=r},967:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.iterateExtraOptions=void 0,t.iterateExtraOptions=(e,n,r,a)=>{if("object"==typeof e&&null!==e){if(r.has(e))throw new Error("Circular reference in options");r.add(e)}Object.entries(e).forEach((([e,o])=>{const i=n?n+e:e;if("object"==typeof o)t.iterateExtraOptions(o,i+".",r,a);else if("string"==typeof o||"number"==typeof o)a(i,o.toString());else{if("boolean"!=typeof o)throw new Error("Can\'t handle extra config type: "+typeof o);a(i,o?"1":"0")}}))}},586:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setRunOptions=void 0;const r=n(967),a=n(983),o=n(361);t.setRunOptions=e=>{const t=o.getInstance();let n=0;const i=[],s=e||{};try{if(void 0===(null==e?void 0:e.logSeverityLevel))s.logSeverityLevel=2;else if("number"!=typeof e.logSeverityLevel||!Number.isInteger(e.logSeverityLevel)||e.logSeverityLevel<0||e.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${e.logSeverityLevel}`);if(void 0===(null==e?void 0:e.logVerbosityLevel))s.logVerbosityLevel=0;else if("number"!=typeof e.logVerbosityLevel||!Number.isInteger(e.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${e.logVerbosityLevel}`);void 0===(null==e?void 0:e.terminate)&&(s.terminate=!1);let o=0;if(void 0!==(null==e?void 0:e.tag)&&(o=a.allocWasmString(e.tag,i)),n=t._OrtCreateRunOptions(s.logSeverityLevel,s.logVerbosityLevel,!!s.terminate,o),0===n)throw new Error("Can\'t create run options");return void 0!==(null==e?void 0:e.extra)&&r.iterateExtraOptions(e.extra,"",new WeakSet,((e,r)=>{const o=a.allocWasmString(e,i),s=a.allocWasmString(r,i);if(0!==t._OrtAddRunConfigEntry(n,o,s))throw new Error(`Can\'t set a run config entry: ${e} - ${r}`)})),[n,i]}catch(e){throw 0!==n&&t._OrtReleaseRunOptions(n),i.forEach(t._free),e}}},919:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setSessionOptions=void 0;const r=n(967),a=n(983),o=n(361);t.setSessionOptions=e=>{const t=o.getInstance();let n=0;const i=[],s=e||{};(e=>{e.extra||(e.extra={}),e.extra.session||(e.extra.session={});const t=e.extra.session;t.use_ort_model_bytes_directly||(t.use_ort_model_bytes_directly="1")})(s);try{void 0===(null==e?void 0:e.graphOptimizationLevel)&&(s.graphOptimizationLevel="all");const o=(e=>{switch(e){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${e}`)}})(s.graphOptimizationLevel);void 0===(null==e?void 0:e.enableCpuMemArena)&&(s.enableCpuMemArena=!0),void 0===(null==e?void 0:e.enableMemPattern)&&(s.enableMemPattern=!0),void 0===(null==e?void 0:e.executionMode)&&(s.executionMode="sequential");const u=(e=>{switch(e){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${e}`)}})(s.executionMode);let c=0;if(void 0!==(null==e?void 0:e.logId)&&(c=a.allocWasmString(e.logId,i)),void 0===(null==e?void 0:e.logSeverityLevel))s.logSeverityLevel=2;else if("number"!=typeof e.logSeverityLevel||!Number.isInteger(e.logSeverityLevel)||e.logSeverityLevel<0||e.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${e.logSeverityLevel}`);if(void 0===(null==e?void 0:e.logVerbosityLevel))s.logVerbosityLevel=0;else if("number"!=typeof e.logVerbosityLevel||!Number.isInteger(e.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${e.logVerbosityLevel}`);if(void 0===(null==e?void 0:e.enableProfiling)&&(s.enableProfiling=!1),n=t._OrtCreateSessionOptions(o,!!s.enableCpuMemArena,!!s.enableMemPattern,u,!!s.enableProfiling,0,c,s.logSeverityLevel,s.logVerbosityLevel),0===n)throw new Error("Can\'t create session options");return void 0!==(null==e?void 0:e.extra)&&r.iterateExtraOptions(e.extra,"",new WeakSet,((e,r)=>{const o=a.allocWasmString(e,i),s=a.allocWasmString(r,i);if(0!==t._OrtAddSessionConfigEntry(n,o,s))throw new Error(`Can\'t set a session config entry: ${e} - ${r}`)})),[n,i]}catch(e){throw 0!==n&&t._OrtReleaseSessionOptions(n),i.forEach(t._free),e}}},983:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.allocWasmString=void 0;const r=n(361);t.allocWasmString=(e,t)=>{const n=r.getInstance(),a=n.lengthBytesUTF8(e)+1,o=n._malloc(a);return n.stringToUTF8(e,o,a),t.push(o),o}},349:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractTransferableBuffers=t.endProfiling=t.run=t.releaseSession=t.createSession=t.initOrt=void 0;const r=n(586),a=n(919),o=n(983),i=n(361);t.initOrt=(e,t)=>{const n=i.getInstance()._OrtInit(e,t);if(0!==n)throw new Error(`Can\'t initialize onnxruntime. error code = ${n}`)};const s=new Map;t.createSession=(e,t)=>{const n=i.getInstance(),r=n._malloc(e.byteLength);let o=0,u=0,c=[];try{if([u,c]=a.setSessionOptions(t),n.HEAPU8.set(e,r),o=n._OrtCreateSession(r,e.byteLength,u),0===o)throw new Error("Can\'t create a session")}finally{n._free(r),n._OrtReleaseSessionOptions(u),c.forEach(n._free)}const l=n._OrtGetInputCount(o),f=n._OrtGetOutputCount(o),p=[],d=[],m=[],g=[];for(let e=0;e<l;e++){const t=n._OrtGetInputName(o,e);if(0===t)throw new Error("Can\'t get an input name");d.push(t),p.push(n.UTF8ToString(t))}for(let e=0;e<f;e++){const t=n._OrtGetOutputName(o,e);if(0===t)throw new Error("Can\'t get an output name");g.push(t),m.push(n.UTF8ToString(t))}return s.set(o,[o,d,g]),[o,p,m]},t.releaseSession=e=>{const t=i.getInstance(),n=s.get(e);if(!n)throw new Error("invalid session id");const r=n[0],a=n[1],o=n[2];a.forEach(t._OrtFree),o.forEach(t._OrtFree),t._OrtReleaseSession(r),s.delete(e)};const u=e=>{switch(e){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${e}`)}},c=e=>{switch(e){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${e}`)}},l=e=>{switch(e){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${e}`)}};t.run=(e,t,n,a,f)=>{const p=i.getInstance(),d=s.get(e);if(!d)throw new Error("invalid session id");const m=d[0],g=d[1],h=d[2],y=t.length,b=a.length;let v=0,_=[];const w=[],O=[];try{[v,_]=r.setRunOptions(f);for(let e=0;e<y;e++){const t=n[e][0],r=n[e][1],a=n[e][2];let i,s;if(Array.isArray(a)){s=4*a.length,i=p._malloc(s),O.push(i);let e=i/4;for(let t=0;t<a.length;t++){if("string"!=typeof a[t])throw new TypeError(`tensor data at index ${t} is not a string`);p.HEAPU32[e++]=o.allocWasmString(a[t],O)}}else s=a.byteLength,i=p._malloc(s),O.push(i),p.HEAPU8.set(new Uint8Array(a.buffer,a.byteOffset,s),i);const c=p.stackSave(),l=p.stackAlloc(4*r.length);try{let e=l/4;r.forEach((t=>p.HEAP32[e++]=t));const n=p._OrtCreateTensor(u(t),i,s,l,r.length);if(0===n)throw new Error("Can\'t create a tensor");w.push(n)}finally{p.stackRestore(c)}}const e=p.stackSave(),i=p.stackAlloc(4*y),s=p.stackAlloc(4*y),d=p.stackAlloc(4*b),A=p.stackAlloc(4*b);try{let n=i/4,r=s/4,o=d/4,u=A/4;for(let e=0;e<y;e++)p.HEAPU32[n++]=w[e],p.HEAPU32[r++]=g[t[e]];for(let e=0;e<b;e++)p.HEAPU32[o++]=0,p.HEAPU32[u++]=h[a[e]];let f=p._OrtRun(m,s,i,y,A,b,d,v);const _=[];if(0===f)for(let e=0;e<b;e++){const t=p.HEAPU32[d/4+e],n=p.stackSave(),r=p.stackAlloc(16);let a,o=0;try{if(f=p._OrtGetTensorData(t,r,r+4,r+8,r+12),0!==f)throw new Error(`Can\'t get a tensor data. error code = ${f}`);let e=r/4;const i=p.HEAPU32[e++];o=p.HEAPU32[e++];const s=p.HEAPU32[e++],u=p.HEAPU32[e++],d=[];for(let e=0;e<u;e++)d.push(p.HEAPU32[s/4+e]);p._OrtFree(s);const m=0===d.length?1:d.reduce(((e,t)=>e*t));if(a=c(i),"string"===a){const e=[];let t=o/4;for(let n=0;n<m;n++){const r=p.HEAPU32[t++],a=n===m-1?void 0:p.HEAPU32[t]-r;e.push(p.UTF8ToString(r,a))}_.push([a,d,e])}else{const e=new(l(a))(m);new Uint8Array(e.buffer,e.byteOffset,e.byteLength).set(p.HEAPU8.subarray(o,o+e.byteLength)),_.push([a,d,e])}}finally{p.stackRestore(n),"string"===a&&o&&p._free(o),p._OrtReleaseTensor(t)}}if(0===f)return _;throw new Error(`failed to call OrtRun(). error code = ${f}.`)}finally{p.stackRestore(e)}}finally{w.forEach(p._OrtReleaseTensor),O.forEach(p._free),p._OrtReleaseRunOptions(v),_.forEach(p._free)}},t.endProfiling=e=>{const t=i.getInstance(),n=s.get(e);if(!n)throw new Error("invalid session id");const r=n[0],a=t._OrtEndProfiling(r);if(0===a)throw new Error("Can\'t get an profile file name");t._OrtFree(a)},t.extractTransferableBuffers=e=>{const t=[];for(const n of e){const e=n[2];!Array.isArray(e)&&e.buffer&&t.push(e.buffer)}return t}},361:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.dispose=t.getInstance=t.initializeWebAssembly=void 0;const s=o(n(449)),u=i(n(932)),c=n(474);let l,f=!1,p=!1,d=!1;const m=(e,t)=>t?e?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":e?"ort-wasm-simd.wasm":"ort-wasm.wasm";t.initializeWebAssembly=async e=>{if(f)return Promise.resolve();if(p)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(d)throw new Error("previous call to \'initializeWebAssembly()\' failed.");p=!0;const t=e.initTimeout,r=e.numThreads,a=e.simd,o=r>1&&(()=>{try{return"undefined"!=typeof SharedArrayBuffer&&("undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch(e){return!1}})(),i=a&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch(e){return!1}})(),g="string"==typeof e.wasmPaths?e.wasmPaths:void 0,h=m(!1,o),y=m(i,o),b="object"==typeof e.wasmPaths?e.wasmPaths[y]:void 0;let v=!1;const _=[];if(t>0&&_.push(new Promise((e=>{setTimeout((()=>{v=!0,e()}),t)}))),_.push(new Promise(((e,t)=>{const r=o?c:u.default,a={locateFile:(e,t)=>{if(o&&e.endsWith(".worker.js")&&"undefined"!=typeof Blob)return URL.createObjectURL(new Blob([n(118)],{type:"text/javascript"}));if(e===h){const e=null!=g?g:t;return null!=b?b:e+y}return t+e}};if(o)if("undefined"==typeof Blob)a.mainScriptUrlOrBlob=s.join("/","ort-wasm-threaded.js");else{const e=`var ortWasmThreaded=(function(){var _scriptDir;return ${r.toString()}})();`;a.mainScriptUrlOrBlob=new Blob([e],{type:"text/javascript"})}r(a).then((t=>{p=!1,f=!0,l=t,e()}),(e=>{p=!1,d=!0,t(e)}))}))),await Promise.race(_),v)throw new Error(`WebAssembly backend initializing failed due to timeout: ${t}ms`)},t.getInstance=()=>{if(f&&l)return l;throw new Error("WebAssembly is not initialized yet.")},t.dispose=()=>{var e;!f||p||d||(p=!0,null===(e=l.PThread)||void 0===e||e.terminateAllThreads(),l=void 0,p=!1,f=!1,d=!0)}},384:()=>{},993:()=>{},908:()=>{},953:()=>{},925:()=>{},449:()=>{}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{"use strict";const e=n(349),t=n(361);self.onmessage=n=>{switch(n.data.type){case"init-wasm":t.initializeWebAssembly(n.data.in).then((()=>postMessage({type:"init-wasm"})),(e=>postMessage({type:"init-wasm",err:e})));break;case"init-ort":try{const{numThreads:t,loggingLevel:r}=n.data.in;e.initOrt(t,r),postMessage({type:"init-ort"})}catch(e){postMessage({type:"init-ort",err:e})}break;case"create":try{const{model:t,options:r}=n.data.in,a=e.createSession(t,r);postMessage({type:"create",out:a})}catch(e){postMessage({type:"create",err:e})}break;case"release":try{const t=n.data.in;e.releaseSession(t),postMessage({type:"release"})}catch(e){postMessage({type:"release",err:e})}break;case"run":try{const{sessionId:t,inputIndices:r,inputs:a,outputIndices:o,options:i}=n.data.in,s=e.run(t,r,a,o,i);postMessage({type:"run",out:s},e.extractTransferableBuffers(s))}catch(e){postMessage({type:"run",err:e})}break;case"end-profiling":try{const t=n.data.in;e.endProfiling(t),postMessage({type:"end-profiling"})}catch(e){postMessage({type:"end-profiling",err:e})}}}})()})();\n',"Worker",void 0,void 0)}},477:ye=>{"use strict";ye.exports=function(M,k,I,D){var P=self||window;try{try{var v;try{v=new P.Blob([M])}catch(p){(v=new(P.BlobBuilder||P.WebKitBlobBuilder||P.MozBlobBuilder||P.MSBlobBuilder)).append(M),v=v.getBlob()}var w=P.URL||P.webkitURL,S=w.createObjectURL(v),b=new P[k](S,I);return w.revokeObjectURL(S),b}catch(p){return new P[k]("data:application/javascript,".concat(encodeURIComponent(M)),I)}}catch(p){if(!D)throw Error("Inline worker is not supported");return new P[k](D,I)}}},2174:ye=>{"use strict";ye.exports=__WEBPACK_EXTERNAL_MODULE__2174__},7067:()=>{},1296:()=>{},1384:()=>{},3993:()=>{},908:()=>{},6953:()=>{},9925:()=>{},6449:()=>{},2203:()=>{},5381:()=>{},8022:()=>{}},__webpack_module_cache__={};function __nested_webpack_require_759907__(ye){var M=__webpack_module_cache__[ye];if(void 0!==M)return M.exports;var k=__webpack_module_cache__[ye]={exports:{}};return __webpack_modules__[ye].call(k.exports,k,k.exports,__nested_webpack_require_759907__),k.exports}__nested_webpack_require_759907__.n=ye=>{var M=ye&&ye.__esModule?()=>ye.default:()=>ye;return __nested_webpack_require_759907__.d(M,{a:M}),M},__nested_webpack_require_759907__.d=(ye,M)=>{for(var k in M)__nested_webpack_require_759907__.o(M,k)&&!__nested_webpack_require_759907__.o(ye,k)&&Object.defineProperty(ye,k,{enumerable:!0,get:M[k]})},__nested_webpack_require_759907__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(ye){if("object"==typeof window)return window}}(),__nested_webpack_require_759907__.o=(ye,M)=>Object.prototype.hasOwnProperty.call(ye,M),__nested_webpack_require_759907__.r=ye=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(ye,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(ye,"__esModule",{value:!0})};var __webpack_exports__=__nested_webpack_require_759907__(6018);return __webpack_exports__})()},module.exports=M(__webpack_require__(667))},156:ye=>{function M(I,D,P,v,w,S,b){try{var p=I[S](b),u=p.value}catch(o){return void P(o)}p.done?D(u):Promise.resolve(u).then(v,w)}ye.exports=function k(I){return function(){var D=this,P=arguments;return new Promise(function(v,w){var S=I.apply(D,P);function b(u){M(S,v,w,b,p,"next",u)}function p(u){M(S,v,w,b,p,"throw",u)}b(void 0)})}},ye.exports.__esModule=!0,ye.exports.default=ye.exports},861:(ye,M,k)=>{"use strict";function I(P,v,w,S,b,p,u){try{var o=P[p](u),d=o.value}catch(f){return void w(f)}o.done?v(d):Promise.resolve(d).then(S,b)}function D(P){return function(){var v=this,w=arguments;return new Promise(function(S,b){var p=P.apply(v,w);function u(d){I(p,S,b,u,o,"next",d)}function o(d){I(p,S,b,u,o,"throw",d)}u(void 0)})}}k.d(M,{Z:()=>D})}},ye=>{ye(ye.s=533)}]);